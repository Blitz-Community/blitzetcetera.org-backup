<br />
<b>Notice</b>:  Undefined offset:  1 in <b>z:\home\localhost\www\extensions\geshi\geshi.php</b> on line <b>2186</b><br />
<br />
<b>Notice</b>:  Undefined offset:  1 in <b>z:\home\localhost\www\extensions\geshi\geshi.php</b> on line <b>2186</b><br />
<br />
<b>Notice</b>:  Undefined offset:  1 in <b>z:\home\localhost\www\extensions\geshi\geshi.php</b> on line <b>2186</b><br />
<br />
<b>Notice</b>:  Undefined offset:  1 in <b>z:\home\localhost\www\extensions\geshi\geshi.php</b> on line <b>2186</b><br />
<br />
<b>Notice</b>:  Undefined offset:  1 in <b>z:\home\localhost\www\extensions\geshi\geshi.php</b> on line <b>2186</b><br />
<br />
<b>Notice</b>:  Undefined offset:  1 in <b>z:\home\localhost\www\extensions\geshi\geshi.php</b> on line <b>2186</b><br />
<br />
<b>Notice</b>:  Undefined offset:  1 in <b>z:\home\localhost\www\extensions\geshi\geshi.php</b> on line <b>2186</b><br />
<br />
<b>Notice</b>:  Undefined offset:  1 in <b>z:\home\localhost\www\extensions\geshi\geshi.php</b> on line <b>2186</b><br />
<br />
<b>Notice</b>:  Undefined offset:  1 in <b>z:\home\localhost\www\extensions\geshi\geshi.php</b> on line <b>2186</b><br />
<br />
<b>Notice</b>:  Undefined offset:  1 in <b>z:\home\localhost\www\extensions\geshi\geshi.php</b> on line <b>2186</b><br />
<br />
<b>Notice</b>:  Undefined offset:  1 in <b>z:\home\localhost\www\extensions\geshi\geshi.php</b> on line <b>2186</b><br />
<br />
<b>Notice</b>:  Undefined offset:  1 in <b>z:\home\localhost\www\extensions\geshi\geshi.php</b> on line <b>2186</b><br />
<br />
<b>Notice</b>:  Undefined offset:  1 in <b>z:\home\localhost\www\extensions\geshi\geshi.php</b> on line <b>2186</b><br />
<br />
<b>Notice</b>:  Undefined offset:  1 in <b>z:\home\localhost\www\extensions\geshi\geshi.php</b> on line <b>2186</b><br />
<br />
<b>Notice</b>:  Undefined offset:  1 in <b>z:\home\localhost\www\extensions\geshi\geshi.php</b> on line <b>2186</b><br />
<br />
<b>Notice</b>:  Undefined offset:  1 in <b>z:\home\localhost\www\extensions\geshi\geshi.php</b> on line <b>2186</b><br />
<br />
<b>Notice</b>:  Undefined offset:  1 in <b>z:\home\localhost\www\extensions\geshi\geshi.php</b> on line <b>2186</b><br />
<br />
<b>Notice</b>:  Undefined offset:  1 in <b>z:\home\localhost\www\extensions\geshi\geshi.php</b> on line <b>2186</b><br />
<br />
<b>Notice</b>:  Undefined offset:  1 in <b>z:\home\localhost\www\extensions\geshi\geshi.php</b> on line <b>2186</b><br />
<br />
<b>Notice</b>:  Undefined offset:  1 in <b>z:\home\localhost\www\extensions\geshi\geshi.php</b> on line <b>2186</b><br />
<br />
<b>Notice</b>:  Undefined offset:  1 in <b>z:\home\localhost\www\extensions\geshi\geshi.php</b> on line <b>2186</b><br />
<br />
<b>Notice</b>:  Undefined offset:  1 in <b>z:\home\localhost\www\extensions\geshi\geshi.php</b> on line <b>2186</b><br />
<br />
<b>Notice</b>:  Undefined offset:  1 in <b>z:\home\localhost\www\extensions\geshi\geshi.php</b> on line <b>2186</b><br />
<br />
<b>Notice</b>:  Undefined offset:  1 in <b>z:\home\localhost\www\extensions\geshi\geshi.php</b> on line <b>2186</b><br />
<br />
<b>Notice</b>:  Undefined offset:  1 in <b>z:\home\localhost\www\extensions\geshi\geshi.php</b> on line <b>2186</b><br />
<br />
<b>Notice</b>:  Undefined offset:  1 in <b>z:\home\localhost\www\extensions\geshi\geshi.php</b> on line <b>2186</b><br />
<br />
<b>Notice</b>:  Undefined offset:  1 in <b>z:\home\localhost\www\extensions\geshi\geshi.php</b> on line <b>2186</b><br />
<br />
<b>Notice</b>:  Undefined offset:  1 in <b>z:\home\localhost\www\extensions\geshi\geshi.php</b> on line <b>2186</b><br />
<br />
<b>Notice</b>:  Undefined offset:  1 in <b>z:\home\localhost\www\extensions\geshi\geshi.php</b> on line <b>2186</b><br />
<br />
<b>Notice</b>:  Undefined offset:  1 in <b>z:\home\localhost\www\extensions\geshi\geshi.php</b> on line <b>2186</b><br />
<br />
<b>Notice</b>:  Undefined offset:  1 in <b>z:\home\localhost\www\extensions\geshi\geshi.php</b> on line <b>2186</b><br />
<br />
<b>Notice</b>:  Undefined offset:  1 in <b>z:\home\localhost\www\extensions\geshi\geshi.php</b> on line <b>2186</b><br />
<br />
<b>Notice</b>:  Undefined offset:  1 in <b>z:\home\localhost\www\extensions\geshi\geshi.php</b> on line <b>2186</b><br />
<br />
<b>Notice</b>:  Undefined offset:  1 in <b>z:\home\localhost\www\extensions\geshi\geshi.php</b> on line <b>2186</b><br />
<br />
<b>Notice</b>:  Undefined offset:  1 in <b>z:\home\localhost\www\extensions\geshi\geshi.php</b> on line <b>2186</b><br />
<br />
<b>Notice</b>:  Undefined offset:  1 in <b>z:\home\localhost\www\extensions\geshi\geshi.php</b> on line <b>2186</b><br />
<br />
<b>Notice</b>:  Undefined offset:  1 in <b>z:\home\localhost\www\extensions\geshi\geshi.php</b> on line <b>2186</b><br />
<br />
<b>Notice</b>:  Undefined offset:  1 in <b>z:\home\localhost\www\extensions\geshi\geshi.php</b> on line <b>2186</b><br />
<br />
<b>Notice</b>:  Undefined offset:  1 in <b>z:\home\localhost\www\extensions\geshi\geshi.php</b> on line <b>2186</b><br />
<br />
<b>Notice</b>:  Undefined offset:  1 in <b>z:\home\localhost\www\extensions\geshi\geshi.php</b> on line <b>2186</b><br />
<br />
<b>Notice</b>:  Undefined offset:  1 in <b>z:\home\localhost\www\extensions\geshi\geshi.php</b> on line <b>2186</b><br />
<br />
<b>Notice</b>:  Undefined offset:  1 in <b>z:\home\localhost\www\extensions\geshi\geshi.php</b> on line <b>2186</b><br />
<br />
<b>Notice</b>:  Undefined offset:  1 in <b>z:\home\localhost\www\extensions\geshi\geshi.php</b> on line <b>2186</b><br />
<br />
<b>Notice</b>:  Undefined offset:  1 in <b>z:\home\localhost\www\extensions\geshi\geshi.php</b> on line <b>2186</b><br />
<br />
<b>Notice</b>:  Undefined offset:  1 in <b>z:\home\localhost\www\extensions\geshi\geshi.php</b> on line <b>2186</b><br />
<br />
<b>Notice</b>:  Undefined offset:  1 in <b>z:\home\localhost\www\extensions\geshi\geshi.php</b> on line <b>2186</b><br />
<br />
<b>Notice</b>:  Undefined offset:  1 in <b>z:\home\localhost\www\extensions\geshi\geshi.php</b> on line <b>2186</b><br />
<br />
<b>Notice</b>:  Undefined offset:  1 in <b>z:\home\localhost\www\extensions\geshi\geshi.php</b> on line <b>2186</b><br />
<br />
<b>Notice</b>:  Undefined offset:  1 in <b>z:\home\localhost\www\extensions\geshi\geshi.php</b> on line <b>2186</b><br />
<br />
<b>Notice</b>:  Undefined offset:  1 in <b>z:\home\localhost\www\extensions\geshi\geshi.php</b> on line <b>2186</b><br />
<br />
<b>Notice</b>:  Undefined offset:  1 in <b>z:\home\localhost\www\extensions\geshi\geshi.php</b> on line <b>2186</b><br />
<br />
<b>Notice</b>:  Undefined offset:  1 in <b>z:\home\localhost\www\extensions\geshi\geshi.php</b> on line <b>2186</b><br />
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml" xml:lang="ru" lang="ru" dir="ltr">	
<!-- Mirrored from localhost/index.php/%D0%9A%D0%BE%D0%B4:HeightMapToolbox.bmx by HTTrack Website Copier/3.x [XR&CO'2007], Sat, 10 Nov 2007 05:56:13 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8"><!-- /Added by HTTrack -->
<head>		<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />				<meta name="keywords" content="Код:HeightMapToolbox.bmx" />
		<link rel="shortcut icon" href="http://localhost/favicon.ico" />
		<link rel="search" type="application/opensearchdescription+xml" href="http://localhost/opensearch_desc.php" title="Blitz Et Cetera (Русский)" />
		<title>Код:HeightMapToolbox.bmx — Blitz Et Cetera</title>		<style type="text/css" media="screen,projection">/*<![CDATA[*/ @import "bvih5rde.css?63"; /*]]>*/</style>		<link rel="stylesheet" type="text/css" media="print" href="gcxktlm6.css?63" />		<link rel="stylesheet" type="text/css" media="handheld" href="zumsslq_.css?63" />		<!--[if lt IE 5.5000]><style type="text/css">@import "/skins/OfflineNew/IE50Fixes.css?63";</style><![endif]-->		<!--[if IE 5.5000]><style type="text/css">@import "/skins/OfflineNew/IE55Fixes.css?63";</style><![endif]-->		<!--[if IE 6]><style type="text/css">@import "/skins/OfflineNew/IE60Fixes.css?63";</style><![endif]-->		<!--[if IE 7]><style type="text/css">@import "/skins/OfflineNew/IE70Fixes.css?63";</style><![endif]-->		<!--[if lt IE 7]><script type="text/javascript" src="/skins/common/IEFixes.js?63"></script>		<meta http-equiv="imagetoolbar" content="no" /><![endif]-->		<script type= "text/javascript">/*<![CDATA[*/
var skin = "OfflineNew";
var stylepath = "/skins";
var wgArticlePath = "/index.php/$1";
var wgScriptPath = "";
var wgServer = "http://localhost/";
var wgCanonicalNamespace = "";
var wgCanonicalSpecialPageName = false;
var wgNamespaceNumber = 0;
var wgPageName = "Код:HeightMapToolbox.bmx";
var wgTitle = "Код:HeightMapToolbox.bmx";
var wgAction = "view";
var wgArticleId = "1625";
var wgIsArticle = true;
var wgUserName = null;
var wgUserGroups = null;
var wgUserLanguage = "ru";
var wgContentLanguage = "ru";
var wgBreakFrames = false;
var wgCurRevisionId = "2646";
/*]]>*/</script>
		<script type="text/javascript" src="2nq-6cel.js?63"><!-- wikibits js --></script>		<script type="text/javascript" src="http://localhost/index.php?title=-&amp;action=raw&amp;gen=js"><!-- site js --></script>		<style type="text/css">/*<![CDATA[*/
@import "http://localhost/index.php?title=MediaWiki:Common.css&amp;usemsgcache=yes&amp;action=raw&amp;ctype=text/css&amp;smaxage=18000";
@import "http://localhost/index.php?title=MediaWiki:OfflineNew.css&amp;usemsgcache=yes&amp;action=raw&amp;ctype=text/css&amp;smaxage=18000";
@import "http://localhost/index.php?title=-&amp;action=raw&amp;gen=css&amp;maxage=18000";
/*]]>*/</style>		<!-- Head Scripts -->	</head><body  class="mediawiki ns-0 ltr page-Код_HeightMapToolbox_bmx">	<div id="globalWrapper">	<div id="logocontainer">		<table align="center">		  <tr>				<td id="blitzetclogo">				</td>			</tr>		</table>	</div>	<div id="magbar">	Журнал о программированнии на языках Blitz3D, BlitzMax, BlitzPlus	</div>		<div id="column-content">	<div id="content">		<a name="top" id="top"></a>				<div id="bodyContent">		<table cellspacing=0 cellpadding=0 width=100%>			<tr>			  <td class="leftside">				</td>				<td class="sheetbody">					<h1 class="sheet">Код:HeightMapToolbox.bmx</h1>			<h3 id="siteSub">Материал из Blitz Et Cetera.</h3>			<div id="contentSub"></div>			<!-- start content -->			<div class="bmx" style="font-family: monospace;background-color:#FFFFFF;border:1px dashed #CCCCCC;padding:10px;background-color:#01516B;color:#FFFFFF;border:1px solid #003040;padding:10px;"><span style="color: #B1E7EB;">Rem<br />
<p><br />
HeightMap Toolbox<br />
V0.1.0 BETA<br />
<br />
By Shane Raffa<br />
May 2005<br />
<br />
Incorporating code (adapted) by <br />
&nbsp;* Shawn C. Swift (Perlin noise stuff)<br />
&nbsp;* Simon Wetterlind (Midpoint displacement stuff)<br />
<br />
PURPOSE<br />
<br />
&nbsp; A self-contained package of heightmap creating, processing, exporting, and <br />
&nbsp; importing utilities.<br />
<br />
TEST SYSTEM<br />
<br />
&nbsp; Athlon XP 1600+, 512MB, GeForce 3 Ti200 (64MB)<br />
&nbsp; Windows XP, BlitzMax<br />
<br />
IMPLEMENTED METHODS AND FUNCTIONS:<br />
&nbsp; <br />
&nbsp; createRandomMap<br />
&nbsp; createHillMap<br />
&nbsp; createParticleSMap<br />
&nbsp; createParticleRMap<br />
&nbsp; createFaultMap<br />
&nbsp; createPerlinMap<br />
&nbsp; createMPDMap<br />
&nbsp; &nbsp; recurseMPD<br />
&nbsp; &nbsp; MPD<br />
&nbsp; <br />
&nbsp; fill<br />
&nbsp; resize<br />
&nbsp; normalise<br />
&nbsp; smoothen<br />
&nbsp; flatten<br />
&nbsp; makeCoast<br />
&nbsp; <br />
&nbsp; exportPNG<br />
&nbsp; importPNG<br />
&nbsp; exportX3D<br />
&nbsp; exportBin<br />
&nbsp; importBin<br />
<br />
&nbsp; &nbsp; blendMapsAdd &nbsp;<br />
&nbsp; &nbsp; blendWithMapAdd<br />
&nbsp; &nbsp; blendMapsSub &nbsp;<br />
&nbsp; &nbsp; blendWithMapSub<br />
&nbsp; &nbsp; blendMapsMul<br />
&nbsp; &nbsp; blendWithMapMul<br />
&nbsp; &nbsp; blendMapsDiv<br />
&nbsp; &nbsp; blendWithMapDiv<br />
&nbsp; &nbsp; blendMapsHi<br />
&nbsp; &nbsp; blendWithMapHi<br />
&nbsp; &nbsp; blendMapsLo<br />
&nbsp; &nbsp; blendWithMapLo<br />
&nbsp; &nbsp; blendMapsRep<br />
&nbsp; &nbsp; blendWithMapRep<br />
<br />
&nbsp; renderToBackBuffer<br />
&nbsp; renderToImage<br />
&nbsp; renderToPixmap<br />
&nbsp; <br />
TODO: <br />
<br />
&nbsp; makeRivers<br />
&nbsp; makeIsland<br />
&nbsp; importX3D<br />
&nbsp; {Mac OS 10.x port}<br />
&nbsp; {improve documentation}<br />
<br />
EndRem</span><br />
<br />
<span style="color: #ffff00; font-weight: bold;">Type</span> THeightMap<br />
<br />
&nbsp; <span style="color: #ffff00; font-weight: bold;">Field</span> Width = <span style="color: #FFFFFF;">128</span> &nbsp; &nbsp; &nbsp; <span style="color: #B1E7EB;">'Width (units) &gt; 0</span><br />
&nbsp; <span style="color: #ffff00; font-weight: bold;">Field</span> Height = <span style="color: #FFFFFF;">128</span> &nbsp; &nbsp; &nbsp;<span style="color: #B1E7EB;">'Height (units) &gt; 0</span><br />
&nbsp; <span style="color: #ffff00; font-weight: bold;">Field</span> Map#<span style=" ">&#91;</span>Width, Height<span style=" ">&#93;</span> &nbsp; <span style="color: #B1E7EB;">'Matrix of height values (floats) &gt;=0.0 &lt;=1.0 normalised</span><br />
<br />
&nbsp; <span style="color: #B1E7EB;">Rem fill(val# = 0.0)<br />
&nbsp; Set all heights to a specific value.<br />
&nbsp; val#: value to use. Use 0.0 to clear the map.<br />
&nbsp; EndRem</span><br />
&nbsp; <span style="color: #ffff00; font-weight: bold;">Method</span> fill<span style=" ">&#40;</span>val# = <span style="color: #FFFFFF;">0.0</span><span style=" ">&#41;</span><br />
<br />
&nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">Local</span> x, z<br />
<br />
&nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">For</span> x = <span style="color: #FFFFFF;">0</span> <span style="color: #ffff00; font-weight: bold;">To</span> Width - <span style="color: #FFFFFF;">1</span><br />
&nbsp; &nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">For</span> z = <span style="color: #FFFFFF;">0</span> <span style="color: #ffff00; font-weight: bold;">To</span> Height - <span style="color: #FFFFFF;">1</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; Map#<span style=" ">&#91;</span>x, z<span style=" ">&#93;</span> = val#<br />
&nbsp; &nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">Next</span><br />
&nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">Next</span><br />
<br />
&nbsp; <span style="color: #ffff00; font-weight: bold;">End</span> <span style="color: #ffff00; font-weight: bold;">Method</span><br />
&nbsp;<br />
&nbsp; <span style="color: #B1E7EB;">Rem resize(w, h)<br />
&nbsp; Resize the map.<br />
&nbsp; w: width. &gt; 0. Higher = slower performance and increased memory consumption. <br />
&nbsp; h: height. &gt; 0. Higher = slower performance and increased memory consumption.<br />
&nbsp; EndRem</span><br />
&nbsp; <span style="color: #ffff00; font-weight: bold;">Method</span> resize<span style=" ">&#40;</span>w, h<span style=" ">&#41;</span><br />
&nbsp; &nbsp; <br />
&nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">If</span> <span style="color: #ffff00; font-weight: bold;">Not</span> <span style=" ">&#40;</span><span style=" ">&#40;</span>w &gt; <span style="color: #FFFFFF;">0</span><span style=" ">&#41;</span> <span style="color: #ffff00; font-weight: bold;">And</span> <span style=" ">&#40;</span>h &gt; <span style="color: #FFFFFF;">0</span><span style=" ">&#41;</span><span style=" ">&#41;</span> <span style="color: #ffff00; font-weight: bold;">Return</span> <br />
<br />
&nbsp; &nbsp; Map# = <span style="color: #ffff00; font-weight: bold;">Null</span><br />
&nbsp; &nbsp; FlushMem<br />
<br />
&nbsp; &nbsp; Width = w<br />
&nbsp; &nbsp; Height = h<br />
&nbsp; &nbsp; Map# = <span style="color: #ffff00; font-weight: bold;">New</span> <span style="color: #ffff00; font-weight: bold;">Float</span><span style=" ">&#91;</span>Width, Height<span style=" ">&#93;</span><br />
<br />
&nbsp; <span style="color: #ffff00; font-weight: bold;">End</span> <span style="color: #ffff00; font-weight: bold;">Method</span><br />
<br />
&nbsp; <span style="color: #B1E7EB;">Rem createRandomMap(seed)<br />
&nbsp; Create a map of random height between 0.0 and 1.0.<br />
&nbsp; seed: random seed. Use Millisecs() to generate a different result every time.<br />
&nbsp; EndRem</span><br />
&nbsp; <span style="color: #ffff00; font-weight: bold;">Method</span> createRandomMap<span style=" ">&#40;</span>seed<span style=" ">&#41;</span><br />
<br />
&nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">Local</span> x, z<br />
<br />
&nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">SeedRnd</span><span style=" ">&#40;</span>seed<span style=" ">&#41;</span><br />
<br />
&nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">For</span> x = <span style="color: #FFFFFF;">0</span> <span style="color: #ffff00; font-weight: bold;">To</span> Width - <span style="color: #FFFFFF;">1</span><br />
&nbsp; &nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">For</span> z = <span style="color: #FFFFFF;">0</span> <span style="color: #ffff00; font-weight: bold;">To</span> Height - <span style="color: #FFFFFF;">1</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; Map#<span style=" ">&#91;</span>x, z<span style=" ">&#93;</span> = <span style="color: #ffff00; font-weight: bold;">Rnd</span><span style=" ">&#40;</span><span style=" ">&#41;</span><br />
&nbsp; &nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">Next</span><br />
&nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">Next</span><br />
<br />
&nbsp; <span style="color: #ffff00; font-weight: bold;">End</span> <span style="color: #ffff00; font-weight: bold;">Method</span><br />
<br />
&nbsp; <span style="color: #B1E7EB;">Rem createHillMap(seed, numhills, maxhsize)<br />
&nbsp; Create a map using the &quot;hill algorithm&quot;.<br />
&nbsp; seed: random seed. Use Millisecs() to generate a different result every time.<br />
&nbsp; numhills: number of hills. (&gt;1000) is best. Minimum 1.<br />
&nbsp; maxhsize: maximum hill radius. For best results, value should be significantly <br />
&nbsp; less than the map's shortest dimension.<br />
&nbsp; EndRem</span><br />
&nbsp; <span style="color: #ffff00; font-weight: bold;">Method</span> createHillMap<span style=" ">&#40;</span>seed, numhills, maxhsize<span style=" ">&#41;</span><br />
<br />
&nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">Local</span> i, n, x, z, centrex, centrez, radius, startx, endx, startz, endz, ipos<br />
&nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">Local</span> y#<br />
&nbsp; <br />
&nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">SeedRnd</span><span style=" ">&#40;</span>seed<span style=" ">&#41;</span><br />
<br />
&nbsp; &nbsp; fill<span style=" ">&#40;</span><span style="color: #FFFFFF;">0.0</span><span style=" ">&#41;</span><br />
&nbsp; <br />
&nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">For</span> n = <span style="color: #FFFFFF;">1</span> <span style="color: #ffff00; font-weight: bold;">To</span> numhills<br />
<br />
&nbsp; &nbsp; centrex = <span style="color: #ffff00; font-weight: bold;">Rand</span><span style=" ">&#40;</span><span style="color: #FFFFFF;">0</span>, Width - <span style="color: #FFFFFF;">1</span><span style=" ">&#41;</span><br />
&nbsp; &nbsp; centrez = <span style="color: #ffff00; font-weight: bold;">Rand</span><span style=" ">&#40;</span><span style="color: #FFFFFF;">0</span>, Height - <span style="color: #FFFFFF;">1</span><span style=" ">&#41;</span><br />
&nbsp; &nbsp; radius = <span style="color: #ffff00; font-weight: bold;">Rand</span><span style=" ">&#40;</span><span style="color: #FFFFFF;">0</span>, <span style="color: #ffff00; font-weight: bold;">Abs</span><span style=" ">&#40;</span>maxhsize<span style=" ">&#41;</span><span style=" ">&#41;</span><br />
<br />
&nbsp; &nbsp; &nbsp; startx = centrex - radius<br />
&nbsp; &nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">If</span> startx &lt; <span style="color: #FFFFFF;">0</span><br />
&nbsp; &nbsp; &nbsp; startx = <span style="color: #FFFFFF;">0</span><br />
&nbsp; &nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">EndIf</span><br />
<br />
&nbsp; &nbsp; &nbsp; endx = centrex + radius<br />
&nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">If</span> endx &gt; Width<br />
&nbsp; &nbsp; &nbsp; endx = Width<br />
&nbsp; &nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">EndIf</span><br />
<br />
&nbsp; &nbsp; &nbsp; startz = centrez - radius<br />
&nbsp; &nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">If</span> startz &lt; <span style="color: #FFFFFF;">0</span><br />
&nbsp; &nbsp; &nbsp; startz = <span style="color: #FFFFFF;">0</span><br />
&nbsp; &nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">EndIf</span><br />
<br />
&nbsp; &nbsp; &nbsp; endz = centrez + radius<br />
&nbsp; &nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">If</span> endz &gt; Height <br />
&nbsp; &nbsp; &nbsp; endz = Height<br />
&nbsp; &nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">EndIf</span><br />
<br />
&nbsp; &nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">For</span> x = startx <span style="color: #ffff00; font-weight: bold;">To</span> endx - <span style="color: #FFFFFF;">1</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">For</span> z = startz <span style="color: #ffff00; font-weight: bold;">To</span> endz - <span style="color: #FFFFFF;">1</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; y# = <span style=" ">&#40;</span>radius * radius<span style=" ">&#41;</span> - <span style=" ">&#40;</span><span style=" ">&#40;</span><span style=" ">&#40;</span>x - centrex<span style=" ">&#41;</span> * <span style=" ">&#40;</span>x - centrex<span style=" ">&#41;</span><span style=" ">&#41;</span> + <span style=" ">&#40;</span><span style=" ">&#40;</span>z - centrez<span style=" ">&#41;</span> * <span style=" ">&#40;</span>z - centrez<span style=" ">&#41;</span><span style=" ">&#41;</span><span style=" ">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">If</span> y# &gt; <span style="color: #FFFFFF;">0.0</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Map#<span style=" ">&#91;</span>x, z<span style=" ">&#93;</span>&nbsp;:+ y#<br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">EndIf</span><br />
&nbsp; &nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">Next</span><br />
&nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">Next</span><br />
&nbsp; &nbsp; <br />
&nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">Next</span><br />
&nbsp; <br />
&nbsp; &nbsp; normalise<span style=" ">&#40;</span><span style=" ">&#41;</span><br />
&nbsp; <br />
&nbsp; <span style="color: #ffff00; font-weight: bold;">End</span> <span style="color: #ffff00; font-weight: bold;">Method</span><br />
<br />
&nbsp; <span style="color: #B1E7EB;">Rem createParticleSMap(seed, particles, clusters)<br />
&nbsp; Create a map using the &quot;sticky particle deposition&quot; algorithm.<br />
&nbsp; seed: random seed. Use Millisecs() to generate a different result every time.<br />
&nbsp; particles: number of particles to calculate per cluster. Minimum 1.<br />
&nbsp; cluster: number of clusters: higher number gives greater map density. Minimum 1.<br />
&nbsp; EndRem</span><br />
&nbsp; <span style="color: #ffff00; font-weight: bold;">Method</span> createParticleSMap<span style=" ">&#40;</span>seed, particles, clusters<span style=" ">&#41;</span><br />
<br />
&nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">Local</span> m, n, x, z<br />
&nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">Local</span> y#, disp# = <span style="color: #FFFFFF;">1.0</span><br />
&nbsp; <br />
&nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">SeedRnd</span><span style=" ">&#40;</span>seed<span style=" ">&#41;</span><br />
<br />
&nbsp; &nbsp; fill<span style=" ">&#40;</span><span style="color: #FFFFFF;">0.0</span><span style=" ">&#41;</span><br />
&nbsp; <br />
&nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">For</span> m = <span style="color: #FFFFFF;">0</span> <span style="color: #ffff00; font-weight: bold;">To</span> clusters - <span style="color: #FFFFFF;">1</span><br />
&nbsp; <br />
&nbsp; &nbsp; &nbsp; x = <span style="color: #ffff00; font-weight: bold;">Rand</span><span style=" ">&#40;</span><span style="color: #FFFFFF;">0</span>, Width - <span style="color: #FFFFFF;">1</span><span style=" ">&#41;</span> <br />
&nbsp; &nbsp; &nbsp; z = <span style="color: #ffff00; font-weight: bold;">Rand</span><span style=" ">&#40;</span><span style="color: #FFFFFF;">0</span>, Height - <span style="color: #FFFFFF;">1</span><span style=" ">&#41;</span><br />
&nbsp; <br />
&nbsp; &nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">For</span> n = <span style="color: #FFFFFF;">0</span> <span style="color: #ffff00; font-weight: bold;">To</span> particles - <span style="color: #FFFFFF;">1</span><br />
&nbsp; <br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">If</span> <span style=" ">&#40;</span><span style=" ">&#40;</span>x &lt; Width<span style=" ">&#41;</span> <span style="color: #ffff00; font-weight: bold;">And</span> <span style=" ">&#40;</span>z &lt; Height<span style=" ">&#41;</span> <span style="color: #ffff00; font-weight: bold;">And</span> <span style=" ">&#40;</span>x &gt;= <span style="color: #FFFFFF;">0</span><span style=" ">&#41;</span> <span style="color: #ffff00; font-weight: bold;">And</span> <span style=" ">&#40;</span>z &gt;= <span style="color: #FFFFFF;">0</span><span style=" ">&#41;</span><span style=" ">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; y# = Map#<span style=" ">&#91;</span>x, z<span style=" ">&#93;</span> + disp#<br />
&nbsp; &nbsp; &nbsp; &nbsp; Map#<span style=" ">&#91;</span>x, z<span style=" ">&#93;</span> = y#<br />
&nbsp; &nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">EndIf</span><br />
&nbsp; <br />
&nbsp; &nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">Select</span> <span style="color: #ffff00; font-weight: bold;">Rand</span><span style=" ">&#40;</span><span style="color: #FFFFFF;">0</span>, <span style="color: #FFFFFF;">3</span><span style=" ">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">Case</span> <span style="color: #FFFFFF;">0</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; x&nbsp;:+ <span style="color: #FFFFFF;">1</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">Case</span> <span style="color: #FFFFFF;">1</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; x&nbsp;:- <span style="color: #FFFFFF;">1</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">Case</span> <span style="color: #FFFFFF;">2</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; z&nbsp;:+ <span style="color: #FFFFFF;">1</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">Case</span> <span style="color: #FFFFFF;">3</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; z&nbsp;:- <span style="color: #FFFFFF;">1</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">End</span> <span style="color: #ffff00; font-weight: bold;">Select</span><br />
<br />
&nbsp; &nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">Next</span><br />
<br />
&nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">Next</span><br />
<br />
&nbsp; &nbsp; normalise<span style=" ">&#40;</span><span style=" ">&#41;</span><br />
&nbsp; <br />
&nbsp; <span style="color: #ffff00; font-weight: bold;">End</span> <span style="color: #ffff00; font-weight: bold;">Method</span><br />
<br />
&nbsp; <span style="color: #B1E7EB;">Rem createParticleRMap(seed, particles, clusters)<br />
&nbsp; Create a map using the &quot;rolling particle deposition&quot; algorithm.<br />
&nbsp; seed: random seed. Use Millisecs() to generate a different result every time.<br />
&nbsp; particles: number of particles to calculate per cluster. Minimum 1.<br />
&nbsp; cluster: number of clusters: higher number gives greater map density. Minimum 1.<br />
&nbsp; EndRem</span><br />
&nbsp; <span style="color: #ffff00; font-weight: bold;">Method</span> createParticleRMap<span style=" ">&#40;</span>seed, particles, clusters<span style=" ">&#41;</span><br />
<br />
&nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">Local</span> m, n, x, z, x2, z2, startx, endx, startz, endz<br />
&nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">Local</span> y#, y2#, disp# = <span style="color: #FFFFFF;">1.0</span><br />
&nbsp; <br />
&nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">SeedRnd</span><span style=" ">&#40;</span>seed<span style=" ">&#41;</span><br />
<br />
&nbsp; &nbsp; fill<span style=" ">&#40;</span><span style="color: #FFFFFF;">0.0</span><span style=" ">&#41;</span><br />
&nbsp; <br />
&nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">For</span> m = <span style="color: #FFFFFF;">0</span> <span style="color: #ffff00; font-weight: bold;">To</span> clusters - <span style="color: #FFFFFF;">1</span><br />
&nbsp; <br />
&nbsp; &nbsp; &nbsp; x = <span style="color: #ffff00; font-weight: bold;">Rand</span><span style=" ">&#40;</span><span style="color: #FFFFFF;">0</span>, Width - <span style="color: #FFFFFF;">1</span><span style=" ">&#41;</span> <br />
&nbsp; &nbsp; &nbsp; z = <span style="color: #ffff00; font-weight: bold;">Rand</span><span style=" ">&#40;</span><span style="color: #FFFFFF;">0</span>, Height - <span style="color: #FFFFFF;">1</span><span style=" ">&#41;</span><br />
&nbsp; <br />
&nbsp; &nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">For</span> n = <span style="color: #FFFFFF;">0</span> <span style="color: #ffff00; font-weight: bold;">To</span> particles - <span style="color: #FFFFFF;">1</span><br />
&nbsp; <br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">If</span> <span style=" ">&#40;</span><span style=" ">&#40;</span>x &lt; Width<span style=" ">&#41;</span> <span style="color: #ffff00; font-weight: bold;">And</span> <span style=" ">&#40;</span>z &lt; Height<span style=" ">&#41;</span> <span style="color: #ffff00; font-weight: bold;">And</span> <span style=" ">&#40;</span>x &gt;= <span style="color: #FFFFFF;">0</span><span style=" ">&#41;</span> <span style="color: #ffff00; font-weight: bold;">And</span> <span style=" ">&#40;</span>z &gt;= <span style="color: #FFFFFF;">0</span><span style=" ">&#41;</span><span style=" ">&#41;</span><br />
<br />
&nbsp; &nbsp; &nbsp; &nbsp; y# = Map#<span style=" ">&#91;</span>x, z<span style=" ">&#93;</span> + disp#<br />
&nbsp; &nbsp; &nbsp; &nbsp; Map#<span style=" ">&#91;</span>x, z<span style=" ">&#93;</span> = y#<br />
&nbsp; <br />
&nbsp; &nbsp; &nbsp; &nbsp; startx = x - <span style="color: #FFFFFF;">1</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">If</span> startx &lt; <span style="color: #FFFFFF;">0</span> &nbsp;<br />
&nbsp; &nbsp; &nbsp; &nbsp; startx = <span style="color: #FFFFFF;">0</span><br />
&nbsp; &nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">EndIf</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; endx = x + <span style="color: #FFFFFF;">1</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">If</span> endx &gt; Width <br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; endx = Width<br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">EndIf</span><br />
<br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; startz = z - <span style="color: #FFFFFF;">1</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">If</span> startz &lt; <span style="color: #FFFFFF;">0</span> <br />
&nbsp; &nbsp; &nbsp; &nbsp; startz = <span style="color: #FFFFFF;">0</span><br />
&nbsp; &nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">EndIf</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; endz = z + <span style="color: #FFFFFF;">1</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">If</span> endz &gt; Height<br />
&nbsp; &nbsp; &nbsp; &nbsp; endz = Height<br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">EndIf</span><br />
<br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">For</span> x2 = startx <span style="color: #ffff00; font-weight: bold;">To</span> endx - <span style="color: #FFFFFF;">1</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">For</span> z2 = startz <span style="color: #ffff00; font-weight: bold;">To</span> endz - <span style="color: #FFFFFF;">1</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; y2# = Map#<span style=" ">&#91;</span>x2, z2<span style=" ">&#93;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">If</span> y2# &lt; y# <br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Map#<span style=" ">&#91;</span>x2, z2<span style=" ">&#93;</span> = y2# + disp#<br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">EndIf</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">Next</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">Next</span><br />
&nbsp; <br />
&nbsp; &nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">EndIf</span><br />
&nbsp; <br />
&nbsp; &nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">Select</span> <span style="color: #ffff00; font-weight: bold;">Rand</span><span style=" ">&#40;</span><span style="color: #FFFFFF;">0</span>, <span style="color: #FFFFFF;">3</span><span style=" ">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">Case</span> <span style="color: #FFFFFF;">0</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; x&nbsp;:+ <span style="color: #FFFFFF;">1</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">Case</span> <span style="color: #FFFFFF;">1</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; x&nbsp;:- <span style="color: #FFFFFF;">1</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">Case</span> <span style="color: #FFFFFF;">2</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; z&nbsp;:+ <span style="color: #FFFFFF;">1</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">Case</span> <span style="color: #FFFFFF;">3</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; z&nbsp;:- <span style="color: #FFFFFF;">1</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">End</span> <span style="color: #ffff00; font-weight: bold;">Select</span><br />
<br />
&nbsp; &nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">Next</span><br />
<br />
&nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">Next</span><br />
<br />
&nbsp; &nbsp; normalise<span style=" ">&#40;</span><span style=" ">&#41;</span><br />
&nbsp; <br />
&nbsp; <span style="color: #ffff00; font-weight: bold;">End</span> <span style="color: #ffff00; font-weight: bold;">Method</span><br />
&nbsp; <br />
&nbsp; <span style="color: #B1E7EB;">Rem createFaultMap(seed, realism)<br />
&nbsp; Create a map using the &quot;fault line&quot; algorithm.<br />
&nbsp; seed: random seed. Use Millisecs() To generate a different result every time.<br />
&nbsp; realism: number of fault lines: higher number (&gt; 1000) gives greater realism. Minimum 1.<br />
&nbsp; EndRem</span><br />
&nbsp; <span style="color: #ffff00; font-weight: bold;">Method</span> createFaultMap<span style=" ">&#40;</span>seed, realism<span style=" ">&#41;</span><br />
<br />
&nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">Local</span> n, x, z<br />
&nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">Local</span> d#, disp#, v#, a#, b#, c#<br />
&nbsp; <br />
&nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">SeedRnd</span><span style=" ">&#40;</span>seed<span style=" ">&#41;</span><br />
<br />
&nbsp; &nbsp; fill<span style=" ">&#40;</span><span style="color: #FFFFFF;">0.0</span><span style=" ">&#41;</span><br />
&nbsp; <br />
&nbsp; &nbsp; d# = <span style="color: #ffff00; font-weight: bold;">Sqr</span><span style=" ">&#40;</span><span style=" ">&#40;</span>Width * Width<span style=" ">&#41;</span> + <span style=" ">&#40;</span>Height * Height<span style=" ">&#41;</span><span style=" ">&#41;</span><br />
&nbsp; &nbsp; disp# = <span style="color: #FFFFFF;">10.0</span><br />
<br />
&nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">For</span> n = <span style="color: #FFFFFF;">1</span> <span style="color: #ffff00; font-weight: bold;">To</span> realism<br />
&nbsp; <br />
&nbsp; &nbsp; &nbsp; v# = <span style="color: #ffff00; font-weight: bold;">Rnd</span><span style=" ">&#40;</span><span style="color: #FFFFFF;">1</span>,<span style="color: #FFFFFF;">359</span><span style=" ">&#41;</span><br />
&nbsp; &nbsp; a# = <span style="color: #ffff00; font-weight: bold;">Sin</span><span style=" ">&#40;</span>v#<span style=" ">&#41;</span><br />
&nbsp; &nbsp; &nbsp; b# = <span style="color: #ffff00; font-weight: bold;">Cos</span><span style=" ">&#40;</span>v#<span style=" ">&#41;</span><br />
&nbsp; &nbsp; &nbsp; c# = <span style=" ">&#40;</span><span style="color: #ffff00; font-weight: bold;">RndFloat</span><span style=" ">&#40;</span><span style=" ">&#41;</span> * d#<span style=" ">&#41;</span> - <span style=" ">&#40;</span>d# / <span style="color: #FFFFFF;">2</span><span style=" ">&#41;</span><br />
<br />
&nbsp; &nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">For</span> x = <span style="color: #FFFFFF;">0</span> <span style="color: #ffff00; font-weight: bold;">To</span> Width - <span style="color: #FFFFFF;">1</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">For</span> z = <span style="color: #FFFFFF;">0</span> <span style="color: #ffff00; font-weight: bold;">To</span> Height - <span style="color: #FFFFFF;">1</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">If</span> <span style=" ">&#40;</span><span style=" ">&#40;</span><span style=" ">&#40;</span>a# * x<span style=" ">&#41;</span> + <span style=" ">&#40;</span>b# * z<span style=" ">&#41;</span> - c#<span style=" ">&#41;</span> &gt; <span style="color: #FFFFFF;">0.0</span><span style=" ">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Map#<span style=" ">&#91;</span>x, z<span style=" ">&#93;</span>&nbsp;:+ disp#<br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">Else</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Map#<span style=" ">&#91;</span>x, z<span style=" ">&#93;</span>&nbsp;:- disp#<br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">EndIf</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">Next</span><br />
&nbsp; &nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">Next</span><br />
<br />
&nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">Next</span><br />
<br />
&nbsp; &nbsp; normalise<span style=" ">&#40;</span><span style=" ">&#41;</span><br />
<br />
&nbsp; <span style="color: #ffff00; font-weight: bold;">End</span> <span style="color: #ffff00; font-weight: bold;">Method</span><br />
<br />
&nbsp; <span style="color: #B1E7EB;">Rem createPerlinMap(seed, scale#, multiplier#)<br />
&nbsp; Create a map using the &quot;perlin noise&quot; alogorithm.<br />
&nbsp; ADAPTED from code obtained from the blitzbasic.com code archives.<br />
&nbsp; **** ORIGINAL AUTHOR: Shawn C. Swift ****<br />
&nbsp; IMPORTANT NOTE: This method will only work properly on maps with equal Width and <br />
&nbsp; Height dimensions that are a power of two: eg 256 x 256.<br />
&nbsp; seed: random seed. Use Millisecs() To generate a different result every time.<br />
&nbsp; &quot;scale# is the maximum height of the most frequent and smallest bumps in the terrain.&quot; - S. Swift.<br />
&nbsp; &quot;multiplier# is how much each successive pass multiplies scale# by.&quot; - S. Swift.<br />
&nbsp; EndRem</span><br />
&nbsp; <span style="color: #ffff00; font-weight: bold;">Method</span> createPerlinMap<span style=" ">&#40;</span>seed, scale#, multiplier#<span style=" ">&#41;</span><br />
<br />
&nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">If</span> <span style="color: #ffff00; font-weight: bold;">Not</span><span style=" ">&#40;</span>Width = Height<span style=" ">&#41;</span> <span style="color: #ffff00; font-weight: bold;">Return</span><br />
<br />
&nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">SeedRnd</span><span style=" ">&#40;</span>seed<span style=" ">&#41;</span><br />
<br />
&nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">Local</span> size = Width<br />
&nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">Local</span> x, z, ipos, ScaleDifference, Hx, Hz, Height_Z, Height_X, &nbsp;Noise_Z, Noise_X<br />
&nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">Local</span> max_height# = scale<br />
&nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">Local</span> NoiseMapSize = <span style="color: #ffff00; font-weight: bold;">Floor</span><span style=" ">&#40;</span>size / <span style="color: #FFFFFF;">2</span><span style=" ">&#41;</span><br />
&nbsp; <span style="color: #ffff00; font-weight: bold;">Local</span> i;<br />
&nbsp; <span style="color: #ffff00; font-weight: bold;">Local</span> NoiseMap#<span style=" ">&#91;</span>NoiseMapSize + <span style="color: #FFFFFF;">1</span>, NoiseMapSize + <span style="color: #FFFFFF;">1</span><span style=" ">&#93;</span><br />
<br />
&nbsp; <span style="color: #ffff00; font-weight: bold;">Local</span> StepSize#, N1#, N2#, N3#, N4#, Iy#, ICy#, Ix#, ICx#, Na#, Nb#, Nc#, Nd#, y#<br />
&nbsp; <br />
&nbsp; <span style="color: #ffff00; font-weight: bold;">For</span> x = <span style="color: #FFFFFF;">0</span> <span style="color: #ffff00; font-weight: bold;">To</span> size - <span style="color: #FFFFFF;">1</span><br />
&nbsp; &nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">For</span> z = <span style="color: #FFFFFF;">0</span> <span style="color: #ffff00; font-weight: bold;">To</span> size - <span style="color: #FFFFFF;">1</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; Map#<span style=" ">&#91;</span>x, z<span style=" ">&#93;</span> = <span style="color: #ffff00; font-weight: bold;">RndFloat</span><span style=" ">&#40;</span><span style=" ">&#41;</span> * scale<br />
&nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">Next</span><br />
&nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">Next</span><br />
&nbsp; <br />
&nbsp; &nbsp; max_height#&nbsp;:* multiplier#<br />
&nbsp; <br />
&nbsp; &nbsp;<span style="color: #ffff00; font-weight: bold;">Repeat</span><br />
&nbsp; &nbsp;<br />
&nbsp; &nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">For</span> Noise_Z = <span style="color: #FFFFFF;">0</span> <span style="color: #ffff00; font-weight: bold;">To</span> NoiseMapSize<br />
&nbsp; &nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">For</span> Noise_X = <span style="color: #FFFFFF;">0</span> <span style="color: #ffff00; font-weight: bold;">To</span> NoiseMapSize<br />
&nbsp; &nbsp; &nbsp; &nbsp; NoiseMap#<span style=" ">&#91;</span>Noise_X, Noise_Z<span style=" ">&#93;</span> = <span style="color: #ffff00; font-weight: bold;">RndFloat</span><span style=" ">&#40;</span><span style=" ">&#41;</span> * max_height#<br />
&nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">Next</span><br />
&nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">Next</span><br />
&nbsp; &nbsp;<br />
&nbsp; &nbsp; &nbsp; ScaleDifference = size / NoiseMapSize<br />
&nbsp; &nbsp; &nbsp; StepSize = <span style="color: #FFFFFF;">1.0</span> / ScaleDifference<br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />
&nbsp; &nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">For</span> Noise_Z = <span style="color: #FFFFFF;">0</span> <span style="color: #ffff00; font-weight: bold;">To</span> NoiseMapSize - <span style="color: #FFFFFF;">1</span><br />
&nbsp; &nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">For</span> Noise_X = <span style="color: #FFFFFF;">0</span> <span style="color: #ffff00; font-weight: bold;">To</span> NoiseMapSize - <span style="color: #FFFFFF;">1</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; N1# = NoiseMap#<span style=" ">&#91;</span>Noise_X, Noise_Z<span style=" ">&#93;</span><br />
&nbsp; &nbsp; &nbsp; N2# = NoiseMap#<span style=" ">&#91;</span><span style=" ">&#40;</span>Noise_X + <span style="color: #FFFFFF;">1</span><span style=" ">&#41;</span>, Noise_Z<span style=" ">&#93;</span> &nbsp;<br />
&nbsp; &nbsp; &nbsp; &nbsp; N3# = NoiseMap#<span style=" ">&#91;</span>Noise_X, <span style=" ">&#40;</span>Noise_Z + <span style="color: #FFFFFF;">1</span><span style=" ">&#41;</span><span style=" ">&#93;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; N4# = NoiseMap#<span style=" ">&#91;</span><span style=" ">&#40;</span>Noise_X + <span style="color: #FFFFFF;">1</span><span style=" ">&#41;</span>, <span style=" ">&#40;</span>Noise_Z + <span style="color: #FFFFFF;">1</span><span style=" ">&#41;</span><span style=" ">&#93;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; Hx = Noise_X * ScaleDifference<br />
&nbsp; &nbsp; &nbsp; &nbsp; Hz = Noise_Z * ScaleDifference<br />
&nbsp; &nbsp; &nbsp; &nbsp; Iy# = <span style="color: #FFFFFF;">0.0</span><br />
&nbsp; <br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">For</span> Height_Z = <span style="color: #FFFFFF;">0</span> <span style="color: #ffff00; font-weight: bold;">To</span> ScaleDifference - <span style="color: #FFFFFF;">1</span><br />
&nbsp; &nbsp; &nbsp; ICy# = <span style="color: #FFFFFF;">1.0</span> - <span style=" ">&#40;</span><span style=" ">&#40;</span><span style="color: #ffff00; font-weight: bold;">Cos</span><span style=" ">&#40;</span>Iy# * <span style="color: #FFFFFF;">180.0</span><span style=" ">&#41;</span> + <span style="color: #FFFFFF;">1.0</span><span style=" ">&#41;</span> / <span style="color: #FFFFFF;">2.0</span><span style=" ">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; Ix# = <span style="color: #FFFFFF;">0.0</span> &nbsp; &nbsp; <br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">For</span> Height_X = <span style="color: #FFFFFF;">0</span> <span style="color: #ffff00; font-weight: bold;">To</span> ScaleDifference - <span style="color: #FFFFFF;">1</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;ICx = <span style="color: #FFFFFF;">1.0</span> - <span style=" ">&#40;</span><span style=" ">&#40;</span><span style="color: #ffff00; font-weight: bold;">Cos</span><span style=" ">&#40;</span>Ix * <span style="color: #FFFFFF;">180.0</span><span style=" ">&#41;</span> + <span style="color: #FFFFFF;">1.0</span><span style=" ">&#41;</span> / <span style="color: #FFFFFF;">2.0</span><span style=" ">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;Na# = N1# * <span style=" ">&#40;</span><span style="color: #FFFFFF;">1.0</span> - ICx#<span style=" ">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;Nb# = N2# * ICx#;<br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;Nc# = N3# * <span style=" ">&#40;</span><span style="color: #FFFFFF;">1.0</span> - ICx#<span style=" ">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;Nd# = N4# * ICx#<br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;y# = Map#<span style=" ">&#91;</span><span style=" ">&#40;</span>Hx + Height_X<span style=" ">&#41;</span>, <span style=" ">&#40;</span>Hz + Height_Z<span style=" ">&#41;</span><span style=" ">&#93;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;Map#<span style=" ">&#91;</span><span style=" ">&#40;</span>Hx + Height_X<span style=" ">&#41;</span>, <span style=" ">&#40;</span>Hz + Height_Z<span style=" ">&#41;</span><span style=" ">&#93;</span> = <span style=" ">&#40;</span>y# + <span style=" ">&#40;</span>Na# + Nb#<span style=" ">&#41;</span> * <span style=" ">&#40;</span><span style="color: #FFFFFF;">1.0</span> - ICy#<span style=" ">&#41;</span> + <span style=" ">&#40;</span>Nc# + Nd#<span style=" ">&#41;</span> * ICy#<span style=" ">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;Ix# = Ix# + StepSize;<br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">Next</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />
&nbsp; &nbsp; &nbsp; &nbsp; Iy# = Iy# + StepSize# <br />
<br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">Next</span><br />
&nbsp; <br />
&nbsp; &nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">Next</span> &nbsp; &nbsp;<br />
&nbsp; &nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">Next</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <br />
&nbsp; &nbsp; NoiseMapSize&nbsp;:/ <span style="color: #FFFFFF;">2</span><br />
&nbsp; &nbsp; max_height#&nbsp;:* multiplier<br />
&nbsp; &nbsp; &nbsp; <br />
&nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">Until</span> <span style=" ">&#40;</span>NoiseMapSize &lt; <span style="color: #FFFFFF;">1</span><span style=" ">&#41;</span><br />
<br />
&nbsp; normalise<span style=" ">&#40;</span><span style=" ">&#41;</span><br />
<br />
&nbsp; <span style="color: #ffff00; font-weight: bold;">End</span> <span style="color: #ffff00; font-weight: bold;">Method</span><br />
<br />
&nbsp; <span style="color: #B1E7EB;">Rem<br />
&nbsp; createMPDMap(seed, grain#)<br />
&nbsp; recurseMPD(x0, y0, x2, y2, grain#, level#)<br />
&nbsp; mpd#(x0, y0, x1, y1, x2, y2, grain#, level#)<br />
<br />
&nbsp; ADAPTED from code obtained from the BlitzCoder.com code database.<br />
&nbsp; **** ORIGINAL AUTHOR: Simon Wetterlind 13-08-2002 ****<br />
&nbsp; **** v.0.9.3 - Revised: 18-11-2002 by Simon Wetterlind. ****<br />
<br />
&nbsp; These methods are used to create a terrain map using the <br />
&nbsp; Midpoint Displacement fractal algorithm (ie Plasma algorithm).<br />
&nbsp; grain# is the &quot;graininess&quot; i.e. the influence of randomness.<br />
<br />
&nbsp; seed: random seed. Use Millisecs() To generate a different result every time.<br />
&nbsp; EndRem</span><br />
&nbsp; <span style="color: #ffff00; font-weight: bold;">Method</span> createMPDMap<span style=" ">&#40;</span>seed, grain#<span style=" ">&#41;</span><br />
<br />
&nbsp; &nbsp; &nbsp;fill<span style=" ">&#40;</span><span style="color: #FFFFFF;">-1.0</span><span style=" ">&#41;</span><br />
<br />
&nbsp; &nbsp; &nbsp;<span style="color: #ffff00; font-weight: bold;">SeedRnd</span><span style=" ">&#40;</span>seed<span style=" ">&#41;</span><br />
<br />
&nbsp; &nbsp; &nbsp;Map#<span style=" ">&#91;</span><span style="color: #FFFFFF;">0</span>, <span style="color: #FFFFFF;">0</span><span style=" ">&#93;</span> = <span style="color: #ffff00; font-weight: bold;">RndFloat</span><span style=" ">&#40;</span><span style=" ">&#41;</span><br />
&nbsp; &nbsp; &nbsp;Map#<span style=" ">&#91;</span><span style=" ">&#40;</span>Width - <span style="color: #FFFFFF;">1</span><span style=" ">&#41;</span>, <span style="color: #FFFFFF;">0</span><span style=" ">&#93;</span> = <span style="color: #ffff00; font-weight: bold;">RndFloat</span><span style=" ">&#40;</span><span style=" ">&#41;</span><br />
&nbsp; &nbsp; &nbsp;Map#<span style=" ">&#91;</span><span style="color: #FFFFFF;">0</span>, <span style=" ">&#40;</span>Height - <span style="color: #FFFFFF;">1</span><span style=" ">&#41;</span><span style=" ">&#93;</span>= <span style="color: #ffff00; font-weight: bold;">RndFloat</span><span style=" ">&#40;</span><span style=" ">&#41;</span><br />
&nbsp; &nbsp; &nbsp;Map#<span style=" ">&#91;</span><span style=" ">&#40;</span>Width - <span style="color: #FFFFFF;">1</span><span style=" ">&#41;</span>, <span style=" ">&#40;</span>Height - <span style="color: #FFFFFF;">1</span><span style=" ">&#41;</span><span style=" ">&#93;</span> = <span style="color: #ffff00; font-weight: bold;">RndFloat</span><span style=" ">&#40;</span><span style=" ">&#41;</span><br />
<br />
&nbsp; &nbsp; &nbsp;recurseMPD<span style=" ">&#40;</span><span style="color: #FFFFFF;">0</span>, <span style="color: #FFFFFF;">0</span>, Width - <span style="color: #FFFFFF;">1</span>, Height - <span style="color: #FFFFFF;">1</span>, grain#, <span style="color: #FFFFFF;">1.0</span><span style=" ">&#41;</span><br />
<br />
&nbsp; &nbsp; &nbsp;normalise<span style=" ">&#40;</span><span style=" ">&#41;</span><br />
<br />
&nbsp; <span style="color: #ffff00; font-weight: bold;">End</span> <span style="color: #ffff00; font-weight: bold;">Method</span><br />
<br />
&nbsp; <span style="color: #ffff00; font-weight: bold;">Method</span> recurseMPD<span style=" ">&#40;</span>x0, z0, x2, z2, grain#, level#<span style=" ">&#41;</span><br />
<br />
&nbsp; &nbsp; &nbsp;<span style="color: #ffff00; font-weight: bold;">If</span> <span style=" ">&#40;</span>x2 - x0 &lt; <span style="color: #FFFFFF;">2</span><span style=" ">&#41;</span> <span style="color: #ffff00; font-weight: bold;">And</span> <span style=" ">&#40;</span>z2 - z0 &lt; <span style="color: #FFFFFF;">2</span><span style=" ">&#41;</span> <span style="color: #ffff00; font-weight: bold;">Then</span> <span style="color: #ffff00; font-weight: bold;">Return</span><br />
&nbsp; &nbsp; &nbsp;<br />
&nbsp; &nbsp; &nbsp;<span style="color: #ffff00; font-weight: bold;">Local</span> v#, i#<br />
<br />
&nbsp; &nbsp; &nbsp;<span style="color: #B1E7EB;">' change the calculation of level# To (possibly) achieve </span><br />
&nbsp; &nbsp; &nbsp;<span style="color: #B1E7EB;">' strange results</span><br />
&nbsp; &nbsp; &nbsp;level# = <span style="color: #FFFFFF;">2.0</span> * level#<br />
&nbsp; &nbsp; &nbsp;<br />
&nbsp; &nbsp; &nbsp;<span style="color: #ffff00; font-weight: bold;">Local</span> x1 = <span style="color: #ffff00; font-weight: bold;">Ceil</span><span style=" ">&#40;</span><span style=" ">&#40;</span>x0 + x2<span style=" ">&#41;</span> / <span style="color: #FFFFFF;">2.0</span><span style=" ">&#41;</span><br />
&nbsp; &nbsp; &nbsp;<span style="color: #ffff00; font-weight: bold;">Local</span> z1 = <span style="color: #ffff00; font-weight: bold;">Ceil</span><span style=" ">&#40;</span><span style=" ">&#40;</span>z0 + z2<span style=" ">&#41;</span> / <span style="color: #FFFFFF;">2.0</span><span style=" ">&#41;</span><br />
&nbsp; &nbsp; &nbsp;<br />
&nbsp; &nbsp; &nbsp;v# = Map#<span style=" ">&#91;</span>x1, z0<span style=" ">&#93;</span><br />
&nbsp; &nbsp; &nbsp;<span style="color: #ffff00; font-weight: bold;">If</span> v# = <span style="color: #FFFFFF;">-1.0</span> <br />
&nbsp; &nbsp; &nbsp; &nbsp;v# = MPD#<span style=" ">&#40;</span>x0, z0, x1, z0, x2, z0, grain#, level#<span style=" ">&#41;</span><br />
&nbsp; &nbsp; &nbsp;<span style="color: #ffff00; font-weight: bold;">EndIf</span><br />
&nbsp; &nbsp; &nbsp;i# = v#<br />
&nbsp; &nbsp; &nbsp;<br />
&nbsp; &nbsp; &nbsp;v# = Map#<span style=" ">&#91;</span>x2, z1<span style=" ">&#93;</span><br />
&nbsp; &nbsp; &nbsp;<span style="color: #ffff00; font-weight: bold;">If</span> v# = <span style="color: #FFFFFF;">-1.0</span> <br />
&nbsp; &nbsp; &nbsp; &nbsp;v# = MPD#<span style=" ">&#40;</span>x2, z0, x2, z1, x2, z2, grain#, level#<span style=" ">&#41;</span><br />
&nbsp; &nbsp; &nbsp;<span style="color: #ffff00; font-weight: bold;">EndIf</span><br />
&nbsp; &nbsp; &nbsp;i#&nbsp;:+ v#<br />
&nbsp; &nbsp; &nbsp;<br />
&nbsp; &nbsp; &nbsp;v# = Map#<span style=" ">&#91;</span>x1, z2<span style=" ">&#93;</span><br />
&nbsp; &nbsp; &nbsp;<span style="color: #ffff00; font-weight: bold;">If</span> v# = <span style="color: #FFFFFF;">-1.0</span> <br />
&nbsp; &nbsp; &nbsp; &nbsp;v# = MPD#<span style=" ">&#40;</span>x0, z2, x1, z2, x2, z2, grain#, level#<span style=" ">&#41;</span><br />
&nbsp; &nbsp; &nbsp;<span style="color: #ffff00; font-weight: bold;">EndIf</span><br />
&nbsp; &nbsp; &nbsp;i#&nbsp;:+ v#<br />
<br />
&nbsp; &nbsp; &nbsp;v# = Map#<span style=" ">&#91;</span>x0, z1<span style=" ">&#93;</span><br />
&nbsp; &nbsp; &nbsp;<span style="color: #ffff00; font-weight: bold;">If</span> v# = <span style="color: #FFFFFF;">-1.0</span> <br />
&nbsp; &nbsp; &nbsp; &nbsp;v# = MPD#<span style=" ">&#40;</span>x0, z0, x0, z1, x0, z2, grain#, level#<span style=" ">&#41;</span><br />
&nbsp; &nbsp; &nbsp;<span style="color: #ffff00; font-weight: bold;">EndIf</span><br />
&nbsp; &nbsp; &nbsp;i#&nbsp;:+ v#<br />
<br />
&nbsp; &nbsp; &nbsp;<span style="color: #ffff00; font-weight: bold;">If</span> Map#<span style=" ">&#91;</span>x1, z1<span style=" ">&#93;</span> = <span style="color: #FFFFFF;">-1.0</span> <br />
&nbsp; &nbsp; &nbsp; &nbsp;Map#<span style=" ">&#91;</span>x1, z1<span style=" ">&#93;</span> = i# / <span style="color: #FFFFFF;">4.0</span> + <span style="color: #ffff00; font-weight: bold;">Rnd</span><span style=" ">&#40;</span>-grain#, grain#<span style=" ">&#41;</span> / level#<br />
&nbsp; &nbsp; &nbsp;<span style="color: #ffff00; font-weight: bold;">EndIf</span><br />
&nbsp;<br />
&nbsp; &nbsp; &nbsp;RecurseMPD<span style=" ">&#40;</span>x0, z0, x1, z1, grain#, level#<span style=" ">&#41;</span><br />
&nbsp; &nbsp; &nbsp;RecurseMPD<span style=" ">&#40;</span>x1, z0, x2, z1, grain#, level#<span style=" ">&#41;</span><br />
&nbsp; &nbsp; &nbsp;RecurseMPD<span style=" ">&#40;</span>x1, z1, x2, z2, grain#, level#<span style=" ">&#41;</span><br />
&nbsp; &nbsp; &nbsp;RecurseMPD<span style=" ">&#40;</span>x0, z1, x1, z2, grain#, level#<span style=" ">&#41;</span><br />
<br />
&nbsp; <span style="color: #ffff00; font-weight: bold;">End</span> <span style="color: #ffff00; font-weight: bold;">Method</span><br />
<br />
&nbsp; <span style="color: #ffff00; font-weight: bold;">Method</span> MPD#<span style=" ">&#40;</span>x0, z0, x1, z1, x2, z2, grain#, level#<span style=" ">&#41;</span><br />
<br />
&nbsp; &nbsp; &nbsp;<span style="color: #ffff00; font-weight: bold;">Local</span> r# = <span style="color: #FFFFFF;">0</span><br />
<br />
&nbsp; &nbsp; &nbsp;r#&nbsp;:+ <span style=" ">&#40;</span>Map#<span style=" ">&#91;</span>x0, z0<span style=" ">&#93;</span> + Map#<span style=" ">&#91;</span>x2, z2<span style=" ">&#93;</span><span style=" ">&#41;</span> / <span style="color: #FFFFFF;">2.0</span><br />
&nbsp; &nbsp; &nbsp;<br />
&nbsp; &nbsp; &nbsp;<span style="color: #ffff00; font-weight: bold;">If</span> r# &lt; <span style="color: #FFFFFF;">0.0</span> <span style="color: #ffff00; font-weight: bold;">Then</span> r# = <span style="color: #FFFFFF;">0.0</span><br />
&nbsp; &nbsp; &nbsp;<span style="color: #ffff00; font-weight: bold;">If</span> r# &gt; <span style="color: #FFFFFF;">1.0</span> <span style="color: #ffff00; font-weight: bold;">Then</span> r# = <span style="color: #FFFFFF;">1.0</span><br />
&nbsp;<br />
&nbsp; &nbsp; &nbsp;Map#<span style=" ">&#91;</span>x1, z1<span style=" ">&#93;</span> = r#<br />
&nbsp; &nbsp; &nbsp;<br />
&nbsp; &nbsp; &nbsp;<span style="color: #ffff00; font-weight: bold;">Return</span> r#<br />
&nbsp; &nbsp; &nbsp;<br />
&nbsp; <span style="color: #ffff00; font-weight: bold;">End</span> <span style="color: #ffff00; font-weight: bold;">Method</span><br />
<br />
&nbsp; <span style="color: #B1E7EB;">Rem normalise()<br />
&nbsp; &nbsp; Normalise all map values to between 0 and 1.<br />
&nbsp; EndRem</span><br />
&nbsp; <span style="color: #ffff00; font-weight: bold;">Method</span> normalise<span style=" ">&#40;</span><span style=" ">&#41;</span><br />
<br />
&nbsp; &nbsp;<span style="color: #ffff00; font-weight: bold;">Local</span> x, z;<br />
&nbsp; &nbsp;<span style="color: #ffff00; font-weight: bold;">Local</span> minv# = <span style="color: #FFFFFF;">10</span>^<span style="color: #FFFFFF;">38</span>, maxv# = <span style="color: #FFFFFF;">10</span>^<span style="color: #FFFFFF;">-38</span>, y#<br />
&nbsp; <br />
&nbsp; &nbsp;<span style="color: #ffff00; font-weight: bold;">For</span> x = <span style="color: #FFFFFF;">0</span> <span style="color: #ffff00; font-weight: bold;">To</span> Width - <span style="color: #FFFFFF;">1</span><br />
&nbsp; &nbsp; &nbsp;<span style="color: #ffff00; font-weight: bold;">For</span> z = <span style="color: #FFFFFF;">0</span> <span style="color: #ffff00; font-weight: bold;">To</span> Height - <span style="color: #FFFFFF;">1</span><br />
<br />
&nbsp; &nbsp; &nbsp; &nbsp;y# = Map#<span style=" ">&#91;</span>x, z<span style=" ">&#93;</span><br />
&nbsp; &nbsp; &nbsp;<span style="color: #ffff00; font-weight: bold;">If</span> y# &lt; minv#<br />
&nbsp; &nbsp; &nbsp; &nbsp;minv# = y#<br />
&nbsp; &nbsp; &nbsp;<span style="color: #ffff00; font-weight: bold;">Else</span><br />
&nbsp; &nbsp; &nbsp; &nbsp;<span style="color: #ffff00; font-weight: bold;">If</span> y# &gt; maxv#<br />
&nbsp; &nbsp; &nbsp; &nbsp;maxv# = y#<br />
&nbsp; &nbsp; &nbsp;<span style="color: #ffff00; font-weight: bold;">EndIf</span><br />
&nbsp; &nbsp; &nbsp;<span style="color: #ffff00; font-weight: bold;">EndIf</span><br />
&nbsp; &nbsp; <br />
&nbsp; &nbsp; &nbsp;<span style="color: #ffff00; font-weight: bold;">Next</span><br />
&nbsp; &nbsp;<span style="color: #ffff00; font-weight: bold;">Next</span><br />
<br />
&nbsp; &nbsp;<span style="color: #ffff00; font-weight: bold;">For</span> x = <span style="color: #FFFFFF;">0</span> <span style="color: #ffff00; font-weight: bold;">To</span> Width - <span style="color: #FFFFFF;">1</span><br />
&nbsp; &nbsp; &nbsp;<span style="color: #ffff00; font-weight: bold;">For</span> z = <span style="color: #FFFFFF;">0</span> <span style="color: #ffff00; font-weight: bold;">To</span> Height - <span style="color: #FFFFFF;">1</span><br />
&nbsp; &nbsp; &nbsp; &nbsp;y# = <span style=" ">&#40;</span>Map#<span style=" ">&#91;</span>x, z<span style=" ">&#93;</span> - minv#<span style=" ">&#41;</span> / <span style=" ">&#40;</span>maxv# - minv#<span style=" ">&#41;</span><br />
&nbsp; &nbsp; &nbsp;Map#<span style=" ">&#91;</span>x, z<span style=" ">&#93;</span> = y#<br />
&nbsp; &nbsp;<span style="color: #ffff00; font-weight: bold;">Next</span><br />
&nbsp; &nbsp;<span style="color: #ffff00; font-weight: bold;">Next</span> <br />
&nbsp; <br />
&nbsp; <span style="color: #ffff00; font-weight: bold;">End</span> <span style="color: #ffff00; font-weight: bold;">Method</span><br />
<br />
&nbsp; <span style="color: #B1E7EB;">Rem smoothen(k#) <br />
&nbsp; Smooth the map values.<br />
&nbsp; Some maps require more smoothing than others to create more realistic terrains.<br />
&nbsp; k#: smoothing factor. Minumum 0.0 (extreme). Maxumum 1.0 (no smoothing).<br />
&nbsp; EndRem</span><br />
&nbsp; <span style="color: #ffff00; font-weight: bold;">Method</span> smoothen<span style=" ">&#40;</span>k#<span style=" ">&#41;</span><br />
&nbsp;<br />
&nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">Local</span> x, z<br />
&nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">Local</span> y#, y2#<br />
<br />
&nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">For</span> x = <span style="color: #FFFFFF;">1</span> <span style="color: #ffff00; font-weight: bold;">To</span> Width - <span style="color: #FFFFFF;">1</span><br />
&nbsp; &nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">For</span> z = <span style="color: #FFFFFF;">0</span> <span style="color: #ffff00; font-weight: bold;">To</span> Height - <span style="color: #FFFFFF;">1</span><br />
&nbsp; &nbsp; &nbsp; y# = Map#<span style=" ">&#91;</span>x, z<span style=" ">&#93;</span><br />
&nbsp; &nbsp; &nbsp; y2# = Map#<span style=" ">&#91;</span><span style=" ">&#40;</span>x - <span style="color: #FFFFFF;">1</span><span style=" ">&#41;</span>, z<span style=" ">&#93;</span><br />
&nbsp; &nbsp; &nbsp; Map#<span style=" ">&#91;</span>x, z<span style=" ">&#93;</span> = y2# * <span style=" ">&#40;</span><span style="color: #FFFFFF;">1</span> - k#<span style=" ">&#41;</span> + y# * k#<br />
&nbsp; &nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">Next</span><br />
&nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">Next</span><br />
<br />
&nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">For</span> x = <span style=" ">&#40;</span>Width - <span style="color: #FFFFFF;">3</span><span style=" ">&#41;</span> <span style="color: #ffff00; font-weight: bold;">To</span> <span style="color: #FFFFFF;">0</span> <span style="color: #ffff00; font-weight: bold;">Step</span> <span style="color: #FFFFFF;">-1</span><br />
&nbsp; &nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">For</span> z = <span style="color: #FFFFFF;">0</span> <span style="color: #ffff00; font-weight: bold;">To</span> Height - <span style="color: #FFFFFF;">1</span><br />
&nbsp; &nbsp; &nbsp; y# = Map#<span style=" ">&#91;</span>x, z<span style=" ">&#93;</span><br />
&nbsp; &nbsp; &nbsp; y2# = Map#<span style=" ">&#91;</span><span style=" ">&#40;</span>x + <span style="color: #FFFFFF;">1</span><span style=" ">&#41;</span>, z<span style=" ">&#93;</span><br />
&nbsp; &nbsp; &nbsp; Map#<span style=" ">&#91;</span>x, z<span style=" ">&#93;</span> = y2# * <span style=" ">&#40;</span><span style="color: #FFFFFF;">1</span> - k#<span style=" ">&#41;</span> + y# * k#<br />
&nbsp; &nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">Next</span><br />
&nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">Next</span><br />
<br />
&nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">For</span> x = <span style="color: #FFFFFF;">0</span> <span style="color: #ffff00; font-weight: bold;">To</span> Width - <span style="color: #FFFFFF;">1</span><br />
&nbsp; &nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">For</span> z = <span style="color: #FFFFFF;">1</span> <span style="color: #ffff00; font-weight: bold;">To</span> Height - <span style="color: #FFFFFF;">1</span><br />
&nbsp; &nbsp; &nbsp; y# = Map#<span style=" ">&#91;</span>x, z<span style=" ">&#93;</span><br />
&nbsp; &nbsp; &nbsp; y2# = Map#<span style=" ">&#91;</span>x, <span style=" ">&#40;</span>z - <span style="color: #FFFFFF;">1</span><span style=" ">&#41;</span><span style=" ">&#93;</span><br />
&nbsp; &nbsp; &nbsp; Map#<span style=" ">&#91;</span>x, z<span style=" ">&#93;</span> = y2# * <span style=" ">&#40;</span><span style="color: #FFFFFF;">1</span> - k#<span style=" ">&#41;</span> + y# * k#<br />
&nbsp; &nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">Next</span><br />
&nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">Next</span><br />
<br />
&nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">For</span> x = <span style="color: #FFFFFF;">0</span> <span style="color: #ffff00; font-weight: bold;">To</span> Width - <span style="color: #FFFFFF;">1</span><br />
&nbsp; &nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">For</span> z = <span style=" ">&#40;</span>Height - <span style="color: #FFFFFF;">3</span><span style=" ">&#41;</span> <span style="color: #ffff00; font-weight: bold;">To</span> <span style="color: #FFFFFF;">0</span> <span style="color: #ffff00; font-weight: bold;">Step</span> <span style="color: #FFFFFF;">-1</span><br />
&nbsp; &nbsp; &nbsp; y# = Map#<span style=" ">&#91;</span>x, z<span style=" ">&#93;</span><br />
&nbsp; &nbsp; &nbsp; y2# = Map#<span style=" ">&#91;</span>x, <span style=" ">&#40;</span>z + <span style="color: #FFFFFF;">1</span><span style=" ">&#41;</span><span style=" ">&#93;</span><br />
&nbsp; &nbsp; &nbsp; Map#<span style=" ">&#91;</span>x, z<span style=" ">&#93;</span> = y2# * <span style=" ">&#40;</span><span style="color: #FFFFFF;">1</span> - k#<span style=" ">&#41;</span> + y# * k#<br />
&nbsp; &nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">Next</span><br />
&nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">Next</span><br />
<br />
&nbsp; <span style="color: #ffff00; font-weight: bold;">End</span> <span style="color: #ffff00; font-weight: bold;">Method</span><br />
<br />
&nbsp; <span style="color: #B1E7EB;">Rem flatten(value#)<br />
&nbsp; 'Flatten' the map values.<br />
&nbsp; value#: flattening amount. 1 = no flattening. Minimum 1. Maximum (suggested) 4.<br />
&nbsp; EndRem</span><br />
&nbsp; <span style="color: #ffff00; font-weight: bold;">Method</span> flatten<span style=" ">&#40;</span>value#<span style=" ">&#41;</span><br />
<br />
&nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">Local</span> x, z<br />
&nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">Local</span> y#<br />
&nbsp; <br />
&nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">For</span> x = <span style="color: #FFFFFF;">0</span> <span style="color: #ffff00; font-weight: bold;">To</span> Width - <span style="color: #FFFFFF;">1</span><br />
&nbsp; &nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">For</span> z = <span style="color: #FFFFFF;">0</span> <span style="color: #ffff00; font-weight: bold;">To</span> Height - <span style="color: #FFFFFF;">1</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; y# = Map#<span style=" ">&#91;</span>x, z<span style=" ">&#93;</span> ^ value#<br />
&nbsp; &nbsp; &nbsp; &nbsp; Map#<span style=" ">&#91;</span>x, z<span style=" ">&#93;</span> = y#<br />
&nbsp; &nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">Next</span><br />
&nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">Next</span><br />
<br />
&nbsp; <span style="color: #ffff00; font-weight: bold;">End</span> <span style="color: #ffff00; font-weight: bold;">Method</span><br />
&nbsp; <br />
&nbsp; <span style="color: #B1E7EB;">Rem makeCoast(extent#, depth#)<br />
&nbsp; Create a crude coastline effect. For best results, smoothing should be applied <br />
&nbsp; after this process.<br />
&nbsp; extent#: extent of coastilisation. 0.0 to 1.0 = None To 100%.<br />
&nbsp; depth#: depth. 0.0 To 1.0 = Shallow to deep.*/<br />
&nbsp; EndRem</span><br />
&nbsp; <span style="color: #ffff00; font-weight: bold;">Method</span> makeCoast<span style=" ">&#40;</span>extent#, depth#<span style=" ">&#41;</span><br />
<br />
&nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">Local</span> x, z<br />
&nbsp; <span style="color: #ffff00; font-weight: bold;">Local</span> y#, e#, d#, minv# = <span style="color: #FFFFFF;">10</span>^<span style="color: #FFFFFF;">38</span>, maxv# = <span style="color: #FFFFFF;">10</span>^<span style="color: #FFFFFF;">-38</span><br />
&nbsp; <br />
&nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">For</span> x = <span style="color: #FFFFFF;">0</span> <span style="color: #ffff00; font-weight: bold;">To</span> Width - <span style="color: #FFFFFF;">1</span><br />
&nbsp; &nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">For</span> z = <span style="color: #FFFFFF;">0</span> <span style="color: #ffff00; font-weight: bold;">To</span> Height - <span style="color: #FFFFFF;">1</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; y# = Map#<span style=" ">&#91;</span>x, z<span style=" ">&#93;</span><br />
&nbsp; &nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">If</span> y# &lt; minv#<br />
&nbsp; &nbsp; &nbsp; &nbsp; minv# = y#<br />
&nbsp; &nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">Else</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">If</span> y# &gt; maxv#<br />
&nbsp; &nbsp; &nbsp; &nbsp; maxv# = y#<br />
&nbsp; &nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">EndIf</span><br />
&nbsp; &nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">EndIf</span><br />
&nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">Next</span><br />
&nbsp; <span style="color: #ffff00; font-weight: bold;">Next</span><br />
<br />
&nbsp; e# = <span style=" ">&#40;</span>maxv# - minv#<span style=" ">&#41;</span> * extent#<br />
&nbsp; d# = <span style=" ">&#40;</span>maxv# - minv#<span style=" ">&#41;</span> * depth#<br />
&nbsp; <br />
&nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">For</span> x = <span style="color: #FFFFFF;">0</span> <span style="color: #ffff00; font-weight: bold;">To</span> Width - <span style="color: #FFFFFF;">1</span><br />
&nbsp; &nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">For</span> z = <span style="color: #FFFFFF;">0</span> <span style="color: #ffff00; font-weight: bold;">To</span> Height - <span style="color: #FFFFFF;">1</span><br />
&nbsp; &nbsp; &nbsp; y# = Map#<span style=" ">&#91;</span>x, z<span style=" ">&#93;</span><br />
&nbsp; &nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">If</span> y# &lt;= <span style=" ">&#40;</span>minv# + e#<span style=" ">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; Map#<span style=" ">&#91;</span>x, z<span style=" ">&#93;</span> = y# - d#<br />
&nbsp; &nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">EndIf</span><br />
&nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">Next</span><br />
&nbsp; <span style="color: #ffff00; font-weight: bold;">Next</span> &nbsp; <br />
&nbsp; &nbsp;<br />
&nbsp; &nbsp; normalise<span style=" ">&#40;</span><span style=" ">&#41;</span><br />
<br />
&nbsp; <span style="color: #ffff00; font-weight: bold;">End</span> <span style="color: #ffff00; font-weight: bold;">Method</span><br />
<br />
&nbsp; <span style="color: #B1E7EB;">Rem exportToPNG(url$ = &quot;test.png&quot;, clvl = 9)<br />
&nbsp; &nbsp; Save the map to a greyscale PNG file.<br />
&nbsp; &nbsp; url$: target file. <br />
&nbsp; &nbsp; clvl: Compression level: 0 to 9: low to high. Higher = slower.<br />
&nbsp; EndRem</span><br />
&nbsp; <span style="color: #ffff00; font-weight: bold;">Method</span> exportPNG<span style=" ">&#40;</span>url$ = <span style="color: #00FF66;">&quot;test.png&quot;</span>, clvl = <span style="color: #FFFFFF;">9</span><span style=" ">&#41;</span><br />
<br />
&nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">Local</span> result = <span style="color: #ffff00; font-weight: bold;">False</span><br />
&nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">Local</span> pmap:<span style="color: #ffff00; font-weight: bold;">TPixmap</span> = <span style="color: #ffff00; font-weight: bold;">CreatePixmap</span><span style=" ">&#40;</span>Width, Height, PF_RGBA8888<span style=" ">&#41;</span><br />
<br />
&nbsp; &nbsp; renderToPixmap<span style=" ">&#40;</span>pmap<span style=" ">&#41;</span><br />
&nbsp; &nbsp; result = <span style="color: #ffff00; font-weight: bold;">SavePixmapPNG</span><span style=" ">&#40;</span>pmap, url$, clvl<span style=" ">&#41;</span><br />
<br />
&nbsp; &nbsp; pmap = <span style="color: #ffff00; font-weight: bold;">Null</span><br />
&nbsp; &nbsp; FlushMem<br />
<br />
&nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">If</span> result <br />
&nbsp; &nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">Print</span> url$ + <span style="color: #00FF66;">&quot; saved.&quot;</span> <br />
&nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">Else</span><br />
&nbsp; &nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">Print</span> url$ + <span style="color: #00FF66;">&quot; could NOT be saved.&quot;</span><br />
&nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">EndIf</span><br />
<br />
&nbsp; <span style="color: #ffff00; font-weight: bold;">End</span> <span style="color: #ffff00; font-weight: bold;">Method</span><br />
<br />
&nbsp; <span style="color: #B1E7EB;">Rem importFromPNG(url$)<br />
&nbsp; &nbsp; Import from a PNG file.<br />
&nbsp; &nbsp; url$: source file. Only the blue component data is used.<br />
&nbsp; EndRem</span><br />
&nbsp; <span style="color: #ffff00; font-weight: bold;">Method</span> importPNG<span style=" ">&#40;</span>url$<span style=" ">&#41;</span><br />
<br />
&nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">Local</span> x, z, c<br />
<br />
&nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">Local</span> pmap:<span style="color: #ffff00; font-weight: bold;">TPixmap</span> = <span style="color: #ffff00; font-weight: bold;">LoadPixmapPNG</span><span style=" ">&#40;</span>url$<span style=" ">&#41;</span><br />
<br />
&nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">If</span> pmap = <span style="color: #ffff00; font-weight: bold;">Null</span><br />
&nbsp; &nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">Print</span> url$ + <span style="color: #00FF66;">&quot; could NOT be loaded.&quot;</span><br />
&nbsp; &nbsp; &nbsp; FlushMem<br />
&nbsp; &nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">Return</span><br />
&nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">Else</span><br />
&nbsp; &nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">Print</span> url$ + <span style="color: #00FF66;">&quot; loaded.&quot;</span> &nbsp; &nbsp; &nbsp; <br />
&nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">EndIf</span><br />
<br />
&nbsp; &nbsp; resize<span style=" ">&#40;</span>pmap.<span style="">Width</span>, pmap.<span style="">Height</span><span style=" ">&#41;</span><br />
&nbsp; &nbsp;<br />
&nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">For</span> x = <span style="color: #FFFFFF;">0</span> <span style="color: #ffff00; font-weight: bold;">To</span> Width - <span style="color: #FFFFFF;">1</span><br />
&nbsp; &nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">For</span> z = <span style="color: #FFFFFF;">0</span> <span style="color: #ffff00; font-weight: bold;">To</span> Height - <span style="color: #FFFFFF;">1</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; c = <span style="color: #ffff00; font-weight: bold;">ReadPixel</span><span style=" ">&#40;</span>pmap, x, z<span style=" ">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; c&nbsp;:| c <span style="color: #ffff00; font-weight: bold;">Shr</span> <span style="color: #FFFFFF;">24</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; Map#<span style=" ">&#91;</span>x, z<span style=" ">&#93;</span> = $<span style="color: #FFFFFF;">000000</span> | c<br />
&nbsp; &nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">Next</span><br />
&nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">Next</span><br />
<br />
&nbsp; &nbsp; normalise<span style=" ">&#40;</span><span style=" ">&#41;</span><br />
<br />
&nbsp; &nbsp; pmap = <span style="color: #ffff00; font-weight: bold;">Null</span><br />
&nbsp; &nbsp; FlushMem<br />
<br />
&nbsp; <span style="color: #ffff00; font-weight: bold;">End</span> <span style="color: #ffff00; font-weight: bold;">Method</span><br />
<br />
&nbsp; <span style="color: #B1E7EB;">Rem exportToX3D(url$ = &quot;test.x3d&quot;, tpl$ = &quot;&quot;, hmulti# = 10.0, xspacing# = 100.0, zspacing# = 100.0, prec = 4)<br />
&nbsp; Reads an X3d V3.0 file (used as a template) and generates a new X3d file <br />
&nbsp; incorporating the original file and &quot;ElevationGrid&quot; data generated from the map data.<br />
&nbsp; url$: Target file name. Any existing file with the same name will be REPLACED.<br />
&nbsp; templ$ = source X3d file name: the &quot;ElevationGrid&quot; tag must be empty and start <br />
&nbsp; on a new line ie: &quot;&lt;ElevationGrid /&gt;&quot; without the quotes. If the template file is <br />
&nbsp; not found then internal X3d code is used.<br />
&nbsp; hmulti# = height multiplyer: higher values will produce higher/steeper terrain elements.<br />
&nbsp; xSpacing# = corresponds to the x3d ElevationGrid xSpacing property.<br />
&nbsp; zSpacing# = corresponds to the x3d ElevationGrid zSpacing property.<br />
&nbsp; prec = precision (number of digits) for the exported height values. 1 to 8. eg 4 = 1.34 or 12.2 etc<br />
&nbsp; EndRem</span><br />
&nbsp; <span style="color: #ffff00; font-weight: bold;">Method</span> exportX3D<span style=" ">&#40;</span>url$ = <span style="color: #00FF66;">&quot;test.x3d&quot;</span>, tpl$ = <span style="color: #00FF66;">&quot;&quot;</span>, hmulti# = <span style="color: #FFFFFF;">10.0</span>, xspacing# = <span style="color: #FFFFFF;">100.0</span>, zspacing# = <span style="color: #FFFFFF;">100.0</span>, prec = <span style="color: #FFFFFF;">4</span><span style=" ">&#41;</span><br />
<br />
&nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">Local</span> pre$ = <span style="color: #00FF66;">&quot;&quot;</span><br />
&nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">Local</span> post$ = <span style="color: #00FF66;">&quot;&quot;</span><br />
&nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">Local</span> tag$ = <span style="color: #00FF66;">&quot;&lt;ElevationGrid ccw='true' &quot;</span><br />
&nbsp; &nbsp; tag$&nbsp;:+ <span style="color: #00FF66;">&quot;creaseAngle='0.76' &quot;</span><br />
&nbsp; &nbsp; tag$&nbsp;:+ <span style="color: #00FF66;">&quot;solid='false' &quot;</span><br />
&nbsp; &nbsp; tag$&nbsp;:+ <span style="color: #00FF66;">&quot;colorPerVertex='true' &quot;</span><br />
&nbsp; &nbsp; tag$&nbsp;:+ <span style="color: #00FF66;">&quot;normalPerVertex='true' &quot;</span><br />
&nbsp; &nbsp; tag$&nbsp;:+ <span style="color: #00FF66;">&quot;xDimension='&quot;</span> + Width + <span style="color: #00FF66;">&quot;' &quot;</span><br />
&nbsp; &nbsp; tag$&nbsp;:+ <span style="color: #00FF66;">&quot;xSpacing='&quot;</span> + xspacing# + <span style="color: #00FF66;">&quot;' &quot;</span><br />
&nbsp; &nbsp; tag$&nbsp;:+ <span style="color: #00FF66;">&quot;zDimension='&quot;</span> + Height + <span style="color: #00FF66;">&quot;' &quot;</span><br />
&nbsp; &nbsp; tag$&nbsp;:+ <span style="color: #00FF66;">&quot;zSpacing='&quot;</span> + zspacing# + <span style="color: #00FF66;">&quot;' height='~r&quot;</span><br />
<br />
&nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">Local</span> templ:<span style="color: #ffff00; font-weight: bold;">TStream</span> = <span style="color: #ffff00; font-weight: bold;">OpenFile</span><span style=" ">&#40;</span>tpl$<span style=" ">&#41;</span><br />
&nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">If</span> <span style="color: #ffff00; font-weight: bold;">Not</span> templ<br />
&nbsp; &nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">Print</span> <span style="color: #00FF66;">&quot;Template file &quot;</span> + tpl$ + <span style="color: #00FF66;">&quot; could NOT be opened. Using internal template...&quot;</span><br />
&nbsp; &nbsp; &nbsp; pre$ = <span style="color: #00FF66;">&quot;&lt;?xml version='1.0'?&gt;~r&quot;</span><br />
&nbsp; &nbsp; &nbsp; pre$&nbsp;:+ <span style="color: #00FF66;">&quot;&lt;!DOCTYPE X3D Public 'ISO//Web3D//DTD X3D 3.0//EN' 'http://www.web3d.org/specifications/x3d-3.0.dtd'&gt;~r&quot;</span><br />
&nbsp; &nbsp; &nbsp; pre$&nbsp;:+ <span style="color: #00FF66;">&quot;&lt;X3D profile='Immersive' xmlns:xsd='http://www.w3.org/2001/XMLSchema-instance' xsd:noNamespaceSchemaLocation='http://www.web3d.org/specifications/x3d-3.0.xsd'&gt;~r&quot;</span><br />
&nbsp; &nbsp; &nbsp; pre$&nbsp;:+ <span style="color: #00FF66;">&quot;&lt;head&gt;&lt;meta name='generator' content='Heightmap Toolbox V0.1'/&gt;&lt;/head&gt;~r&quot;</span><br />
&nbsp; &nbsp; &nbsp; pre$&nbsp;:+ <span style="color: #00FF66;">&quot;&lt;Scene&gt;&lt;NavigationInfo Type='~qFLY~q ~qANY~q' speed='3.0' /&gt;&lt;Viewpoint description='VP1' orientation='0 0 0 0' position='20 20 100' centerOfRotation='90 0 0'/&gt;~r&quot;</span><br />
&nbsp; &nbsp; &nbsp; pre$&nbsp;:+ <span style="color: #00FF66;">&quot;&lt;Shape&gt;&lt;Appearance&gt;&lt;Material diffuseColor='0.4 0.4 0.1' emissiveColor='0.3 0.3 0.3' /&gt;&lt;/Appearance&gt;~r&quot;</span><br />
&nbsp; &nbsp; &nbsp; post$ = <span style="color: #00FF66;">&quot;~r&lt;/Shape&gt;&lt;/Scene&gt;&lt;/X3D&gt;&quot;</span><br />
&nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">Else</span> <br />
&nbsp; &nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">Print</span> <span style="color: #00FF66;">&quot;Using template file &quot;</span> + tpl$ + <span style="color: #00FF66;">&quot;.&quot;</span><br />
&nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">EndIf</span><br />
<br />
&nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">Local</span> result = <span style="color: #ffff00; font-weight: bold;">CreateFile</span><span style=" ">&#40;</span>url$<span style=" ">&#41;</span><br />
<br />
&nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">If</span> <span style="color: #ffff00; font-weight: bold;">Not</span> result &nbsp;<br />
&nbsp; &nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">Print</span> url$ + <span style="color: #00FF66;">&quot; could NOT be created.&quot;</span><br />
&nbsp; &nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">Return</span><br />
&nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">EndIf</span><br />
<br />
&nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">Local</span> x, z, spos<br />
&nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">Local</span> n$, t$, l$<br />
<br />
&nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">Local</span> file:<span style="color: #ffff00; font-weight: bold;">TStream</span> = <span style="color: #ffff00; font-weight: bold;">OpenFile</span><span style=" ">&#40;</span>url$<span style=" ">&#41;</span><br />
<br />
&nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">Try</span><br />
<br />
&nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">If</span> templ<br />
&nbsp; &nbsp; &nbsp; t$ = <span style="color: #00FF66;">&quot;&lt;ElevationGrid /&gt;&quot;</span><br />
&nbsp; &nbsp; &nbsp; l$ = <span style="color: #ffff00; font-weight: bold;">ReadLine</span> <span style=" ">&#40;</span>templ<span style=" ">&#41;</span><br />
&nbsp; &nbsp; &nbsp; spos = <span style="color: #ffff00; font-weight: bold;">Instr</span><span style=" ">&#40;</span>l$, t$<span style=" ">&#41;</span><br />
&nbsp; &nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">While</span> <span style="color: #ffff00; font-weight: bold;">Not</span> <span style="color: #ffff00; font-weight: bold;">Eof</span><span style=" ">&#40;</span>templ<span style=" ">&#41;</span> <br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">If</span> spos &gt; <span style="color: #FFFFFF;">0</span> <span style="color: #ffff00; font-weight: bold;">Then</span> <span style="color: #ffff00; font-weight: bold;">Exit</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">WriteLine</span> file, l$<br />
&nbsp; &nbsp; &nbsp; &nbsp; l$ = <span style="color: #ffff00; font-weight: bold;">ReadLine</span> <span style=" ">&#40;</span>templ<span style=" ">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; spos = <span style="color: #ffff00; font-weight: bold;">Instr</span><span style=" ">&#40;</span>l$, t$<span style=" ">&#41;</span><br />
&nbsp; &nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">Wend</span><br />
&nbsp; &nbsp; &nbsp; <br />
&nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">Else</span> <br />
&nbsp; &nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">WriteString</span><span style=" ">&#40;</span>file, pre$<span style=" ">&#41;</span><br />
&nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">EndIf</span><br />
<br />
&nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">WriteString</span><span style=" ">&#40;</span>file, tag$<span style=" ">&#41;</span><br />
<br />
&nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">For</span> x = <span style="color: #FFFFFF;">0</span> <span style="color: #ffff00; font-weight: bold;">To</span> Width - <span style="color: #FFFFFF;">1</span><br />
&nbsp; &nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">For</span> z = <span style="color: #FFFFFF;">0</span> <span style="color: #ffff00; font-weight: bold;">To</span> Height - <span style="color: #FFFFFF;">1</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; n$ = <span style="color: #ffff00; font-weight: bold;">String</span>.<span style="">FromFloat</span><span style=" ">&#40;</span>Map#<span style=" ">&#91;</span>x, z<span style=" ">&#93;</span> * hmulti#<span style=" ">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; n$ = n$<span style=" ">&#91;</span>..<span style="">prec</span><span style=" ">&#93;</span> + <span style="color: #00FF66;">&quot; &quot;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">WriteString</span><span style=" ">&#40;</span>file, n$<span style=" ">&#41;</span><br />
&nbsp; &nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">Next</span><br />
&nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">Next</span><br />
<br />
&nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">WriteString</span><span style=" ">&#40;</span>file, <span style="color: #00FF66;">&quot;'/&gt;&quot;</span><span style=" ">&#41;</span><br />
<br />
&nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">If</span> templ<br />
&nbsp; &nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">While</span> <span style="color: #ffff00; font-weight: bold;">Not</span> <span style="color: #ffff00; font-weight: bold;">Eof</span><span style=" ">&#40;</span>templ<span style=" ">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; l$ = <span style="color: #ffff00; font-weight: bold;">ReadLine</span> <span style=" ">&#40;</span>templ<span style=" ">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">WriteLine</span> file, l$<br />
&nbsp; &nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">Wend</span><br />
&nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">Else</span><br />
&nbsp; &nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">WriteString</span><span style=" ">&#40;</span>file, post$<span style=" ">&#41;</span><br />
&nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">EndIf</span><br />
<br />
&nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">CloseFile</span><span style=" ">&#40;</span>file<span style=" ">&#41;</span><br />
&nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">If</span> templ <span style="color: #ffff00; font-weight: bold;">CloseFile</span><span style=" ">&#40;</span>templ<span style=" ">&#41;</span><br />
<br />
&nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">Catch</span> ex:<span style="color: #ffff00; font-weight: bold;">Object</span><br />
&nbsp; &nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">Print</span> <span style="color: #00FF66;">&quot;File IO error.&quot;</span><br />
&nbsp; &nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">Return</span><br />
&nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">End</span> <span style="color: #ffff00; font-weight: bold;">Try</span><br />
<br />
&nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">Print</span> <span style="color: #00FF66;">&quot;X3D file &quot;</span> + url$ + <span style="color: #00FF66;">&quot; saved.&quot;</span><br />
<br />
&nbsp; <span style="color: #ffff00; font-weight: bold;">End</span> <span style="color: #ffff00; font-weight: bold;">Method</span><br />
<br />
&nbsp; <span style="color: #B1E7EB;">Rem exportBin(url$ = &quot;test.bin&quot;)<br />
&nbsp; &nbsp; Save heightmap data as a binary file. <br />
&nbsp; &nbsp; File Structure:<br />
&nbsp; &nbsp; &nbsp; 1 * Int (Width)<br />
&nbsp; &nbsp; &nbsp; 1 * Int (Height) <br />
&nbsp; &nbsp; &nbsp; Width * Height * Floats (height values) <br />
&nbsp; &nbsp; url$: target file name. <br />
&nbsp; EndRem</span><br />
&nbsp; <span style="color: #ffff00; font-weight: bold;">Method</span> exportBin<span style=" ">&#40;</span>url$ = <span style="color: #00FF66;">&quot;test.bin&quot;</span><span style=" ">&#41;</span><br />
<br />
&nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">Local</span> result = <span style="color: #ffff00; font-weight: bold;">False</span><br />
<br />
&nbsp; &nbsp; result = <span style="color: #ffff00; font-weight: bold;">CreateFile</span><span style=" ">&#40;</span>url$<span style=" ">&#41;</span><br />
<br />
&nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">If</span> <span style="color: #ffff00; font-weight: bold;">Not</span> result &nbsp;<br />
&nbsp; &nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">Print</span> url$ + <span style="color: #00FF66;">&quot; could NOT be created.&quot;</span><br />
&nbsp; &nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">Return</span><br />
&nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">EndIf</span><br />
<br />
&nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">Local</span> x, z<br />
<br />
&nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">Try</span><br />
<br />
&nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">Local</span> file:<span style="color: #ffff00; font-weight: bold;">TStream</span> = <span style="color: #ffff00; font-weight: bold;">OpenFile</span><span style=" ">&#40;</span>url$<span style=" ">&#41;</span><br />
<br />
&nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">WriteInt</span><span style=" ">&#40;</span>file, Width<span style=" ">&#41;</span><br />
&nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">WriteInt</span><span style=" ">&#40;</span>file, Height<span style=" ">&#41;</span><br />
<br />
&nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">For</span> x = <span style="color: #FFFFFF;">0</span> <span style="color: #ffff00; font-weight: bold;">To</span> Width - <span style="color: #FFFFFF;">1</span><br />
&nbsp; &nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">For</span> z = <span style="color: #FFFFFF;">0</span> <span style="color: #ffff00; font-weight: bold;">To</span> Height - <span style="color: #FFFFFF;">1</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">WriteFloat</span><span style=" ">&#40;</span>file, Map#<span style=" ">&#91;</span>x, z<span style=" ">&#93;</span><span style=" ">&#41;</span><br />
&nbsp; &nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">Next</span><br />
&nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">Next</span><br />
&nbsp; &nbsp; <br />
&nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">CloseFile</span><span style=" ">&#40;</span>file<span style=" ">&#41;</span><br />
<br />
&nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">Catch</span> ex:<span style="color: #ffff00; font-weight: bold;">Object</span><br />
&nbsp; &nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">Print</span> <span style="color: #00FF66;">&quot;File IO error.&quot;</span><br />
&nbsp; &nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">Return</span><br />
&nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">End</span> <span style="color: #ffff00; font-weight: bold;">Try</span><br />
<br />
&nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">Print</span> <span style="color: #00FF66;">&quot;Binary file &quot;</span> + url$ + <span style="color: #00FF66;">&quot; created.&quot;</span><br />
<br />
&nbsp; <span style="color: #ffff00; font-weight: bold;">End</span> <span style="color: #ffff00; font-weight: bold;">Method</span><br />
<br />
&nbsp; <span style="color: #B1E7EB;">Rem importBin(url$ = &quot;test.bin&quot;)<br />
&nbsp; &nbsp; Load heightmap data from a binary file that was previously saved using exportBin. <br />
&nbsp; &nbsp; url$: source file name. <br />
&nbsp; EndRem</span><br />
&nbsp; <span style="color: #ffff00; font-weight: bold;">Method</span> importBin<span style=" ">&#40;</span>url$ = <span style="color: #00FF66;">&quot;test.bin&quot;</span><span style=" ">&#41;</span><br />
<br />
&nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">Local</span> x, z<br />
<br />
&nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">Local</span> file = <span style="color: #ffff00; font-weight: bold;">False</span><br />
<br />
&nbsp; &nbsp; file = <span style="color: #ffff00; font-weight: bold;">OpenFile</span><span style=" ">&#40;</span>url$<span style=" ">&#41;</span><br />
<br />
&nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">If</span> <span style="color: #ffff00; font-weight: bold;">Not</span> file &nbsp;<br />
&nbsp; &nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">Print</span> url$ + <span style="color: #00FF66;">&quot; could NOT be opened.&quot;</span><br />
&nbsp; &nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">Return</span><br />
&nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">EndIf</span><br />
<br />
&nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">Try</span><br />
<br />
&nbsp; &nbsp; resize<span style=" ">&#40;</span><span style="color: #ffff00; font-weight: bold;">Readint</span><span style=" ">&#40;</span>file<span style=" ">&#41;</span>, <span style="color: #ffff00; font-weight: bold;">Readint</span><span style=" ">&#40;</span>file<span style=" ">&#41;</span><span style=" ">&#41;</span><br />
<br />
&nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">For</span> x = <span style="color: #FFFFFF;">0</span> <span style="color: #ffff00; font-weight: bold;">To</span> Width - <span style="color: #FFFFFF;">1</span><br />
&nbsp; &nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">For</span> z = <span style="color: #FFFFFF;">0</span> <span style="color: #ffff00; font-weight: bold;">To</span> Height - <span style="color: #FFFFFF;">1</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; Map#<span style=" ">&#91;</span>x, z<span style=" ">&#93;</span> = <span style="color: #ffff00; font-weight: bold;">ReadFloat</span><span style=" ">&#40;</span>file<span style=" ">&#41;</span><br />
&nbsp; &nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">Next</span><br />
&nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">Next</span><br />
<br />
&nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">Catch</span> ex:<span style="color: #ffff00; font-weight: bold;">Object</span><br />
&nbsp; &nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">Print</span> <span style="color: #00FF66;">&quot;File IO error.&quot;</span><br />
&nbsp; &nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">Return</span><br />
&nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">End</span> <span style="color: #ffff00; font-weight: bold;">Try</span><br />
<br />
&nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">Print</span> <span style="color: #00FF66;">&quot;Binary file &quot;</span> + url$ + <span style="color: #00FF66;">&quot; loaded.&quot;</span><br />
<br />
&nbsp; <span style="color: #ffff00; font-weight: bold;">End</span> <span style="color: #ffff00; font-weight: bold;">Method</span><br />
<br />
&nbsp; <span style="color: #B1E7EB;">Rem blendMapsAdd(src1:THeightMap, src2:THeightMap, outp:THeightMap)<br />
&nbsp; Blends two maps using an additive process.<br />
&nbsp; src1: source THeightMap instance #1.<br />
&nbsp; src2: source THeightMap instance #2.<br />
&nbsp; outp: output THeightMap instance into which the results will be stored.<br />
&nbsp; EndRem</span><br />
&nbsp; <span style="color: #ffff00; font-weight: bold;">Function</span> blendMapsAdd<span style=" ">&#40;</span>src1:THeightMap, src2:THeightMap, outp:THeightMap<span style=" ">&#41;</span><br />
<br />
&nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">Local</span> x, z<br />
&nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">Local</span> y1#, y2#<br />
&nbsp; &nbsp; <br />
&nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">For</span> x = <span style="color: #FFFFFF;">0</span> <span style="color: #ffff00; font-weight: bold;">To</span> outp.<span style="">Width</span> - <span style="color: #FFFFFF;">1</span><br />
&nbsp; &nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">For</span> z = <span style="color: #FFFFFF;">0</span> <span style="color: #ffff00; font-weight: bold;">To</span> outp.<span style="">Height</span> - <span style="color: #FFFFFF;">1</span><br />
<br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span style="color: #ffff00; font-weight: bold;">If</span> <span style=" ">&#40;</span>x &lt; src1.<span style="">Width</span><span style=" ">&#41;</span> <span style="color: #ffff00; font-weight: bold;">And</span> <span style=" ">&#40;</span>z &lt; src1.<span style="">Height</span><span style=" ">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;y1# = src1.<span style="">Map</span>#<span style=" ">&#91;</span>x, z<span style=" ">&#93;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span style="color: #ffff00; font-weight: bold;">Else</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;y1# = <span style="color: #FFFFFF;">0.0</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span style="color: #ffff00; font-weight: bold;">EndIf</span> &nbsp;<br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span style="color: #ffff00; font-weight: bold;">If</span> <span style=" ">&#40;</span>x &lt; src2.<span style="">Width</span><span style=" ">&#41;</span> <span style="color: #ffff00; font-weight: bold;">And</span> <span style=" ">&#40;</span>z &lt; src2.<span style="">Height</span><span style=" ">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;y2# = src2.<span style="">Map</span>#<span style=" ">&#91;</span>x, z<span style=" ">&#93;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span style="color: #ffff00; font-weight: bold;">Else</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;y2# = <span style="color: #FFFFFF;">0.0</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span style="color: #ffff00; font-weight: bold;">EndIf</span> &nbsp;<br />
<br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;outp.<span style="">Map</span>#<span style=" ">&#91;</span>x, z<span style=" ">&#93;</span> = y1# + y2#<br />
<br />
&nbsp; &nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">Next</span><br />
&nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">Next</span><br />
&nbsp; &nbsp; <br />
&nbsp; &nbsp; outp.<span style="">normalise</span><span style=" ">&#40;</span><span style=" ">&#41;</span><br />
<br />
&nbsp; <span style="color: #ffff00; font-weight: bold;">End</span> <span style="color: #ffff00; font-weight: bold;">Function</span><br />
<br />
&nbsp; <span style="color: #B1E7EB;">Rem blendWithMapAdd(src:THeightMap)<br />
&nbsp; Blends the current THeightMap instance with another THeightMap instance using a <br />
&nbsp; an additive process.<br />
&nbsp; src: THeightMap to blend with.<br />
&nbsp; EndRem</span><br />
&nbsp; <span style="color: #ffff00; font-weight: bold;">Method</span> blendWithMapAdd<span style=" ">&#40;</span>src:THeightMap<span style=" ">&#41;</span><br />
<br />
&nbsp; &nbsp; blendMapsAdd<span style=" ">&#40;</span><span style="color: #ffff00; font-weight: bold;">Self</span>, src, <span style="color: #ffff00; font-weight: bold;">Self</span><span style=" ">&#41;</span><br />
<br />
&nbsp; <span style="color: #ffff00; font-weight: bold;">End</span> <span style="color: #ffff00; font-weight: bold;">Method</span><br />
<br />
&nbsp; <span style="color: #B1E7EB;">Rem blendMapsSub(src1:THeightMap, src2:THeightMap, outp:THeightMap)<br />
&nbsp; Blends two maps using a subtractive process.<br />
&nbsp; src1: source THeightMap instance #1.<br />
&nbsp; src2: source THeightMap instance #2.<br />
&nbsp; outp: output THeightMap instance into which the results will be stored.<br />
&nbsp; EndRem</span><br />
&nbsp; <span style="color: #ffff00; font-weight: bold;">Function</span> blendMapsSub<span style=" ">&#40;</span>src1:THeightMap, src2:THeightMap, outp:THeightMap<span style=" ">&#41;</span><br />
<br />
&nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">Local</span> x, z<br />
&nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">Local</span> y1#, y2#<br />
&nbsp; &nbsp; <br />
&nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">For</span> x = <span style="color: #FFFFFF;">0</span> <span style="color: #ffff00; font-weight: bold;">To</span> outp.<span style="">Width</span> - <span style="color: #FFFFFF;">1</span><br />
&nbsp; &nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">For</span> z = <span style="color: #FFFFFF;">0</span> <span style="color: #ffff00; font-weight: bold;">To</span> outp.<span style="">Height</span> - <span style="color: #FFFFFF;">1</span><br />
<br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span style="color: #ffff00; font-weight: bold;">If</span> <span style=" ">&#40;</span>x &lt; src1.<span style="">Width</span><span style=" ">&#41;</span> <span style="color: #ffff00; font-weight: bold;">And</span> <span style=" ">&#40;</span>z &lt; src1.<span style="">Height</span><span style=" ">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;y1# = src1.<span style="">Map</span>#<span style=" ">&#91;</span>x, z<span style=" ">&#93;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span style="color: #ffff00; font-weight: bold;">Else</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;y1# = <span style="color: #FFFFFF;">0.0</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span style="color: #ffff00; font-weight: bold;">EndIf</span> &nbsp;<br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span style="color: #ffff00; font-weight: bold;">If</span> <span style=" ">&#40;</span>x &lt; src2.<span style="">Width</span><span style=" ">&#41;</span> <span style="color: #ffff00; font-weight: bold;">And</span> <span style=" ">&#40;</span>z &lt; src2.<span style="">Height</span><span style=" ">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;y2# = src2.<span style="">Map</span>#<span style=" ">&#91;</span>x, z<span style=" ">&#93;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span style="color: #ffff00; font-weight: bold;">Else</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;y2# = <span style="color: #FFFFFF;">0.0</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span style="color: #ffff00; font-weight: bold;">EndIf</span> &nbsp;<br />
<br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;outp.<span style="">Map</span>#<span style=" ">&#91;</span>x, z<span style=" ">&#93;</span> = y1# - y2#<br />
<br />
&nbsp; &nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">Next</span><br />
&nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">Next</span><br />
&nbsp; &nbsp; <br />
&nbsp; &nbsp; outp.<span style="">normalise</span><span style=" ">&#40;</span><span style=" ">&#41;</span><br />
<br />
&nbsp; <span style="color: #ffff00; font-weight: bold;">End</span> <span style="color: #ffff00; font-weight: bold;">Function</span><br />
<br />
&nbsp; <span style="color: #B1E7EB;">Rem blendWithMapSub(src:THeightMap)<br />
&nbsp; Blends the current THeightMap instance with another THeightMap instance using a <br />
&nbsp; a subtractive process.<br />
&nbsp; src: THeightMap to blend with.<br />
&nbsp; EndRem</span><br />
&nbsp; <span style="color: #ffff00; font-weight: bold;">Method</span> blendWithMapSub<span style=" ">&#40;</span>src:THeightMap<span style=" ">&#41;</span><br />
<br />
&nbsp; &nbsp; blendMapsSub<span style=" ">&#40;</span><span style="color: #ffff00; font-weight: bold;">Self</span>, src, <span style="color: #ffff00; font-weight: bold;">Self</span><span style=" ">&#41;</span><br />
<br />
&nbsp; <span style="color: #ffff00; font-weight: bold;">End</span> <span style="color: #ffff00; font-weight: bold;">Method</span><br />
<br />
&nbsp; <span style="color: #B1E7EB;">Rem blendMapsMul(src1:THeightMap, src2:THeightMap, outp:THeightMap)<br />
&nbsp; Blends two maps using an multiplicative process.<br />
&nbsp; src1: source THeightMap instance #1.<br />
&nbsp; src2: source THeightMap instance #2.<br />
&nbsp; outp: output THeightMap instance into which the results will be stored.<br />
&nbsp; EndRem</span><br />
&nbsp; <span style="color: #ffff00; font-weight: bold;">Function</span> blendMapsMul<span style=" ">&#40;</span>src1:THeightMap, src2:THeightMap, outp:THeightMap<span style=" ">&#41;</span><br />
<br />
&nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">Local</span> x, z<br />
&nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">Local</span> y1#, y2#<br />
&nbsp; &nbsp; <br />
&nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">For</span> x = <span style="color: #FFFFFF;">0</span> <span style="color: #ffff00; font-weight: bold;">To</span> outp.<span style="">Width</span> - <span style="color: #FFFFFF;">1</span><br />
&nbsp; &nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">For</span> z = <span style="color: #FFFFFF;">0</span> <span style="color: #ffff00; font-weight: bold;">To</span> outp.<span style="">Height</span> - <span style="color: #FFFFFF;">1</span><br />
<br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span style="color: #ffff00; font-weight: bold;">If</span> <span style=" ">&#40;</span>x &lt; src1.<span style="">Width</span><span style=" ">&#41;</span> <span style="color: #ffff00; font-weight: bold;">And</span> <span style=" ">&#40;</span>z &lt; src1.<span style="">Height</span><span style=" ">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;y1# = src1.<span style="">Map</span>#<span style=" ">&#91;</span>x, z<span style=" ">&#93;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span style="color: #ffff00; font-weight: bold;">Else</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;y1# = <span style="color: #FFFFFF;">0.0</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span style="color: #ffff00; font-weight: bold;">EndIf</span> &nbsp;<br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span style="color: #ffff00; font-weight: bold;">If</span> <span style=" ">&#40;</span>x &lt; src2.<span style="">Width</span><span style=" ">&#41;</span> <span style="color: #ffff00; font-weight: bold;">And</span> <span style=" ">&#40;</span>z &lt; src2.<span style="">Height</span><span style=" ">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;y2# = src2.<span style="">Map</span>#<span style=" ">&#91;</span>x, z<span style=" ">&#93;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span style="color: #ffff00; font-weight: bold;">Else</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;y2# = <span style="color: #FFFFFF;">0.0</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span style="color: #ffff00; font-weight: bold;">EndIf</span> &nbsp;<br />
<br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;outp.<span style="">Map</span>#<span style=" ">&#91;</span>x, z<span style=" ">&#93;</span> = y1# * y2#<br />
<br />
&nbsp; &nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">Next</span><br />
&nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">Next</span><br />
&nbsp; &nbsp; <br />
&nbsp; &nbsp; outp.<span style="">normalise</span><span style=" ">&#40;</span><span style=" ">&#41;</span><br />
<br />
&nbsp; <span style="color: #ffff00; font-weight: bold;">End</span> <span style="color: #ffff00; font-weight: bold;">Function</span><br />
<br />
&nbsp; <span style="color: #B1E7EB;">Rem blendWithMapMul(src:THeightMap)<br />
&nbsp; Blends the current THeightMap instance with another THeightMap instance using a <br />
&nbsp; an multiplicative process.<br />
&nbsp; src: THeightMap to blend with.<br />
&nbsp; EndRem</span><br />
&nbsp; <span style="color: #ffff00; font-weight: bold;">Method</span> blendWithMapMul<span style=" ">&#40;</span>src:THeightMap<span style=" ">&#41;</span><br />
<br />
&nbsp; &nbsp; blendMapsMul<span style=" ">&#40;</span><span style="color: #ffff00; font-weight: bold;">Self</span>, src, <span style="color: #ffff00; font-weight: bold;">Self</span><span style=" ">&#41;</span><br />
<br />
&nbsp; <span style="color: #ffff00; font-weight: bold;">End</span> <span style="color: #ffff00; font-weight: bold;">Method</span><br />
<br />
&nbsp; <span style="color: #B1E7EB;">Rem blendMapsDiv(src1:THeightMap, src2:THeightMap, outp:THeightMap)<br />
&nbsp; Blends two maps using a division process.<br />
&nbsp; src1: source THeightMap instance #1.<br />
&nbsp; src2: source THeightMap instance #2.<br />
&nbsp; outp: output THeightMap instance into which the results will be stored.<br />
&nbsp; EndRem</span><br />
&nbsp; <span style="color: #ffff00; font-weight: bold;">Function</span> blendMapsDiv<span style=" ">&#40;</span>src1:THeightMap, src2:THeightMap, outp:THeightMap<span style=" ">&#41;</span><br />
<br />
&nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">Local</span> x, z<br />
&nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">Local</span> y1#, y2#<br />
&nbsp; &nbsp; <br />
&nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">For</span> x = <span style="color: #FFFFFF;">0</span> <span style="color: #ffff00; font-weight: bold;">To</span> outp.<span style="">Width</span> - <span style="color: #FFFFFF;">1</span><br />
&nbsp; &nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">For</span> z = <span style="color: #FFFFFF;">0</span> <span style="color: #ffff00; font-weight: bold;">To</span> outp.<span style="">Height</span> - <span style="color: #FFFFFF;">1</span><br />
<br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span style="color: #ffff00; font-weight: bold;">If</span> <span style=" ">&#40;</span>x &lt; src1.<span style="">Width</span><span style=" ">&#41;</span> <span style="color: #ffff00; font-weight: bold;">And</span> <span style=" ">&#40;</span>z &lt; src1.<span style="">Height</span><span style=" ">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;y1# = src1.<span style="">Map</span>#<span style=" ">&#91;</span>x, z<span style=" ">&#93;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span style="color: #ffff00; font-weight: bold;">Else</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;y1# = <span style="color: #FFFFFF;">0.0</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span style="color: #ffff00; font-weight: bold;">EndIf</span> &nbsp;<br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span style="color: #ffff00; font-weight: bold;">If</span> <span style=" ">&#40;</span>x &lt; src2.<span style="">Width</span><span style=" ">&#41;</span> <span style="color: #ffff00; font-weight: bold;">And</span> <span style=" ">&#40;</span>z &lt; src2.<span style="">Height</span><span style=" ">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;y2# = src2.<span style="">Map</span>#<span style=" ">&#91;</span>x, z<span style=" ">&#93;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span style="color: #ffff00; font-weight: bold;">Else</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;y2# = <span style="color: #FFFFFF;">0.0</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span style="color: #ffff00; font-weight: bold;">EndIf</span> &nbsp;<br />
<br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;outp.<span style="">Map</span>#<span style=" ">&#91;</span>x, z<span style=" ">&#93;</span> = y1# / y2#<br />
<br />
&nbsp; &nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">Next</span><br />
&nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">Next</span><br />
&nbsp; &nbsp; <br />
&nbsp; &nbsp; outp.<span style="">normalise</span><span style=" ">&#40;</span><span style=" ">&#41;</span><br />
<br />
&nbsp; <span style="color: #ffff00; font-weight: bold;">End</span> <span style="color: #ffff00; font-weight: bold;">Function</span><br />
<br />
&nbsp; <span style="color: #B1E7EB;">Rem blendWithMapDiv(src:THeightMap)<br />
&nbsp; Blends the current THeightMap instance with another THeightMap instance using a <br />
&nbsp; an division process.<br />
&nbsp; src: THeightMap to blend with.<br />
&nbsp; EndRem</span><br />
&nbsp; <span style="color: #ffff00; font-weight: bold;">Method</span> blendWithMapDiv<span style=" ">&#40;</span>src:THeightMap<span style=" ">&#41;</span><br />
<br />
&nbsp; &nbsp; blendMapsDiv<span style=" ">&#40;</span><span style="color: #ffff00; font-weight: bold;">Self</span>, src, <span style="color: #ffff00; font-weight: bold;">Self</span><span style=" ">&#41;</span><br />
<br />
&nbsp; <span style="color: #ffff00; font-weight: bold;">End</span> <span style="color: #ffff00; font-weight: bold;">Method</span><br />
<br />
&nbsp; <span style="color: #B1E7EB;">Rem blendMapsHi(src1:THeightMap, src2:THeightMap, outp:THeightMap)<br />
&nbsp; Blends two maps, favouring the highest values.<br />
&nbsp; src1: source THeightMap instance #1.<br />
&nbsp; src2: source THeightMap instance #2.<br />
&nbsp; outp: output THeightMap instance into which the results will be stored.<br />
&nbsp; EndRem</span><br />
&nbsp; <span style="color: #ffff00; font-weight: bold;">Function</span> blendMapsHi<span style=" ">&#40;</span>src1:THeightMap, src2:THeightMap, outp:THeightMap<span style=" ">&#41;</span><br />
<br />
&nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">Local</span> x, z<br />
&nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">Local</span> y1#, y2#<br />
&nbsp; &nbsp; <br />
&nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">For</span> x = <span style="color: #FFFFFF;">0</span> <span style="color: #ffff00; font-weight: bold;">To</span> outp.<span style="">Width</span> - <span style="color: #FFFFFF;">1</span><br />
&nbsp; &nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">For</span> z = <span style="color: #FFFFFF;">0</span> <span style="color: #ffff00; font-weight: bold;">To</span> outp.<span style="">Height</span> - <span style="color: #FFFFFF;">1</span><br />
<br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span style="color: #ffff00; font-weight: bold;">If</span> <span style=" ">&#40;</span>x &lt; src1.<span style="">Width</span><span style=" ">&#41;</span> <span style="color: #ffff00; font-weight: bold;">And</span> <span style=" ">&#40;</span>z &lt; src1.<span style="">Height</span><span style=" ">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;y1# = src1.<span style="">Map</span>#<span style=" ">&#91;</span>x, z<span style=" ">&#93;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span style="color: #ffff00; font-weight: bold;">Else</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;y1# = <span style="color: #FFFFFF;">0.0</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span style="color: #ffff00; font-weight: bold;">EndIf</span> &nbsp;<br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span style="color: #ffff00; font-weight: bold;">If</span> <span style=" ">&#40;</span>x &lt; src2.<span style="">Width</span><span style=" ">&#41;</span> <span style="color: #ffff00; font-weight: bold;">And</span> <span style=" ">&#40;</span>z &lt; src2.<span style="">Height</span><span style=" ">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;y2# = src2.<span style="">Map</span>#<span style=" ">&#91;</span>x, z<span style=" ">&#93;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span style="color: #ffff00; font-weight: bold;">Else</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;y2# = <span style="color: #FFFFFF;">0.0</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span style="color: #ffff00; font-weight: bold;">EndIf</span> &nbsp;<br />
<br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span style="color: #ffff00; font-weight: bold;">If</span> y1# &gt; y2# <span style="color: #ffff00; font-weight: bold;">Then</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;outp.<span style="">Map</span>#<span style=" ">&#91;</span>x, z<span style=" ">&#93;</span> = y1#<br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span style="color: #ffff00; font-weight: bold;">Else</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;outp.<span style="">Map</span>#<span style=" ">&#91;</span>x, z<span style=" ">&#93;</span> = y2#<br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span style="color: #ffff00; font-weight: bold;">EndIf</span><br />
<br />
&nbsp; &nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">Next</span><br />
&nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">Next</span><br />
&nbsp; &nbsp; <br />
&nbsp; &nbsp; outp.<span style="">normalise</span><span style=" ">&#40;</span><span style=" ">&#41;</span><br />
<br />
&nbsp; <span style="color: #ffff00; font-weight: bold;">End</span> <span style="color: #ffff00; font-weight: bold;">Function</span><br />
<br />
&nbsp; <span style="color: #B1E7EB;">Rem blendWithMapHi(src:THeightMap)<br />
&nbsp; Blends the current THeightMap instance with another THeightMap instance, <br />
&nbsp; favouring the highest values.<br />
&nbsp; src: THeightMap to blend with.<br />
&nbsp; EndRem</span><br />
&nbsp; <span style="color: #ffff00; font-weight: bold;">Method</span> blendWithMapHi<span style=" ">&#40;</span>src:THeightMap<span style=" ">&#41;</span><br />
<br />
&nbsp; &nbsp; blendMapsHi<span style=" ">&#40;</span><span style="color: #ffff00; font-weight: bold;">Self</span>, src, <span style="color: #ffff00; font-weight: bold;">Self</span><span style=" ">&#41;</span><br />
<br />
&nbsp; <span style="color: #ffff00; font-weight: bold;">End</span> <span style="color: #ffff00; font-weight: bold;">Method</span><br />
<br />
&nbsp; <span style="color: #B1E7EB;">Rem blendMapsHi(src1:THeightMap, src2:THeightMap, outp:THeightMap)<br />
&nbsp; Blends two maps, favouring the lowest values.<br />
&nbsp; src1: source THeightMap instance #1.<br />
&nbsp; src2: source THeightMap instance #2.<br />
&nbsp; outp: output THeightMap instance into which the results will be stored.<br />
&nbsp; EndRem</span><br />
&nbsp; <span style="color: #ffff00; font-weight: bold;">Function</span> blendMapsLo<span style=" ">&#40;</span>src1:THeightMap, src2:THeightMap, outp:THeightMap<span style=" ">&#41;</span><br />
<br />
&nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">Local</span> x, z<br />
&nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">Local</span> y1#, y2#<br />
&nbsp; &nbsp; <br />
&nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">For</span> x = <span style="color: #FFFFFF;">0</span> <span style="color: #ffff00; font-weight: bold;">To</span> outp.<span style="">Width</span> - <span style="color: #FFFFFF;">1</span><br />
&nbsp; &nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">For</span> z = <span style="color: #FFFFFF;">0</span> <span style="color: #ffff00; font-weight: bold;">To</span> outp.<span style="">Height</span> - <span style="color: #FFFFFF;">1</span><br />
<br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span style="color: #ffff00; font-weight: bold;">If</span> <span style=" ">&#40;</span>x &lt; src1.<span style="">Width</span><span style=" ">&#41;</span> <span style="color: #ffff00; font-weight: bold;">And</span> <span style=" ">&#40;</span>z &lt; src1.<span style="">Height</span><span style=" ">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;y1# = src1.<span style="">Map</span>#<span style=" ">&#91;</span>x, z<span style=" ">&#93;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span style="color: #ffff00; font-weight: bold;">Else</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;y1# = <span style="color: #FFFFFF;">0.0</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span style="color: #ffff00; font-weight: bold;">EndIf</span> &nbsp;<br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span style="color: #ffff00; font-weight: bold;">If</span> <span style=" ">&#40;</span>x &lt; src2.<span style="">Width</span><span style=" ">&#41;</span> <span style="color: #ffff00; font-weight: bold;">And</span> <span style=" ">&#40;</span>z &lt; src2.<span style="">Height</span><span style=" ">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;y2# = src2.<span style="">Map</span>#<span style=" ">&#91;</span>x, z<span style=" ">&#93;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span style="color: #ffff00; font-weight: bold;">Else</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;y2# = <span style="color: #FFFFFF;">0.0</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span style="color: #ffff00; font-weight: bold;">EndIf</span> &nbsp;<br />
<br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span style="color: #ffff00; font-weight: bold;">If</span> y1# &lt; y2# <span style="color: #ffff00; font-weight: bold;">Then</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;outp.<span style="">Map</span>#<span style=" ">&#91;</span>x, z<span style=" ">&#93;</span> = y1#<br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span style="color: #ffff00; font-weight: bold;">Else</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;outp.<span style="">Map</span>#<span style=" ">&#91;</span>x, z<span style=" ">&#93;</span> = y2#<br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span style="color: #ffff00; font-weight: bold;">EndIf</span><br />
<br />
&nbsp; &nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">Next</span><br />
&nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">Next</span><br />
&nbsp; &nbsp; <br />
&nbsp; &nbsp; outp.<span style="">normalise</span><span style=" ">&#40;</span><span style=" ">&#41;</span><br />
<br />
&nbsp; <span style="color: #ffff00; font-weight: bold;">End</span> <span style="color: #ffff00; font-weight: bold;">Function</span><br />
<br />
&nbsp; <span style="color: #B1E7EB;">Rem blendWithMapLo(src:THeightMap)<br />
&nbsp; Blends the current THeightMap instance with another THeightMap instance, <br />
&nbsp; favouring the lowest values.<br />
&nbsp; src: THeightMap to blend with.<br />
&nbsp; EndRem</span><br />
&nbsp; <span style="color: #ffff00; font-weight: bold;">Method</span> blendWithMapLo<span style=" ">&#40;</span>src:THeightMap<span style=" ">&#41;</span><br />
<br />
&nbsp; &nbsp; blendMapsLo<span style=" ">&#40;</span><span style="color: #ffff00; font-weight: bold;">Self</span>, src, <span style="color: #ffff00; font-weight: bold;">Self</span><span style=" ">&#41;</span><br />
<br />
&nbsp; <span style="color: #ffff00; font-weight: bold;">End</span> <span style="color: #ffff00; font-weight: bold;">Method</span><br />
<br />
&nbsp; <span style="color: #B1E7EB;">Rem blendMapsRep(src1:THeightMap, src2:THeightMap, outp:THeightMap)<br />
&nbsp; Blends two maps, replacing outp's values with src1's values. ie copy src1 to outp.<br />
&nbsp; src1: source THeightMap instance #1.<br />
&nbsp; src2: source THeightMap instance #2.<br />
&nbsp; outp: output THeightMap instance into which the results will be stored.<br />
&nbsp; EndRem</span><br />
&nbsp; <span style="color: #ffff00; font-weight: bold;">Function</span> blendMapsRep<span style=" ">&#40;</span>src1:THeightMap, src2:THeightMap, outp:THeightMap<span style=" ">&#41;</span><br />
<br />
&nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">Local</span> x, z<br />
&nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">Local</span> y1#, y2#<br />
&nbsp; &nbsp; <br />
&nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">For</span> x = <span style="color: #FFFFFF;">0</span> <span style="color: #ffff00; font-weight: bold;">To</span> outp.<span style="">Width</span> - <span style="color: #FFFFFF;">1</span><br />
&nbsp; &nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">For</span> z = <span style="color: #FFFFFF;">0</span> <span style="color: #ffff00; font-weight: bold;">To</span> outp.<span style="">Height</span> - <span style="color: #FFFFFF;">1</span><br />
<br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span style="color: #ffff00; font-weight: bold;">If</span> <span style=" ">&#40;</span>x &lt; src1.<span style="">Width</span><span style=" ">&#41;</span> <span style="color: #ffff00; font-weight: bold;">And</span> <span style=" ">&#40;</span>z &lt; src1.<span style="">Height</span><span style=" ">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;y1# = src1.<span style="">Map</span>#<span style=" ">&#91;</span>x, z<span style=" ">&#93;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span style="color: #ffff00; font-weight: bold;">Else</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;y1# = <span style="color: #FFFFFF;">0.0</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span style="color: #ffff00; font-weight: bold;">EndIf</span> &nbsp;<br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span style="color: #ffff00; font-weight: bold;">If</span> <span style=" ">&#40;</span>x &lt; src2.<span style="">Width</span><span style=" ">&#41;</span> <span style="color: #ffff00; font-weight: bold;">And</span> <span style=" ">&#40;</span>z &lt; src2.<span style="">Height</span><span style=" ">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;y2# = src2.<span style="">Map</span>#<span style=" ">&#91;</span>x, z<span style=" ">&#93;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span style="color: #ffff00; font-weight: bold;">Else</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;y2# = <span style="color: #FFFFFF;">0.0</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span style="color: #ffff00; font-weight: bold;">EndIf</span> &nbsp;<br />
<br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;outp.<span style="">Map</span>#<span style=" ">&#91;</span>x, z<span style=" ">&#93;</span> = y1#<br />
<br />
&nbsp; &nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">Next</span><br />
&nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">Next</span><br />
&nbsp; &nbsp; <br />
&nbsp; &nbsp; outp.<span style="">normalise</span><span style=" ">&#40;</span><span style=" ">&#41;</span><br />
<br />
&nbsp; <span style="color: #ffff00; font-weight: bold;">End</span> <span style="color: #ffff00; font-weight: bold;">Function</span><br />
<br />
&nbsp; <span style="color: #B1E7EB;">Rem blendWithMapRep(src:THeightMap)<br />
&nbsp; Replaces the current THeightMap values with those of another THeightMap instance. <br />
&nbsp; src: THeightMap to blend with.<br />
&nbsp; EndRem</span><br />
&nbsp; <span style="color: #ffff00; font-weight: bold;">Method</span> blendWithMapRep<span style=" ">&#40;</span>src:THeightMap<span style=" ">&#41;</span><br />
<br />
&nbsp; &nbsp; blendMapsRep<span style=" ">&#40;</span><span style="color: #ffff00; font-weight: bold;">Self</span>, src, <span style="color: #ffff00; font-weight: bold;">Self</span><span style=" ">&#41;</span><br />
<br />
&nbsp; <span style="color: #ffff00; font-weight: bold;">End</span> <span style="color: #ffff00; font-weight: bold;">Method</span><br />
<br />
&nbsp; <span style="color: #B1E7EB;">Rem renderToImage(img:TImage, offx = 0, offz = 0)<br />
&nbsp; Render the map to a BlitzMax image object.<br />
&nbsp; img: Destination TImage object. Must be the same dimensions as the map.<br />
&nbsp; offx: x offset (pixels) into img. &gt;=0 and &lt;=img width.<br />
&nbsp; offz: z offset (pixels) into img. &gt;=0 and &lt;=img height.<br />
&nbsp; EndRem</span><br />
&nbsp; <span style="color: #ffff00; font-weight: bold;">Method</span> renderToImage<span style=" ">&#40;</span>img:TImage, offx = <span style="color: #FFFFFF;">0</span>, offz = <span style="color: #FFFFFF;">0</span><span style=" ">&#41;</span><br />
<br />
&nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">Local</span> pm = <span style="color: #ffff00; font-weight: bold;">LockImage</span><span style=" ">&#40;</span>img<span style=" ">&#41;</span><br />
&nbsp; &nbsp; renderToPixmap<span style=" ">&#40;</span>pm, offx, offz<span style=" ">&#41;</span><br />
&nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">UnlockImage</span><span style=" ">&#40;</span>img<span style=" ">&#41;</span><br />
<br />
&nbsp; <span style="color: #ffff00; font-weight: bold;">End</span> <span style="color: #ffff00; font-weight: bold;">Method</span><br />
<br />
&nbsp; <span style="color: #B1E7EB;">Rem renderToPixmap(pm:TPixmap, offx = 0, offz = 0)<br />
&nbsp; Render the map to a BlitzMax pixmap object.<br />
&nbsp; pm: Destination TPixmap object. Must be the same dimensions as the <br />
&nbsp; map. The pixmap format should be PF_RGBA8888<br />
&nbsp; offx: x offset (pixels) into pm. &gt;=0 and &lt;=pm width.<br />
&nbsp; offz: z offset (pixels) into pm. &gt;=0 and &lt;=pm height.<br />
&nbsp; EndRem</span><br />
&nbsp; <span style="color: #ffff00; font-weight: bold;">Method</span> renderToPixmap<span style=" ">&#40;</span>pm:<span style="color: #ffff00; font-weight: bold;">TPixmap</span>, offx = <span style="color: #FFFFFF;">0</span>, offz = <span style="color: #FFFFFF;">0</span><span style=" ">&#41;</span><br />
<br />
&nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">If</span> <span style="color: #ffff00; font-weight: bold;">Not</span> <span style=" ">&#40;</span><span style=" ">&#40;</span>offx &gt;= <span style="color: #FFFFFF;">0</span><span style=" ">&#41;</span> <span style="color: #ffff00; font-weight: bold;">And</span> <span style=" ">&#40;</span>offx &lt; pm.<span style="">Width</span><span style=" ">&#41;</span><span style=" ">&#41;</span> <span style="color: #ffff00; font-weight: bold;">Return</span><br />
&nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">If</span> <span style="color: #ffff00; font-weight: bold;">Not</span> <span style=" ">&#40;</span><span style=" ">&#40;</span>offz &gt;= <span style="color: #FFFFFF;">0</span><span style=" ">&#41;</span> <span style="color: #ffff00; font-weight: bold;">And</span> <span style=" ">&#40;</span>offz &lt; pm.<span style="">Height</span><span style=" ">&#41;</span><span style=" ">&#41;</span> <span style="color: #ffff00; font-weight: bold;">Return</span><br />
<br />
&nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">Local</span> x, z, r, g, b, a = $FF000000<br />
<br />
&nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">For</span> x = <span style="color: #FFFFFF;">0</span> <span style="color: #ffff00; font-weight: bold;">To</span> Width - <span style="color: #FFFFFF;">1</span><br />
&nbsp; &nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">For</span> z = <span style="color: #FFFFFF;">0</span> <span style="color: #ffff00; font-weight: bold;">To</span> Height - <span style="color: #FFFFFF;">1</span><br />
&nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">If</span> <span style=" ">&#40;</span><span style=" ">&#40;</span>offx + x<span style=" ">&#41;</span> &lt; pm.<span style="">Width</span><span style=" ">&#41;</span> <span style="color: #ffff00; font-weight: bold;">And</span> <span style=" ">&#40;</span><span style=" ">&#40;</span>offz + z<span style=" ">&#41;</span> &lt; pm.<span style="">Height</span><span style=" ">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; r = <span style="color: #ffff00; font-weight: bold;">Floor</span><span style=" ">&#40;</span>Map#<span style=" ">&#91;</span>x, z<span style=" ">&#93;</span> * <span style="color: #FFFFFF;">255</span><span style=" ">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; g = r<br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; b = r<br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">WritePixel</span><span style=" ">&#40;</span>pm, <span style=" ">&#40;</span>offx + x<span style=" ">&#41;</span>, <span style=" ">&#40;</span>offz + z<span style=" ">&#41;</span>, a <span style="color: #ffff00; font-weight: bold;">Shl</span> <span style="color: #FFFFFF;">24</span> | r <span style="color: #ffff00; font-weight: bold;">Shl</span> <span style="color: #FFFFFF;">16</span> | g <span style="color: #ffff00; font-weight: bold;">Shl</span> <span style="color: #FFFFFF;">8</span> | b <span style="color: #ffff00; font-weight: bold;">Shl</span> <span style="color: #FFFFFF;">0</span><span style=" ">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">EndIf</span><br />
&nbsp; &nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">Next</span><br />
&nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">Next</span><br />
<br />
&nbsp; <span style="color: #ffff00; font-weight: bold;">End</span> <span style="color: #ffff00; font-weight: bold;">Method</span><br />
<br />
&nbsp; <span style="color: #B1E7EB;">Rem renderToBackBuffer(offx = 0, offz = 0)<br />
&nbsp; Render the map directly to the backbuffer.<br />
&nbsp; offx: x offset (pixels) backbuffer. &gt;=0 and &lt;=screen width.<br />
&nbsp; offz: z offset (pixels) backbuffer. &gt;=0 and &lt;=screen height.<br />
&nbsp; TODO; Validate offx and offz.<br />
&nbsp; EndRem</span><br />
&nbsp; <span style="color: #ffff00; font-weight: bold;">Method</span> renderToBackBuffer<span style=" ">&#40;</span>offx = <span style="color: #FFFFFF;">0</span>, offz = <span style="color: #FFFFFF;">0</span><span style=" ">&#41;</span><br />
&nbsp; &nbsp; <br />
&nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">Local</span> gw = <span style="color: #ffff00; font-weight: bold;">GraphicsWidth</span><span style=" ">&#40;</span><span style=" ">&#41;</span><br />
&nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">Local</span> gh = <span style="color: #ffff00; font-weight: bold;">GraphicsHeight</span><span style=" ">&#40;</span><span style=" ">&#41;</span><br />
<br />
&nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">If</span> <span style="color: #ffff00; font-weight: bold;">Not</span> <span style=" ">&#40;</span><span style=" ">&#40;</span>offx &gt;= <span style="color: #FFFFFF;">0</span><span style=" ">&#41;</span> <span style="color: #ffff00; font-weight: bold;">And</span> <span style=" ">&#40;</span>offx &lt; gw<span style=" ">&#41;</span><span style=" ">&#41;</span> <span style="color: #ffff00; font-weight: bold;">Return</span><br />
&nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">If</span> <span style="color: #ffff00; font-weight: bold;">Not</span> <span style=" ">&#40;</span><span style=" ">&#40;</span>offz &gt;= <span style="color: #FFFFFF;">0</span><span style=" ">&#41;</span> <span style="color: #ffff00; font-weight: bold;">And</span> <span style=" ">&#40;</span>offz &lt; gh<span style=" ">&#41;</span><span style=" ">&#41;</span> <span style="color: #ffff00; font-weight: bold;">Return</span><br />
<br />
&nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">Local</span> x, z, c<br />
<br />
&nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">For</span> x = <span style="color: #FFFFFF;">0</span> <span style="color: #ffff00; font-weight: bold;">To</span> Width - <span style="color: #FFFFFF;">1</span><br />
&nbsp; &nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">For</span> z = <span style="color: #FFFFFF;">0</span> <span style="color: #ffff00; font-weight: bold;">To</span> Height - <span style="color: #FFFFFF;">1</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">If</span> <span style=" ">&#40;</span><span style=" ">&#40;</span>offx + x<span style=" ">&#41;</span> &lt; gw<span style=" ">&#41;</span> <span style="color: #ffff00; font-weight: bold;">And</span> <span style=" ">&#40;</span><span style=" ">&#40;</span>offz + z<span style=" ">&#41;</span> &lt; gh<span style=" ">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; c = <span style="color: #ffff00; font-weight: bold;">Floor</span><span style=" ">&#40;</span>Map#<span style=" ">&#91;</span>x, z<span style=" ">&#93;</span> * <span style="color: #FFFFFF;">255</span><span style=" ">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">SetColor</span> c, c, c<br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">Plot</span> <span style=" ">&#40;</span>offx + x<span style=" ">&#41;</span>, <span style=" ">&#40;</span>offz + z<span style=" ">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">EndIf</span><br />
&nbsp; &nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">Next</span><br />
&nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">Next</span><br />
<br />
&nbsp; <span style="color: #ffff00; font-weight: bold;">End</span> <span style="color: #ffff00; font-weight: bold;">Method</span><br />
<br />
<span style="color: #ffff00; font-weight: bold;">End</span> <span style="color: #ffff00; font-weight: bold;">Type</span><br />
<br />
<br />
<br />
<br />
<br />
<span style="color: #B1E7EB;">'==================================</span><br />
<span style="color: #B1E7EB;">' Cut and paste this and save it </span><br />
<span style="color: #B1E7EB;">' as hmaptest.bmx or whatever.</span><br />
<span style="color: #B1E7EB;">'==================================</span><br />
<br />
<br />
<br />
<span style="color: #B1E7EB;">Rem<br />
<br />
Height Map Test<br />
V0.1.0 BETA<br />
<br />
By Shane Raffa<br />
May 2005<br />
<br />
PURPOSE<br />
<br />
&nbsp; A crude, non-gui heightmap editing program to demonstrate usage <br />
&nbsp; of the THeightMap class. (See hmap010.bmx)<br />
<br />
TEST SYSTEM<br />
<br />
&nbsp; Athlon XP 1600+, 512MB, GeForce 3 Ti200 (64MB)<br />
&nbsp; Windows XP, BlitzMax<br />
<br />
EndRem</span><br />
<br />
<span style="color: #ffff00; font-weight: bold;">Type</span> THMapTest <span style="color: #ffff00; font-weight: bold;">Extends</span> THeightMap<br />
<br />
&nbsp; <span style="color: #ffff00; font-weight: bold;">Field</span> Img1:TImage<br />
<br />
&nbsp; <span style="color: #ffff00; font-weight: bold;">Field</span> ScrnX<br />
&nbsp; <span style="color: #ffff00; font-weight: bold;">Field</span> ScrnZ<br />
<br />
&nbsp; <span style="color: #ffff00; font-weight: bold;">Method</span> create<span style=" ">&#40;</span>w, h, sx = <span style="color: #FFFFFF;">0</span>, sz = <span style="color: #FFFFFF;">0</span><span style=" ">&#41;</span><br />
<br />
&nbsp; &nbsp; ScrnX = sx<br />
&nbsp; &nbsp; ScrnZ = sz<br />
&nbsp; &nbsp; resize<span style=" ">&#40;</span>w, h<span style=" ">&#41;</span><br />
&nbsp; &nbsp; Img1:TImage = <span style="color: #ffff00; font-weight: bold;">CreateImage</span><span style=" ">&#40;</span>Width, Height, <span style="color: #FFFFFF;">1</span>, DYNAMICIMAGE<span style=" ">&#41;</span><br />
&nbsp; &nbsp; generateMap<span style=" ">&#40;</span><span style=" ">&#41;</span><br />
<br />
&nbsp; <span style="color: #ffff00; font-weight: bold;">End</span> <span style="color: #ffff00; font-weight: bold;">Method</span><br />
&nbsp; <br />
&nbsp; <span style="color: #ffff00; font-weight: bold;">Method</span> destroy<span style=" ">&#40;</span><span style=" ">&#41;</span><br />
<br />
&nbsp; &nbsp; Img1 = <span style="color: #ffff00; font-weight: bold;">Null</span><br />
<br />
&nbsp; <span style="color: #ffff00; font-weight: bold;">End</span> <span style="color: #ffff00; font-weight: bold;">Method</span><br />
<br />
&nbsp; <span style="color: #ffff00; font-weight: bold;">Method</span> generateMap<span style=" ">&#40;</span><span style=" ">&#41;</span><br />
<br />
&nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">Local</span> n = <span style="color: #ffff00; font-weight: bold;">Rand</span><span style=" ">&#40;</span><span style="color: #FFFFFF;">0</span>, <span style="color: #FFFFFF;">5</span><span style=" ">&#41;</span><br />
<br />
&nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">DrawText</span> <span style="color: #00FF66;">&quot;Generating Map... &quot;</span>, ScrnX, ScrnZ<br />
&nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">Flip</span><br />
<br />
&nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">Select</span> n<br />
&nbsp; &nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">Case</span> <span style="color: #FFFFFF;">0</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; createPerlinMap<span style=" ">&#40;</span><span style="color: #ffff00; font-weight: bold;">MilliSecs</span><span style=" ">&#40;</span><span style=" ">&#41;</span>, <span style="color: #FFFFFF;">0.25</span>, <span style="color: #FFFFFF;">1.5</span><span style=" ">&#41;</span><br />
&nbsp; &nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">Case</span> <span style="color: #FFFFFF;">1</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; createMPDMap<span style=" ">&#40;</span><span style="color: #ffff00; font-weight: bold;">MilliSecs</span><span style=" ">&#40;</span><span style=" ">&#41;</span>, <span style="color: #FFFFFF;">0.5</span><span style=" ">&#41;</span><br />
&nbsp; &nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">Case</span> <span style="color: #FFFFFF;">2</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; createHillMap<span style=" ">&#40;</span><span style="color: #ffff00; font-weight: bold;">MilliSecs</span><span style=" ">&#40;</span><span style=" ">&#41;</span>, <span style="color: #FFFFFF;">1000</span>, <span style="color: #FFFFFF;">30</span><span style=" ">&#41;</span><br />
&nbsp; &nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">Case</span> <span style="color: #FFFFFF;">3</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; createParticleSMap<span style=" ">&#40;</span><span style="color: #ffff00; font-weight: bold;">MilliSecs</span><span style=" ">&#40;</span><span style=" ">&#41;</span>, <span style="color: #FFFFFF;">1000</span>, <span style="color: #FFFFFF;">1000</span><span style=" ">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; smoothen<span style=" ">&#40;</span><span style="color: #FFFFFF;">0.25</span><span style=" ">&#41;</span><br />
&nbsp; &nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">Case</span> <span style="color: #FFFFFF;">4</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; createParticleRMap<span style=" ">&#40;</span><span style="color: #ffff00; font-weight: bold;">MilliSecs</span><span style=" ">&#40;</span><span style=" ">&#41;</span>, <span style="color: #FFFFFF;">1000</span>, <span style="color: #FFFFFF;">1000</span><span style=" ">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; smoothen<span style=" ">&#40;</span><span style="color: #FFFFFF;">0.25</span><span style=" ">&#41;</span><br />
&nbsp; &nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">Case</span> <span style="color: #FFFFFF;">5</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; createFaultMap<span style=" ">&#40;</span><span style="color: #ffff00; font-weight: bold;">MilliSecs</span><span style=" ">&#40;</span><span style=" ">&#41;</span>, <span style="color: #FFFFFF;">500</span><span style=" ">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; smoothen<span style=" ">&#40;</span><span style="color: #FFFFFF;">0.25</span><span style=" ">&#41;</span><br />
&nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">End</span> <span style="color: #ffff00; font-weight: bold;">Select</span><br />
&nbsp; &nbsp; <br />
&nbsp; &nbsp; renderToImage<span style=" ">&#40;</span>Img1, <span style="color: #FFFFFF;">0</span>, <span style="color: #FFFFFF;">0</span><span style=" ">&#41;</span><br />
<br />
&nbsp; &nbsp; render<span style=" ">&#40;</span><span style=" ">&#41;</span><br />
&nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">Flip</span><br />
<br />
&nbsp; <span style="color: #ffff00; font-weight: bold;">End</span> <span style="color: #ffff00; font-weight: bold;">Method</span><br />
<br />
&nbsp; <span style="color: #ffff00; font-weight: bold;">Method</span> render<span style=" ">&#40;</span><span style=" ">&#41;</span><br />
<br />
&nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">DrawImage</span><span style=" ">&#40;</span>Img1, ScrnX, ScrnZ<span style=" ">&#41;</span><br />
&nbsp; &nbsp; <br />
&nbsp; <span style="color: #ffff00; font-weight: bold;">End</span> <span style="color: #ffff00; font-weight: bold;">Method</span><br />
<br />
<span style="color: #ffff00; font-weight: bold;">End</span> <span style="color: #ffff00; font-weight: bold;">Type</span><br />
<br />
<br />
<span style="color: #ffff00; font-weight: bold;">Graphics</span> <span style="color: #FFFFFF;">800</span>, <span style="color: #FFFFFF;">600</span><br />
<br />
<span style="color: #ffff00; font-weight: bold;">SetBlend</span><span style=" ">&#40;</span>SOLIDBLEND<span style=" ">&#41;</span><br />
<span style="color: #ffff00; font-weight: bold;">SetLineWidth</span><span style=" ">&#40;</span><span style="color: #FFFFFF;">2.0</span><span style=" ">&#41;</span><br />
<br />
<span style="color: #ffff00; font-weight: bold;">Global</span> Menu = <span style="color: #ffff00; font-weight: bold;">True</span><br />
<span style="color: #ffff00; font-weight: bold;">Global</span> Active = <span style="color: #FFFFFF;">0</span><br />
<br />
<span style="color: #ffff00; font-weight: bold;">Global</span> HMap:THMapTest<span style=" ">&#91;</span><span style=" ">&#93;</span> = <span style=" ">&#91;</span><span style="color: #ffff00; font-weight: bold;">New</span> THMapTest, <span style="color: #ffff00; font-weight: bold;">New</span> THMapTest, <span style="color: #ffff00; font-weight: bold;">New</span> THMapTest<span style=" ">&#93;</span><br />
<br />
HMap<span style=" ">&#91;</span><span style="color: #FFFFFF;">0</span><span style=" ">&#93;</span>.<span style="">create</span><span style=" ">&#40;</span><span style="color: #FFFFFF;">256</span>, <span style="color: #FFFFFF;">256</span>, <span style="color: #FFFFFF;">0</span>, <span style="color: #FFFFFF;">0</span><span style=" ">&#41;</span><br />
HMap<span style=" ">&#91;</span><span style="color: #FFFFFF;">1</span><span style=" ">&#93;</span>.<span style="">create</span><span style=" ">&#40;</span><span style="color: #FFFFFF;">256</span>, <span style="color: #FFFFFF;">256</span>, HMap<span style=" ">&#91;</span><span style="color: #FFFFFF;">0</span><span style=" ">&#93;</span>.<span style="">Width</span>, <span style="color: #FFFFFF;">0</span><span style=" ">&#41;</span><br />
HMap<span style=" ">&#91;</span><span style="color: #FFFFFF;">2</span><span style=" ">&#93;</span>.<span style="">create</span><span style=" ">&#40;</span><span style="color: #FFFFFF;">256</span>, <span style="color: #FFFFFF;">256</span>, HMap<span style=" ">&#91;</span><span style="color: #FFFFFF;">0</span><span style=" ">&#93;</span>.<span style="">Width</span> + HMap<span style=" ">&#91;</span><span style="color: #FFFFFF;">1</span><span style=" ">&#93;</span>.<span style="">Width</span>, <span style="color: #FFFFFF;">0</span><span style=" ">&#41;</span><br />
<br />
<span style="color: #ffff00; font-weight: bold;">While</span> <span style="color: #ffff00; font-weight: bold;">Not</span> <span style="color: #ffff00; font-weight: bold;">KeyHit</span><span style=" ">&#40;</span>KEY_ESCAPE<span style=" ">&#41;</span><br />
<br />
&nbsp; <span style="color: #ffff00; font-weight: bold;">Cls</span><br />
<br />
&nbsp; <span style="color: #ffff00; font-weight: bold;">For</span> <span style="color: #ffff00; font-weight: bold;">Local</span> i:THMapTest = <span style="color: #ffff00; font-weight: bold;">EachIn</span> HMap<br />
&nbsp; &nbsp; i.<span style="">render</span><span style=" ">&#40;</span><span style=" ">&#41;</span><br />
&nbsp; <span style="color: #ffff00; font-weight: bold;">Next</span><br />
<br />
&nbsp; <span style="color: #ffff00; font-weight: bold;">If</span> <span style="color: #ffff00; font-weight: bold;">MouseDown</span><span style=" ">&#40;</span><span style="color: #FFFFFF;">1</span><span style=" ">&#41;</span><br />
&nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">Local</span> c = <span style="color: #FFFFFF;">0</span><br />
&nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">For</span> i:THMapTest = <span style="color: #ffff00; font-weight: bold;">EachIn</span> HMap<br />
&nbsp; &nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">If</span> <span style=" ">&#40;</span><span style="color: #ffff00; font-weight: bold;">MouseX</span><span style=" ">&#40;</span><span style=" ">&#41;</span> &gt;= i.<span style="">ScrnX</span><span style=" ">&#41;</span> <span style="color: #ffff00; font-weight: bold;">And</span> <span style=" ">&#40;</span><span style="color: #ffff00; font-weight: bold;">MouseX</span><span style=" ">&#40;</span><span style=" ">&#41;</span> &lt; <span style=" ">&#40;</span>i.<span style="">ScrnX</span> + i.<span style="">Width</span><span style=" ">&#41;</span><span style=" ">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">If</span> <span style=" ">&#40;</span><span style="color: #ffff00; font-weight: bold;">MouseY</span><span style=" ">&#40;</span><span style=" ">&#41;</span> &gt;= i.<span style="">ScrnZ</span><span style=" ">&#41;</span> <span style="color: #ffff00; font-weight: bold;">And</span> <span style=" ">&#40;</span><span style="color: #ffff00; font-weight: bold;">MouseY</span><span style=" ">&#40;</span><span style=" ">&#41;</span> &lt; <span style=" ">&#40;</span>i.<span style="">ScrnZ</span> + i.<span style="">Height</span><span style=" ">&#41;</span><span style=" ">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Active = c<br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">EndIf</span><br />
&nbsp; &nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">EndIf</span><br />
&nbsp; &nbsp; &nbsp; c&nbsp;:+ <span style="color: #FFFFFF;">1</span><br />
&nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">Next</span><br />
&nbsp; <span style="color: #ffff00; font-weight: bold;">EndIf</span><br />
<br />
&nbsp; <span style="color: #ffff00; font-weight: bold;">If</span> Menu showMenu<span style=" ">&#40;</span><span style=" ">&#41;</span><br />
<br />
&nbsp; drawActiveBox<span style=" ">&#40;</span><span style=" ">&#41;</span><br />
<br />
&nbsp; processKeys<span style=" ">&#40;</span><span style=" ">&#41;</span><br />
&nbsp; <span style="color: #ffff00; font-weight: bold;">FlushKeys</span><span style=" ">&#40;</span><span style=" ">&#41;</span><br />
<br />
&nbsp; <span style="color: #ffff00; font-weight: bold;">Flip</span><br />
<br />
<span style="color: #ffff00; font-weight: bold;">Wend</span><br />
<br />
<span style="color: #ffff00; font-weight: bold;">For</span> i:THMapTest = <span style="color: #ffff00; font-weight: bold;">EachIn</span> HMap<br />
&nbsp; i.<span style="">destroy</span><span style=" ">&#40;</span><span style=" ">&#41;</span><br />
<span style="color: #ffff00; font-weight: bold;">Next</span><br />
<br />
FlushMem<br />
<br />
<span style="color: #ffff00; font-weight: bold;">EndGraphics</span><br />
<br />
<span style="color: #ffff00; font-weight: bold;">End</span><br />
<br />
<span style="color: #ffff00; font-weight: bold;">Function</span> drawActiveBox<span style=" ">&#40;</span><span style=" ">&#41;</span><br />
<br />
&nbsp; <span style="color: #ffff00; font-weight: bold;">SetColor</span><span style=" ">&#40;</span><span style="color: #FFFFFF;">0</span>, <span style="color: #FFFFFF;">255</span>, <span style="color: #FFFFFF;">0</span><span style=" ">&#41;</span><br />
&nbsp; <span style="color: #ffff00; font-weight: bold;">DrawLine</span> HMap<span style=" ">&#91;</span>Active<span style=" ">&#93;</span>.<span style="">ScrnX</span>, HMap<span style=" ">&#91;</span>Active<span style=" ">&#93;</span>.<span style="">ScrnZ</span>, HMap<span style=" ">&#91;</span>Active<span style=" ">&#93;</span>.<span style="">ScrnX</span> + HMap<span style=" ">&#91;</span>Active<span style=" ">&#93;</span>.<span style="">Width</span> - <span style="color: #FFFFFF;">1</span>, HMap<span style=" ">&#91;</span>Active<span style=" ">&#93;</span>.<span style="">ScrnZ</span><br />
&nbsp; <span style="color: #ffff00; font-weight: bold;">DrawLine</span> HMap<span style=" ">&#91;</span>Active<span style=" ">&#93;</span>.<span style="">ScrnX</span> + HMap<span style=" ">&#91;</span>Active<span style=" ">&#93;</span>.<span style="">Width</span> - <span style="color: #FFFFFF;">1</span>, HMap<span style=" ">&#91;</span>Active<span style=" ">&#93;</span>.<span style="">ScrnZ</span>, HMap<span style=" ">&#91;</span>Active<span style=" ">&#93;</span>.<span style="">ScrnX</span> + HMap<span style=" ">&#91;</span>Active<span style=" ">&#93;</span>.<span style="">Width</span> - <span style="color: #FFFFFF;">1</span>, HMap<span style=" ">&#91;</span>Active<span style=" ">&#93;</span>.<span style="">ScrnZ</span> + HMap<span style=" ">&#91;</span>Active<span style=" ">&#93;</span>.<span style="">Height</span> - <span style="color: #FFFFFF;">1</span><br />
&nbsp; <span style="color: #ffff00; font-weight: bold;">DrawLine</span> HMap<span style=" ">&#91;</span>Active<span style=" ">&#93;</span>.<span style="">ScrnX</span>, HMap<span style=" ">&#91;</span>Active<span style=" ">&#93;</span>.<span style="">ScrnZ</span> + HMap<span style=" ">&#91;</span>Active<span style=" ">&#93;</span>.<span style="">Height</span> - <span style="color: #FFFFFF;">1</span>, HMap<span style=" ">&#91;</span>Active<span style=" ">&#93;</span>.<span style="">ScrnX</span> + HMap<span style=" ">&#91;</span>Active<span style=" ">&#93;</span>.<span style="">Width</span> - <span style="color: #FFFFFF;">1</span>, HMap<span style=" ">&#91;</span>Active<span style=" ">&#93;</span>.<span style="">ScrnZ</span> + HMap<span style=" ">&#91;</span>Active<span style=" ">&#93;</span>.<span style="">Height</span> - <span style="color: #FFFFFF;">1</span><br />
&nbsp; <span style="color: #ffff00; font-weight: bold;">DrawLine</span> HMap<span style=" ">&#91;</span>Active<span style=" ">&#93;</span>.<span style="">ScrnX</span>, HMap<span style=" ">&#91;</span>Active<span style=" ">&#93;</span>.<span style="">ScrnZ</span>, HMap<span style=" ">&#91;</span>Active<span style=" ">&#93;</span>.<span style="">ScrnX</span>, HMap<span style=" ">&#91;</span>Active<span style=" ">&#93;</span>.<span style="">ScrnZ</span> + HMap<span style=" ">&#91;</span>Active<span style=" ">&#93;</span>.<span style="">Height</span> - <span style="color: #FFFFFF;">1</span><br />
&nbsp; <span style="color: #ffff00; font-weight: bold;">SetColor</span><span style=" ">&#40;</span><span style="color: #FFFFFF;">255</span>, <span style="color: #FFFFFF;">255</span>, <span style="color: #FFFFFF;">255</span><span style=" ">&#41;</span><br />
<br />
<span style="color: #ffff00; font-weight: bold;">End</span> <span style="color: #ffff00; font-weight: bold;">Function</span><br />
<br />
<span style="color: #ffff00; font-weight: bold;">Function</span> showMenu<span style=" ">&#40;</span><span style=" ">&#41;</span><br />
<br />
&nbsp; <span style="color: #ffff00; font-weight: bold;">DrawText</span> <span style="color: #00FF66;">&quot;SELECT&quot;</span>, <span style="color: #FFFFFF;">5</span>, <span style="color: #FFFFFF;">300</span><br />
&nbsp; <span style="color: #ffff00; font-weight: bold;">DrawText</span> <span style="color: #00FF66;">&quot;------&quot;</span>, <span style="color: #FFFFFF;">5</span>, <span style="color: #FFFFFF;">315</span><br />
&nbsp; <span style="color: #ffff00; font-weight: bold;">DrawText</span> <span style="color: #00FF66;">&quot;{Left Click} - Select&quot;</span>, <span style="color: #FFFFFF;">5</span>, <span style="color: #FFFFFF;">330</span><br />
&nbsp; <span style="color: #ffff00; font-weight: bold;">DrawText</span> <span style="color: #00FF66;">&quot;UP ARROW - Next&quot;</span>, <span style="color: #FFFFFF;">5</span>, <span style="color: #FFFFFF;">345</span><br />
&nbsp; <span style="color: #ffff00; font-weight: bold;">DrawText</span> <span style="color: #00FF66;">&quot;RIGHT ARROW - Next&quot;</span>, <span style="color: #FFFFFF;">5</span>, <span style="color: #FFFFFF;">360</span><br />
&nbsp; <span style="color: #ffff00; font-weight: bold;">DrawText</span> <span style="color: #00FF66;">&quot;DOWN ARROW - Previous&quot;</span>, <span style="color: #FFFFFF;">5</span>, <span style="color: #FFFFFF;">375</span><br />
&nbsp; <span style="color: #ffff00; font-weight: bold;">DrawText</span> <span style="color: #00FF66;">&quot;LEFT ARROW - Previous&quot;</span>, <span style="color: #FFFFFF;">5</span>, <span style="color: #FFFFFF;">390</span><br />
&nbsp; <span style="color: #ffff00; font-weight: bold;">DrawText</span> <span style="color: #00FF66;">&quot;ESC - Exit&quot;</span>, <span style="color: #FFFFFF;">5</span>, <span style="color: #FFFFFF;">405</span><br />
&nbsp; <span style="color: #ffff00; font-weight: bold;">DrawText</span> <span style="color: #00FF66;">&quot;TAB - Toggle Menu&quot;</span>, <span style="color: #FFFFFF;">5</span>, <span style="color: #FFFFFF;">420</span><br />
<br />
&nbsp; <span style="color: #ffff00; font-weight: bold;">DrawText</span> <span style="color: #00FF66;">&quot;CREATE&quot;</span>, <span style="color: #FFFFFF;">200</span>, <span style="color: #FFFFFF;">300</span><br />
&nbsp; <span style="color: #ffff00; font-weight: bold;">DrawText</span> <span style="color: #00FF66;">&quot;------&quot;</span>, <span style="color: #FFFFFF;">200</span>, <span style="color: #FFFFFF;">315</span><br />
&nbsp; <span style="color: #ffff00; font-weight: bold;">DrawText</span> <span style="color: #00FF66;">&quot;1 - Random&quot;</span>, <span style="color: #FFFFFF;">200</span>, <span style="color: #FFFFFF;">330</span><br />
&nbsp; <span style="color: #ffff00; font-weight: bold;">DrawText</span> <span style="color: #00FF66;">&quot;2 - Perlin&quot;</span>, <span style="color: #FFFFFF;">200</span>, <span style="color: #FFFFFF;">345</span><br />
&nbsp; <span style="color: #ffff00; font-weight: bold;">DrawText</span> <span style="color: #00FF66;">&quot;3 - Midpoint Disp.&quot;</span>, <span style="color: #FFFFFF;">200</span>, <span style="color: #FFFFFF;">360</span><br />
&nbsp; <span style="color: #ffff00; font-weight: bold;">DrawText</span> <span style="color: #00FF66;">&quot;4 - Hill&quot;</span>, <span style="color: #FFFFFF;">200</span>, <span style="color: #FFFFFF;">375</span><br />
&nbsp; <span style="color: #ffff00; font-weight: bold;">DrawText</span> <span style="color: #00FF66;">&quot;5 - Sticky Particle&quot;</span>, <span style="color: #FFFFFF;">200</span>, <span style="color: #FFFFFF;">390</span><br />
&nbsp; <span style="color: #ffff00; font-weight: bold;">DrawText</span> <span style="color: #00FF66;">&quot;6 - Rolling Particle&quot;</span>, <span style="color: #FFFFFF;">200</span>, <span style="color: #FFFFFF;">405</span><br />
&nbsp; <span style="color: #ffff00; font-weight: bold;">DrawText</span> <span style="color: #00FF66;">&quot;7 - Fault&quot;</span>, <span style="color: #FFFFFF;">200</span>, <span style="color: #FFFFFF;">420</span><br />
&nbsp; <span style="color: #ffff00; font-weight: bold;">DrawText</span> <span style="color: #00FF66;">&quot;0 - Clear&quot;</span>, <span style="color: #FFFFFF;">200</span>, <span style="color: #FFFFFF;">435</span><br />
<br />
&nbsp; <span style="color: #ffff00; font-weight: bold;">DrawText</span> <span style="color: #00FF66;">&quot;PROCESS&quot;</span>, <span style="color: #FFFFFF;">400</span>, <span style="color: #FFFFFF;">300</span><br />
&nbsp; <span style="color: #ffff00; font-weight: bold;">DrawText</span> <span style="color: #00FF66;">&quot;-------&quot;</span>, <span style="color: #FFFFFF;">400</span>, <span style="color: #FFFFFF;">315</span><br />
&nbsp; <span style="color: #ffff00; font-weight: bold;">DrawText</span> <span style="color: #00FF66;">&quot;SPACE - Smoothen&quot;</span>, <span style="color: #FFFFFF;">400</span>, <span style="color: #FFFFFF;">330</span><br />
&nbsp; <span style="color: #ffff00; font-weight: bold;">DrawText</span> <span style="color: #00FF66;">&quot;f - Flatten&quot;</span>, <span style="color: #FFFFFF;">400</span>, <span style="color: #FFFFFF;">345</span><br />
&nbsp; <span style="color: #ffff00; font-weight: bold;">DrawText</span> <span style="color: #00FF66;">&quot;c - Coast&quot;</span>, <span style="color: #FFFFFF;">400</span>, <span style="color: #FFFFFF;">360</span><br />
&nbsp; <span style="color: #ffff00; font-weight: bold;">DrawText</span> <span style="color: #00FF66;">&quot;a - Blend Add&quot;</span>, <span style="color: #FFFFFF;">400</span>, <span style="color: #FFFFFF;">375</span><br />
&nbsp; <span style="color: #ffff00; font-weight: bold;">DrawText</span> <span style="color: #00FF66;">&quot;s - Blend Subtract&quot;</span>, <span style="color: #FFFFFF;">400</span>, <span style="color: #FFFFFF;">390</span><br />
&nbsp; <span style="color: #ffff00; font-weight: bold;">DrawText</span> <span style="color: #00FF66;">&quot;m - Blend Multiply&quot;</span>, <span style="color: #FFFFFF;">400</span>, <span style="color: #FFFFFF;">405</span><br />
&nbsp; <span style="color: #ffff00; font-weight: bold;">DrawText</span> <span style="color: #00FF66;">&quot;d - Blend Divide&quot;</span>, <span style="color: #FFFFFF;">400</span>, <span style="color: #FFFFFF;">420</span><br />
&nbsp; <span style="color: #ffff00; font-weight: bold;">DrawText</span> <span style="color: #00FF66;">&quot;h - Blend Highest&quot;</span>, <span style="color: #FFFFFF;">400</span>, <span style="color: #FFFFFF;">435</span><br />
&nbsp; <span style="color: #ffff00; font-weight: bold;">DrawText</span> <span style="color: #00FF66;">&quot;l - Blend Lowest&quot;</span>, <span style="color: #FFFFFF;">400</span>, <span style="color: #FFFFFF;">450</span><br />
&nbsp; <span style="color: #ffff00; font-weight: bold;">DrawText</span> <span style="color: #00FF66;">&quot;r - Blend Replace&quot;</span>, <span style="color: #FFFFFF;">400</span>, <span style="color: #FFFFFF;">465</span><br />
<br />
&nbsp; <span style="color: #ffff00; font-weight: bold;">DrawText</span> <span style="color: #00FF66;">&quot;IMPORT/EXPORT&quot;</span>, <span style="color: #FFFFFF;">600</span>, <span style="color: #FFFFFF;">300</span><br />
&nbsp; <span style="color: #ffff00; font-weight: bold;">DrawText</span> <span style="color: #00FF66;">&quot;-------------&quot;</span>, <span style="color: #FFFFFF;">600</span>, <span style="color: #FFFFFF;">315</span><br />
&nbsp; <span style="color: #ffff00; font-weight: bold;">DrawText</span> <span style="color: #00FF66;">&quot;F1 - Export Binary&quot;</span>, <span style="color: #FFFFFF;">600</span>, <span style="color: #FFFFFF;">330</span><br />
&nbsp; <span style="color: #ffff00; font-weight: bold;">DrawText</span> <span style="color: #00FF66;">&quot;F2 - Export PNG&quot;</span>, <span style="color: #FFFFFF;">600</span>, <span style="color: #FFFFFF;">345</span><br />
&nbsp; <span style="color: #ffff00; font-weight: bold;">DrawText</span> <span style="color: #00FF66;">&quot;F3 - Export X3D&quot;</span>, <span style="color: #FFFFFF;">600</span>, <span style="color: #FFFFFF;">360</span><br />
&nbsp; <span style="color: #ffff00; font-weight: bold;">DrawText</span> <span style="color: #00FF66;">&quot;F5 - Import Binary&quot;</span>, <span style="color: #FFFFFF;">600</span>, <span style="color: #FFFFFF;">390</span><br />
&nbsp; <span style="color: #ffff00; font-weight: bold;">DrawText</span> <span style="color: #00FF66;">&quot;F6 - Import PNG&quot;</span>, <span style="color: #FFFFFF;">600</span>, <span style="color: #FFFFFF;">405</span><br />
&nbsp; <span style="color: #ffff00; font-weight: bold;">DrawText</span> <span style="color: #00FF66;">&quot;F10 - Export...&quot;</span>, <span style="color: #FFFFFF;">600</span>, <span style="color: #FFFFFF;">435</span><br />
&nbsp; <span style="color: #ffff00; font-weight: bold;">DrawText</span> <span style="color: #00FF66;">&quot;F12 - Import...&quot;</span>, <span style="color: #FFFFFF;">600</span>, <span style="color: #FFFFFF;">450</span><br />
<br />
<span style="color: #ffff00; font-weight: bold;">End</span> <span style="color: #ffff00; font-weight: bold;">Function</span><br />
<br />
<span style="color: #ffff00; font-weight: bold;">Function</span> processKeys<span style=" ">&#40;</span><span style=" ">&#41;</span><br />
&nbsp; <br />
&nbsp; <span style="color: #ffff00; font-weight: bold;">If</span> <span style="color: #ffff00; font-weight: bold;">KeyDown</span><span style=" ">&#40;</span>KEY_0<span style=" ">&#41;</span><br />
&nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">DrawText</span> <span style="color: #00FF66;">&quot;Clearing... &quot;</span>, HMap<span style=" ">&#91;</span>Active<span style=" ">&#93;</span>.<span style="">ScrnX</span>, HMap<span style=" ">&#91;</span>Active<span style=" ">&#93;</span>.<span style="">ScrnZ</span><br />
&nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">Flip</span><br />
&nbsp; &nbsp; HMap<span style=" ">&#91;</span>Active<span style=" ">&#93;</span>.<span style="">fill</span><span style=" ">&#40;</span><span style="color: #FFFFFF;">0.0</span><span style=" ">&#41;</span><br />
&nbsp; &nbsp; HMap<span style=" ">&#91;</span>Active<span style=" ">&#93;</span>.<span style="">renderToImage</span><span style=" ">&#40;</span>HMap<span style=" ">&#91;</span>Active<span style=" ">&#93;</span>.<span style="">Img1</span>, <span style="color: #FFFFFF;">0</span>, <span style="color: #FFFFFF;">0</span><span style=" ">&#41;</span><br />
&nbsp; <span style="color: #ffff00; font-weight: bold;">End</span> <span style="color: #ffff00; font-weight: bold;">If</span><br />
&nbsp; <span style="color: #ffff00; font-weight: bold;">If</span> <span style="color: #ffff00; font-weight: bold;">KeyDown</span><span style=" ">&#40;</span>KEY_1<span style=" ">&#41;</span><br />
&nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">DrawText</span> <span style="color: #00FF66;">&quot;Generating Random... &quot;</span>, HMap<span style=" ">&#91;</span>Active<span style=" ">&#93;</span>.<span style="">ScrnX</span>, HMap<span style=" ">&#91;</span>Active<span style=" ">&#93;</span>.<span style="">ScrnZ</span><br />
&nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">Flip</span><br />
&nbsp; &nbsp; HMap<span style=" ">&#91;</span>Active<span style=" ">&#93;</span>.<span style="">createRandomMap</span><span style=" ">&#40;</span><span style="color: #ffff00; font-weight: bold;">MilliSecs</span><span style=" ">&#40;</span><span style=" ">&#41;</span><span style=" ">&#41;</span><br />
&nbsp; &nbsp; HMap<span style=" ">&#91;</span>Active<span style=" ">&#93;</span>.<span style="">renderToImage</span><span style=" ">&#40;</span>HMap<span style=" ">&#91;</span>Active<span style=" ">&#93;</span>.<span style="">Img1</span>, <span style="color: #FFFFFF;">0</span>, <span style="color: #FFFFFF;">0</span><span style=" ">&#41;</span><br />
&nbsp; <span style="color: #ffff00; font-weight: bold;">End</span> <span style="color: #ffff00; font-weight: bold;">If</span><br />
&nbsp; <span style="color: #ffff00; font-weight: bold;">If</span> <span style="color: #ffff00; font-weight: bold;">KeyDown</span><span style=" ">&#40;</span>KEY_2<span style=" ">&#41;</span><br />
&nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">DrawText</span> <span style="color: #00FF66;">&quot;Generating Perlin... &quot;</span>, HMap<span style=" ">&#91;</span>Active<span style=" ">&#93;</span>.<span style="">ScrnX</span>, HMap<span style=" ">&#91;</span>Active<span style=" ">&#93;</span>.<span style="">ScrnZ</span><br />
&nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">Flip</span><br />
&nbsp; &nbsp; HMap<span style=" ">&#91;</span>Active<span style=" ">&#93;</span>.<span style="">createPerlinMap</span><span style=" ">&#40;</span><span style="color: #ffff00; font-weight: bold;">MilliSecs</span><span style=" ">&#40;</span><span style=" ">&#41;</span>, <span style="color: #FFFFFF;">0.25</span>, <span style="color: #FFFFFF;">1.5</span><span style=" ">&#41;</span><br />
&nbsp; &nbsp; HMap<span style=" ">&#91;</span>Active<span style=" ">&#93;</span>.<span style="">renderToImage</span><span style=" ">&#40;</span>HMap<span style=" ">&#91;</span>Active<span style=" ">&#93;</span>.<span style="">Img1</span>, <span style="color: #FFFFFF;">0</span>, <span style="color: #FFFFFF;">0</span><span style=" ">&#41;</span><br />
&nbsp; <span style="color: #ffff00; font-weight: bold;">End</span> <span style="color: #ffff00; font-weight: bold;">If</span><br />
&nbsp; <span style="color: #ffff00; font-weight: bold;">If</span> <span style="color: #ffff00; font-weight: bold;">KeyDown</span><span style=" ">&#40;</span>KEY_3<span style=" ">&#41;</span><br />
&nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">DrawText</span> <span style="color: #00FF66;">&quot;Generating MPD... &quot;</span>, HMap<span style=" ">&#91;</span>Active<span style=" ">&#93;</span>.<span style="">ScrnX</span>, HMap<span style=" ">&#91;</span>Active<span style=" ">&#93;</span>.<span style="">ScrnZ</span><br />
&nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">Flip</span><br />
&nbsp; &nbsp; HMap<span style=" ">&#91;</span>Active<span style=" ">&#93;</span>.<span style="">createMPDMap</span><span style=" ">&#40;</span><span style="color: #ffff00; font-weight: bold;">MilliSecs</span><span style=" ">&#40;</span><span style=" ">&#41;</span>, <span style="color: #FFFFFF;">0.5</span><span style=" ">&#41;</span><br />
&nbsp; &nbsp; HMap<span style=" ">&#91;</span>Active<span style=" ">&#93;</span>.<span style="">renderToImage</span><span style=" ">&#40;</span>HMap<span style=" ">&#91;</span>Active<span style=" ">&#93;</span>.<span style="">Img1</span>, <span style="color: #FFFFFF;">0</span>, <span style="color: #FFFFFF;">0</span><span style=" ">&#41;</span><br />
&nbsp; <span style="color: #ffff00; font-weight: bold;">End</span> <span style="color: #ffff00; font-weight: bold;">If</span><br />
&nbsp; <span style="color: #ffff00; font-weight: bold;">If</span> <span style="color: #ffff00; font-weight: bold;">KeyDown</span><span style=" ">&#40;</span>KEY_4<span style=" ">&#41;</span><br />
&nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">DrawText</span> <span style="color: #00FF66;">&quot;Generating Hill... &quot;</span>, HMap<span style=" ">&#91;</span>Active<span style=" ">&#93;</span>.<span style="">ScrnX</span>, HMap<span style=" ">&#91;</span>Active<span style=" ">&#93;</span>.<span style="">ScrnZ</span><br />
&nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">Flip</span><br />
&nbsp; &nbsp; HMap<span style=" ">&#91;</span>Active<span style=" ">&#93;</span>.<span style="">createHillMap</span><span style=" ">&#40;</span><span style="color: #ffff00; font-weight: bold;">MilliSecs</span><span style=" ">&#40;</span><span style=" ">&#41;</span>, <span style="color: #FFFFFF;">1000</span>, <span style="color: #FFFFFF;">30</span><span style=" ">&#41;</span><br />
&nbsp; &nbsp; HMap<span style=" ">&#91;</span>Active<span style=" ">&#93;</span>.<span style="">renderToImage</span><span style=" ">&#40;</span>HMap<span style=" ">&#91;</span>Active<span style=" ">&#93;</span>.<span style="">Img1</span>, <span style="color: #FFFFFF;">0</span>, <span style="color: #FFFFFF;">0</span><span style=" ">&#41;</span><br />
&nbsp; <span style="color: #ffff00; font-weight: bold;">End</span> <span style="color: #ffff00; font-weight: bold;">If</span><br />
&nbsp; <span style="color: #ffff00; font-weight: bold;">If</span> <span style="color: #ffff00; font-weight: bold;">KeyDown</span><span style=" ">&#40;</span>KEY_5<span style=" ">&#41;</span><br />
&nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">DrawText</span> <span style="color: #00FF66;">&quot;Generating S Particle... &quot;</span>, HMap<span style=" ">&#91;</span>Active<span style=" ">&#93;</span>.<span style="">ScrnX</span>, HMap<span style=" ">&#91;</span>Active<span style=" ">&#93;</span>.<span style="">ScrnZ</span><br />
&nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">Flip</span><br />
&nbsp; &nbsp; HMap<span style=" ">&#91;</span>Active<span style=" ">&#93;</span>.<span style="">createParticleSMap</span><span style=" ">&#40;</span><span style="color: #ffff00; font-weight: bold;">MilliSecs</span><span style=" ">&#40;</span><span style=" ">&#41;</span>, <span style="color: #FFFFFF;">1000</span>, <span style="color: #FFFFFF;">1000</span><span style=" ">&#41;</span><br />
&nbsp; &nbsp; HMap<span style=" ">&#91;</span>Active<span style=" ">&#93;</span>.<span style="">renderToImage</span><span style=" ">&#40;</span>HMap<span style=" ">&#91;</span>Active<span style=" ">&#93;</span>.<span style="">Img1</span>, <span style="color: #FFFFFF;">0</span>, <span style="color: #FFFFFF;">0</span><span style=" ">&#41;</span><br />
&nbsp; <span style="color: #ffff00; font-weight: bold;">End</span> <span style="color: #ffff00; font-weight: bold;">If</span><br />
&nbsp; <span style="color: #ffff00; font-weight: bold;">If</span> <span style="color: #ffff00; font-weight: bold;">KeyDown</span><span style=" ">&#40;</span>KEY_6<span style=" ">&#41;</span><br />
&nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">DrawText</span> <span style="color: #00FF66;">&quot;Generating R Particle... &quot;</span>, HMap<span style=" ">&#91;</span>Active<span style=" ">&#93;</span>.<span style="">ScrnX</span>, HMap<span style=" ">&#91;</span>Active<span style=" ">&#93;</span>.<span style="">ScrnZ</span><br />
&nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">Flip</span><br />
&nbsp; &nbsp; HMap<span style=" ">&#91;</span>Active<span style=" ">&#93;</span>.<span style="">createParticleRMap</span><span style=" ">&#40;</span><span style="color: #ffff00; font-weight: bold;">MilliSecs</span><span style=" ">&#40;</span><span style=" ">&#41;</span>, <span style="color: #FFFFFF;">1000</span>, <span style="color: #FFFFFF;">1000</span><span style=" ">&#41;</span><br />
&nbsp; &nbsp; HMap<span style=" ">&#91;</span>Active<span style=" ">&#93;</span>.<span style="">renderToImage</span><span style=" ">&#40;</span>HMap<span style=" ">&#91;</span>Active<span style=" ">&#93;</span>.<span style="">Img1</span>, <span style="color: #FFFFFF;">0</span>, <span style="color: #FFFFFF;">0</span><span style=" ">&#41;</span><br />
&nbsp; <span style="color: #ffff00; font-weight: bold;">End</span> <span style="color: #ffff00; font-weight: bold;">If</span><br />
&nbsp; <span style="color: #ffff00; font-weight: bold;">If</span> <span style="color: #ffff00; font-weight: bold;">KeyDown</span><span style=" ">&#40;</span>KEY_7<span style=" ">&#41;</span><br />
&nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">DrawText</span> <span style="color: #00FF66;">&quot;Generating Fault... &quot;</span>, HMap<span style=" ">&#91;</span>Active<span style=" ">&#93;</span>.<span style="">ScrnX</span>, HMap<span style=" ">&#91;</span>Active<span style=" ">&#93;</span>.<span style="">ScrnZ</span><br />
&nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">Flip</span><br />
&nbsp; &nbsp; HMap<span style=" ">&#91;</span>Active<span style=" ">&#93;</span>.<span style="">createFaultMap</span><span style=" ">&#40;</span><span style="color: #ffff00; font-weight: bold;">MilliSecs</span><span style=" ">&#40;</span><span style=" ">&#41;</span>, <span style="color: #FFFFFF;">500</span><span style=" ">&#41;</span><br />
&nbsp; &nbsp; HMap<span style=" ">&#91;</span>Active<span style=" ">&#93;</span>.<span style="">renderToImage</span><span style=" ">&#40;</span>HMap<span style=" ">&#91;</span>Active<span style=" ">&#93;</span>.<span style="">Img1</span>, <span style="color: #FFFFFF;">0</span>, <span style="color: #FFFFFF;">0</span><span style=" ">&#41;</span><br />
&nbsp; <span style="color: #ffff00; font-weight: bold;">End</span> <span style="color: #ffff00; font-weight: bold;">If</span><br />
<br />
&nbsp; <span style="color: #ffff00; font-weight: bold;">If</span> <span style="color: #ffff00; font-weight: bold;">KeyDown</span><span style=" ">&#40;</span>KEY_UP<span style=" ">&#41;</span> <span style="color: #ffff00; font-weight: bold;">Or</span> <span style="color: #ffff00; font-weight: bold;">KeyDown</span><span style=" ">&#40;</span>KEY_RIGHT<span style=" ">&#41;</span><br />
&nbsp; &nbsp; Active&nbsp;:+ <span style="color: #FFFFFF;">1</span><br />
&nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">If</span> Active &gt;= HMap.<span style="">length</span> Active = <span style="color: #FFFFFF;">0</span><br />
&nbsp; <span style="color: #ffff00; font-weight: bold;">End</span> <span style="color: #ffff00; font-weight: bold;">If</span><br />
<br />
&nbsp; <span style="color: #ffff00; font-weight: bold;">If</span> <span style="color: #ffff00; font-weight: bold;">KeyDown</span><span style=" ">&#40;</span>KEY_DOWN<span style=" ">&#41;</span> <span style="color: #ffff00; font-weight: bold;">Or</span> <span style="color: #ffff00; font-weight: bold;">KeyDown</span><span style=" ">&#40;</span>KEY_LEFT<span style=" ">&#41;</span><br />
&nbsp; &nbsp; Active&nbsp;:- <span style="color: #FFFFFF;">1</span><br />
&nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">If</span> Active &lt; <span style="color: #FFFFFF;">0</span> Active = HMap.<span style="">length</span> - <span style="color: #FFFFFF;">1</span><br />
&nbsp; <span style="color: #ffff00; font-weight: bold;">End</span> <span style="color: #ffff00; font-weight: bold;">If</span><br />
<br />
&nbsp; <span style="color: #ffff00; font-weight: bold;">If</span> <span style="color: #ffff00; font-weight: bold;">KeyDown</span><span style=" ">&#40;</span>KEY_TAB<span style=" ">&#41;</span> <br />
&nbsp; &nbsp; Menu = <span style="color: #ffff00; font-weight: bold;">Not</span> Menu<br />
&nbsp; <span style="color: #ffff00; font-weight: bold;">End</span> <span style="color: #ffff00; font-weight: bold;">If</span><br />
<br />
&nbsp; <span style="color: #ffff00; font-weight: bold;">If</span> <span style="color: #ffff00; font-weight: bold;">KeyDown</span><span style=" ">&#40;</span>KEY_SPACE<span style=" ">&#41;</span><br />
&nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">DrawText</span> <span style="color: #00FF66;">&quot;Smoothing... &quot;</span>, HMap<span style=" ">&#91;</span>Active<span style=" ">&#93;</span>.<span style="">ScrnX</span>, HMap<span style=" ">&#91;</span>Active<span style=" ">&#93;</span>.<span style="">ScrnZ</span><br />
&nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">Flip</span><br />
&nbsp; &nbsp; HMap<span style=" ">&#91;</span>Active<span style=" ">&#93;</span>.<span style="">smoothen</span><span style=" ">&#40;</span><span style="color: #FFFFFF;">0.75</span><span style=" ">&#41;</span><br />
&nbsp; &nbsp; HMap<span style=" ">&#91;</span>Active<span style=" ">&#93;</span>.<span style="">renderToImage</span><span style=" ">&#40;</span>HMap<span style=" ">&#91;</span>Active<span style=" ">&#93;</span>.<span style="">Img1</span>, <span style="color: #FFFFFF;">0</span>, <span style="color: #FFFFFF;">0</span><span style=" ">&#41;</span><br />
&nbsp; <span style="color: #ffff00; font-weight: bold;">EndIf</span><br />
<br />
&nbsp; <span style="color: #ffff00; font-weight: bold;">If</span> <span style="color: #ffff00; font-weight: bold;">KeyDown</span><span style=" ">&#40;</span>KEY_F<span style=" ">&#41;</span><br />
&nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">DrawText</span> <span style="color: #00FF66;">&quot;Flattening... &quot;</span>, HMap<span style=" ">&#91;</span>Active<span style=" ">&#93;</span>.<span style="">ScrnX</span>, HMap<span style=" ">&#91;</span>Active<span style=" ">&#93;</span>.<span style="">ScrnZ</span><br />
&nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">Flip</span><br />
&nbsp; &nbsp; HMap<span style=" ">&#91;</span>Active<span style=" ">&#93;</span>.<span style="">flatten</span><span style=" ">&#40;</span><span style="color: #FFFFFF;">2</span><span style=" ">&#41;</span><br />
&nbsp; &nbsp; HMap<span style=" ">&#91;</span>Active<span style=" ">&#93;</span>.<span style="">renderToImage</span><span style=" ">&#40;</span>HMap<span style=" ">&#91;</span>Active<span style=" ">&#93;</span>.<span style="">Img1</span>, <span style="color: #FFFFFF;">0</span>, <span style="color: #FFFFFF;">0</span><span style=" ">&#41;</span><br />
&nbsp; <span style="color: #ffff00; font-weight: bold;">EndIf</span><br />
<br />
&nbsp; <span style="color: #ffff00; font-weight: bold;">If</span> <span style="color: #ffff00; font-weight: bold;">KeyDown</span><span style=" ">&#40;</span>KEY_C<span style=" ">&#41;</span><br />
&nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">DrawText</span> <span style="color: #00FF66;">&quot;Making Coast... &quot;</span>, HMap<span style=" ">&#91;</span>Active<span style=" ">&#93;</span>.<span style="">ScrnX</span>, HMap<span style=" ">&#91;</span>Active<span style=" ">&#93;</span>.<span style="">ScrnZ</span><br />
&nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">Flip</span><br />
&nbsp; &nbsp; HMap<span style=" ">&#91;</span>Active<span style=" ">&#93;</span>.<span style="">makeCoast</span><span style=" ">&#40;</span><span style="color: #FFFFFF;">0.5</span>, <span style="color: #FFFFFF;">0.1</span><span style=" ">&#41;</span><br />
&nbsp; &nbsp; HMap<span style=" ">&#91;</span>Active<span style=" ">&#93;</span>.<span style="">renderToImage</span><span style=" ">&#40;</span>HMap<span style=" ">&#91;</span>Active<span style=" ">&#93;</span>.<span style="">Img1</span>, <span style="color: #FFFFFF;">0</span>, <span style="color: #FFFFFF;">0</span><span style=" ">&#41;</span><br />
&nbsp; <span style="color: #ffff00; font-weight: bold;">EndIf</span><br />
<br />
&nbsp; <span style="color: #ffff00; font-weight: bold;">If</span> <span style="color: #ffff00; font-weight: bold;">KeyDown</span><span style=" ">&#40;</span>KEY_A<span style=" ">&#41;</span><br />
&nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">DrawText</span> <span style="color: #00FF66;">&quot;Blending (Add)... &quot;</span>, HMap<span style=" ">&#91;</span>Active<span style=" ">&#93;</span>.<span style="">ScrnX</span>, HMap<span style=" ">&#91;</span>Active<span style=" ">&#93;</span>.<span style="">ScrnZ</span><br />
&nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">Flip</span><br />
&nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">Select</span> Active<br />
&nbsp; &nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">Case</span> <span style="color: #FFFFFF;">0</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; THeightMap.<span style="">blendMapsAdd</span><span style=" ">&#40;</span>HMap<span style=" ">&#91;</span><span style="color: #FFFFFF;">1</span><span style=" ">&#93;</span>, HMap<span style=" ">&#91;</span><span style="color: #FFFFFF;">2</span><span style=" ">&#93;</span>, HMap<span style=" ">&#91;</span>Active<span style=" ">&#93;</span><span style=" ">&#41;</span><br />
&nbsp; &nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">Case</span> <span style="color: #FFFFFF;">1</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; THeightMap.<span style="">blendMapsAdd</span><span style=" ">&#40;</span>HMap<span style=" ">&#91;</span><span style="color: #FFFFFF;">0</span><span style=" ">&#93;</span>, HMap<span style=" ">&#91;</span><span style="color: #FFFFFF;">2</span><span style=" ">&#93;</span>, HMap<span style=" ">&#91;</span>Active<span style=" ">&#93;</span><span style=" ">&#41;</span><br />
&nbsp; &nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">Case</span> <span style="color: #FFFFFF;">2</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; THeightMap.<span style="">blendMapsAdd</span><span style=" ">&#40;</span>HMap<span style=" ">&#91;</span><span style="color: #FFFFFF;">0</span><span style=" ">&#93;</span>, HMap<span style=" ">&#91;</span><span style="color: #FFFFFF;">1</span><span style=" ">&#93;</span>, HMap<span style=" ">&#91;</span>Active<span style=" ">&#93;</span><span style=" ">&#41;</span><br />
&nbsp; &nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">End</span> <span style="color: #ffff00; font-weight: bold;">Select</span><br />
&nbsp; &nbsp; HMap<span style=" ">&#91;</span>Active<span style=" ">&#93;</span>.<span style="">renderToImage</span><span style=" ">&#40;</span>HMap<span style=" ">&#91;</span>Active<span style=" ">&#93;</span>.<span style="">Img1</span>, <span style="color: #FFFFFF;">0</span>, <span style="color: #FFFFFF;">0</span><span style=" ">&#41;</span><br />
&nbsp; <span style="color: #ffff00; font-weight: bold;">EndIf</span><br />
<br />
&nbsp; <span style="color: #ffff00; font-weight: bold;">If</span> <span style="color: #ffff00; font-weight: bold;">KeyDown</span><span style=" ">&#40;</span>KEY_S<span style=" ">&#41;</span><br />
&nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">DrawText</span> <span style="color: #00FF66;">&quot;Blending (Subtract)... &quot;</span>, HMap<span style=" ">&#91;</span>Active<span style=" ">&#93;</span>.<span style="">ScrnX</span>, HMap<span style=" ">&#91;</span>Active<span style=" ">&#93;</span>.<span style="">ScrnZ</span><br />
&nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">Flip</span><br />
&nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">Select</span> Active<br />
&nbsp; &nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">Case</span> <span style="color: #FFFFFF;">0</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; THeightMap.<span style="">blendMapsSub</span><span style=" ">&#40;</span>HMap<span style=" ">&#91;</span><span style="color: #FFFFFF;">1</span><span style=" ">&#93;</span>, HMap<span style=" ">&#91;</span><span style="color: #FFFFFF;">2</span><span style=" ">&#93;</span>, HMap<span style=" ">&#91;</span>Active<span style=" ">&#93;</span><span style=" ">&#41;</span><br />
&nbsp; &nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">Case</span> <span style="color: #FFFFFF;">1</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; THeightMap.<span style="">blendMapsSub</span><span style=" ">&#40;</span>HMap<span style=" ">&#91;</span><span style="color: #FFFFFF;">0</span><span style=" ">&#93;</span>, HMap<span style=" ">&#91;</span><span style="color: #FFFFFF;">2</span><span style=" ">&#93;</span>, HMap<span style=" ">&#91;</span>Active<span style=" ">&#93;</span><span style=" ">&#41;</span><br />
&nbsp; &nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">Case</span> <span style="color: #FFFFFF;">2</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; THeightMap.<span style="">blendMapsSub</span><span style=" ">&#40;</span>HMap<span style=" ">&#91;</span><span style="color: #FFFFFF;">0</span><span style=" ">&#93;</span>, HMap<span style=" ">&#91;</span><span style="color: #FFFFFF;">1</span><span style=" ">&#93;</span>, HMap<span style=" ">&#91;</span>Active<span style=" ">&#93;</span><span style=" ">&#41;</span><br />
&nbsp; &nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">End</span> <span style="color: #ffff00; font-weight: bold;">Select</span><br />
&nbsp; &nbsp; HMap<span style=" ">&#91;</span>Active<span style=" ">&#93;</span>.<span style="">renderToImage</span><span style=" ">&#40;</span>HMap<span style=" ">&#91;</span>Active<span style=" ">&#93;</span>.<span style="">Img1</span>, <span style="color: #FFFFFF;">0</span>, <span style="color: #FFFFFF;">0</span><span style=" ">&#41;</span><br />
&nbsp; <span style="color: #ffff00; font-weight: bold;">EndIf</span><br />
&nbsp; <span style="color: #ffff00; font-weight: bold;">If</span> <span style="color: #ffff00; font-weight: bold;">KeyDown</span><span style=" ">&#40;</span>KEY_M<span style=" ">&#41;</span><br />
&nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">DrawText</span> <span style="color: #00FF66;">&quot;Blending (Multiply)... &quot;</span>, HMap<span style=" ">&#91;</span>Active<span style=" ">&#93;</span>.<span style="">ScrnX</span>, HMap<span style=" ">&#91;</span>Active<span style=" ">&#93;</span>.<span style="">ScrnZ</span><br />
&nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">Flip</span><br />
&nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">Select</span> Active<br />
&nbsp; &nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">Case</span> <span style="color: #FFFFFF;">0</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; THeightMap.<span style="">blendMapsMul</span><span style=" ">&#40;</span>HMap<span style=" ">&#91;</span><span style="color: #FFFFFF;">1</span><span style=" ">&#93;</span>, HMap<span style=" ">&#91;</span><span style="color: #FFFFFF;">2</span><span style=" ">&#93;</span>, HMap<span style=" ">&#91;</span>Active<span style=" ">&#93;</span><span style=" ">&#41;</span><br />
&nbsp; &nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">Case</span> <span style="color: #FFFFFF;">1</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; THeightMap.<span style="">blendMapsMul</span><span style=" ">&#40;</span>HMap<span style=" ">&#91;</span><span style="color: #FFFFFF;">0</span><span style=" ">&#93;</span>, HMap<span style=" ">&#91;</span><span style="color: #FFFFFF;">2</span><span style=" ">&#93;</span>, HMap<span style=" ">&#91;</span>Active<span style=" ">&#93;</span><span style=" ">&#41;</span><br />
&nbsp; &nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">Case</span> <span style="color: #FFFFFF;">2</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; THeightMap.<span style="">blendMapsMul</span><span style=" ">&#40;</span>HMap<span style=" ">&#91;</span><span style="color: #FFFFFF;">0</span><span style=" ">&#93;</span>, HMap<span style=" ">&#91;</span><span style="color: #FFFFFF;">1</span><span style=" ">&#93;</span>, HMap<span style=" ">&#91;</span>Active<span style=" ">&#93;</span><span style=" ">&#41;</span><br />
&nbsp; &nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">End</span> <span style="color: #ffff00; font-weight: bold;">Select</span><br />
&nbsp; &nbsp; HMap<span style=" ">&#91;</span>Active<span style=" ">&#93;</span>.<span style="">renderToImage</span><span style=" ">&#40;</span>HMap<span style=" ">&#91;</span>Active<span style=" ">&#93;</span>.<span style="">Img1</span>, <span style="color: #FFFFFF;">0</span>, <span style="color: #FFFFFF;">0</span><span style=" ">&#41;</span><br />
&nbsp; <span style="color: #ffff00; font-weight: bold;">EndIf</span><br />
&nbsp; <span style="color: #ffff00; font-weight: bold;">If</span> <span style="color: #ffff00; font-weight: bold;">KeyDown</span><span style=" ">&#40;</span>KEY_D<span style=" ">&#41;</span><br />
&nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">DrawText</span> <span style="color: #00FF66;">&quot;Blending (Divide)... &quot;</span>, HMap<span style=" ">&#91;</span>Active<span style=" ">&#93;</span>.<span style="">ScrnX</span>, HMap<span style=" ">&#91;</span>Active<span style=" ">&#93;</span>.<span style="">ScrnZ</span><br />
&nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">Flip</span><br />
&nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">Select</span> Active<br />
&nbsp; &nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">Case</span> <span style="color: #FFFFFF;">0</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; THeightMap.<span style="">blendMapsDiv</span><span style=" ">&#40;</span>HMap<span style=" ">&#91;</span><span style="color: #FFFFFF;">1</span><span style=" ">&#93;</span>, HMap<span style=" ">&#91;</span><span style="color: #FFFFFF;">2</span><span style=" ">&#93;</span>, HMap<span style=" ">&#91;</span>Active<span style=" ">&#93;</span><span style=" ">&#41;</span><br />
&nbsp; &nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">Case</span> <span style="color: #FFFFFF;">1</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; THeightMap.<span style="">blendMapsDiv</span><span style=" ">&#40;</span>HMap<span style=" ">&#91;</span><span style="color: #FFFFFF;">0</span><span style=" ">&#93;</span>, HMap<span style=" ">&#91;</span><span style="color: #FFFFFF;">2</span><span style=" ">&#93;</span>, HMap<span style=" ">&#91;</span>Active<span style=" ">&#93;</span><span style=" ">&#41;</span><br />
&nbsp; &nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">Case</span> <span style="color: #FFFFFF;">2</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; THeightMap.<span style="">blendMapsDiv</span><span style=" ">&#40;</span>HMap<span style=" ">&#91;</span><span style="color: #FFFFFF;">0</span><span style=" ">&#93;</span>, HMap<span style=" ">&#91;</span><span style="color: #FFFFFF;">1</span><span style=" ">&#93;</span>, HMap<span style=" ">&#91;</span>Active<span style=" ">&#93;</span><span style=" ">&#41;</span><br />
&nbsp; &nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">End</span> <span style="color: #ffff00; font-weight: bold;">Select</span><br />
&nbsp; &nbsp; HMap<span style=" ">&#91;</span>Active<span style=" ">&#93;</span>.<span style="">renderToImage</span><span style=" ">&#40;</span>HMap<span style=" ">&#91;</span>Active<span style=" ">&#93;</span>.<span style="">Img1</span>, <span style="color: #FFFFFF;">0</span>, <span style="color: #FFFFFF;">0</span><span style=" ">&#41;</span><br />
&nbsp; <span style="color: #ffff00; font-weight: bold;">EndIf</span><br />
&nbsp; <span style="color: #ffff00; font-weight: bold;">If</span> <span style="color: #ffff00; font-weight: bold;">KeyDown</span><span style=" ">&#40;</span>KEY_H<span style=" ">&#41;</span><br />
&nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">DrawText</span> <span style="color: #00FF66;">&quot;Blending (Highest)... &quot;</span>, HMap<span style=" ">&#91;</span>Active<span style=" ">&#93;</span>.<span style="">ScrnX</span>, HMap<span style=" ">&#91;</span>Active<span style=" ">&#93;</span>.<span style="">ScrnZ</span><br />
&nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">Flip</span><br />
&nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">Select</span> Active<br />
&nbsp; &nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">Case</span> <span style="color: #FFFFFF;">0</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; THeightMap.<span style="">blendMapsHi</span><span style=" ">&#40;</span>HMap<span style=" ">&#91;</span><span style="color: #FFFFFF;">1</span><span style=" ">&#93;</span>, HMap<span style=" ">&#91;</span><span style="color: #FFFFFF;">2</span><span style=" ">&#93;</span>, HMap<span style=" ">&#91;</span>Active<span style=" ">&#93;</span><span style=" ">&#41;</span><br />
&nbsp; &nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">Case</span> <span style="color: #FFFFFF;">1</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; THeightMap.<span style="">blendMapsHi</span><span style=" ">&#40;</span>HMap<span style=" ">&#91;</span><span style="color: #FFFFFF;">0</span><span style=" ">&#93;</span>, HMap<span style=" ">&#91;</span><span style="color: #FFFFFF;">2</span><span style=" ">&#93;</span>, HMap<span style=" ">&#91;</span>Active<span style=" ">&#93;</span><span style=" ">&#41;</span><br />
&nbsp; &nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">Case</span> <span style="color: #FFFFFF;">2</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; THeightMap.<span style="">blendMapsHi</span><span style=" ">&#40;</span>HMap<span style=" ">&#91;</span><span style="color: #FFFFFF;">0</span><span style=" ">&#93;</span>, HMap<span style=" ">&#91;</span><span style="color: #FFFFFF;">1</span><span style=" ">&#93;</span>, HMap<span style=" ">&#91;</span>Active<span style=" ">&#93;</span><span style=" ">&#41;</span><br />
&nbsp; &nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">End</span> <span style="color: #ffff00; font-weight: bold;">Select</span><br />
&nbsp; &nbsp; HMap<span style=" ">&#91;</span>Active<span style=" ">&#93;</span>.<span style="">renderToImage</span><span style=" ">&#40;</span>HMap<span style=" ">&#91;</span>Active<span style=" ">&#93;</span>.<span style="">Img1</span>, <span style="color: #FFFFFF;">0</span>, <span style="color: #FFFFFF;">0</span><span style=" ">&#41;</span><br />
&nbsp; <span style="color: #ffff00; font-weight: bold;">EndIf</span><br />
&nbsp; <span style="color: #ffff00; font-weight: bold;">If</span> <span style="color: #ffff00; font-weight: bold;">KeyDown</span><span style=" ">&#40;</span>KEY_L<span style=" ">&#41;</span><br />
&nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">DrawText</span> <span style="color: #00FF66;">&quot;Blending (Lowest)... &quot;</span>, HMap<span style=" ">&#91;</span>Active<span style=" ">&#93;</span>.<span style="">ScrnX</span>, HMap<span style=" ">&#91;</span>Active<span style=" ">&#93;</span>.<span style="">ScrnZ</span><br />
&nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">Flip</span><br />
&nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">Select</span> Active<br />
&nbsp; &nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">Case</span> <span style="color: #FFFFFF;">0</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; THeightMap.<span style="">blendMapsLo</span><span style=" ">&#40;</span>HMap<span style=" ">&#91;</span><span style="color: #FFFFFF;">1</span><span style=" ">&#93;</span>, HMap<span style=" ">&#91;</span><span style="color: #FFFFFF;">2</span><span style=" ">&#93;</span>, HMap<span style=" ">&#91;</span>Active<span style=" ">&#93;</span><span style=" ">&#41;</span><br />
&nbsp; &nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">Case</span> <span style="color: #FFFFFF;">1</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; THeightMap.<span style="">blendMapsLo</span><span style=" ">&#40;</span>HMap<span style=" ">&#91;</span><span style="color: #FFFFFF;">0</span><span style=" ">&#93;</span>, HMap<span style=" ">&#91;</span><span style="color: #FFFFFF;">2</span><span style=" ">&#93;</span>, HMap<span style=" ">&#91;</span>Active<span style=" ">&#93;</span><span style=" ">&#41;</span><br />
&nbsp; &nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">Case</span> <span style="color: #FFFFFF;">2</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; THeightMap.<span style="">blendMapsLo</span><span style=" ">&#40;</span>HMap<span style=" ">&#91;</span><span style="color: #FFFFFF;">0</span><span style=" ">&#93;</span>, HMap<span style=" ">&#91;</span><span style="color: #FFFFFF;">1</span><span style=" ">&#93;</span>, HMap<span style=" ">&#91;</span>Active<span style=" ">&#93;</span><span style=" ">&#41;</span><br />
&nbsp; &nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">End</span> <span style="color: #ffff00; font-weight: bold;">Select</span><br />
&nbsp; &nbsp; HMap<span style=" ">&#91;</span>Active<span style=" ">&#93;</span>.<span style="">renderToImage</span><span style=" ">&#40;</span>HMap<span style=" ">&#91;</span>Active<span style=" ">&#93;</span>.<span style="">Img1</span>, <span style="color: #FFFFFF;">0</span>, <span style="color: #FFFFFF;">0</span><span style=" ">&#41;</span><br />
&nbsp; <span style="color: #ffff00; font-weight: bold;">EndIf</span><br />
&nbsp; <span style="color: #ffff00; font-weight: bold;">If</span> <span style="color: #ffff00; font-weight: bold;">KeyDown</span><span style=" ">&#40;</span>KEY_R<span style=" ">&#41;</span><br />
&nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">DrawText</span> <span style="color: #00FF66;">&quot;Blending (Replace)... &quot;</span>, HMap<span style=" ">&#91;</span>Active<span style=" ">&#93;</span>.<span style="">ScrnX</span>, HMap<span style=" ">&#91;</span>Active<span style=" ">&#93;</span>.<span style="">ScrnZ</span><br />
&nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">Flip</span><br />
&nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">Select</span> Active<br />
&nbsp; &nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">Case</span> <span style="color: #FFFFFF;">0</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; THeightMap.<span style="">blendMapsRep</span><span style=" ">&#40;</span>HMap<span style=" ">&#91;</span><span style="color: #FFFFFF;">1</span><span style=" ">&#93;</span>, HMap<span style=" ">&#91;</span><span style="color: #FFFFFF;">2</span><span style=" ">&#93;</span>, HMap<span style=" ">&#91;</span>Active<span style=" ">&#93;</span><span style=" ">&#41;</span><br />
&nbsp; &nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">Case</span> <span style="color: #FFFFFF;">1</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; THeightMap.<span style="">blendMapsRep</span><span style=" ">&#40;</span>HMap<span style=" ">&#91;</span><span style="color: #FFFFFF;">0</span><span style=" ">&#93;</span>, HMap<span style=" ">&#91;</span><span style="color: #FFFFFF;">2</span><span style=" ">&#93;</span>, HMap<span style=" ">&#91;</span>Active<span style=" ">&#93;</span><span style=" ">&#41;</span><br />
&nbsp; &nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">Case</span> <span style="color: #FFFFFF;">2</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; THeightMap.<span style="">blendMapsRep</span><span style=" ">&#40;</span>HMap<span style=" ">&#91;</span><span style="color: #FFFFFF;">0</span><span style=" ">&#93;</span>, HMap<span style=" ">&#91;</span><span style="color: #FFFFFF;">1</span><span style=" ">&#93;</span>, HMap<span style=" ">&#91;</span>Active<span style=" ">&#93;</span><span style=" ">&#41;</span><br />
&nbsp; &nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">End</span> <span style="color: #ffff00; font-weight: bold;">Select</span><br />
&nbsp; &nbsp; HMap<span style=" ">&#91;</span>Active<span style=" ">&#93;</span>.<span style="">renderToImage</span><span style=" ">&#40;</span>HMap<span style=" ">&#91;</span>Active<span style=" ">&#93;</span>.<span style="">Img1</span>, <span style="color: #FFFFFF;">0</span>, <span style="color: #FFFFFF;">0</span><span style=" ">&#41;</span><br />
&nbsp; <span style="color: #ffff00; font-weight: bold;">EndIf</span><br />
<br />
&nbsp; <span style="color: #ffff00; font-weight: bold;">If</span> <span style="color: #ffff00; font-weight: bold;">KeyDown</span><span style=" ">&#40;</span>KEY_F1<span style=" ">&#41;</span><br />
&nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">DrawText</span> <span style="color: #00FF66;">&quot;Exporting test.bin... &quot;</span>, HMap<span style=" ">&#91;</span>Active<span style=" ">&#93;</span>.<span style="">ScrnX</span>, HMap<span style=" ">&#91;</span>Active<span style=" ">&#93;</span>.<span style="">ScrnZ</span><br />
&nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">Flip</span><br />
&nbsp; &nbsp; HMap<span style=" ">&#91;</span>Active<span style=" ">&#93;</span>.<span style="">exportBin</span><span style=" ">&#40;</span><span style="color: #00FF66;">&quot;test.bin&quot;</span><span style=" ">&#41;</span><br />
&nbsp; <span style="color: #ffff00; font-weight: bold;">EndIf</span><br />
&nbsp; <span style="color: #ffff00; font-weight: bold;">If</span> <span style="color: #ffff00; font-weight: bold;">KeyDown</span><span style=" ">&#40;</span>KEY_F5<span style=" ">&#41;</span><br />
&nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">DrawText</span> <span style="color: #00FF66;">&quot;Importing test.bin... &quot;</span>, HMap<span style=" ">&#91;</span>Active<span style=" ">&#93;</span>.<span style="">ScrnX</span>, HMap<span style=" ">&#91;</span>Active<span style=" ">&#93;</span>.<span style="">ScrnZ</span><br />
&nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">Flip</span><br />
&nbsp; &nbsp; HMap<span style=" ">&#91;</span>Active<span style=" ">&#93;</span>.<span style="">importBin</span><span style=" ">&#40;</span><span style="color: #00FF66;">&quot;test.bin&quot;</span><span style=" ">&#41;</span><br />
&nbsp; &nbsp; HMap<span style=" ">&#91;</span>Active<span style=" ">&#93;</span>.<span style="">renderToImage</span><span style=" ">&#40;</span>HMap<span style=" ">&#91;</span>Active<span style=" ">&#93;</span>.<span style="">Img1</span>, <span style="color: #FFFFFF;">0</span>, <span style="color: #FFFFFF;">0</span><span style=" ">&#41;</span><br />
&nbsp; <span style="color: #ffff00; font-weight: bold;">EndIf</span><br />
&nbsp; <span style="color: #ffff00; font-weight: bold;">If</span> <span style="color: #ffff00; font-weight: bold;">KeyDown</span><span style=" ">&#40;</span>KEY_F2<span style=" ">&#41;</span><br />
&nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">DrawText</span> <span style="color: #00FF66;">&quot;Exporting test.png... &quot;</span>, HMap<span style=" ">&#91;</span>Active<span style=" ">&#93;</span>.<span style="">ScrnX</span>, HMap<span style=" ">&#91;</span>Active<span style=" ">&#93;</span>.<span style="">ScrnZ</span><br />
&nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">Flip</span><br />
&nbsp; &nbsp; HMap<span style=" ">&#91;</span>Active<span style=" ">&#93;</span>.<span style="">exportPNG</span><span style=" ">&#40;</span><span style="color: #00FF66;">&quot;test.png&quot;</span>, <span style="color: #FFFFFF;">9</span><span style=" ">&#41;</span><br />
&nbsp; <span style="color: #ffff00; font-weight: bold;">EndIf</span><br />
&nbsp; <span style="color: #ffff00; font-weight: bold;">If</span> <span style="color: #ffff00; font-weight: bold;">KeyDown</span><span style=" ">&#40;</span>KEY_F6<span style=" ">&#41;</span><br />
&nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">DrawText</span> <span style="color: #00FF66;">&quot;Importing test.png... &quot;</span>, HMap<span style=" ">&#91;</span>Active<span style=" ">&#93;</span>.<span style="">ScrnX</span>, HMap<span style=" ">&#91;</span>Active<span style=" ">&#93;</span>.<span style="">ScrnZ</span><br />
&nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">Flip</span><br />
&nbsp; &nbsp; HMap<span style=" ">&#91;</span>Active<span style=" ">&#93;</span>.<span style="">importPNG</span><span style=" ">&#40;</span><span style="color: #00FF66;">&quot;test.png&quot;</span><span style=" ">&#41;</span><br />
&nbsp; &nbsp; HMap<span style=" ">&#91;</span>Active<span style=" ">&#93;</span>.<span style="">renderToImage</span><span style=" ">&#40;</span>HMap<span style=" ">&#91;</span>Active<span style=" ">&#93;</span>.<span style="">Img1</span>, <span style="color: #FFFFFF;">0</span>, <span style="color: #FFFFFF;">0</span><span style=" ">&#41;</span><br />
&nbsp; <span style="color: #ffff00; font-weight: bold;">EndIf</span><br />
&nbsp; <span style="color: #ffff00; font-weight: bold;">If</span> <span style="color: #ffff00; font-weight: bold;">KeyDown</span><span style=" ">&#40;</span>KEY_F3<span style=" ">&#41;</span><br />
&nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">DrawText</span> <span style="color: #00FF66;">&quot;Exporting test.x3d... &quot;</span>, HMap<span style=" ">&#91;</span>Active<span style=" ">&#93;</span>.<span style="">ScrnX</span>, HMap<span style=" ">&#91;</span>Active<span style=" ">&#93;</span>.<span style="">ScrnZ</span><br />
&nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">Flip</span><br />
&nbsp; &nbsp; HMap<span style=" ">&#91;</span>Active<span style=" ">&#93;</span>.<span style="">exportX3d</span><span style=" ">&#40;</span><span style="color: #00FF66;">&quot;test.x3d&quot;</span>, <span style="color: #00FF66;">&quot;templ01.x3d&quot;</span>, <span style="color: #FFFFFF;">40.0</span>, <span style="color: #FFFFFF;">2.0</span>, <span style="color: #FFFFFF;">2.0</span><span style=" ">&#41;</span><br />
&nbsp; <span style="color: #ffff00; font-weight: bold;">EndIf</span><br />
&nbsp; <span style="color: #ffff00; font-weight: bold;">If</span> <span style="color: #ffff00; font-weight: bold;">KeyDown</span><span style=" ">&#40;</span>KEY_F12<span style=" ">&#41;</span><br />
&nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">Local</span> fn$ = <span style="color: #ffff00; font-weight: bold;">RequestFile</span><span style=" ">&#40;</span><span style="color: #00FF66;">&quot;Import file...&quot;</span>, <span style="color: #00FF66;">&quot;Supported Files:png,bin;All Files:*&quot;</span>, <span style="color: #ffff00; font-weight: bold;">False</span><span style=" ">&#41;</span><br />
&nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">If</span> <span style="color: #ffff00; font-weight: bold;">Right</span>$<span style=" ">&#40;</span>fn$, <span style="color: #FFFFFF;">4</span><span style=" ">&#41;</span> = <span style="color: #00FF66;">&quot;.png&quot;</span><br />
&nbsp; &nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">DrawText</span> <span style="color: #00FF66;">&quot;Importing PNG: &quot;</span> + fn$ + <span style="color: #00FF66;">&quot;... &quot;</span>, HMap<span style=" ">&#91;</span>Active<span style=" ">&#93;</span>.<span style="">ScrnX</span>, HMap<span style=" ">&#91;</span>Active<span style=" ">&#93;</span>.<span style="">ScrnZ</span><br />
&nbsp; &nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">Flip</span><br />
&nbsp; &nbsp; &nbsp; HMap<span style=" ">&#91;</span>Active<span style=" ">&#93;</span>.<span style="">importPNG</span><span style=" ">&#40;</span>fn$<span style=" ">&#41;</span><br />
&nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">Else</span><br />
&nbsp; &nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">If</span> <span style="color: #ffff00; font-weight: bold;">Right</span>$<span style=" ">&#40;</span>fn$, <span style="color: #FFFFFF;">4</span><span style=" ">&#41;</span> = <span style="color: #00FF66;">&quot;.bin&quot;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">DrawText</span> <span style="color: #00FF66;">&quot;Importing Binary: &quot;</span> + fn$ + <span style="color: #00FF66;">&quot;... &quot;</span>, HMap<span style=" ">&#91;</span>Active<span style=" ">&#93;</span>.<span style="">ScrnX</span>, HMap<span style=" ">&#91;</span>Active<span style=" ">&#93;</span>.<span style="">ScrnZ</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">Flip</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; HMap<span style=" ">&#91;</span>Active<span style=" ">&#93;</span>.<span style="">importBin</span><span style=" ">&#40;</span>fn$<span style=" ">&#41;</span><br />
&nbsp; &nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">EndIf</span><br />
&nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">EndIf</span><br />
&nbsp; &nbsp; HMap<span style=" ">&#91;</span>Active<span style=" ">&#93;</span>.<span style="">renderToImage</span><span style=" ">&#40;</span>HMap<span style=" ">&#91;</span>Active<span style=" ">&#93;</span>.<span style="">Img1</span>, <span style="color: #FFFFFF;">0</span>, <span style="color: #FFFFFF;">0</span><span style=" ">&#41;</span><br />
&nbsp; <span style="color: #ffff00; font-weight: bold;">EndIf</span><br />
&nbsp; <span style="color: #ffff00; font-weight: bold;">If</span> <span style="color: #ffff00; font-weight: bold;">KeyDown</span><span style=" ">&#40;</span>KEY_F10<span style=" ">&#41;</span><br />
&nbsp; &nbsp; fn$ = <span style="color: #ffff00; font-weight: bold;">RequestFile</span><span style=" ">&#40;</span><span style="color: #00FF66;">&quot;Export file...&quot;</span>, <span style="color: #00FF66;">&quot;Supported Files:png,bin,x3d&quot;</span>, <span style="color: #ffff00; font-weight: bold;">True</span><span style=" ">&#41;</span><br />
&nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">If</span> <span style="color: #ffff00; font-weight: bold;">Right</span>$<span style=" ">&#40;</span>fn$, <span style="color: #FFFFFF;">4</span><span style=" ">&#41;</span> = <span style="color: #00FF66;">&quot;.png&quot;</span><br />
&nbsp; &nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">DrawText</span> <span style="color: #00FF66;">&quot;Exporting PNG: &quot;</span> + fn$ + <span style="color: #00FF66;">&quot;... &quot;</span>, HMap<span style=" ">&#91;</span>Active<span style=" ">&#93;</span>.<span style="">ScrnX</span>, HMap<span style=" ">&#91;</span>Active<span style=" ">&#93;</span>.<span style="">ScrnZ</span><br />
&nbsp; &nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">Flip</span><br />
&nbsp; &nbsp; &nbsp; HMap<span style=" ">&#91;</span>Active<span style=" ">&#93;</span>.<span style="">exportPNG</span><span style=" ">&#40;</span>fn$<span style=" ">&#41;</span><br />
&nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">Else</span><br />
&nbsp; &nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">If</span> <span style="color: #ffff00; font-weight: bold;">Right</span>$<span style=" ">&#40;</span>fn$, <span style="color: #FFFFFF;">4</span><span style=" ">&#41;</span> = <span style="color: #00FF66;">&quot;.bin&quot;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">DrawText</span> <span style="color: #00FF66;">&quot;Exporting Binary: &quot;</span> + fn$ + <span style="color: #00FF66;">&quot;... &quot;</span>, HMap<span style=" ">&#91;</span>Active<span style=" ">&#93;</span>.<span style="">ScrnX</span>, HMap<span style=" ">&#91;</span>Active<span style=" ">&#93;</span>.<span style="">ScrnZ</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">Flip</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; HMap<span style=" ">&#91;</span>Active<span style=" ">&#93;</span>.<span style="">exportBin</span><span style=" ">&#40;</span>fn$<span style=" ">&#41;</span><br />
&nbsp; &nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">Else</span> <br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">If</span> <span style="color: #ffff00; font-weight: bold;">Right</span>$<span style=" ">&#40;</span>fn$, <span style="color: #FFFFFF;">4</span><span style=" ">&#41;</span> = <span style="color: #00FF66;">&quot;.x3d&quot;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">DrawText</span> <span style="color: #00FF66;">&quot;Exporting X3D: &quot;</span> + fn$ + <span style="color: #00FF66;">&quot;... &quot;</span>, HMap<span style=" ">&#91;</span>Active<span style=" ">&#93;</span>.<span style="">ScrnX</span>, HMap<span style=" ">&#91;</span>Active<span style=" ">&#93;</span>.<span style="">ScrnZ</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">Flip</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; HMap<span style=" ">&#91;</span>Active<span style=" ">&#93;</span>.<span style="">exportX3d</span><span style=" ">&#40;</span>fn$, <span style="color: #00FF66;">&quot;templ01.x3d&quot;</span>, <span style="color: #FFFFFF;">40.0</span>, <span style="color: #FFFFFF;">2.0</span>, <span style="color: #FFFFFF;">2.0</span><span style=" ">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">EndIf</span><br />
&nbsp; &nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">EndIf</span><br />
&nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">EndIf</span><br />
&nbsp; <span style="color: #ffff00; font-weight: bold;">EndIf</span><br />
<br />
</p>
<span style="color: #ffff00; font-weight: bold;">End</span> <span style="color: #ffff00; font-weight: bold;">Function</span></div>

<!-- Saved in parser cache with key db1:pcache:idhash:1625-0!1!0!!ru!2 and timestamp 20071110054936 -->
<div class="printfooter">
Получено с <a href="7ue_7734.html">http://localhost/index.php/%D0%9A%D0%BE%D0%B4:HeightMapToolbox.bmx</a></div>
			<!-- end content -->			<div class="visualClear"></div>				</td>				<td class="rightside">				</td>			</tr>		</table>		</div>	</div>		</div>	
		<script type="text/javascript">if (window.runOnloadHook) runOnloadHook();</script>
</div></body>
<!-- Mirrored from localhost/index.php/%D0%9A%D0%BE%D0%B4:HeightMapToolbox.bmx by HTTrack Website Copier/3.x [XR&CO'2007], Sat, 10 Nov 2007 05:56:13 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8"><!-- /Added by HTTrack -->
</html>