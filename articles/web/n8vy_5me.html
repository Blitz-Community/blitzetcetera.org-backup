<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml" xml:lang="ru" lang="ru" dir="ltr">	
<!-- Mirrored from localhost/index.php/%D0%A1%D0%BE%D0%B7%D0%B4%D0%B0%D0%BD%D0%B8%D0%B5_%D1%80%D0%B5%D0%B4%D0%B0%D0%BA%D1%82%D0%BE%D1%80%D0%B0_%D0%BA%D0%B0%D1%80%D1%82%2C_%D0%BD%D0%B5%D1%81%D1%82%D0%B0%D0%BD%D0%B4%D0%B0%D1%80%D1%82%D0%BD%D1%8B%D0%B9_%D0%BF%D0%BE%D0%B4%D1%85%D0%BE%D0%B4 by HTTrack Website Copier/3.x [XR&CO'2007], Sat, 10 Nov 2007 05:16:12 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8"><!-- /Added by HTTrack -->
<head>		<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />				<meta name="keywords" content="Создание редактора карт, нестандартный подход,Avel" />
		<link rel="shortcut icon" href="http://blitzetcetera.org/favicon.ico" />
		<link rel="search" type="application/opensearchdescription+xml" href="http://blitzetcetera.org/opensearch_desc.php" title="Blitz Et Cetera (Русский)" />
		<title>Создание редактора карт, нестандартный подход — Blitz Et Cetera</title>		<style type="text/css" media="screen,projection">/*<![CDATA[*/ @import "bvih5rde.css?63"; /*]]>*/</style>		<link rel="stylesheet" type="text/css" media="print" href="gcxktlm6.css?63" />		<link rel="stylesheet" type="text/css" media="handheld" href="zumsslq_.css?63" />		<!--[if lt IE 5.5000]><style type="text/css">@import "/skins/OfflineNew/IE50Fixes.css?63";</style><![endif]-->		<!--[if IE 5.5000]><style type="text/css">@import "/skins/OfflineNew/IE55Fixes.css?63";</style><![endif]-->		<!--[if IE 6]><style type="text/css">@import "/skins/OfflineNew/IE60Fixes.css?63";</style><![endif]-->		<!--[if IE 7]><style type="text/css">@import "/skins/OfflineNew/IE70Fixes.css?63";</style><![endif]-->		<!--[if lt IE 7]><script type="text/javascript" src="/skins/common/IEFixes.js?63"></script>		<meta http-equiv="imagetoolbar" content="no" /><![endif]-->		<script type= "text/javascript">/*<![CDATA[*/
var skin = "OfflineNew";
var stylepath = "/skins";
var wgArticlePath = "/index.php/$1";
var wgScriptPath = "";
var wgServer = "http://blitzetcetera.org/";
var wgCanonicalNamespace = "";
var wgCanonicalSpecialPageName = false;
var wgNamespaceNumber = 0;
var wgPageName = "Создание_редактора_карт,_нестандартный_подход";
var wgTitle = "Создание редактора карт, нестандартный подход";
var wgAction = "view";
var wgArticleId = "670";
var wgIsArticle = true;
var wgUserName = null;
var wgUserGroups = null;
var wgUserLanguage = "ru";
var wgContentLanguage = "ru";
var wgBreakFrames = false;
var wgCurRevisionId = "3555";
/*]]>*/</script>
		<script type="text/javascript" src="2nq-6cel.js?63"><!-- wikibits js --></script>		<script type="text/javascript" src="http://blitzetcetera.org/index.php?title=-&amp;action=raw&amp;gen=js"><!-- site js --></script>		<style type="text/css">/*<![CDATA[*/
@import "http://blitzetcetera.org/index.php?title=MediaWiki:Common.css&amp;usemsgcache=yes&amp;action=raw&amp;ctype=text/css&amp;smaxage=18000";
@import "http://blitzetcetera.org/index.php?title=MediaWiki:OfflineNew.css&amp;usemsgcache=yes&amp;action=raw&amp;ctype=text/css&amp;smaxage=18000";
@import "http://blitzetcetera.org/index.php?title=-&amp;action=raw&amp;gen=css&amp;maxage=18000";
/*]]>*/</style>		<!-- Head Scripts -->	</head><body  class="mediawiki ns-0 ltr page-Создание_редактора_карт_нестандартный_подход">	<div id="globalWrapper">	<div id="logocontainer">		<table align="center">		  <tr>				<td id="blitzetclogo">				</td>			</tr>		</table>	</div>	<div id="magbar">	Журнал о программированнии на языках Blitz3D, BlitzMax, BlitzPlus	</div>		<div id="column-content">	<div id="content">		<a name="top" id="top"></a>				<div id="bodyContent">		<table cellspacing=0 cellpadding=0 width=100%>			<tr>			  <td class="leftside">				</td>				<td class="sheetbody">					<h1 class="sheet">Создание редактора карт, нестандартный подход</h1>			<h3 id="siteSub">Материал из Blitz Et Cetera.</h3>			<div id="contentSub"></div>			<!-- start content -->			<a name=".D0.98.D1.81.D0.BF.D0.BE.D0.BB.D1.8C.D0.B7.D0.BE.D0.B2.D0.B0.D0.BD.D0.B8.D0.B5_.D0.BD.D0.B5.D1.81.D1.82.D0.B0.D0.BD.D0.B4.D0.B0.D1.80.D1.82.D0.BD.D1.8B.D1.85_.D0.BF.D0.BE.D0.B4.D1.85.D0.BE.D0.B4.D0.BE.D0.B2_.D0.B2_.D0.BF.D1.80.D0.BE.D0.B3.D1.80.D0.B0.D0.BC.D0.BC.D0.B8.D1.80.D0.BE.D0.B2.D0.B0.D0.BD.D0.B8.D0.B8_.D0.BD.D0.B0_.D0.BF.D1.80.D0.B8.D0.BC.D0.B5.D1.80.D0.B5_.D1.81.D0.BE.D0.B7.D0.B4.D0.B0.D0.BD.D0.B8.D1.8F_.D1.80.D0.B5.D0.B4.D0.B0.D0.BA.D1.82.D0.BE.D1.80.D0.B0_.D0.BA.D0.B0.D1.80.D1.82."></a><h2><span class="editsection">[<a href="http://blitzetcetera.org/index.php?title=%D0%A1%D0%BE%D0%B7%D0%B4%D0%B0%D0%BD%D0%B8%D0%B5_%D1%80%D0%B5%D0%B4%D0%B0%D0%BA%D1%82%D0%BE%D1%80%D0%B0_%D0%BA%D0%B0%D1%80%D1%82%2C_%D0%BD%D0%B5%D1%81%D1%82%D0%B0%D0%BD%D0%B4%D0%B0%D1%80%D1%82%D0%BD%D1%8B%D0%B9_%D0%BF%D0%BE%D0%B4%D1%85%D0%BE%D0%B4&amp;action=edit&amp;section=1" title="Править секцию: Использование нестандартных подходов в программировании на примере создания редактора карт.">править</a>]</span> <span class="mw-headline">Использование нестандартных подходов в программировании на примере создания редактора карт.</span></h2>
<p>Я всегда считал, что программирование занятие, в общем, творческое и требующее нестандартного подхода к решению поставленных задач. Иногда бывает нужно запрограммировать что-либо, но стандартными методами этого сделать никак не получается. И вот тогда в дело включается смекалка, а в сознании (скорее даже на подсознательном уровне) возникает вопрос: «А что, если…». Озарение снизошло на вас, и вот уже новая идея стала раскручиваться в голове, на ум приходят все новые идеи по усовершенствованию существующей, и через минуту-другую программа работает, а вы довольно смотрите в монитор на свое творение. Это было некое лирическое отступление, теперь же попытаюсь объяснить, что означает «нестандартный подход» на простеньком примере, написанном в Blitz3D. Если вы с Blitz3D не знакомы, то это не означает, что вы не должны читать эту статью дальше. Логику действий я постараюсь объяснить подробно и простыми словами. Итак, приступим!
</p><p>Не так давно я писал редактор карт для своей игры, суть его состояла в следующем: он делил всю (достаточно большую) карту на квадраты (64 на 64), каждый из которых текстурировал своей текстурой. При этом в коде основной программы был некий массив текстур, и номер элемента массива загружался из файла.
</p>
<div class="bb" style="font-family: monospace;background-color:#FFFFFF;border:1px dashed #CCCCCC;padding:10px;background-color:#225588;color:#FFFFFF;border:1px solid #003040;padding:10px;">…<br />
<p><span style="color: #aaffff; font-weight: bold;">Dim</span> tex<span style=" ">&#40;</span><span style="color: #33ffdd;">26</span><span style=" ">&#41;</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span style="color: #ffee00">; создаем массив текстур</span><br />
<span style="color: #aaffff; font-weight: bold;">For</span> a=<span style="color: #33ffdd;">0</span> <span style="color: #aaffff; font-weight: bold;">To</span> <span style="color: #33ffdd;">25</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span style="color: #ffee00">;начало цикла по загрузке текстур, всего их 25</span><br />
&nbsp; &nbsp; &nbsp;b$=a+<span style="color: #00ff66;">&quot;.bmp&quot;</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #ffee00">;b$ - это имя текстуры «1.bmp», «2.bmp», и т.д.</span><br />
&nbsp; &nbsp; &nbsp;tex<span style=" ">&#40;</span>a<span style=" ">&#41;</span>=<span style="color: #aaffff; font-weight: bold;">LoadTexture</span><span style=" ">&#40;</span>b$<span style=" ">&#41;</span> &nbsp;<span style="color: #ffee00">;в нужный элемент массива загружаем нужную текстуру</span><br />
<span style="color: #aaffff; font-weight: bold;">Next</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #ffee00">;конец цикла</span><br />
<br />
…<br />
<br />
<span style="color: #ffee00">;тут начинается цикл создания карты в основной программе</span><br />
…<br />
file=<span style="color: #aaffff; font-weight: bold;">ReadFile</span><span style=" ">&#40;</span><span style="color: #00ff66;">&quot;cart.dat&quot;</span><span style=" ">&#41;</span> &nbsp; &nbsp;<span style="color: #ffee00">;загружаем файл карты</span><br />
…<br />
track=<span style="color: #aaffff; font-weight: bold;">ReadLine</span><span style=" ">&#40;</span>file<span style=" ">&#41;</span> &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #ffee00">;считываем в пер. «track» № элемента массива с нужной текстурой</span><br />
…<br />
<span style="color: #ffee00">;цикл закончен</span><br />
<span style="color: #aaffff; font-weight: bold;">CloseFile</span> file &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #ffee00">;закрываем файл</span><br />
</p>
…</div>
<p>Так, как у меня в карте было 4096 независимых квадрата (64*64=4096), то, соответственно, в загрузочном файле должно быть 4096 чисел. Вот такая вот арифметика!&nbsp;:)
</p><p>Конечно, ввести такое количество чисел, да еще и в нужной последовательности показалось мне нереальным, и я стал сочинять редактор, который упростил бы мне жизнь.
</p><p>Идея была следующая: создать поле из 4096 мини-картинок ( createimage() ) и двумерный массив общим числом элементов 4096. Ну, естественно при нажатии на нужный квадратик, его картинка сменяется на текущую, а в нужный элемент массива записывается номер текущей картинки. Первая часть выполняется элементарно просто:
</p>
<div class="bb" style="font-family: monospace;background-color:#FFFFFF;border:1px dashed #CCCCCC;padding:10px;background-color:#225588;color:#FFFFFF;border:1px solid #003040;padding:10px;"><span style="color: #aaffff; font-weight: bold;">Dim</span> ArrayGrid<span style=" ">&#40;</span><span style="color: #33ffdd;">65</span>,<span style="color: #33ffdd;">65</span><span style=" ">&#41;</span> &nbsp; <span style="color: #ffee00">;создаем массив</span><br />
<p><span style="color: #ffee00">; присвоим каждому элементу массива некое начальное значение. e,r-переменные цикла</span><br />
<span style="color: #aaffff; font-weight: bold;">While</span> e&lt;<span style="color: #33ffdd;">64</span><br />
&nbsp; &nbsp; e=e<span style="color: #33ffdd;">+1</span><br />
&nbsp; &nbsp; r=<span style="color: #33ffdd;">0</span><br />
&nbsp; &nbsp; <span style="color: #aaffff; font-weight: bold;">While</span> r&lt;<span style="color: #33ffdd;">64</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; r=r<span style="color: #33ffdd;">+1</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; ArrayGrid<span style=" ">&#40;</span>e,r<span style=" ">&#41;</span>=<span style="color: #33ffdd;">0</span><br />
&nbsp; &nbsp; <span style="color: #aaffff; font-weight: bold;">Wend</span><br />
</p>
<span style="color: #aaffff; font-weight: bold;">Wend</span></div>
<p>С картинками немного сложнее. Тут есть два варианта (вообще-то больше, но это не важно J ): первый – это создать циклом 4096 изображений и циклом же их разместить на экране, второй вариант более изощренный, но и более удобный. Я воспользовался именно им. Я создал одно изображение, а потом рисовал его много раз в разных местах и с разным индексом, берущимся из массива, делалось все это с помощью цикла. Изображение должно быть не простое, а (нет, не золотое&nbsp;:) ) состоящее из структуры изображений. Проще говоря, воспользуйтесь командой <b>LoadAnimImage()</b>.
</p><p>В главном цикле постоянно выполняется что-то вроде этого:
</p>
<div class="bb" style="font-family: monospace;background-color:#FFFFFF;border:1px dashed #CCCCCC;padding:10px;background-color:#225588;color:#FFFFFF;border:1px solid #003040;padding:10px;"><span style="color: #aaffff; font-weight: bold;">While</span> i&lt;<span style="color: #33ffdd;">64</span><br />
<p>x=x<span style="color: #33ffdd;">+12</span> <br />
i=i<span style="color: #33ffdd;">+1</span><br />
y=<span style="color: #33ffdd;">0</span><br />
&nbsp; &nbsp;<span style="color: #aaffff; font-weight: bold;">While</span> j&lt;<span style="color: #33ffdd;">64</span><br />
&nbsp; &nbsp; &nbsp; y=y<span style="color: #33ffdd;">+11</span><br />
&nbsp; &nbsp; &nbsp; j=j<span style="color: #33ffdd;">+1</span><br />
&nbsp; &nbsp; &nbsp; <span style="color: #aaffff; font-weight: bold;">DrawImage</span> tim,<span style="color: #33ffdd;">10</span>+x,<span style="color: #33ffdd;">12</span>+y,ArrayGrid<span style=" ">&#40;</span>i,j<span style=" ">&#41;</span><br />
&nbsp; &nbsp;<span style="color: #aaffff; font-weight: bold;">Wend</span><br />
</p>
<span style="color: #aaffff; font-weight: bold;">Wend</span></div>
<p>В выражениях <b>x=x+12</b> и <b>y=y+11</b>,12 и 11 – это длина и ширина изображения плюс промежуток между изображениями на поле. При разрешении экрана 1024 на 768 самым оптимальным, оказалось, сделать изображение 10 на 10 пикселей и промежуток в 2 пикселя по x и 1 пиксель по y.
В выражении <b>DrawImage tim,10+x,12+y,ArrayGrid(i,j)</b> 10 и 12 – это координаты начала прорисовки поля, они могут быть любые, но потом их надо будет учитывать, поэтому я взял их такими для удобства счета. tim - это наше изображение с вариантами разных картинок. Из массива <b>ArrayGrid(i,j)</b> берется нужный индекс. Иногда в таком варианте бывают глюки, просто раскидайте циклы по функциям и все заработает.
</p><p><br />
Дальше, хуже. Необходимо реализовать в программе возможность «тыкать» курсором по мини-изображениям, и чтобы еще при этом в массиве ArrayGrid() что-то менялось. Кошмар!&nbsp;:) Вот вопрос: как сопоставить  мини-изображения и массив? Первое, что пришло мне в голову это команда <b>RectsOverlap()</b> с координатами мыши в качестве второго параметра (или что-либо подобное), но это почему-то не сработало. К тому же, такой вариант сильно загружал бы процессор и память, поэтому я от него отказался. И вот тут-то и начинается тот самый «нестандартный подход»! 
</p><p><br /> 
Я решил определять номер нужного мне элемента массива непосредственно по координатам, передаваемым мышью. Для этого я все рабочее поле мысленно разделил на равные участки, равные размеру мини-изображений в сумме с промежутком между ними и в результате координаты передаваемые мышью деленные на длину либо ширину изображений (что в данном случае не важно, так как они у меня равны) плюс промежуток по x в одном случае и по y в другом, давали мне необходимые индексы для массива. Еще одно замечание: в массиве следует учесть то, что поле начинается не в начале координат, помните, я обращал на это ваше внимание. Так, как у меня удаления от начала координат равны шагу поля, то я просто отнимаю единицу. Команда выглядит так:
</p>
<div class="bb" style="font-family: monospace;background-color:#FFFFFF;border:1px dashed #CCCCCC;padding:10px;background-color:#225588;color:#FFFFFF;border:1px solid #003040;padding:10px;">ArrayGrid<span style=" ">&#40;</span><span style="color: #aaffff; font-weight: bold;">MouseX</span><span style=" ">&#40;</span><span style=" ">&#41;</span>/<span style="color: #33ffdd;">12</span><span style="color: #33ffdd;">-1</span>,<span style="color: #aaffff; font-weight: bold;">MouseY</span><span style=" ">&#40;</span><span style=" ">&#41;</span>/<span style="color: #33ffdd;">11</span><span style="color: #33ffdd;">-1</span><span style=" ">&#41;</span>=numer</div>
<p>Здесь numer - это номер текущего присваиваемого значения. Выбор этого значения реализуется аналогично, только поле меньшего размера и математика немного меняется.
</p>
<div class="bb" style="font-family: monospace;background-color:#FFFFFF;border:1px dashed #CCCCCC;padding:10px;background-color:#225588;color:#FFFFFF;border:1px solid #003040;padding:10px;">numer=<span style=" ">&#40;</span><span style="color: #aaffff; font-weight: bold;">MouseX</span><span style=" ">&#40;</span><span style=" ">&#41;</span>/<span style="color: #33ffdd;">17</span><span style="color: #33ffdd;">-47</span><span style=" ">&#41;</span>+<span style=" ">&#40;</span><span style="color: #33ffdd;">10</span>*<span style=" ">&#40;</span><span style="color: #aaffff; font-weight: bold;">MouseY</span><span style=" ">&#40;</span><span style=" ">&#41;</span>/<span style="color: #33ffdd;">17</span><span style="color: #33ffdd;">-6</span><span style=" ">&#41;</span><span style=" ">&#41;</span></div>
<p>Это вариант для поля 10 на 2 клеток. 47 и 7 это отступления от края, а 17 это длина либо ширина изображения сложенная с промежутком между ними. Умножение на 10 нужно для того, чтобы переменной numer присваивался новый с каждым рядом разряд десятков. Т. е. в первом ряду 1, 2, … ,10, во втором 11, 12, … , 20 и т. д.
</p><p><br />
Чтобы можно было видеть курсор, следует загрузить еще одно изображение для курсора, а в качестве координат x,y передавать ему координаты мыши во время отрисовки.
</p>
<div class="bb" style="font-family: monospace;background-color:#FFFFFF;border:1px dashed #CCCCCC;padding:10px;background-color:#225588;color:#FFFFFF;border:1px solid #003040;padding:10px;"><span style="color: #aaffff; font-weight: bold;">DrawImage</span> ukazka,<span style="color: #aaffff; font-weight: bold;">MouseX</span><span style=" ">&#40;</span><span style=" ">&#41;</span>,<span style="color: #aaffff; font-weight: bold;">MouseY</span><span style=" ">&#40;</span><span style=" ">&#41;</span></div>
<p><b>Ukazka</b> – изображение курсора в png-формате. Чтобы курсор не оставлял следов на экране нужно его постоянно обновлять или очищать, но проще задать режим 3D и создать камеру. Сохранить данные в файл можно путем обычного циклического перебора всех элементов массива и стандартной функции записи.
</p><p>Вот, кажется и все. Напоследок весь код. С наилучшими пожеланиями, AVEL!
</p><p>Код всей проги:
</p>
<div class="bb" style="font-family: monospace;background-color:#FFFFFF;border:1px dashed #CCCCCC;padding:10px;background-color:#225588;color:#FFFFFF;border:1px solid #003040;padding:10px;"><span style="color: #ffee00">;(c) Agnislav Lipcan</span><br />
<p><span style="color: #ffee00">; &nbsp; &nbsp;redactor cart</span><br />
<span style="color: #ffee00">;avelnet@yandex.ru</span><br />
<span style="color: #aaffff; font-weight: bold;">Graphics3D</span> <span style="color: #33ffdd;">1024</span>,<span style="color: #33ffdd;">768</span>,<span style="color: #33ffdd;">32</span>,<span style="color: #33ffdd;">1</span><br />
<span style="color: #aaffff; font-weight: bold;">SetBuffer</span> <span style="color: #aaffff; font-weight: bold;">BackBuffer</span><span style=" ">&#40;</span><span style=" ">&#41;</span><br />
<br />
<span style="color: #aaffff; font-weight: bold;">Global</span> tim=<span style="color: #aaffff; font-weight: bold;">LoadAnimImage</span><span style=" ">&#40;</span><span style="color: #00ff66;">&quot;MapEditor-Tiles.png&quot;</span>,<span style="color: #33ffdd;">10</span>,<span style="color: #33ffdd;">10</span>,<span style="color: #33ffdd;">1</span>,<span style="color: #33ffdd;">30</span><span style=" ">&#41;</span><br />
<span style="color: #aaffff; font-weight: bold;">Global</span> ukazka=<span style="color: #aaffff; font-weight: bold;">LoadAnimImage</span><span style=" ">&#40;</span><span style="color: #00ff66;">&quot;MapEditor-Cursors.png&quot;</span>,<span style="color: #33ffdd;">40</span>,<span style="color: #33ffdd;">40</span>,<span style="color: #33ffdd;">0</span>,<span style="color: #33ffdd;">8</span><span style=" ">&#41;</span><br />
<span style="color: #aaffff; font-weight: bold;">HandleImage</span> ukazka,<span style="color: #33ffdd;">2</span>,<span style="color: #33ffdd;">5</span><br />
<br />
<span style="color: #aaffff; font-weight: bold;">Dim</span> ArrayGrid<span style=" ">&#40;</span><span style="color: #33ffdd;">65</span>,<span style="color: #33ffdd;">65</span><span style=" ">&#41;</span><br />
<br />
<span style="color: #aaffff; font-weight: bold;">While</span> e&lt;<span style="color: #33ffdd;">64</span><br />
&nbsp; &nbsp; e=e<span style="color: #33ffdd;">+1</span><br />
&nbsp; &nbsp; r=<span style="color: #33ffdd;">0</span><br />
&nbsp; &nbsp; <span style="color: #aaffff; font-weight: bold;">While</span> r&lt;<span style="color: #33ffdd;">64</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; r=r<span style="color: #33ffdd;">+1</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; ArrayGrid<span style=" ">&#40;</span>e,r<span style=" ">&#41;</span>=<span style="color: #33ffdd;">0</span><br />
&nbsp; &nbsp; <span style="color: #aaffff; font-weight: bold;">Wend</span><br />
<span style="color: #aaffff; font-weight: bold;">Wend</span> <br />
<br />
c=<span style="color: #aaffff; font-weight: bold;">CreateCamera</span><span style=" ">&#40;</span><span style=" ">&#41;</span><br />
<br />
i=<span style="color: #33ffdd;">0</span><br />
j=<span style="color: #33ffdd;">0</span><br />
<br />
<span style="color: #ffee00">;main cikles</span><br />
<br />
<span style="color: #aaffff; font-weight: bold;">While</span> <span style="color: #aaffff; font-weight: bold;">Not</span> <span style="color: #aaffff; font-weight: bold;">KeyHit</span><span style=" ">&#40;</span><span style="color: #33ffdd;">1</span><span style=" ">&#41;</span>=<span style="color: #aaffff; font-weight: bold;">True</span><br />
<br />
<br />
<span style="color: #aaffff; font-weight: bold;">UpdateWorld</span><span style=" ">&#40;</span><span style=" ">&#41;</span><br />
<span style="color: #aaffff; font-weight: bold;">RenderWorld</span><span style=" ">&#40;</span><span style=" ">&#41;</span><br />
<br />
ff<span style=" ">&#40;</span><span style=" ">&#41;</span><br />
ff2<span style=" ">&#40;</span><span style=" ">&#41;</span><br />
<br />
<span style="color: #aaffff; font-weight: bold;">DrawImage</span> ukazka,<span style="color: #aaffff; font-weight: bold;">MouseX</span><span style=" ">&#40;</span><span style=" ">&#41;</span>,<span style="color: #aaffff; font-weight: bold;">MouseY</span><span style=" ">&#40;</span><span style=" ">&#41;</span>,<span style="color: #33ffdd;">1</span><br />
<span style="color: #aaffff; font-weight: bold;">Plot</span> <span style="color: #aaffff; font-weight: bold;">MouseX</span><span style=" ">&#40;</span><span style=" ">&#41;</span>,<span style="color: #aaffff; font-weight: bold;">MouseY</span><span style=" ">&#40;</span><span style=" ">&#41;</span><br />
<span style="color: #aaffff; font-weight: bold;">If</span> <span style="color: #aaffff; font-weight: bold;">MouseHit</span><span style=" ">&#40;</span><span style="color: #33ffdd;">1</span><span style=" ">&#41;</span> <span style="color: #aaffff; font-weight: bold;">Then</span><br />
&nbsp; &nbsp;<span style="color: #aaffff; font-weight: bold;">If</span> <span style="color: #aaffff; font-weight: bold;">MouseX</span><span style=" ">&#40;</span><span style=" ">&#41;</span> &lt; <span style="color: #33ffdd;">785</span> <span style="color: #aaffff; font-weight: bold;">Then</span> <br />
&nbsp; &nbsp; &nbsp; ArrayGrid<span style=" ">&#40;</span><span style="color: #aaffff; font-weight: bold;">MouseX</span><span style=" ">&#40;</span><span style=" ">&#41;</span>/<span style="color: #33ffdd;">12</span><span style="color: #33ffdd;">-1</span>,<span style="color: #aaffff; font-weight: bold;">MouseY</span><span style=" ">&#40;</span><span style=" ">&#41;</span>/<span style="color: #33ffdd;">11</span><span style="color: #33ffdd;">-1</span><span style=" ">&#41;</span>=numer<span style="color: #33ffdd;">-1</span><br />
&nbsp; &nbsp;<span style="color: #aaffff; font-weight: bold;">Else</span> <br />
&nbsp; &nbsp; &nbsp; numer=<span style=" ">&#40;</span><span style="color: #aaffff; font-weight: bold;">MouseX</span><span style=" ">&#40;</span><span style=" ">&#41;</span>/<span style="color: #33ffdd;">17</span><span style="color: #33ffdd;">-47</span><span style=" ">&#41;</span>+<span style=" ">&#40;</span><span style="color: #33ffdd;">10</span>*<span style=" ">&#40;</span><span style="color: #aaffff; font-weight: bold;">MouseY</span><span style=" ">&#40;</span><span style=" ">&#41;</span>/<span style="color: #33ffdd;">17</span><span style="color: #33ffdd;">-7</span><span style=" ">&#41;</span><span style=" ">&#41;</span><br />
&nbsp; &nbsp; &nbsp; <span style="color: #aaffff; font-weight: bold;">If</span> numer&lt;<span style="color: #33ffdd;">1</span> <span style="color: #aaffff; font-weight: bold;">Then</span> numer=<span style="color: #33ffdd;">1</span><br />
&nbsp; &nbsp; &nbsp; <span style="color: #aaffff; font-weight: bold;">If</span> numer&gt;<span style="color: #33ffdd;">30</span> <span style="color: #aaffff; font-weight: bold;">Then</span> numer=<span style="color: #33ffdd;">30</span><br />
&nbsp; &nbsp;<span style="color: #aaffff; font-weight: bold;">EndIf</span> &nbsp;<br />
<span style="color: #aaffff; font-weight: bold;">EndIf</span> <br />
<br />
<span style="color: #aaffff; font-weight: bold;">Text</span> <span style="color: #33ffdd;">0</span>,<span style="color: #33ffdd;">0</span>,numer<br />
<span style="color: #aaffff; font-weight: bold;">Flip</span> <br />
<span style="color: #aaffff; font-weight: bold;">Wend</span> <br />
<br />
fileout = <span style="color: #aaffff; font-weight: bold;">WriteFile</span><span style=" ">&#40;</span><span style="color: #00ff66;">&quot;cartdata.dat&quot;</span><span style=" ">&#41;</span><br />
<span style="color: #aaffff; font-weight: bold;">For</span> &nbsp;n=<span style="color: #33ffdd;">1</span> <span style="color: #aaffff; font-weight: bold;">To</span> <span style="color: #33ffdd;">64</span><br />
&nbsp; &nbsp; <span style="color: #aaffff; font-weight: bold;">For</span> &nbsp;m=<span style="color: #33ffdd;">1</span> <span style="color: #aaffff; font-weight: bold;">To</span> <span style="color: #33ffdd;">64</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; stek=ArrayGrid<span style=" ">&#40;</span>m,n<span style=" ">&#41;</span><span style="color: #33ffdd;">+1</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aaffff; font-weight: bold;">WriteLine</span><span style=" ">&#40;</span>fileout, stek <span style=" ">&#41;</span> <br />
&nbsp; &nbsp; <span style="color: #aaffff; font-weight: bold;">Next</span><br />
&nbsp; &nbsp; <span style="color: #aaffff; font-weight: bold;">WriteLine</span><span style=" ">&#40;</span>fileout, <span style="color: #33ffdd;">1</span> <span style=" ">&#41;</span><br />
<span style="color: #aaffff; font-weight: bold;">Next</span><br />
<br />
<span style="color: #aaffff; font-weight: bold;">CloseFile</span><span style=" ">&#40;</span> fileout<span style=" ">&#41;</span><br />
<br />
<span style="color: #aaffff; font-weight: bold;">End</span> <br />
<br />
<span style="color: #ffee00">;functions</span><br />
<br />
<span style="color: #aaffff; font-weight: bold;">Function</span> ff<span style=" ">&#40;</span><span style=" ">&#41;</span><br />
i=<span style="color: #33ffdd;">0</span><br />
j=<span style="color: #33ffdd;">0</span><br />
<span style="color: #aaffff; font-weight: bold;">While</span> i&lt;<span style="color: #33ffdd;">64</span><br />
x=x<span style="color: #33ffdd;">+12</span> <br />
i=i<span style="color: #33ffdd;">+1</span><br />
y=<span style="color: #33ffdd;">0</span><br />
<span style="color: #aaffff; font-weight: bold;">While</span> j&lt;<span style="color: #33ffdd;">64</span><br />
&nbsp; &nbsp; y=y<span style="color: #33ffdd;">+11</span><br />
&nbsp; &nbsp; &nbsp;j=j<span style="color: #33ffdd;">+1</span><br />
&nbsp; &nbsp; &nbsp;<span style="color: #aaffff; font-weight: bold;">DrawImage</span> tim,<span style="color: #33ffdd;">10</span>+x,<span style="color: #33ffdd;">12</span>+y,ArrayGrid<span style=" ">&#40;</span>i,j<span style=" ">&#41;</span><br />
<span style="color: #aaffff; font-weight: bold;">Wend</span><br />
j=<span style="color: #33ffdd;">0</span><br />
<span style="color: #aaffff; font-weight: bold;">Wend</span><br />
<span style="color: #aaffff; font-weight: bold;">End Function</span> <br />
<br />
<span style="color: #aaffff; font-weight: bold;">Function</span> ff2<span style=" ">&#40;</span><span style=" ">&#41;</span><br />
i=<span style="color: #33ffdd;">0</span><br />
j=<span style="color: #33ffdd;">0</span><br />
k=<span style="color: #33ffdd;">0</span><br />
<span style="color: #aaffff; font-weight: bold;">While</span> i&lt;<span style="color: #33ffdd;">3</span><span style="color: #ffee00">;&lt;= кол-во рядов</span><br />
y=y<span style="color: #33ffdd;">+17</span><br />
i=i<span style="color: #33ffdd;">+1</span><br />
x=<span style="color: #33ffdd;">0</span><br />
<span style="color: #aaffff; font-weight: bold;">While</span> j&lt;<span style="color: #33ffdd;">10</span><br />
&nbsp; &nbsp; x=x<span style="color: #33ffdd;">+17</span><br />
&nbsp; &nbsp; &nbsp;j=j<span style="color: #33ffdd;">+1</span><br />
&nbsp; &nbsp; &nbsp;<span style="color: #aaffff; font-weight: bold;">DrawImage</span> tim, <span style="color: #33ffdd;">799</span>+x,<span style="color: #33ffdd;">102</span>+y, k<br />
&nbsp; &nbsp; k=k<span style="color: #33ffdd;">+1</span><br />
<span style="color: #aaffff; font-weight: bold;">Wend</span><br />
j=<span style="color: #33ffdd;">0</span><br />
<span style="color: #aaffff; font-weight: bold;">Wend</span><br />
</p>
<span style="color: #aaffff; font-weight: bold;">End Function</span></div>
<p>А вот картинки, необходимые для работы проги:
</p>
<div class="center"><div class="floatnone"><span><a href="http://blitzetcetera.org/index.php/%D0%98%D0%B7%D0%BE%D0%B1%D1%80%D0%B0%D0%B6%D0%B5%D0%BD%D0%B8%D0%B5:MapEditor-Tiles.png" class="image" title=""><img alt="" longdesc="http://blitzetcetera.org/index.php/%D0%98%D0%B7%D0%BE%D0%B1%D1%80%D0%B0%D0%B6%D0%B5%D0%BD%D0%B8%D0%B5:MapEditor-Tiles.png" src="umxn5czk.png" width="310" height="10" /></a></span></div></div>
<div class="center"><div class="floatnone"><span><a href="http://blitzetcetera.org/index.php/%D0%98%D0%B7%D0%BE%D0%B1%D1%80%D0%B0%D0%B6%D0%B5%D0%BD%D0%B8%D0%B5:MapEditor-Cursors.png" class="image" title=""><img alt="" longdesc="http://blitzetcetera.org/index.php/%D0%98%D0%B7%D0%BE%D0%B1%D1%80%D0%B0%D0%B6%D0%B5%D0%BD%D0%B8%D0%B5:MapEditor-Cursors.png" src="fdghu829.png" width="320" height="40" /></a></span></div></div>
<div align="right"><a href="http://blitzetcetera.org/images/8/81/Map_Editor.zip" class="internal" title="Map Editor.zip">скачать архив с файлами к статье</a></div>
<hr />
<p>Автор: <a href="http://blitzetcetera.org/index.php/%D0%A3%D1%87%D0%B0%D1%81%D1%82%D0%BD%D0%B8%D0%BA:Avel" title="Участник:Avel">Агнислав Липкан</a> (e-mail: avelnet@yandex.ru)
</p><!-- 
Pre-expand include size: 1883 bytes
Post-expand include size: 320 bytes
Template argument size: 21 bytes
Maximum: 2097152 bytes
-->

<!-- Saved in parser cache with key db1:pcache:idhash:670-0!1!0!!ru!2 and timestamp 20071110033616 -->
<div class="printfooter">
Получено с <a href="n8vy_5me.html">http://blitzetcetera.org/index.php/%D0%A1%D0%BE%D0%B7%D0%B4%D0%B0%D0%BD%D0%B8%D0%B5_%D1%80%D0%B5%D0%B4%D0%B0%D0%BA%D1%82%D0%BE%D1%80%D0%B0_%D0%BA%D0%B0%D1%80%D1%82%2C_%D0%BD%D0%B5%D1%81%D1%82%D0%B0%D0%BD%D0%B4%D0%B0%D1%80%D1%82%D0%BD%D1%8B%D0%B9_%D0%BF%D0%BE%D0%B4%D1%85%D0%BE%D0%B4</a></div>
			<!-- end content -->			<div class="visualClear"></div>				</td>				<td class="rightside">				</td>			</tr>		</table>		</div>	</div>		</div>	
		<script type="text/javascript">if (window.runOnloadHook) runOnloadHook();</script>
</div></body>
<!-- Mirrored from localhost/index.php/%D0%A1%D0%BE%D0%B7%D0%B4%D0%B0%D0%BD%D0%B8%D0%B5_%D1%80%D0%B5%D0%B4%D0%B0%D0%BA%D1%82%D0%BE%D1%80%D0%B0_%D0%BA%D0%B0%D1%80%D1%82%2C_%D0%BD%D0%B5%D1%81%D1%82%D0%B0%D0%BD%D0%B4%D0%B0%D1%80%D1%82%D0%BD%D1%8B%D0%B9_%D0%BF%D0%BE%D0%B4%D1%85%D0%BE%D0%B4 by HTTrack Website Copier/3.x [XR&CO'2007], Sat, 10 Nov 2007 05:16:12 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8"><!-- /Added by HTTrack -->
</html>