<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml" xml:lang="ru" lang="ru" dir="ltr">	
<!-- Mirrored from localhost/index.php/%D0%97%D0%B0%D0%B3%D1%80%D1%83%D0%B7%D0%BA%D0%B0_%D0%B8_%D1%81%D0%BE%D1%85%D1%80%D0%B0%D0%BD%D0%B5%D0%BD%D0%B8%D0%B5 by HTTrack Website Copier/3.x [XR&CO'2007], Sat, 10 Nov 2007 05:16:49 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8"><!-- /Added by HTTrack -->
<head>		<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />				<meta name="keywords" content="Загрузка и сохранение,Impersonalis" />
		<link rel="shortcut icon" href="http://blitzetcetera.org/favicon.ico" />
		<link rel="search" type="application/opensearchdescription+xml" href="http://blitzetcetera.org/opensearch_desc.php" title="Blitz Et Cetera (Русский)" />
		<title>Загрузка и сохранение — Blitz Et Cetera</title>		<style type="text/css" media="screen,projection">/*<![CDATA[*/ @import "bvih5rde.css?63"; /*]]>*/</style>		<link rel="stylesheet" type="text/css" media="print" href="gcxktlm6.css?63" />		<link rel="stylesheet" type="text/css" media="handheld" href="zumsslq_.css?63" />		<!--[if lt IE 5.5000]><style type="text/css">@import "/skins/OfflineNew/IE50Fixes.css?63";</style><![endif]-->		<!--[if IE 5.5000]><style type="text/css">@import "/skins/OfflineNew/IE55Fixes.css?63";</style><![endif]-->		<!--[if IE 6]><style type="text/css">@import "/skins/OfflineNew/IE60Fixes.css?63";</style><![endif]-->		<!--[if IE 7]><style type="text/css">@import "/skins/OfflineNew/IE70Fixes.css?63";</style><![endif]-->		<!--[if lt IE 7]><script type="text/javascript" src="/skins/common/IEFixes.js?63"></script>		<meta http-equiv="imagetoolbar" content="no" /><![endif]-->		<script type= "text/javascript">/*<![CDATA[*/
var skin = "OfflineNew";
var stylepath = "/skins";
var wgArticlePath = "/index.php/$1";
var wgScriptPath = "";
var wgServer = "http://blitzetcetera.org/";
var wgCanonicalNamespace = "";
var wgCanonicalSpecialPageName = false;
var wgNamespaceNumber = 0;
var wgPageName = "Загрузка_и_сохранение";
var wgTitle = "Загрузка и сохранение";
var wgAction = "view";
var wgArticleId = "759";
var wgIsArticle = true;
var wgUserName = null;
var wgUserGroups = null;
var wgUserLanguage = "ru";
var wgContentLanguage = "ru";
var wgBreakFrames = false;
var wgCurRevisionId = "3559";
/*]]>*/</script>
		<script type="text/javascript" src="2nq-6cel.js?63"><!-- wikibits js --></script>		<script type="text/javascript" src="http://blitzetcetera.org/index.php?title=-&amp;action=raw&amp;gen=js"><!-- site js --></script>		<style type="text/css">/*<![CDATA[*/
@import "http://blitzetcetera.org/index.php?title=MediaWiki:Common.css&amp;usemsgcache=yes&amp;action=raw&amp;ctype=text/css&amp;smaxage=18000";
@import "http://blitzetcetera.org/index.php?title=MediaWiki:OfflineNew.css&amp;usemsgcache=yes&amp;action=raw&amp;ctype=text/css&amp;smaxage=18000";
@import "http://blitzetcetera.org/index.php?title=-&amp;action=raw&amp;gen=css&amp;maxage=18000";
/*]]>*/</style>		<!-- Head Scripts -->	</head><body  class="mediawiki ns-0 ltr page-Загрузка_и_сохранение">	<div id="globalWrapper">	<div id="logocontainer">		<table align="center">		  <tr>				<td id="blitzetclogo">				</td>			</tr>		</table>	</div>	<div id="magbar">	Журнал о программированнии на языках Blitz3D, BlitzMax, BlitzPlus	</div>		<div id="column-content">	<div id="content">		<a name="top" id="top"></a>				<div id="bodyContent">		<table cellspacing=0 cellpadding=0 width=100%>			<tr>			  <td class="leftside">				</td>				<td class="sheetbody">					<h1 class="sheet">Загрузка и сохранение</h1>			<h3 id="siteSub">Материал из Blitz Et Cetera.</h3>			<div id="contentSub"></div>			<!-- start content -->			<table id="toc" class="toc" summary="Содержание"><tr><td><div id="toctitle"><h2>Содержание</h2></div>
<ul>
<li class="toclevel-1"><a href="#.D0.92.D0.B2.D0.B5.D0.B4.D0.B5.D0.BD.D0.B8.D0.B5"><span class="tocnumber">1</span> <span class="toctext">Введение</span></a></li>
<li class="toclevel-1"><a href="#.D0.A2.D0.B5.D1.81.D1.82"><span class="tocnumber">2</span> <span class="toctext">Тест</span></a></li>
<li class="toclevel-1"><a href="#.D0.A1.D0.BE.D1.85.D1.80.D0.B0.D0.BD.D0.B5.D0.BD.D0.B8.D0.B5"><span class="tocnumber">3</span> <span class="toctext">Сохранение</span></a></li>
<li class="toclevel-1"><a href="#.D0.97.D0.B0.D0.B3.D1.80.D1.83.D0.B7.D0.BA.D0.B0"><span class="tocnumber">4</span> <span class="toctext">Загрузка</span></a></li>
</ul>
</td></tr></table><script type="text/javascript"> if (window.showTocToggle) { var tocShowText = "показать"; var tocHideText = "убрать"; showTocToggle(); } </script>
<a name=".D0.92.D0.B2.D0.B5.D0.B4.D0.B5.D0.BD.D0.B8.D0.B5"></a><h2><span class="editsection">[<a href="http://blitzetcetera.org/index.php?title=%D0%97%D0%B0%D0%B3%D1%80%D1%83%D0%B7%D0%BA%D0%B0_%D0%B8_%D1%81%D0%BE%D1%85%D1%80%D0%B0%D0%BD%D0%B5%D0%BD%D0%B8%D0%B5&amp;action=edit&amp;section=1" title="Править секцию: Введение">править</a>]</span> <span class="mw-headline">Введение</span></h2>
<p>Довольно частый вопрос на форумах. Почему-то многие начинающие считают, что сохранение - это какой-то полумистический процесс, доступный только гуру, и, сводящийся, как минимум, чуть ли не к дампу памяти процесса (стереотип сродни тому, что видео-файл - это видео, музыкальный - это музыка; т.е. человек не воспринимает, что ВСЁ ЭТО - всего лишь байты и, при определённом раскладе, один и тот же файл может быть и видео и текстом - зависит от метода обработки). Возможно это связано со зрелищностью программирования игр; думаю, если бы всё сводилось к какой-нибудь школьной задачке типа: сохраните числа, введенные с клавиатуры - вопросов бы поубавилось. Так в чём же дело? Не стоит забывать, что всё в игровом мире описывается структурами данных, т.е., в конечном счёте, числами - можно сказать - Matrix =) Думаю, из вышеприведённых выкладок нетрудно умозаключить следующее: никакие сверх-хитрые приёмы мы юзать не будем, достаточно лишь сохранить параметры (характеристики, обобщённые координаты/силы, etc) в файл.
</p>
<a name=".D0.A2.D0.B5.D1.81.D1.82"></a><h2><span class="editsection">[<a href="http://blitzetcetera.org/index.php?title=%D0%97%D0%B0%D0%B3%D1%80%D1%83%D0%B7%D0%BA%D0%B0_%D0%B8_%D1%81%D0%BE%D1%85%D1%80%D0%B0%D0%BD%D0%B5%D0%BD%D0%B8%D0%B5&amp;action=edit&amp;section=2" title="Править секцию: Тест">править</a>]</span> <span class="mw-headline">Тест</span></h2>
<p>Напишем примитивненькую прогу для теста:
</p>
<div class="bb" style="font-family: monospace;background-color:#FFFFFF;border:1px dashed #CCCCCC;padding:10px;background-color:#225588;color:#FFFFFF;border:1px solid #003040;padding:10px;"><span style="color: #aaffff; font-weight: bold;">Graphics</span> <span style="color: #33ffdd;">800</span>,<span style="color: #33ffdd;">600</span>,<span style="color: #33ffdd;">32</span>,<span style="color: #33ffdd;">2</span><br />
<p><span style="color: #aaffff; font-weight: bold;">SetBuffer</span> <span style="color: #aaffff; font-weight: bold;">BackBuffer</span><span style=" ">&#40;</span><span style=" ">&#41;</span><br />
<br />
<span style="color: #aaffff; font-weight: bold;">Const</span> R=<span style="color: #33ffdd;">60</span><br />
<br />
<span style="color: #aaffff; font-weight: bold;">Type</span> Sphere2D<br />
&nbsp; <span style="color: #aaffff; font-weight: bold;">Field</span> x<br />
&nbsp; <span style="color: #aaffff; font-weight: bold;">Field</span> y<br />
<span style="color: #aaffff; font-weight: bold;">End Type</span><br />
<br />
<span style="color: #aaffff; font-weight: bold;">Function</span> createSphere2D.Sphere2D<span style=" ">&#40;</span>x,y<span style=" ">&#41;</span><br />
&nbsp; S.Sphere2D=<span style="color: #aaffff; font-weight: bold;">New</span> Sphere2D<br />
&nbsp; S\x=x<br />
&nbsp; S\y=y<br />
&nbsp; <span style="color: #aaffff; font-weight: bold;">Return</span> S<br />
<span style="color: #aaffff; font-weight: bold;">End Function</span><br />
<br />
<span style="color: #aaffff; font-weight: bold;">Function</span> DrawALLSphere2D<span style=" ">&#40;</span><span style=" ">&#41;</span><br />
&nbsp; <span style="color: #aaffff; font-weight: bold;">For</span> S.Sphere2D=<span style="color: #aaffff; font-weight: bold;">Each</span> Sphere2D<br />
&nbsp; &nbsp; <span style="color: #aaffff; font-weight: bold;">Oval</span> S\x-R,S\y-R,R*<span style="color: #33ffdd;">2</span>,R*<span style="color: #33ffdd;">2</span><br />
&nbsp; <span style="color: #aaffff; font-weight: bold;">Next</span><br />
<span style="color: #aaffff; font-weight: bold;">End Function</span><br />
<br />
<span style="color: #aaffff; font-weight: bold;">While</span> <span style="color: #aaffff; font-weight: bold;">Not</span> <span style="color: #aaffff; font-weight: bold;">KeyHit</span><span style=" ">&#40;</span><span style="color: #33ffdd;">1</span><span style=" ">&#41;</span><br />
&nbsp; <span style="color: #aaffff; font-weight: bold;">If</span> <span style="color: #aaffff; font-weight: bold;">MouseHit</span><span style=" ">&#40;</span><span style="color: #33ffdd;">1</span><span style=" ">&#41;</span><br />
&nbsp; &nbsp; CreateSphere2D<span style=" ">&#40;</span><span style="color: #aaffff; font-weight: bold;">MouseX</span><span style=" ">&#40;</span><span style=" ">&#41;</span>,<span style="color: #aaffff; font-weight: bold;">MouseY</span><span style=" ">&#40;</span><span style=" ">&#41;</span><span style=" ">&#41;</span><br />
&nbsp; <span style="color: #aaffff; font-weight: bold;">EndIf</span><br />
&nbsp; DrawALLSphere2D<span style=" ">&#40;</span><span style=" ">&#41;</span><br />
&nbsp; <span style="color: #aaffff; font-weight: bold;">Flip</span><br />
<span style="color: #aaffff; font-weight: bold;">Wend</span><br />
</p>
<span style="color: #aaffff; font-weight: bold;">End</span></div>
<p>Запустите её и покликайте левым ухом мыша по экрану. В месте долбления будет появляться круг...
<i>Вот сейчас задумался над названием типа Sphere2D... Бывает и хуже...&nbsp;:)</i>
</p>
<a name=".D0.A1.D0.BE.D1.85.D1.80.D0.B0.D0.BD.D0.B5.D0.BD.D0.B8.D0.B5"></a><h2><span class="editsection">[<a href="http://blitzetcetera.org/index.php?title=%D0%97%D0%B0%D0%B3%D1%80%D1%83%D0%B7%D0%BA%D0%B0_%D0%B8_%D1%81%D0%BE%D1%85%D1%80%D0%B0%D0%BD%D0%B5%D0%BD%D0%B8%D0%B5&amp;action=edit&amp;section=3" title="Править секцию: Сохранение">править</a>]</span> <span class="mw-headline">Сохранение</span></h2>
<p>Наша цель - запечатлеть всю эту красоту из кружочков для потомков. Создадим специальную функцию.
</p>
<div class="bb" style="font-family: monospace;background-color:#FFFFFF;border:1px dashed #CCCCCC;padding:10px;background-color:#225588;color:#FFFFFF;border:1px solid #003040;padding:10px;"><span style="color: #aaffff; font-weight: bold;">Function</span> SaveLevel<span style=" ">&#40;</span>name$<span style=" ">&#41;</span><br />
<p>&nbsp; File=<span style="color: #aaffff; font-weight: bold;">WriteFile</span><span style=" ">&#40;</span>name$+<span style="color: #00ff66;">&quot;.txt&quot;</span><span style=" ">&#41;</span><br />
</p>
<span style="color: #aaffff; font-weight: bold;">End Function</span></div>
<p>name$ -какое-то произвольное имя сохранялки. Имя для файла с этой сохранялкой, вы, конечно, можете придумать любое (например, чтобы легче пропарсить какие-нибудь параметры (дата/имя_игрока/etc),вынести их в имя файла), но в данном примере оно будет тупо повторять имя сохранялки. И иметь расширение TXT (с расширением те же особенности, что и с первой частью имени - может быть любым, зависит от конкретики задачи).
</p>
<div class="bb" style="font-family: monospace;background-color:#FFFFFF;border:1px dashed #CCCCCC;padding:10px;background-color:#225588;color:#FFFFFF;border:1px solid #003040;padding:10px;"><span style="color: #aaffff; font-weight: bold;">Function</span> SaveLevel<span style=" ">&#40;</span>name$<span style=" ">&#41;</span><br />
<p>&nbsp; File=<span style="color: #aaffff; font-weight: bold;">WriteFile</span><span style=" ">&#40;</span>name$+<span style="color: #00ff66;">&quot;.txt&quot;</span><span style=" ">&#41;</span><br />
&nbsp; <span style="color: #aaffff; font-weight: bold;">For</span> S.Sphere2D=<span style="color: #aaffff; font-weight: bold;">Each</span> Sphere2D<br />
&nbsp; <span style="color: #aaffff; font-weight: bold;">Next</span><br />
&nbsp; <span style="color: #aaffff; font-weight: bold;">CloseFile</span><span style=" ">&#40;</span>File<span style=" ">&#41;</span><br />
</p>
<span style="color: #aaffff; font-weight: bold;">End Function</span></div>
<p>Вот здесь и появляется проблема - вычленение необходимого минимума информации. Но с этим, боюсь, вам придётся разбираться самолично. Здесь же - очевидно, что нам необходимы координаты сфер.
</p>
<div class="bb" style="font-family: monospace;background-color:#FFFFFF;border:1px dashed #CCCCCC;padding:10px;background-color:#225588;color:#FFFFFF;border:1px solid #003040;padding:10px;"><span style="color: #aaffff; font-weight: bold;">Function</span> SaveLevel<span style=" ">&#40;</span>name$<span style=" ">&#41;</span><br />
<p>&nbsp; File=<span style="color: #aaffff; font-weight: bold;">WriteFile</span><span style=" ">&#40;</span>name$+<span style="color: #00ff66;">&quot;.txt&quot;</span><span style=" ">&#41;</span><br />
&nbsp; <span style="color: #aaffff; font-weight: bold;">For</span> S.Sphere2D=<span style="color: #aaffff; font-weight: bold;">Each</span> Sphere2D<br />
&nbsp; &nbsp; <span style="color: #aaffff; font-weight: bold;">WriteInt</span><span style=" ">&#40;</span>File,S\x<span style=" ">&#41;</span><br />
&nbsp; &nbsp; <span style="color: #aaffff; font-weight: bold;">WriteInt</span><span style=" ">&#40;</span>File,S\y<span style=" ">&#41;</span><br />
&nbsp; <span style="color: #aaffff; font-weight: bold;">Next</span><br />
&nbsp; <span style="color: #aaffff; font-weight: bold;">CloseFile</span><span style=" ">&#40;</span>File<span style=" ">&#41;</span><br />
</p>
<span style="color: #aaffff; font-weight: bold;">End Function</span></div>
<p>Каким образом сохранять число - строкой или 4-мя байтами - также зависит от конкретики задачи. Здесь мы пойдём по пути минимального расхода дискового пространства.
</p>
<div class="bb" style="font-family: monospace;background-color:#FFFFFF;border:1px dashed #CCCCCC;padding:10px;background-color:#225588;color:#FFFFFF;border:1px solid #003040;padding:10px;"><span style="color: #aaffff; font-weight: bold;">While</span> <span style="color: #aaffff; font-weight: bold;">Not</span> <span style="color: #aaffff; font-weight: bold;">KeyHit</span><span style=" ">&#40;</span><span style="color: #33ffdd;">1</span><span style=" ">&#41;</span><br />
<p>&nbsp; <span style="color: #aaffff; font-weight: bold;">If</span> <span style="color: #aaffff; font-weight: bold;">MouseHit</span><span style=" ">&#40;</span><span style="color: #33ffdd;">1</span><span style=" ">&#41;</span><br />
&nbsp; &nbsp; CreateSphere2D<span style=" ">&#40;</span><span style="color: #aaffff; font-weight: bold;">MouseX</span><span style=" ">&#40;</span><span style=" ">&#41;</span>,<span style="color: #aaffff; font-weight: bold;">MouseY</span><span style=" ">&#40;</span><span style=" ">&#41;</span><span style=" ">&#41;</span><br />
&nbsp; <span style="color: #aaffff; font-weight: bold;">EndIf</span><br />
&nbsp; <span style="color: #aaffff; font-weight: bold;">If</span> <span style="color: #aaffff; font-weight: bold;">MouseHit</span><span style=" ">&#40;</span><span style="color: #33ffdd;">2</span><span style=" ">&#41;</span><br />
&nbsp; &nbsp; Savelevel<span style=" ">&#40;</span><span style="color: #00ff66;">&quot;1&quot;</span><span style=" ">&#41;</span><br />
&nbsp; <span style="color: #aaffff; font-weight: bold;">EndIf</span><br />
&nbsp; DrawALLSphere2D<span style=" ">&#40;</span><span style=" ">&#41;</span><br />
&nbsp; <span style="color: #aaffff; font-weight: bold;">Flip</span><br />
</p>
<span style="color: #aaffff; font-weight: bold;">Wend</span></div>
<p>Собственно, можно уже тестить: понатыркать кружочков и нажать правую кнопку мыши. После чего, в папке с прогой появится файл 1.txt, содержащий необходимую информацию.
</p>
<a name=".D0.97.D0.B0.D0.B3.D1.80.D1.83.D0.B7.D0.BA.D0.B0"></a><h2><span class="editsection">[<a href="http://blitzetcetera.org/index.php?title=%D0%97%D0%B0%D0%B3%D1%80%D1%83%D0%B7%D0%BA%D0%B0_%D0%B8_%D1%81%D0%BE%D1%85%D1%80%D0%B0%D0%BD%D0%B5%D0%BD%D0%B8%D0%B5&amp;action=edit&amp;section=4" title="Править секцию: Загрузка">править</a>]</span> <span class="mw-headline">Загрузка</span></h2>
<p>Теперь займёмся загрузкой "уровня".
</p>
<div class="bb" style="font-family: monospace;background-color:#FFFFFF;border:1px dashed #CCCCCC;padding:10px;background-color:#225588;color:#FFFFFF;border:1px solid #003040;padding:10px;"><span style="color: #aaffff; font-weight: bold;">Function</span> LoadLevel<span style=" ">&#40;</span>name$<span style=" ">&#41;</span><br />
<p>&nbsp; file=<span style="color: #aaffff; font-weight: bold;">ReadFile</span><span style=" ">&#40;</span>name$+<span style="color: #00ff66;">&quot;.txt&quot;</span><span style=" ">&#41;</span><br />
&nbsp; <span style="color: #aaffff; font-weight: bold;">CloseFile</span><span style=" ">&#40;</span>file<span style=" ">&#41;</span><br />
</p>
<span style="color: #aaffff; font-weight: bold;">End Function</span></div>
<p>Одна из распространённых ошибок - люди забывают очистить игровой мир, перед его загрузкой, в результате чего получают 2ух главных героев,двойное кол-во монстров и т.п.
</p>
<div class="bb" style="font-family: monospace;background-color:#FFFFFF;border:1px dashed #CCCCCC;padding:10px;background-color:#225588;color:#FFFFFF;border:1px solid #003040;padding:10px;"><span style="color: #aaffff; font-weight: bold;">Function</span> LoadLevel<span style=" ">&#40;</span>name$<span style=" ">&#41;</span><br />
<p>&nbsp; <span style="color: #aaffff; font-weight: bold;">Delete</span> <span style="color: #aaffff; font-weight: bold;">Each</span> Sphere2D<br />
&nbsp; file=<span style="color: #aaffff; font-weight: bold;">ReadFile</span><span style=" ">&#40;</span>name$+<span style="color: #00ff66;">&quot;.txt&quot;</span><span style=" ">&#41;</span><br />
&nbsp; <span style="color: #aaffff; font-weight: bold;">CloseFile</span><span style=" ">&#40;</span>file<span style=" ">&#41;</span><br />
</p>
<span style="color: #aaffff; font-weight: bold;">End Function</span></div>
<p>Организуем цикл чтения и создания объектов.
</p>
<div class="bb" style="font-family: monospace;background-color:#FFFFFF;border:1px dashed #CCCCCC;padding:10px;background-color:#225588;color:#FFFFFF;border:1px solid #003040;padding:10px;"><span style="color: #aaffff; font-weight: bold;">Function</span> LoadLevel<span style=" ">&#40;</span>name$<span style=" ">&#41;</span><br />
<p>&nbsp; <span style="color: #aaffff; font-weight: bold;">Delete</span> <span style="color: #aaffff; font-weight: bold;">Each</span> Sphere2D<br />
&nbsp; file=<span style="color: #aaffff; font-weight: bold;">ReadFile</span><span style=" ">&#40;</span>name$+<span style="color: #00ff66;">&quot;.txt&quot;</span><span style=" ">&#41;</span><br />
&nbsp; <span style="color: #aaffff; font-weight: bold;">While</span> <span style="color: #aaffff; font-weight: bold;">Not</span> <span style="color: #aaffff; font-weight: bold;">Eof</span><span style=" ">&#40;</span>File<span style=" ">&#41;</span><br />
&nbsp; &nbsp; a=<span style="color: #aaffff; font-weight: bold;">ReadInt</span><span style=" ">&#40;</span>file<span style=" ">&#41;</span><br />
&nbsp; &nbsp; b=<span style="color: #aaffff; font-weight: bold;">ReadInt</span><span style=" ">&#40;</span>file<span style=" ">&#41;</span><br />
&nbsp; &nbsp; CreateSphere2D<span style=" ">&#40;</span>a,b<span style=" ">&#41;</span><br />
&nbsp; <span style="color: #aaffff; font-weight: bold;">Wend</span><br />
&nbsp; <span style="color: #aaffff; font-weight: bold;">CloseFile</span><span style=" ">&#40;</span>file<span style=" ">&#41;</span><br />
</p>
<span style="color: #aaffff; font-weight: bold;">End Function</span></div>
<p>ВАЖНО: всегда контролируйте себя - если вы для объектов сохраняли сначал х а затем y, то и грузить их надо в том же порядке. И ещё: чтобы не запутаться в порядке загрузки и передачи загруженного в функции, лучше конструкции типа:
</p>
<div class="bb" style="font-family: monospace;background-color:#FFFFFF;border:1px dashed #CCCCCC;padding:10px;background-color:#225588;color:#FFFFFF;border:1px solid #003040;padding:10px;">CreateSphere2D<span style=" ">&#40;</span><span style="color: #aaffff; font-weight: bold;">ReadInt</span><span style=" ">&#40;</span>file<span style=" ">&#41;</span>,<span style="color: #aaffff; font-weight: bold;">ReadInt</span><span style=" ">&#40;</span>file<span style=" ">&#41;</span><span style=" ">&#41;</span></div>
<p>заменять на:
</p>
<div class="bb" style="font-family: monospace;background-color:#FFFFFF;border:1px dashed #CCCCCC;padding:10px;background-color:#225588;color:#FFFFFF;border:1px solid #003040;padding:10px;">a=<span style="color: #aaffff; font-weight: bold;">ReadInt</span><span style=" ">&#40;</span>file<span style=" ">&#41;</span><br />
<p>b=<span style="color: #aaffff; font-weight: bold;">ReadInt</span><span style=" ">&#40;</span>file<span style=" ">&#41;</span><br />
</p>
CreateSphere2D<span style=" ">&#40;</span>a,b<span style=" ">&#41;</span></div>
<p>Немного модифицируем прогу:
</p>
<div class="bb" style="font-family: monospace;background-color:#FFFFFF;border:1px dashed #CCCCCC;padding:10px;background-color:#225588;color:#FFFFFF;border:1px solid #003040;padding:10px;"><span style="color: #aaffff; font-weight: bold;">Graphics</span> <span style="color: #33ffdd;">800</span>,<span style="color: #33ffdd;">600</span>,<span style="color: #33ffdd;">32</span>,<span style="color: #33ffdd;">2</span><br />
<p><span style="color: #aaffff; font-weight: bold;">SetBuffer</span> <span style="color: #aaffff; font-weight: bold;">BackBuffer</span><span style=" ">&#40;</span><span style=" ">&#41;</span><br />
<br />
<span style="color: #aaffff; font-weight: bold;">Const</span> R=<span style="color: #33ffdd;">60</span><br />
<br />
<span style="color: #aaffff; font-weight: bold;">Type</span> Sphere2D<br />
&nbsp; <span style="color: #aaffff; font-weight: bold;">Field</span> x<br />
&nbsp; <span style="color: #aaffff; font-weight: bold;">Field</span> y<br />
<span style="color: #aaffff; font-weight: bold;">End Type</span><br />
<br />
<span style="color: #aaffff; font-weight: bold;">Function</span> createSphere2D.Sphere2D<span style=" ">&#40;</span>x,y<span style=" ">&#41;</span><br />
&nbsp; S.Sphere2D=<span style="color: #aaffff; font-weight: bold;">New</span> Sphere2D<br />
&nbsp; S\x=x<br />
&nbsp; S\y=y<br />
&nbsp; <span style="color: #aaffff; font-weight: bold;">Return</span> S<br />
<span style="color: #aaffff; font-weight: bold;">End Function</span><br />
<br />
<span style="color: #aaffff; font-weight: bold;">Function</span> DrawALLSphere2D<span style=" ">&#40;</span><span style=" ">&#41;</span><br />
&nbsp; <span style="color: #aaffff; font-weight: bold;">For</span> S.Sphere2D=<span style="color: #aaffff; font-weight: bold;">Each</span> Sphere2D<br />
&nbsp; &nbsp; <span style="color: #aaffff; font-weight: bold;">Oval</span> S\x-R,S\y-R,R*<span style="color: #33ffdd;">2</span>,R*<span style="color: #33ffdd;">2</span><br />
&nbsp; <span style="color: #aaffff; font-weight: bold;">Next</span><br />
<span style="color: #aaffff; font-weight: bold;">End Function</span><br />
<br />
<span style="color: #aaffff; font-weight: bold;">Function</span> SaveLevel<span style=" ">&#40;</span>name$<span style=" ">&#41;</span><br />
&nbsp; File=<span style="color: #aaffff; font-weight: bold;">WriteFile</span><span style=" ">&#40;</span>name$+<span style="color: #00ff66;">&quot;.txt&quot;</span><span style=" ">&#41;</span><br />
&nbsp; <span style="color: #aaffff; font-weight: bold;">For</span> S.Sphere2D=<span style="color: #aaffff; font-weight: bold;">Each</span> Sphere2D<br />
&nbsp; &nbsp; <span style="color: #aaffff; font-weight: bold;">WriteInt</span><span style=" ">&#40;</span>File,S\x<span style=" ">&#41;</span><br />
&nbsp; &nbsp; <span style="color: #aaffff; font-weight: bold;">WriteInt</span><span style=" ">&#40;</span>File,S\y<span style=" ">&#41;</span><br />
&nbsp; <span style="color: #aaffff; font-weight: bold;">Next</span><br />
&nbsp; <span style="color: #aaffff; font-weight: bold;">CloseFile</span><span style=" ">&#40;</span>File<span style=" ">&#41;</span><br />
<span style="color: #aaffff; font-weight: bold;">End Function</span><br />
<br />
<span style="color: #aaffff; font-weight: bold;">Function</span> LoadLevel<span style=" ">&#40;</span>name$<span style=" ">&#41;</span><br />
&nbsp; <span style="color: #aaffff; font-weight: bold;">Delete</span> <span style="color: #aaffff; font-weight: bold;">Each</span> Sphere2D<br />
&nbsp; file=<span style="color: #aaffff; font-weight: bold;">ReadFile</span><span style=" ">&#40;</span>name$+<span style="color: #00ff66;">&quot;.txt&quot;</span><span style=" ">&#41;</span><br />
&nbsp; <span style="color: #aaffff; font-weight: bold;">While</span> <span style="color: #aaffff; font-weight: bold;">Not</span> <span style="color: #aaffff; font-weight: bold;">Eof</span><span style=" ">&#40;</span>File<span style=" ">&#41;</span><br />
&nbsp; &nbsp; a=<span style="color: #aaffff; font-weight: bold;">ReadInt</span><span style=" ">&#40;</span>file<span style=" ">&#41;</span><br />
&nbsp; &nbsp; b=<span style="color: #aaffff; font-weight: bold;">ReadInt</span><span style=" ">&#40;</span>file<span style=" ">&#41;</span><br />
&nbsp; &nbsp; CreateSphere2D<span style=" ">&#40;</span>a,b<span style=" ">&#41;</span><br />
&nbsp; <span style="color: #aaffff; font-weight: bold;">Wend</span><br />
&nbsp; <span style="color: #aaffff; font-weight: bold;">CloseFile</span><span style=" ">&#40;</span>file<span style=" ">&#41;</span><br />
<span style="color: #aaffff; font-weight: bold;">End Function</span><br />
<br />
<span style="color: #aaffff; font-weight: bold;">While</span> <span style="color: #aaffff; font-weight: bold;">Not</span> <span style="color: #aaffff; font-weight: bold;">KeyHit</span><span style=" ">&#40;</span><span style="color: #33ffdd;">1</span><span style=" ">&#41;</span><br />
&nbsp; <span style="color: #aaffff; font-weight: bold;">If</span> <span style="color: #aaffff; font-weight: bold;">MouseHit</span><span style=" ">&#40;</span><span style="color: #33ffdd;">1</span><span style=" ">&#41;</span><br />
&nbsp; &nbsp; CreateSphere2D<span style=" ">&#40;</span><span style="color: #aaffff; font-weight: bold;">MouseX</span><span style=" ">&#40;</span><span style=" ">&#41;</span>,<span style="color: #aaffff; font-weight: bold;">MouseY</span><span style=" ">&#40;</span><span style=" ">&#41;</span><span style=" ">&#41;</span><br />
&nbsp; <span style="color: #aaffff; font-weight: bold;">EndIf</span><br />
&nbsp; <span style="color: #aaffff; font-weight: bold;">If</span> <span style="color: #aaffff; font-weight: bold;">KeyHit</span><span style=" ">&#40;</span><span style="color: #33ffdd;">64</span><span style=" ">&#41;</span> Savelevel<span style=" ">&#40;</span><span style="color: #00ff66;">&quot;1&quot;</span><span style=" ">&#41;</span><br />
&nbsp; <span style="color: #aaffff; font-weight: bold;">If</span> <span style="color: #aaffff; font-weight: bold;">KeyHit</span><span style=" ">&#40;</span><span style="color: #33ffdd;">65</span><span style=" ">&#41;</span> Loadlevel<span style=" ">&#40;</span><span style="color: #00ff66;">&quot;1&quot;</span><span style=" ">&#41;</span>:<span style="color: #aaffff; font-weight: bold;">Cls</span><br />
&nbsp; DrawALLSphere2D<span style=" ">&#40;</span><span style=" ">&#41;</span><br />
&nbsp; <span style="color: #aaffff; font-weight: bold;">Flip</span><br />
<span style="color: #aaffff; font-weight: bold;">Wend</span><br />
</p>
<span style="color: #aaffff; font-weight: bold;">End</span></div>
<p>Вот и всё - F6=сохранить, F7=загрузить.
</p>
<div align="right"><a href="http://blitzetcetera.org/images/5/5a/SaveLoad.bb" class="internal" title="SaveLoad.bb">скачать исходный код</a></div>
<hr />
<p>Автор: <a href="http://blitzetcetera.org/index.php/%D0%A3%D1%87%D0%B0%D1%81%D1%82%D0%BD%D0%B8%D0%BA:Impersonalis" title="Участник:Impersonalis">Impersonalis</a> (e-mail: impersonalis@boolean.name)
</p><!-- 
Pre-expand include size: 1357 bytes
Post-expand include size: 294 bytes
Template argument size: 18 bytes
Maximum: 2097152 bytes
-->

<!-- Saved in parser cache with key db1:pcache:idhash:759-0!1!0!!ru!2 and timestamp 20071110040901 -->
<div class="printfooter">
Получено с <a href="4e2ghlk5.html">http://blitzetcetera.org/index.php/%D0%97%D0%B0%D0%B3%D1%80%D1%83%D0%B7%D0%BA%D0%B0_%D0%B8_%D1%81%D0%BE%D1%85%D1%80%D0%B0%D0%BD%D0%B5%D0%BD%D0%B8%D0%B5</a></div>
			<!-- end content -->			<div class="visualClear"></div>				</td>				<td class="rightside">				</td>			</tr>		</table>		</div>	</div>		</div>	
		<script type="text/javascript">if (window.runOnloadHook) runOnloadHook();</script>
</div></body>
<!-- Mirrored from localhost/index.php/%D0%97%D0%B0%D0%B3%D1%80%D1%83%D0%B7%D0%BA%D0%B0_%D0%B8_%D1%81%D0%BE%D1%85%D1%80%D0%B0%D0%BD%D0%B5%D0%BD%D0%B8%D0%B5 by HTTrack Website Copier/3.x [XR&CO'2007], Sat, 10 Nov 2007 05:16:49 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8"><!-- /Added by HTTrack -->
</html>