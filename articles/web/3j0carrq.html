<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml" xml:lang="ru" lang="ru" dir="ltr">	
<!-- Mirrored from localhost/index.php/%D0%A1%D0%B2%D1%8F%D0%B7%D0%B0%D0%BD%D0%BD%D1%8B%D0%B5_%D1%81%D0%BF%D0%B8%D1%81%D0%BA%D0%B8_%D0%B2_Blitz3D by HTTrack Website Copier/3.x [XR&CO'2007], Sat, 10 Nov 2007 05:16:43 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8"><!-- /Added by HTTrack -->
<head>		<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />				<meta name="keywords" content="Связанные списки в Blitz3D" />
		<link rel="shortcut icon" href="http://blitzetcetera.org/favicon.ico" />
		<link rel="search" type="application/opensearchdescription+xml" href="http://blitzetcetera.org/opensearch_desc.php" title="Blitz Et Cetera (Русский)" />
		<title>Связанные списки в Blitz3D — Blitz Et Cetera</title>		<style type="text/css" media="screen,projection">/*<![CDATA[*/ @import "bvih5rde.css?63"; /*]]>*/</style>		<link rel="stylesheet" type="text/css" media="print" href="gcxktlm6.css?63" />		<link rel="stylesheet" type="text/css" media="handheld" href="zumsslq_.css?63" />		<!--[if lt IE 5.5000]><style type="text/css">@import "/skins/OfflineNew/IE50Fixes.css?63";</style><![endif]-->		<!--[if IE 5.5000]><style type="text/css">@import "/skins/OfflineNew/IE55Fixes.css?63";</style><![endif]-->		<!--[if IE 6]><style type="text/css">@import "/skins/OfflineNew/IE60Fixes.css?63";</style><![endif]-->		<!--[if IE 7]><style type="text/css">@import "/skins/OfflineNew/IE70Fixes.css?63";</style><![endif]-->		<!--[if lt IE 7]><script type="text/javascript" src="/skins/common/IEFixes.js?63"></script>		<meta http-equiv="imagetoolbar" content="no" /><![endif]-->		<script type= "text/javascript">/*<![CDATA[*/
var skin = "OfflineNew";
var stylepath = "/skins";
var wgArticlePath = "/index.php/$1";
var wgScriptPath = "";
var wgServer = "http://blitzetcetera.org/";
var wgCanonicalNamespace = "";
var wgCanonicalSpecialPageName = false;
var wgNamespaceNumber = 0;
var wgPageName = "Связанные_списки_в_Blitz3D";
var wgTitle = "Связанные списки в Blitz3D";
var wgAction = "view";
var wgArticleId = "143";
var wgIsArticle = true;
var wgUserName = null;
var wgUserGroups = null;
var wgUserLanguage = "ru";
var wgContentLanguage = "ru";
var wgBreakFrames = false;
var wgCurRevisionId = "3584";
/*]]>*/</script>
		<script type="text/javascript" src="2nq-6cel.js?63"><!-- wikibits js --></script>		<script type="text/javascript" src="http://blitzetcetera.org/index.php?title=-&amp;action=raw&amp;gen=js"><!-- site js --></script>		<style type="text/css">/*<![CDATA[*/
@import "http://blitzetcetera.org/index.php?title=MediaWiki:Common.css&amp;usemsgcache=yes&amp;action=raw&amp;ctype=text/css&amp;smaxage=18000";
@import "http://blitzetcetera.org/index.php?title=MediaWiki:OfflineNew.css&amp;usemsgcache=yes&amp;action=raw&amp;ctype=text/css&amp;smaxage=18000";
@import "http://blitzetcetera.org/index.php?title=-&amp;action=raw&amp;gen=css&amp;maxage=18000";
/*]]>*/</style>		<!-- Head Scripts -->	</head><body  class="mediawiki ns-0 ltr page-Связанные_списки_в_Blitz3D">	<div id="globalWrapper">	<div id="logocontainer">		<table align="center">		  <tr>				<td id="blitzetclogo">				</td>			</tr>		</table>	</div>	<div id="magbar">	Журнал о программированнии на языках Blitz3D, BlitzMax, BlitzPlus	</div>		<div id="column-content">	<div id="content">		<a name="top" id="top"></a>				<div id="bodyContent">		<table cellspacing=0 cellpadding=0 width=100%>			<tr>			  <td class="leftside">				</td>				<td class="sheetbody">					<h1 class="sheet">Связанные списки в Blitz3D</h1>			<h3 id="siteSub">Материал из Blitz Et Cetera.</h3>			<div id="contentSub"></div>			<!-- start content -->			<table id="toc" class="toc" summary="Содержание"><tr><td><div id="toctitle"><h2>Содержание</h2></div>
<ul>
<li class="toclevel-1"><a href="#.D0.92.D0.B2.D0.B5.D0.B4.D0.B5.D0.BD.D0.B8.D0.B5"><span class="tocnumber">1</span> <span class="toctext">Введение</span></a></li>
<li class="toclevel-1"><a href="#.D0.9C.D0.B0.D1.81.D1.81.D0.B8.D0.B2.D1.8B_.D0.B2_.D1.82.D0.B8.D0.BF.D0.B0.D1.85"><span class="tocnumber">2</span> <span class="toctext">Массивы в типах</span></a></li>
<li class="toclevel-1"><a href="#.D0.A2.D0.B8.D0.BF.D1.8B_.D0.B2.D0.BD.D1.83.D1.82.D1.80.D0.B8_.D1.82.D0.B8.D0.BF.D0.BE.D0.B2"><span class="tocnumber">3</span> <span class="toctext">Типы внутри типов</span></a></li>
<li class="toclevel-1"><a href="#.D0.9A.D0.BE.D0.BC.D0.B0.D0.BD.D0.B4.D1.8B_Object.28.29_.D0.B8_Handle.28.29"><span class="tocnumber">4</span> <span class="toctext">Команды Object() и Handle()</span></a></li>
<li class="toclevel-1"><a href="#.D0.A1.D0.BE.D0.B7.D0.B4.D0.B0.D0.BD.D0.B8.D0.B5_.D1.81.D0.B2.D0.BE.D0.B8.D1.85_.D1.81.D0.BE.D0.B1.D1.81.D1.82.D0.B2.D0.B5.D0.BD.D0.BD.D1.8B.D1.85_.D1.81.D0.B2.D1.8F.D0.B7.D0.B0.D0.BD.D0.BD.D1.8B.D1.85_.D1.81.D0.BF.D0.B8.D1.81.D0.BA.D0.BE.D0.B2"><span class="tocnumber">5</span> <span class="toctext">Создание своих собственных связанных списков</span></a></li>
</ul>
</td></tr></table><script type="text/javascript"> if (window.showTocToggle) { var tocShowText = "показать"; var tocHideText = "убрать"; showTocToggle(); } </script>
<a name=".D0.92.D0.B2.D0.B5.D0.B4.D0.B5.D0.BD.D0.B8.D0.B5"></a><h2><span class="editsection">[<a href="http://blitzetcetera.org/index.php?title=%D0%A1%D0%B2%D1%8F%D0%B7%D0%B0%D0%BD%D0%BD%D1%8B%D0%B5_%D1%81%D0%BF%D0%B8%D1%81%D0%BA%D0%B8_%D0%B2_Blitz3D&amp;action=edit&amp;section=1" title="Править секцию: Введение">править</a>]</span> <span class="mw-headline">Введение</span></h2>
<p>Первое что встает на пути новичков, судя по вопросам на форумах, это типы. Итак, для начала, что же это такое? Представьте себе базу данных, где каждая запись представляет собой несколько полей (имя, фамилия итд). Создать шаблон записи можно так:
</p>
<div class="bb" style="font-family: monospace;background-color:#FFFFFF;border:1px dashed #CCCCCC;padding:10px;background-color:#225588;color:#FFFFFF;border:1px solid #003040;padding:10px;"><span style="color: #aaffff; font-weight: bold;">Type</span> TestType<br />
<p>&nbsp;<span style="color: #aaffff; font-weight: bold;">Field</span> name$<br />
&nbsp;<span style="color: #aaffff; font-weight: bold;">Field</span> age<br />
</p>
<span style="color: #aaffff; font-weight: bold;">End Type</span></div>
<p>Что бы создать запись и присвоить переменной адрес этой записи, делаем так:
</p>
<div class="bb" style="font-family: monospace;background-color:#FFFFFF;border:1px dashed #CCCCCC;padding:10px;background-color:#225588;color:#FFFFFF;border:1px solid #003040;padding:10px;">Test.TestType=<span style="color: #aaffff; font-weight: bold;">New</span> TestType</div>
<p>Запись помещается в конец связанного списка. Для каждого типа создается свой список. Теперь мы можем заполнять поля записи 
</p>
<div class="bb" style="font-family: monospace;background-color:#FFFFFF;border:1px dashed #CCCCCC;padding:10px;background-color:#225588;color:#FFFFFF;border:1px solid #003040;padding:10px;">Test\name$=<span style="color: #00ff66;">&quot;Артур&quot;</span><br />
Test\Age=<span style="color: #33ffdd;">20</span></div>
<p>Итд. Для чего мы можем использовать типы? Представьте, что вы делаете систему частиц. Для каждой частицы необходимо указать скорость движения, координаты, текстуру итд. Ну, тут без типов не обойтись.
</p>
<a name=".D0.9C.D0.B0.D1.81.D1.81.D0.B8.D0.B2.D1.8B_.D0.B2_.D1.82.D0.B8.D0.BF.D0.B0.D1.85"></a><h2><span class="editsection">[<a href="http://blitzetcetera.org/index.php?title=%D0%A1%D0%B2%D1%8F%D0%B7%D0%B0%D0%BD%D0%BD%D1%8B%D0%B5_%D1%81%D0%BF%D0%B8%D1%81%D0%BA%D0%B8_%D0%B2_Blitz3D&amp;action=edit&amp;section=2" title="Править секцию: Массивы в типах">править</a>]</span> <span class="mw-headline">Массивы в типах</span></h2>
<p>Для того чтоб хранить векторы в типе удобно использовать специальный массив. Он не динамический и одномерный. От обычного массива отличается квадратными скобками. Например -  Vector[3]. Пример использования:
</p>
<div class="bb" style="font-family: monospace;background-color:#FFFFFF;border:1px dashed #CCCCCC;padding:10px;background-color:#225588;color:#FFFFFF;border:1px solid #003040;padding:10px;"><span style="color: #aaffff; font-weight: bold;">Type</span> Player<br />
<p>&nbsp;<span style="color: #aaffff; font-weight: bold;">Field</span> X%<span style=" ">&#91;</span><span style="color: #33ffdd;">10</span><span style=" ">&#93;</span>,Y%<span style=" ">&#91;</span><span style="color: #33ffdd;">10</span><span style=" ">&#93;</span><br />
&nbsp;<span style="color: #aaffff; font-weight: bold;">Field</span> Bullet%<span style=" ">&#91;</span><span style="color: #33ffdd;">5</span><span style=" ">&#93;</span><br />
<span style="color: #aaffff; font-weight: bold;">End Type</span><br />
<br />
p.Player=<span style="color: #aaffff; font-weight: bold;">New</span> Player<br />
p\x<span style=" ">&#91;</span><span style="color: #33ffdd;">1</span><span style=" ">&#93;</span>=<span style="color: #33ffdd;">320</span><br />
p\y<span style=" ">&#91;</span><span style="color: #33ffdd;">1</span><span style=" ">&#93;</span>=<span style="color: #33ffdd;">240</span><br />
</p>
p\bullet<span style=" ">&#91;</span><span style="color: #33ffdd;">4</span><span style=" ">&#93;</span>=<span style="color: #33ffdd;">32</span></div>
<p>Массив типов создается точно так же как и обычный, естественно он также является частью связанного списка. Пример:
</p>
<div class="bb" style="font-family: monospace;background-color:#FFFFFF;border:1px dashed #CCCCCC;padding:10px;background-color:#225588;color:#FFFFFF;border:1px solid #003040;padding:10px;"><span style="color: #aaffff; font-weight: bold;">Type</span> Player<br />
<p>&nbsp;<span style="color: #aaffff; font-weight: bold;">Field</span> Number%<br />
<span style="color: #aaffff; font-weight: bold;">End Type</span><br />
<br />
<span style="color: #aaffff; font-weight: bold;">Dim</span> GoodPlayer.Player<span style=" ">&#40;</span><span style="color: #33ffdd;">50</span><span style=" ">&#41;</span><br />
<span style="color: #aaffff; font-weight: bold;">Dim</span> BadPlayer.Player<span style=" ">&#40;</span><span style="color: #33ffdd;">100</span><span style=" ">&#41;</span><br />
<br />
<span style="color: #aaffff; font-weight: bold;">For</span> i=<span style="color: #33ffdd;">0</span> <span style="color: #aaffff; font-weight: bold;">To</span> <span style="color: #33ffdd;">50</span><br />
&nbsp;GoodPlayer<span style=" ">&#40;</span>i<span style=" ">&#41;</span>=<span style="color: #aaffff; font-weight: bold;">New</span> Player<br />
&nbsp;GoodPlayer<span style=" ">&#40;</span>i<span style=" ">&#41;</span>\number=i<br />
<span style="color: #aaffff; font-weight: bold;">Next</span><br />
<br />
<span style="color: #aaffff; font-weight: bold;">For</span> i=<span style="color: #33ffdd;">0</span> <span style="color: #aaffff; font-weight: bold;">To</span> <span style="color: #33ffdd;">100</span><br />
&nbsp;BadPlayer<span style=" ">&#40;</span>i<span style=" ">&#41;</span>=<span style="color: #aaffff; font-weight: bold;">New</span> Player<br />
&nbsp;BadPlayer<span style=" ">&#40;</span>i<span style=" ">&#41;</span>\number=i<br />
</p>
<span style="color: #aaffff; font-weight: bold;">Next</span></div>
<a name=".D0.A2.D0.B8.D0.BF.D1.8B_.D0.B2.D0.BD.D1.83.D1.82.D1.80.D0.B8_.D1.82.D0.B8.D0.BF.D0.BE.D0.B2"></a><h2><span class="editsection">[<a href="http://blitzetcetera.org/index.php?title=%D0%A1%D0%B2%D1%8F%D0%B7%D0%B0%D0%BD%D0%BD%D1%8B%D0%B5_%D1%81%D0%BF%D0%B8%D1%81%D0%BA%D0%B8_%D0%B2_Blitz3D&amp;action=edit&amp;section=3" title="Править секцию: Типы внутри типов">править</a>]</span> <span class="mw-headline">Типы внутри типов</span></h2>
<p>Зачастую вам нужно будет создавать поля в новом типе какого-нибудь другого типа. Вот небольшой пример для иллюстрации:
</p>
<div class="bb" style="font-family: monospace;background-color:#FFFFFF;border:1px dashed #CCCCCC;padding:10px;background-color:#225588;color:#FFFFFF;border:1px solid #003040;padding:10px;"><span style="color: #aaffff; font-weight: bold;">Type</span> Parent <br />
<p>&nbsp;<span style="color: #aaffff; font-weight: bold;">Field</span> Name$ <br />
&nbsp;<span style="color: #aaffff; font-weight: bold;">Field</span> kid.child <br />
&nbsp;<span style="color: #aaffff; font-weight: bold;">Field</span> spouse.parent <br />
<span style="color: #aaffff; font-weight: bold;">End Type</span> <br />
&nbsp;<br />
<span style="color: #aaffff; font-weight: bold;">Type</span> Child <br />
&nbsp;<span style="color: #aaffff; font-weight: bold;">Field</span> Name$ <br />
&nbsp;<span style="color: #aaffff; font-weight: bold;">Field</span> mom.parent,dad.parent <br />
<span style="color: #aaffff; font-weight: bold;">End Type</span> <br />
&nbsp;<br />
papa.parent=<span style="color: #aaffff; font-weight: bold;">New</span> parent <br />
mama.parent=<span style="color: #aaffff; font-weight: bold;">New</span> parent <br />
lamer.child=<span style="color: #aaffff; font-weight: bold;">New</span> child <br />
&nbsp;<br />
papa\name=<span style="color: #00ff66;">&quot;papa&quot;</span> <br />
papa\spouse.parent=mama.parent <br />
papa\kid.child=lamer.child <br />
&nbsp;<br />
mama\name=<span style="color: #00ff66;">&quot;mama&quot;</span> <br />
mama\spouse.parent=papa.parent <br />
mama\kid.child=lamer.child <br />
&nbsp;<br />
lamer\name=<span style="color: #00ff66;">&quot;lamer&quot;</span> <br />
lamer\mom.parent=mama.parent <br />
lamer\dad.parent=papa.parent <br />
&nbsp;<br />
<span style="color: #aaffff; font-weight: bold;">For</span> c.child=<span style="color: #aaffff; font-weight: bold;">Each</span> child <br />
&nbsp;<span style="color: #aaffff; font-weight: bold;">DebugLog</span> c\name+<span style="color: #00ff66;">&quot;'s dad is &quot;</span>+c\dad\name <br />
&nbsp;<span style="color: #aaffff; font-weight: bold;">DebugLog</span> c\name+<span style="color: #00ff66;">&quot;'s mom is &quot;</span>+c\mom\name <br />
<span style="color: #aaffff; font-weight: bold;">Next</span> <br />
<span style="color: #aaffff; font-weight: bold;">For</span> p.parent=<span style="color: #aaffff; font-weight: bold;">Each</span> parent <br />
&nbsp;<span style="color: #aaffff; font-weight: bold;">DebugLog</span> p\name+<span style="color: #00ff66;">&quot; is married to &quot;</span>+p\spouse\name+<span style="color: #00ff66;">&quot; (&quot;</span>+p\kid\name+<span style="color: #00ff66;">&quot; is there child)&quot;</span> <br />
</p>
<span style="color: #aaffff; font-weight: bold;">Next</span></div>
<p>Теперь смотрите в дебуге: Все должно быть предельно понятно за исключением слова  Each. С его помощью мы пробегаем по всему связанному списку записей одного типа. Так же существуют команды Last, First, After и Before. Т.е. если вы хотите получить первую запись из списка вам необходимо сделать так: 
</p>
<div class="bb" style="font-family: monospace;background-color:#FFFFFF;border:1px dashed #CCCCCC;padding:10px;background-color:#225588;color:#FFFFFF;border:1px solid #003040;padding:10px;">FirstParentRecord.parent = <span style="color: #aaffff; font-weight: bold;">First</span> parent</div>
<p>Следующую запись:
</p>
<div class="bb" style="font-family: monospace;background-color:#FFFFFF;border:1px dashed #CCCCCC;padding:10px;background-color:#225588;color:#FFFFFF;border:1px solid #003040;padding:10px;">SecondParentRecord=<span style="color: #aaffff; font-weight: bold;">After</span><span style=" ">&#40;</span>FirstParentRecord<span style=" ">&#41;</span></div>
<p>Итд, думаю с этим все понятно... Ах да, чуть не забыл про команду Insert:
</p>
<div class="bb" style="font-family: monospace;background-color:#FFFFFF;border:1px dashed #CCCCCC;padding:10px;background-color:#225588;color:#FFFFFF;border:1px solid #003040;padding:10px;"><span style="color: #aaffff; font-weight: bold;">Insert</span> SecondParentRecord <span style="color: #aaffff; font-weight: bold;">Before</span> <span style="color: #aaffff; font-weight: bold;">First</span> parent</div>
<p>Перемещает нашу вторую запись в начало списка. Все просто. Для удаления записи используйте Delete SecondParentRecord, а для очистки всего списка Delete Each parent.
</p>
<a name=".D0.9A.D0.BE.D0.BC.D0.B0.D0.BD.D0.B4.D1.8B_Object.28.29_.D0.B8_Handle.28.29"></a><h2><span class="editsection">[<a href="http://blitzetcetera.org/index.php?title=%D0%A1%D0%B2%D1%8F%D0%B7%D0%B0%D0%BD%D0%BD%D1%8B%D0%B5_%D1%81%D0%BF%D0%B8%D1%81%D0%BA%D0%B8_%D0%B2_Blitz3D&amp;action=edit&amp;section=4" title="Править секцию: Команды Object() и Handle()">править</a>]</span> <span class="mw-headline">Команды Object() и Handle()</span></h2>
<p>Команды эти не документированы, но всем давно известны, и широко используются.
</p>
<div class="bb" style="font-family: monospace;background-color:#FFFFFF;border:1px dashed #CCCCCC;padding:10px;background-color:#225588;color:#FFFFFF;border:1px solid #003040;padding:10px;">Handle<span style=" ">&#40;</span><span style="color: #aaffff; font-weight: bold;">Type</span>.something<span style=" ">&#41;</span></div>
<p>Возвращает адрес в памяти указанного типа 
</p>
<div class="bb" style="font-family: monospace;background-color:#FFFFFF;border:1px dashed #CCCCCC;padding:10px;background-color:#225588;color:#FFFFFF;border:1px solid #003040;padding:10px;">Object.Something<span style=" ">&#40;</span>Handle%<span style=" ">&#41;</span></div>
<p>Возвращает тип по указанному адресу в памяти. Если тип не существует, то вы получите ошибку при попытке обратиться к нему. Пример:
</p>
<div class="bb" style="font-family: monospace;background-color:#FFFFFF;border:1px dashed #CCCCCC;padding:10px;background-color:#225588;color:#FFFFFF;border:1px solid #003040;padding:10px;"><span style="color: #aaffff; font-weight: bold;">Type</span> Player<br />
<p>&nbsp;<span style="color: #aaffff; font-weight: bold;">Field</span> X%,Y%<br />
<span style="color: #aaffff; font-weight: bold;">End Type</span><br />
p1.player=<span style="color: #aaffff; font-weight: bold;">New</span> player<br />
&nbsp;p1\x=<span style="color: #33ffdd;">128</span><br />
&nbsp;p1\y=<span style="color: #33ffdd;">64</span><br />
p2.player=<span style="color: #aaffff; font-weight: bold;">New</span> player<br />
&nbsp;p1\x=<span style="color: #33ffdd;">256</span><br />
&nbsp;p1\y=<span style="color: #33ffdd;">128</span><br />
<br />
address1%=Handle<span style=" ">&#40;</span>p1.player<span style=" ">&#41;</span><br />
address2%=Handle<span style=" ">&#40;</span>p2.player<span style=" ">&#41;</span><br />
copy1.player=Object.Player<span style=" ">&#40;</span>address1<span style=" ">&#41;</span><br />
copy2.player=Object.Player<span style=" ">&#40;</span>address2<span style=" ">&#41;</span><br />
</p>
<span style="color: #aaffff; font-weight: bold;">Delete</span> copy1<span style="color: #ffee00">; удаляется оригинал, так как это просто указатель</span></div>
<p>Что первое приходит в голову при виде этих команд? Конечно же быстрый доступ к отдельным записям, читайте игровым объектам. 
</p>
<div class="bb" style="font-family: monospace;background-color:#FFFFFF;border:1px dashed #CCCCCC;padding:10px;background-color:#225588;color:#FFFFFF;border:1px solid #003040;padding:10px;"><span style="color: #aaffff; font-weight: bold;">Graphics3D</span> <span style="color: #33ffdd;">640</span>,<span style="color: #33ffdd;">480</span>,<span style="color: #33ffdd;">0</span>,<span style="color: #33ffdd;">2</span><br />
<p><span style="color: #aaffff; font-weight: bold;">Type</span> info<br />
&nbsp;<span style="color: #aaffff; font-weight: bold;">Field</span> name$,a,b,c,stuff,mass#,physics,etc<br />
<span style="color: #aaffff; font-weight: bold;">End Type</span><br />
<span style="color: #ffee00">;Создаем шарик </span><br />
a.info=<span style="color: #aaffff; font-weight: bold;">New</span> info<br />
a\name$=<span style="color: #00ff66;">&quot;bowling ball&quot;</span><br />
a\mass#=<span style="color: #33ffdd;">0.9</span><br />
ball=<span style="color: #aaffff; font-weight: bold;">CreateSphere</span><span style=" ">&#40;</span><span style=" ">&#41;</span><br />
<span style="color: #aaffff; font-weight: bold;">NameEntity</span> ball,Handle<span style=" ">&#40;</span>a<span style=" ">&#41;</span> <span style="color: #ffee00">; Записываем адрес в имя объекта </span><br />
<span style="color: #ffee00">;Теперь, когда вы к примеру получили объект используя &nbsp;LinePicks, коллизии итд </span><br />
ent = <span style="color: #aaffff; font-weight: bold;">EntityCollided</span><span style=" ">&#40;</span>bat,collisiontype_ball<span style=" ">&#41;</span><br />
<span style="color: #aaffff; font-weight: bold;">If</span> ent<br />
&nbsp;a.info = Object.info<span style=" ">&#40;</span><span style="color: #aaffff; font-weight: bold;">EntityName</span><span style=" ">&#40;</span>ent<span style=" ">&#41;</span><span style=" ">&#41;</span> <span style="color: #ffee00">; получаем нужный нам тип </span><br />
&nbsp;<span style="color: #aaffff; font-weight: bold;">Print</span> a\name$ <span style="color: #ffee00">; и читаем все параметры J </span><br />
&nbsp;<span style="color: #aaffff; font-weight: bold;">Print</span> a\mass#<br />
</p>
<span style="color: #aaffff; font-weight: bold;">End</span> <span style="color: #aaffff; font-weight: bold;">If</span></div>
<p>Таким образом, мы избавляемся от перебора всех записей в поисках нужной через Each.
</p>
<a name=".D0.A1.D0.BE.D0.B7.D0.B4.D0.B0.D0.BD.D0.B8.D0.B5_.D1.81.D0.B2.D0.BE.D0.B8.D1.85_.D1.81.D0.BE.D0.B1.D1.81.D1.82.D0.B2.D0.B5.D0.BD.D0.BD.D1.8B.D1.85_.D1.81.D0.B2.D1.8F.D0.B7.D0.B0.D0.BD.D0.BD.D1.8B.D1.85_.D1.81.D0.BF.D0.B8.D1.81.D0.BA.D0.BE.D0.B2"></a><h2><span class="editsection">[<a href="http://blitzetcetera.org/index.php?title=%D0%A1%D0%B2%D1%8F%D0%B7%D0%B0%D0%BD%D0%BD%D1%8B%D0%B5_%D1%81%D0%BF%D0%B8%D1%81%D0%BA%D0%B8_%D0%B2_Blitz3D&amp;action=edit&amp;section=5" title="Править секцию: Создание своих собственных связанных списков">править</a>]</span> <span class="mw-headline">Создание своих собственных связанных списков</span></h2>
<p>Итак мы наконец подошли к связанным спискам! При создании записей они, как я уже упоминал, помещаются в список. А что если нам нужно несколько списков? Скажем у нас есть куча юнитов. Некоторые из них активны, некоторые нет: Можно задать поле Active и смотреть активный обьект или нет, если активный то обновлять, но в таком случае нам придется перебирать все время всех юнитов. А можно создать отдельный список и помещать туда только тех юнитов которые в данный момент активны и работать уже с этим списком. Для этого скачайте этот <a href="http://blitzetcetera.org/index.php?title=%D0%A1%D0%BB%D1%83%D0%B6%D0%B5%D0%B1%D0%BD%D0%B0%D1%8F:Upload&amp;wpDestFile=BList.bb" class="new" title="BList.bb">файл</a>. Заинклудим его в проект и можем использовать списки:
</p>
<div class="bb" style="font-family: monospace;background-color:#FFFFFF;border:1px dashed #CCCCCC;padding:10px;background-color:#225588;color:#FFFFFF;border:1px solid #003040;padding:10px;"><span style="color: #aaffff; font-weight: bold;">Type</span> Ball<br />
<p><span style="color: #aaffff; font-weight: bold;">Field</span> id<br />
<span style="color: #aaffff; font-weight: bold;">End Type</span><br />
list.BList = <span style="color: #aaffff; font-weight: bold;">New</span> BList<br />
<br />
b.Ball = <span style="color: #aaffff; font-weight: bold;">New</span> Ball<br />
AddFront<span style=" ">&#40;</span>list,Handle<span style=" ">&#40;</span>b<span style=" ">&#41;</span><span style=" ">&#41;</span><br />
ptr% = FirstItem<span style=" ">&#40;</span>list<span style=" ">&#41;</span><br />
</p>
b = Object.Ball<span style=" ">&#40;</span>ptr<span style=" ">&#41;</span></div>
<p>Чуть короче: 
</p>
<div class="bb" style="font-family: monospace;background-color:#FFFFFF;border:1px dashed #CCCCCC;padding:10px;background-color:#225588;color:#FFFFFF;border:1px solid #003040;padding:10px;"><span style="color: #aaffff; font-weight: bold;">Type</span> Ball<br />
<p><span style="color: #aaffff; font-weight: bold;">Field</span> id<br />
<span style="color: #aaffff; font-weight: bold;">End Type</span><br />
list.BList = <span style="color: #aaffff; font-weight: bold;">New</span> BList<br />
<br />
AddFront<span style=" ">&#40;</span>list,Handle<span style=" ">&#40;</span><span style="color: #aaffff; font-weight: bold;">New</span> Ball<span style=" ">&#41;</span><span style=" ">&#41;</span><br />
</p>
b.Ball = Object.Ball<span style=" ">&#40;</span>FirstItem<span style=" ">&#40;</span>list<span style=" ">&#41;</span><span style=" ">&#41;</span></div>
<p>Полный список команд для работы со списком:
</p>
<div class="bb" style="font-family: monospace;background-color:#FFFFFF;border:1px dashed #CCCCCC;padding:10px;background-color:#225588;color:#FFFFFF;border:1px solid #003040;padding:10px;">userTypePtr% = AddFront%<span style=" ">&#40;</span> list.Blist, userTypePtr% <span style=" ">&#41;</span><br />
<p>userTypePtr% = AddBack%<span style=" ">&#40;</span> list.Blist, userTypePtr% <span style=" ">&#41;</span><br />
trueFalse% = ResetList%<span style=" ">&#40;</span> list.BList <span style=" ">&#41;</span><br />
userTypePtr% = NextItem%<span style=" ">&#40;</span> list.BList <span style=" ">&#41;</span><br />
userTypePtr% = FirstItem%<span style=" ">&#40;</span> list.BList <span style=" ">&#41;</span><br />
userTypePtr% = LastItem%<span style=" ">&#40;</span> list.BList <span style=" ">&#41;</span><br />
userTypePtr% = CurrentItem%<span style=" ">&#40;</span> list.BList <span style=" ">&#41;</span><br />
userTypePtr% = MoveItem%<span style=" ">&#40;</span> fromList.BList, toList.BList <span style=" ">&#41;</span><br />
userTypePtr% = KillItem%<span style=" ">&#40;</span> list.BList, node.BNode <span style=" ">&#41;</span><br />
node.BNode = CurrentNode.BNode<span style=" ">&#40;</span> list.Blist <span style=" ">&#41;</span><br />
</p>
totalItems% = TotalItems%<span style=" ">&#40;</span> list.BList <span style=" ">&#41;</span></div>
<p>Небольшой пример:
</p>
<div class="bb" style="font-family: monospace;background-color:#FFFFFF;border:1px dashed #CCCCCC;padding:10px;background-color:#225588;color:#FFFFFF;border:1px solid #003040;padding:10px;"><span style="color: #aaffff; font-weight: bold;">Include</span> <span style="color: #00ff66;">&quot;BList.bb&quot;</span> <br />
<p><span style="color: #aaffff; font-weight: bold;">Type</span> Ball <br />
&nbsp;<span style="color: #aaffff; font-weight: bold;">Field</span> id <br />
&nbsp;<span style="color: #aaffff; font-weight: bold;">Field</span> x# <br />
&nbsp;<span style="color: #aaffff; font-weight: bold;">Field</span> y# <br />
<span style="color: #aaffff; font-weight: bold;">End Type</span> <br />
&nbsp;<br />
<span style="color: #ffee00">; создаем 2 списка </span><br />
list1.BList = <span style="color: #aaffff; font-weight: bold;">New</span> BList <br />
list2.BList = <span style="color: #aaffff; font-weight: bold;">New</span> BList <br />
&nbsp;<br />
<span style="color: #ffee00">;Создаем 6 объектов в первом списке </span><br />
<span style="color: #aaffff; font-weight: bold;">For</span> i = <span style="color: #33ffdd;">0</span> <span style="color: #aaffff; font-weight: bold;">To</span> <span style="color: #33ffdd;">5</span> <br />
&nbsp;b.Ball = Object.Ball<span style=" ">&#40;</span>AddFront<span style=" ">&#40;</span>list1,Handle<span style=" ">&#40;</span><span style="color: #aaffff; font-weight: bold;">New</span> Ball<span style=" ">&#41;</span><span style=" ">&#41;</span><span style=" ">&#41;</span> <br />
&nbsp;b\id = i <br />
<span style="color: #aaffff; font-weight: bold;">Next</span> <br />
&nbsp;<br />
<span style="color: #aaffff; font-weight: bold;">Print</span> <span style="color: #00ff66;">&quot;Список 1:&quot;</span>&nbsp;: printlist<span style=" ">&#40;</span>list1<span style=" ">&#41;</span> <br />
&nbsp;<br />
<span style="color: #ffee00">;Обрабатываем первый список </span><br />
ResetList<span style=" ">&#40;</span>list1<span style=" ">&#41;</span> <br />
<span style="color: #aaffff; font-weight: bold;">While</span> NextItem<span style=" ">&#40;</span>list1<span style=" ">&#41;</span> <br />
&nbsp;b.Ball = Object.Ball<span style=" ">&#40;</span>CurrentItem<span style=" ">&#40;</span>list1<span style=" ">&#41;</span><span style=" ">&#41;</span> <br />
&nbsp;<span style="color: #ffee00">;Перемещаем четвертую запись во второй список </span><br />
&nbsp;<span style="color: #aaffff; font-weight: bold;">If</span> b\id = <span style="color: #33ffdd;">4</span> <span style="color: #aaffff; font-weight: bold;">Then</span> MoveItem<span style=" ">&#40;</span>list1,list2<span style=" ">&#41;</span> <br />
&nbsp;<span style="color: #ffee00">; удаляем 3-ю запись, только позже, после обработки списка </span><br />
&nbsp;<span style="color: #aaffff; font-weight: bold;">If</span> b\id = <span style="color: #33ffdd;">3</span> <span style="color: #aaffff; font-weight: bold;">Then</span> tmp.BNode = CurrentNode<span style=" ">&#40;</span>list1<span style=" ">&#41;</span> <br />
&nbsp;<span style="color: #ffee00">; удаляем вторую запись </span><br />
&nbsp;<span style="color: #aaffff; font-weight: bold;">If</span> b\id = <span style="color: #33ffdd;">2</span> <span style="color: #aaffff; font-weight: bold;">Then</span> <span style="color: #aaffff; font-weight: bold;">Delete</span> Object.Ball<span style=" ">&#40;</span>KillItem<span style=" ">&#40;</span>list1,<span style="color: #aaffff; font-weight: bold;">Null</span><span style=" ">&#41;</span><span style=" ">&#41;</span> <br />
<span style="color: #aaffff; font-weight: bold;">Wend</span> <br />
<span style="color: #aaffff; font-weight: bold;">Delete</span> Object.Ball<span style=" ">&#40;</span>KillItem<span style=" ">&#40;</span>list1,tmp<span style=" ">&#41;</span><span style=" ">&#41;</span> <br />
&nbsp;<br />
<span style="color: #aaffff; font-weight: bold;">Print</span> <span style="color: #00ff66;">&quot;Список 1: (удалены - 2,3, перемещена- 4)&quot;</span>&nbsp;: printlist<span style=" ">&#40;</span>list1<span style=" ">&#41;</span> <br />
<span style="color: #aaffff; font-weight: bold;">Print</span> <span style="color: #00ff66;">&quot;Список 2:&quot;</span>&nbsp;: printlist<span style=" ">&#40;</span>list2<span style=" ">&#41;</span> <br />
&nbsp;<br />
<span style="color: #ffee00">;очищаем весь первый список </span><br />
<span style="color: #aaffff; font-weight: bold;">While</span> FirstItem<span style=" ">&#40;</span>list1<span style=" ">&#41;</span> <br />
&nbsp;<span style="color: #aaffff; font-weight: bold;">Delete</span> Object.Ball<span style=" ">&#40;</span>KillItem<span style=" ">&#40;</span>list1,<span style="color: #aaffff; font-weight: bold;">Null</span><span style=" ">&#41;</span><span style=" ">&#41;</span> <br />
<span style="color: #aaffff; font-weight: bold;">Wend</span> <br />
<span style="color: #aaffff; font-weight: bold;">Print</span> <span style="color: #00ff66;">&quot;Список 1:&quot;</span>&nbsp;: printlist<span style=" ">&#40;</span>list1<span style=" ">&#41;</span> <br />
&nbsp;<br />
<span style="color: #aaffff; font-weight: bold;">WaitKey</span> <br />
&nbsp;<br />
<span style="color: #aaffff; font-weight: bold;">Function</span> printlist<span style=" ">&#40;</span>list.BList<span style=" ">&#41;</span> <br />
&nbsp;ResetList<span style=" ">&#40;</span>list<span style=" ">&#41;</span> <br />
&nbsp;<span style="color: #aaffff; font-weight: bold;">While</span> NextItem<span style=" ">&#40;</span>list<span style=" ">&#41;</span> <br />
&nbsp; b.Ball = Object.Ball<span style=" ">&#40;</span>CurrentItem<span style=" ">&#40;</span>list<span style=" ">&#41;</span><span style=" ">&#41;</span> <br />
&nbsp; <span style="color: #aaffff; font-weight: bold;">Print</span> b\id <br />
&nbsp;<span style="color: #aaffff; font-weight: bold;">Wend</span> <br />
</p>
<span style="color: #aaffff; font-weight: bold;">End Function</span></div>
<p>Ну вот и все.  Удачи!
</p>
<div align="right"><a href="http://blitzetcetera.org/images/0/04/Lists.zip" class="internal" title="Lists.zip">скачать архив с файлами к статье</a></div>
<hr />
<p>Автор: Остапенко "@rtur" Артур (e-mail: vd_arthur@mail.ru, ICQ: 143476320)
</p><!-- 
Pre-expand include size: 2656 bytes
Post-expand include size: 351 bytes
Template argument size: 16 bytes
Maximum: 2097152 bytes
-->

<!-- Saved in parser cache with key db1:pcache:idhash:143-0!1!0!!ru!2 and timestamp 20071110040751 -->
<div class="printfooter">
Получено с <a href="3j0carrq.html">http://blitzetcetera.org/index.php/%D0%A1%D0%B2%D1%8F%D0%B7%D0%B0%D0%BD%D0%BD%D1%8B%D0%B5_%D1%81%D0%BF%D0%B8%D1%81%D0%BA%D0%B8_%D0%B2_Blitz3D</a></div>
			<!-- end content -->			<div class="visualClear"></div>				</td>				<td class="rightside">				</td>			</tr>		</table>		</div>	</div>		</div>	
		<script type="text/javascript">if (window.runOnloadHook) runOnloadHook();</script>
</div></body>
<!-- Mirrored from localhost/index.php/%D0%A1%D0%B2%D1%8F%D0%B7%D0%B0%D0%BD%D0%BD%D1%8B%D0%B5_%D1%81%D0%BF%D0%B8%D1%81%D0%BA%D0%B8_%D0%B2_Blitz3D by HTTrack Website Copier/3.x [XR&CO'2007], Sat, 10 Nov 2007 05:16:43 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8"><!-- /Added by HTTrack -->
</html>