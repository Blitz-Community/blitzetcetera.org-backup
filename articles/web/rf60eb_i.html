<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml" xml:lang="ru" lang="ru" dir="ltr">	
<!-- Mirrored from localhost/index.php/%D0%97%D0%B0%D0%BC%D0%B5%D1%82%D0%BA%D0%B8_%D0%BE%D1%82_%D0%94%D0%B6%D0%B8%D0%BC%D0%BE%D0%BD%D0%B0 by HTTrack Website Copier/3.x [XR&CO'2007], Sat, 10 Nov 2007 05:16:50 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8"><!-- /Added by HTTrack -->
<head>		<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />				<meta name="keywords" content="Заметки от Джимона" />
		<link rel="shortcut icon" href="http://blitzetcetera.org/favicon.ico" />
		<link rel="search" type="application/opensearchdescription+xml" href="http://blitzetcetera.org/opensearch_desc.php" title="Blitz Et Cetera (Русский)" />
		<title>Заметки от Джимона — Blitz Et Cetera</title>		<style type="text/css" media="screen,projection">/*<![CDATA[*/ @import "bvih5rde.css?63"; /*]]>*/</style>		<link rel="stylesheet" type="text/css" media="print" href="gcxktlm6.css?63" />		<link rel="stylesheet" type="text/css" media="handheld" href="zumsslq_.css?63" />		<!--[if lt IE 5.5000]><style type="text/css">@import "/skins/OfflineNew/IE50Fixes.css?63";</style><![endif]-->		<!--[if IE 5.5000]><style type="text/css">@import "/skins/OfflineNew/IE55Fixes.css?63";</style><![endif]-->		<!--[if IE 6]><style type="text/css">@import "/skins/OfflineNew/IE60Fixes.css?63";</style><![endif]-->		<!--[if IE 7]><style type="text/css">@import "/skins/OfflineNew/IE70Fixes.css?63";</style><![endif]-->		<!--[if lt IE 7]><script type="text/javascript" src="/skins/common/IEFixes.js?63"></script>		<meta http-equiv="imagetoolbar" content="no" /><![endif]-->		<script type= "text/javascript">/*<![CDATA[*/
var skin = "OfflineNew";
var stylepath = "/skins";
var wgArticlePath = "/index.php/$1";
var wgScriptPath = "";
var wgServer = "http://blitzetcetera.org/";
var wgCanonicalNamespace = "";
var wgCanonicalSpecialPageName = false;
var wgNamespaceNumber = 0;
var wgPageName = "Заметки_от_Джимона";
var wgTitle = "Заметки от Джимона";
var wgAction = "view";
var wgArticleId = "639";
var wgIsArticle = true;
var wgUserName = null;
var wgUserGroups = null;
var wgUserLanguage = "ru";
var wgContentLanguage = "ru";
var wgBreakFrames = false;
var wgCurRevisionId = "3052";
/*]]>*/</script>
		<script type="text/javascript" src="2nq-6cel.js?63"><!-- wikibits js --></script>		<script type="text/javascript" src="http://blitzetcetera.org/index.php?title=-&amp;action=raw&amp;gen=js"><!-- site js --></script>		<style type="text/css">/*<![CDATA[*/
@import "http://blitzetcetera.org/index.php?title=MediaWiki:Common.css&amp;usemsgcache=yes&amp;action=raw&amp;ctype=text/css&amp;smaxage=18000";
@import "http://blitzetcetera.org/index.php?title=MediaWiki:OfflineNew.css&amp;usemsgcache=yes&amp;action=raw&amp;ctype=text/css&amp;smaxage=18000";
@import "http://blitzetcetera.org/index.php?title=-&amp;action=raw&amp;gen=css&amp;maxage=18000";
/*]]>*/</style>		<!-- Head Scripts -->	</head><body  class="mediawiki ns-0 ltr page-Заметки_от_Джимона">	<div id="globalWrapper">	<div id="logocontainer">		<table align="center">		  <tr>				<td id="blitzetclogo">				</td>			</tr>		</table>	</div>	<div id="magbar">	Журнал о программированнии на языках Blitz3D, BlitzMax, BlitzPlus	</div>		<div id="column-content">	<div id="content">		<a name="top" id="top"></a>				<div id="bodyContent">		<table cellspacing=0 cellpadding=0 width=100%>			<tr>			  <td class="leftside">				</td>				<td class="sheetbody">					<h1 class="sheet">Заметки от Джимона</h1>			<h3 id="siteSub">Материал из Blitz Et Cetera.</h3>			<div id="contentSub"></div>			<!-- start content -->			<a name=".D0.97.D0.B0.D0.B3.D1.80.D1.83.D0.B7.D0.BA.D0.B0_.D1.82.D0.B5.D0.BA.D1.81.D1.82.D1.83.D1.80"></a><h2><span class="editsection">[<a href="http://blitzetcetera.org/index.php?title=%D0%97%D0%B0%D0%BC%D0%B5%D1%82%D0%BA%D0%B8_%D0%BE%D1%82_%D0%94%D0%B6%D0%B8%D0%BC%D0%BE%D0%BD%D0%B0&amp;action=edit&amp;section=1" title="Править секцию: Загрузка текстур">править</a>]</span> <span class="mw-headline">Загрузка текстур</span></h2>
<p>Я заметил глюк в блице: версия 1.87 не хочет грузить текстуры с размером не кратным 2 на видеокартах geforce 6 series
В общем, я написал функцию обхода этого:
</p>
<div class="bb" style="font-family: monospace;background-color:#FFFFFF;border:1px dashed #CCCCCC;padding:10px;background-color:#225588;color:#FFFFFF;border:1px solid #003040;padding:10px;">video_card_type$=<span style="color: #00ff66;">&quot;Geforce 6 series&quot;</span><br />
<p><br />
<span style="color: #aaffff; font-weight: bold;">Function</span> load_texture<span style=" ">&#40;</span>file$,flags=<span style="color: #33ffdd;">1</span>,frames=<span style="color: #33ffdd;">1</span><span style=" ">&#41;</span><br />
<span style="color: #ffee00">;by jimon</span><br />
<span style="color: #aaffff; font-weight: bold;">Select</span> video_card_type$<br />
<span style="color: #aaffff; font-weight: bold;">Case</span> <span style="color: #00ff66;">&quot;Geforce 6 series&quot;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; img=<span style="color: #aaffff; font-weight: bold;">LoadImage</span><span style=" ">&#40;</span>file$<span style=" ">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; tex=<span style="color: #aaffff; font-weight: bold;">CreateTexture</span><span style=" ">&#40;</span><span style="color: #aaffff; font-weight: bold;">ImageWidth</span><span style=" ">&#40;</span>img<span style=" ">&#41;</span>,<span style="color: #aaffff; font-weight: bold;">ImageHeight</span><span style=" ">&#40;</span>img<span style=" ">&#41;</span>,flags,frames<span style=" ">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aaffff; font-weight: bold;">CopyRect</span> <span style="color: #33ffdd;">0</span>,<span style="color: #33ffdd;">0</span>,<span style="color: #aaffff; font-weight: bold;">ImageWidth</span><span style=" ">&#40;</span>img<span style=" ">&#41;</span>,<span style="color: #aaffff; font-weight: bold;">ImageHeight</span><span style=" ">&#40;</span>img<span style=" ">&#41;</span>,<span style="color: #33ffdd;">0</span>,<span style="color: #33ffdd;">0</span>,<span style="color: #aaffff; font-weight: bold;">ImageBuffer</span><span style=" ">&#40;</span>img<span style=" ">&#41;</span>,<span style="color: #aaffff; font-weight: bold;">TextureBuffer</span><span style=" ">&#40;</span>tex<span style=" ">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aaffff; font-weight: bold;">FreeImage</span> img<br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aaffff; font-weight: bold;">Return</span> tex<br />
<span style="color: #aaffff; font-weight: bold;">Default</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aaffff; font-weight: bold;">Return</span> <span style="color: #aaffff; font-weight: bold;">LoadTexture</span><span style=" ">&#40;</span>file$,flags<span style=" ">&#41;</span><br />
<span style="color: #aaffff; font-weight: bold;">End Select</span><br />
</p>
<span style="color: #aaffff; font-weight: bold;">End Function</span></div>
<p>Потом установил 1.90 но там уже текстуры блиц грузит!!! Решил протестировать на скорость. 1.87 моя функция загрузила текстуру 873*519 за 55 мс , блиц не загрузил но что-то думал 33 мс. 1.90 моя функция также загрузила за 55 мс , а блиц думал целых 907 мс (!!!), но что-то загрузил.
</p><p>В общем, желательно во всех програмах использовать ету функцию&nbsp;:), чтобы ваши игры нормально шли на новых видеокартах.
</p><p>ps. у меня XFX 6600 GT и все идет с этим кодом
</p>
<a name=".D0.9A.D0.B0.D0.BA_.D0.BE.D0.B1.D0.BE.D0.B9.D1.82.D0.B8_.D0.BE.D1.88.D0.B8.D0.B1.D0.BA.D1.83_.D0.B4.D0.B5.D0.BB.D0.B5.D0.BD.D0.B8.D1.8F_.D0.BD.D0.B0_.D0.BD.D0.BE.D0.BB.D1.8C_.3F"></a><h2><span class="editsection">[<a href="http://blitzetcetera.org/index.php?title=%D0%97%D0%B0%D0%BC%D0%B5%D1%82%D0%BA%D0%B8_%D0%BE%D1%82_%D0%94%D0%B6%D0%B8%D0%BC%D0%BE%D0%BD%D0%B0&amp;action=edit&amp;section=2" title="Править секцию: Как обойти ошибку деления на ноль&nbsp;?">править</a>]</span> <span class="mw-headline">Как обойти ошибку деления на ноль&nbsp;?</span></h2>
<div class="bb" style="font-family: monospace;background-color:#FFFFFF;border:1px dashed #CCCCCC;padding:10px;background-color:#225588;color:#FFFFFF;border:1px solid #003040;padding:10px;">a=b/c#</div>
<p>Обязательно задать c тип float и ошибки не будет. Это происходит из-за неточностей в обработке сверхмалых чисел то, есть когда c#=0, то получается примерно так a=b/0.00000001
</p><p>Вот так вот.
</p>
<a name=".D0.9E.D1.88.D0.B8.D0.B1.D0.BA.D0.B0_.D0.B2_.D0.B1.D0.B8.D0.B1.D0.BB.D0.B8.D0.BE.D1.82.D0.B5.D0.BA.D0.B5_ODE"></a><h2><span class="editsection">[<a href="http://blitzetcetera.org/index.php?title=%D0%97%D0%B0%D0%BC%D0%B5%D1%82%D0%BA%D0%B8_%D0%BE%D1%82_%D0%94%D0%B6%D0%B8%D0%BC%D0%BE%D0%BD%D0%B0&amp;action=edit&amp;section=3" title="Править секцию: Ошибка в библиотеке ODE">править</a>]</span> <span class="mw-headline">Ошибка в библиотеке ODE</span></h2>
<p>Найдена критическая ошибка в функции преобразовании углов поворота в матрицу поворота в arkon ode 0.5 wrapper. Пример ошибки&nbsp;:
</p>
<div class="bb" style="font-family: monospace;background-color:#FFFFFF;border:1px dashed #CCCCCC;padding:10px;background-color:#225588;color:#FFFFFF;border:1px solid #003040;padding:10px;">space = ODE_dWorldCreate<span style=" ">&#40;</span><span style="color: #33ffdd;">1</span><span style=" ">&#41;</span><br />
<p><br />
body = ODE_dBodyCreate<span style=" ">&#40;</span><span style=" ">&#41;</span><br />
geom = ODE_dCreateBox<span style=" ">&#40;</span>space, <span style="color: #33ffdd;">1</span>, <span style="color: #33ffdd;">1</span>, <span style="color: #33ffdd;">1</span>, <span style="color: #33ffdd;">1</span><span style=" ">&#41;</span><br />
ODE_dGeomSetBody geom, body<br />
<br />
ODE_dBodySetRotation<span style=" ">&#40;</span>body, <span style="color: #33ffdd;">45</span>,<span style="color: #33ffdd;">155</span>,<span style="color: #33ffdd;">0</span><span style=" ">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />
x#=ODE_dBodyGetPitch#<span style=" ">&#40;</span>body<span style=" ">&#41;</span><br />
y#=ODE_dBodyGetYaw#<span style=" ">&#40;</span>body<span style=" ">&#41;</span><br />
z#=ODE_dBodyGetRoll#<span style=" ">&#40;</span>body<span style=" ">&#41;</span><br />
<br />
<span style="color: #aaffff; font-weight: bold;">Print</span> <span style="color: #00ff66;">&quot;Start angles&nbsp;: 45 , 155 , 0&quot;</span><br />
<span style="color: #aaffff; font-weight: bold;">Print</span> <span style="color: #00ff66;">&quot;Ode angles&nbsp;: &quot;</span>+x+<span style="color: #00ff66;">&quot; , &quot;</span>+y+<span style="color: #00ff66;">&quot; , &quot;</span>+z<br />
</p>
<span style="color: #aaffff; font-weight: bold;">Print</span> <span style="color: #00ff66;">&quot;Maybe ode_pitch=cos(start_yaw)*start_pitch&quot;</span></div>
<hr />
<p>Автор: Jimon (jimon.j1m0n@gmail.com)
</p>
<!-- Saved in parser cache with key db1:pcache:idhash:639-0!1!0!!ru!2 and timestamp 20071110040925 -->
<div class="printfooter">
Получено с <a href="rf60eb_i.html">http://blitzetcetera.org/index.php/%D0%97%D0%B0%D0%BC%D0%B5%D1%82%D0%BA%D0%B8_%D0%BE%D1%82_%D0%94%D0%B6%D0%B8%D0%BC%D0%BE%D0%BD%D0%B0</a></div>
			<!-- end content -->			<div class="visualClear"></div>				</td>				<td class="rightside">				</td>			</tr>		</table>		</div>	</div>		</div>	
		<script type="text/javascript">if (window.runOnloadHook) runOnloadHook();</script>
</div></body>
<!-- Mirrored from localhost/index.php/%D0%97%D0%B0%D0%BC%D0%B5%D1%82%D0%BA%D0%B8_%D0%BE%D1%82_%D0%94%D0%B6%D0%B8%D0%BC%D0%BE%D0%BD%D0%B0 by HTTrack Website Copier/3.x [XR&CO'2007], Sat, 10 Nov 2007 05:16:50 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8"><!-- /Added by HTTrack -->
</html>