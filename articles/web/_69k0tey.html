<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml" xml:lang="ru" lang="ru" dir="ltr">	
<!-- Mirrored from localhost/index.php/%D0%9B%D0%B0%D0%B9%D1%84-%D0%B1%D0%B0%D1%80%D1%8B_%D0%B2_BlitzMax by HTTrack Website Copier/3.x [XR&CO'2007], Sat, 10 Nov 2007 05:16:21 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8"><!-- /Added by HTTrack -->
<head>		<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />				<meta name="keywords" content="Лайф-бары в BlitzMax,Dimanche13" />
		<link rel="shortcut icon" href="http://blitzetcetera.org/favicon.ico" />
		<link rel="search" type="application/opensearchdescription+xml" href="http://blitzetcetera.org/opensearch_desc.php" title="Blitz Et Cetera (Русский)" />
		<title>Лайф-бары в BlitzMax — Blitz Et Cetera</title>		<style type="text/css" media="screen,projection">/*<![CDATA[*/ @import "bvih5rde.css?63"; /*]]>*/</style>		<link rel="stylesheet" type="text/css" media="print" href="gcxktlm6.css?63" />		<link rel="stylesheet" type="text/css" media="handheld" href="zumsslq_.css?63" />		<!--[if lt IE 5.5000]><style type="text/css">@import "/skins/OfflineNew/IE50Fixes.css?63";</style><![endif]-->		<!--[if IE 5.5000]><style type="text/css">@import "/skins/OfflineNew/IE55Fixes.css?63";</style><![endif]-->		<!--[if IE 6]><style type="text/css">@import "/skins/OfflineNew/IE60Fixes.css?63";</style><![endif]-->		<!--[if IE 7]><style type="text/css">@import "/skins/OfflineNew/IE70Fixes.css?63";</style><![endif]-->		<!--[if lt IE 7]><script type="text/javascript" src="/skins/common/IEFixes.js?63"></script>		<meta http-equiv="imagetoolbar" content="no" /><![endif]-->		<script type= "text/javascript">/*<![CDATA[*/
var skin = "OfflineNew";
var stylepath = "/skins";
var wgArticlePath = "/index.php/$1";
var wgScriptPath = "";
var wgServer = "http://blitzetcetera.org/";
var wgCanonicalNamespace = "";
var wgCanonicalSpecialPageName = false;
var wgNamespaceNumber = 0;
var wgPageName = "Лайф-бары_в_BlitzMax";
var wgTitle = "Лайф-бары в BlitzMax";
var wgAction = "view";
var wgArticleId = "1689";
var wgIsArticle = true;
var wgUserName = null;
var wgUserGroups = null;
var wgUserLanguage = "ru";
var wgContentLanguage = "ru";
var wgBreakFrames = false;
var wgCurRevisionId = "3217";
/*]]>*/</script>
		<script type="text/javascript" src="2nq-6cel.js?63"><!-- wikibits js --></script>		<script type="text/javascript" src="http://blitzetcetera.org/index.php?title=-&amp;action=raw&amp;gen=js"><!-- site js --></script>		<style type="text/css">/*<![CDATA[*/
@import "http://blitzetcetera.org/index.php?title=MediaWiki:Common.css&amp;usemsgcache=yes&amp;action=raw&amp;ctype=text/css&amp;smaxage=18000";
@import "http://blitzetcetera.org/index.php?title=MediaWiki:OfflineNew.css&amp;usemsgcache=yes&amp;action=raw&amp;ctype=text/css&amp;smaxage=18000";
@import "http://blitzetcetera.org/index.php?title=-&amp;action=raw&amp;gen=css&amp;maxage=18000";
/*]]>*/</style>		<!-- Head Scripts -->	</head><body  class="mediawiki ns-0 ltr page-Лайф-бары_в_BlitzMax">	<div id="globalWrapper">	<div id="logocontainer">		<table align="center">		  <tr>				<td id="blitzetclogo">				</td>			</tr>		</table>	</div>	<div id="magbar">	Журнал о программированнии на языках Blitz3D, BlitzMax, BlitzPlus	</div>		<div id="column-content">	<div id="content">		<a name="top" id="top"></a>				<div id="bodyContent">		<table cellspacing=0 cellpadding=0 width=100%>			<tr>			  <td class="leftside">				</td>				<td class="sheetbody">					<h1 class="sheet">Лайф-бары в BlitzMax</h1>			<h3 id="siteSub">Материал из Blitz Et Cetera.</h3>			<div id="contentSub"></div>			<!-- start content -->			<table id="toc" class="toc" summary="Содержание"><tr><td><div id="toctitle"><h2>Содержание</h2></div>
<ul>
<li class="toclevel-1"><a href="#.D0.92.D0.B2.D0.B5.D0.B4.D0.B5.D0.BD.D0.B8.D0.B5"><span class="tocnumber">1</span> <span class="toctext">Введение</span></a></li>
<li class="toclevel-1"><a href="#.D0.91.D0.BB.D0.B8.D0.B6.D0.B5_.D0.BA_.D0.B4.D0.B5.D0.BB.D1.83"><span class="tocnumber">2</span> <span class="toctext">Ближе к делу</span></a></li>
<li class="toclevel-1"><a href="#Type_TBar"><span class="tocnumber">3</span> <span class="toctext">Type TBar</span></a></li>
<li class="toclevel-1"><a href="#Function_Create.28.29"><span class="tocnumber">4</span> <span class="toctext">Function Create()</span></a></li>
<li class="toclevel-1"><a href="#Method_Draw.28.29"><span class="tocnumber">5</span> <span class="toctext">Method Draw()</span></a></li>
<li class="toclevel-1"><a href="#Method_Update.28.29"><span class="tocnumber">6</span> <span class="toctext">Method Update()</span></a></li>
<li class="toclevel-1"><a href="#.D0.92.D1.8B.D0.B2.D0.B5.D0.B4.D0.B5.D0.BD.D0.B8.D0.B5"><span class="tocnumber">7</span> <span class="toctext">Выведение</span></a></li>
</ul>
</td></tr></table><script type="text/javascript"> if (window.showTocToggle) { var tocShowText = "показать"; var tocHideText = "убрать"; showTocToggle(); } </script>
<a name=".D0.92.D0.B2.D0.B5.D0.B4.D0.B5.D0.BD.D0.B8.D0.B5"></a><h2><span class="editsection">[<a href="http://blitzetcetera.org/index.php?title=%D0%9B%D0%B0%D0%B9%D1%84-%D0%B1%D0%B0%D1%80%D1%8B_%D0%B2_BlitzMax&amp;action=edit&amp;section=1" title="Править секцию: Введение">править</a>]</span> <span class="mw-headline">Введение</span></h2>
<p>Привет, сегодня я хочу вам рассказать про бар. Да не про тот бар, где мы вчера бухали с друзьями. Это нечто иное, что используется во многих играх, с самых древних ZX времен и даже по сей день. Интернет-переводчик translate.ru слово «bar» – перевел как «брусок». Я бы перевел его, как полоска или шкала. Вам знакомы такие слова - ProgressBar, StatusBar, ScrollBar, LifeBar…? это некие шкалы, заполнение которых, зависит от некоторых событий или переменных. То есть визуально и динамически отображается какой-то процесс, некая замена скучным цифрам. Типичные примеры: шкала загрузки(ProgressBar), перед началом программы на экране пишется что-то типа Loading и шкала(Bar) заполняется по мере выполнения загрузки; LifeBar стратегии, где над юнитами располагаются полоски символизирующие кол-во жизни юнита. ScrollBar - тоже полоска, которая меняет свои размеры, например, в зависимости от кол-ва текста в окне. EnergyBar – в Worms- сила броска/удара. SkillBar – шкала умений персонажа в RPG. Да что там говорить, на моем стареньком мобильнике, уровень заряда батарей изображается как раз EnergyBar-ом. А увеличивая громкость телевизора мы можем наблюдать VolumeBar. Можно перечислять очень долго, так как существует множество разновидностей Bar-ов. Хочу заметить, что не все они имеют только горизонтальное расположение, бывают так же вертикальные и произвольной формы. 
</p>
<a name=".D0.91.D0.BB.D0.B8.D0.B6.D0.B5_.D0.BA_.D0.B4.D0.B5.D0.BB.D1.83"></a><h2><span class="editsection">[<a href="http://blitzetcetera.org/index.php?title=%D0%9B%D0%B0%D0%B9%D1%84-%D0%B1%D0%B0%D1%80%D1%8B_%D0%B2_BlitzMax&amp;action=edit&amp;section=2" title="Править секцию: Ближе к делу">править</a>]</span> <span class="mw-headline">Ближе к делу</span></h2>
<p>Я же хочу вам рассказать, как сделать горизонтальную шкалу на примере шкалы жизни, но эта информация применима также и ко всем остальным видам Bar-ов. Я использую язык  BlitzMax, но вы можете использовать любой другой ЯП, для воспроизведения данного алгоритма. Сначала немного теории. Для отображения шкалы я воспользуюсь обычными функциями BMax-а: DrawRect(x,y,width,height). Эта функция рисует прямоугольник длинною width, и высотой height, начиная с координат x и y. Синим цветом, я изображу прямоугольник, который будет отображать максимальное кол-во жизни героя, и он будет рисоваться первым. 
</p>
<div class="center"><div class="floatnone"><span><a href="http://blitzetcetera.org/index.php/%D0%98%D0%B7%D0%BE%D0%B1%D1%80%D0%B0%D0%B6%D0%B5%D0%BD%D0%B8%D0%B5:LifeBar01.png" class="image" title=""><img alt="" longdesc="http://blitzetcetera.org/index.php/%D0%98%D0%B7%D0%BE%D0%B1%D1%80%D0%B0%D0%B6%D0%B5%D0%BD%D0%B8%D0%B5:LifeBar01.png" src="own4gisn.png" width="323" height="113" /></a></span></div></div>
<p>А красным цветом мы будем рисовать прямоугольник, который показывает сколько на данный момент жизни у нашего героя (реально). 
</p>
<div class="center"><div class="floatnone"><span><a href="http://blitzetcetera.org/index.php/%D0%98%D0%B7%D0%BE%D0%B1%D1%80%D0%B0%D0%B6%D0%B5%D0%BD%D0%B8%D0%B5:LifeBar02.png" class="image" title=""><img alt="" longdesc="http://blitzetcetera.org/index.php/%D0%98%D0%B7%D0%BE%D0%B1%D1%80%D0%B0%D0%B6%D0%B5%D0%BD%D0%B8%D0%B5:LifeBar02.png" src="z6oxfa1i.png" width="323" height="113" /></a></span></div></div>
<p>Второй прямоугольник будет рисоваться начиная с тех же координат x и y, что и синий прямоугольник, то есть красный будет накладываться на синий. Но длина его(CurWidth) будет напрямую зависеть от здоровья юнита(!). Так если количество жизней максимально, то виден будет только красный прямоугольник, потому что он будет полностью закрывать собою синий. Если половина жизни, то красный закроет синий на половину. А если кол-во жизней 0, то мы увидим только синий прямоугольник, красный рисоваться не будет. Ну думаю, принцип понятен. Для начала, давайте введем, какой ширины(далее слово длина обозначает то же самое) и высоты будет наша шкала жизни:
</p>
<div class="bmx" style="font-family: monospace;background-color:#FFFFFF;border:1px dashed #CCCCCC;padding:10px;background-color:#01516B;color:#FFFFFF;border:1px solid #003040;padding:10px;"><span style="color: #ffff00; font-weight: bold;">Const</span> WIDTHBAR:<span style="color: #ffff00; font-weight: bold;">Int</span> = <span style="color: #FFFFFF;">200</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ‘ ширина шкалы<br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">Const</span> HEIGHTBAR:<span style="color: #ffff00; font-weight: bold;">Int</span> = <span style="color: #FFFFFF;">16</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ‘ высота шкалы</div>
<a name="Type_TBar"></a><h2><span class="editsection">[<a href="http://blitzetcetera.org/index.php?title=%D0%9B%D0%B0%D0%B9%D1%84-%D0%B1%D0%B0%D1%80%D1%8B_%D0%B2_BlitzMax&amp;action=edit&amp;section=3" title="Править секцию: Type TBar">править</a>]</span> <span class="mw-headline">Type TBar</span></h2>
<p>Теперь сделаем класс(тип) TBar который будет:
</p>
<ol><li>Создавать шкалу 
</li><li>Изменять ее в зависимости от кол-ва жизни героя 
</li><li>Отображать ее на экране
</li></ol>
<p>Названия функций, соответственно по пунктам:
</p>
<ol><li>function Create() 
</li><li>method Update() 
</li><li>method Draw() 
</li></ol>
<p><br />
Но для начала опишем все свойства или поля(Field) нашего типа:
</p>
<div class="bmx" style="font-family: monospace;background-color:#FFFFFF;border:1px dashed #CCCCCC;padding:10px;background-color:#01516B;color:#FFFFFF;border:1px solid #003040;padding:10px;"><span style="color: #ffff00; font-weight: bold;">Field</span> CurPts:<span style="color: #ffff00; font-weight: bold;">Int</span><br />
<p>&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">Field</span> MaxPts:<span style="color: #ffff00; font-weight: bold;">Int</span><br />
&nbsp; &nbsp; &nbsp; &nbsp;<br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">Field</span> x:<span style="color: #ffff00; font-weight: bold;">Int</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">Field</span> y:<span style="color: #ffff00; font-weight: bold;">Int</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">Field</span> Width:<span style="color: #ffff00; font-weight: bold;">Int</span> = WIDTHBAR<br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">Field</span> Height:<span style="color: #ffff00; font-weight: bold;">Int</span> = HEIGHTBAR<br />
&nbsp;<br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">Field</span> Percent:<span style="color: #ffff00; font-weight: bold;">Int</span> &nbsp; <br />
</p>
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">Field</span> CurWidth:<span style="color: #ffff00; font-weight: bold;">Int</span></div>
<p>Пробежимся по всем переменным:
</p>
<ul><li>CurPts – текущее количество жизни(здоровья)
</li><li>MaxPts – максимальное количество жизни(здоровья)
</li><li>x и y – координаты для рисования шкалы на экране
</li><li>Width и Height – габариты(размеры) нашей шкалы, мы определили их выше. 
</li><li>Percent – текущее значение жизни(в процентах)
</li><li>CurWidth – текущее значение жизни(в пикселях) –длина красного прямоугольника
</li></ul>
<a name="Function_Create.28.29"></a><h2><span class="editsection">[<a href="http://blitzetcetera.org/index.php?title=%D0%9B%D0%B0%D0%B9%D1%84-%D0%B1%D0%B0%D1%80%D1%8B_%D0%B2_BlitzMax&amp;action=edit&amp;section=4" title="Править секцию: Function Create()">править</a>]</span> <span class="mw-headline">Function Create()</span></h2>
<p>Вот функция создания нашей шкалы:
</p>
<div class="bmx" style="font-family: monospace;background-color:#FFFFFF;border:1px dashed #CCCCCC;padding:10px;background-color:#01516B;color:#FFFFFF;border:1px solid #003040;padding:10px;"><span style="color: #ffff00; font-weight: bold;">Function</span> Create:TBar<span style=" ">&#40;</span>sx:<span style="color: #ffff00; font-weight: bold;">Int</span> , sy:<span style="color: #ffff00; font-weight: bold;">Int</span>, pts:<span style="color: #ffff00; font-weight: bold;">Int</span> = <span style="color: #FFFFFF;">0</span>, mxpts:<span style="color: #ffff00; font-weight: bold;">Int</span> = <span style="color: #FFFFFF;">100</span><span style=" ">&#41;</span><br />
<p>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">Local</span> TB:TBar = <span style="color: #ffff00; font-weight: bold;">New</span> TBar<br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; TB.<span style="">x</span> = sx<br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; TB.<span style="">y</span> = sy<br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; TB.<span style="">CurPts</span> = pts<br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; TB.<span style="">MaxPts</span> = mxpts<br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">ListAddLast</span><span style=" ">&#40;</span>BarList , TB<span style=" ">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">Return</span> TB<br />
</p>
<span style="color: #ffff00; font-weight: bold;">End</span> <span style="color: #ffff00; font-weight: bold;">Function</span></div>
<p>Она принимает 4 параметра. sx и sy - координаты на экране, pts - кол-во жизни(по умолчанию-0) и также максимальное кол-во жизни mxpts (по умолчанию-100). Параметры по умолчанию очень облегчают работу и являются не обязательными к указанию, но имейте ввиду, что при создании функции, они должны находиться СТРОГО ПОСЛЕ параметров, которые объявлять обязательно. Итак, входные параметры функции инициализируют поля созданного объекта TB и затем, вновь созданный объект добавляется в список BarList, где будут храниться все созданные lifebar-ы. Наконец, вернем созданный и заполненный объект командой Return, авось пригодится позже))).
</p>
<a name="Method_Draw.28.29"></a><h2><span class="editsection">[<a href="http://blitzetcetera.org/index.php?title=%D0%9B%D0%B0%D0%B9%D1%84-%D0%B1%D0%B0%D1%80%D1%8B_%D0%B2_BlitzMax&amp;action=edit&amp;section=5" title="Править секцию: Method Draw()">править</a>]</span> <span class="mw-headline">Method Draw()</span></h2>
<p>Теперь рассмотрим функцию Draw(), которая будет рисовать шкалу на экране. 
</p>
<div class="bmx" style="font-family: monospace;background-color:#FFFFFF;border:1px dashed #CCCCCC;padding:10px;background-color:#01516B;color:#FFFFFF;border:1px solid #003040;padding:10px;"><span style="color: #ffff00; font-weight: bold;">Method</span> Draw<span style=" ">&#40;</span><span style=" ">&#41;</span><br />
<p>&nbsp;<br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">SetColor</span><span style=" ">&#40;</span><span style="color: #FFFFFF;">0</span> , <span style="color: #FFFFFF;">0</span> , <span style="color: #FFFFFF;">255</span><span style=" ">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">DrawRect</span><span style=" ">&#40;</span>x , y , Width , Height<span style=" ">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">SetColor</span><span style=" ">&#40;</span><span style="color: #FFFFFF;">255</span> , <span style="color: #FFFFFF;">0</span> , <span style="color: #FFFFFF;">0</span><span style=" ">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">DrawRect</span><span style=" ">&#40;</span>x , y , CurWidth , Height<span style=" ">&#41;</span><br />
&nbsp;<br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">SetColor</span><span style=" ">&#40;</span><span style="color: #FFFFFF;">255</span> , <span style="color: #FFFFFF;">255</span> , <span style="color: #FFFFFF;">255</span><span style=" ">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">DrawText</span><span style=" ">&#40;</span>Percent + <span style="color: #00FF66;">&quot;%&quot;</span> , x + <span style=" ">&#40;</span>Width / <span style="color: #FFFFFF;">2</span><span style=" ">&#41;</span> - <span style="color: #FFFFFF;">10</span> , y + <span style="color: #FFFFFF;">2</span> <span style=" ">&#41;</span> <br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">DrawText</span><span style=" ">&#40;</span>CurPts + <span style="color: #00FF66;">&quot;/&quot;</span> + MaxPts + <span style="color: #00FF66;">&quot; pts&quot;</span>, x + Width + <span style="color: #FFFFFF;">10</span> , y + <span style="color: #FFFFFF;">2</span><span style=" ">&#41;</span><br />
&nbsp;<br />
</p>
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">End</span> <span style="color: #ffff00; font-weight: bold;">Method</span></div>
<p>В общем-то и здесь нет ничего хитрого. Сначала устанавливается синий цвет и рисуется прямоугольник (первый) нашей полоски жизни, начиная с позиции x,y с шириной и высотой ранее нами установленными. Дальше устанавливается красный цвет, и начиная с тех же координат (x и y) рисуется уже другой(второй) прямоугольник, такой же высотой, что и первый. Но длина этого прямоугольника (CurWidth) будет зависеть от текущего количества жизни (CurPts). (Я это уже говорил, но как говорят «повторенье-мать ученья»). Как раз этот параметр нам и надо рассчитать. Но об этом чуть ниже. Затем устанавливается белый цвет, и приблизительно посередине шкалы, пишется сколько процентов здоровья, относительно максимального, сейчас имеет юнит (этот параметр мы тоже рассчитаем позже). Чуть правее Bar-а пишутся через дробь текущее здоровье и максимальное (CurPts/MaxPts), это как в РПГ. Всё, отрисовка завершена! 
</p>
<a name="Method_Update.28.29"></a><h2><span class="editsection">[<a href="http://blitzetcetera.org/index.php?title=%D0%9B%D0%B0%D0%B9%D1%84-%D0%B1%D0%B0%D1%80%D1%8B_%D0%B2_BlitzMax&amp;action=edit&amp;section=6" title="Править секцию: Method Update()">править</a>]</span> <span class="mw-headline">Method Update()</span></h2>
<p>Теперь самая важная часть, необходимо вычислить какой длины должен быть красный прямоугольник, а это напрямую зависит от текущего состояния здоровья юнита (CurPts). То есть рассчитать CurWidth через CurPts. А затем еще рассчитать, сколько это будет в процентах (Percent) от максимального количества жизни. Давайте начнем с процентов.
</p><p>Ух, как же я не любил проценты в школе! Мало того, что на математике их проходили, так еще и на химии. Но начав с ними разбираться уже после окончания учебы тогда, когда это было нужно мне, я понял что это не просто… а очень просто. Итак, чтобы узнать сколько это будет в процентах, всего лишь надо: текущее количество чего-либо поделить на максимальное его количество и домножить на сто. В нашем случае вот так: 
</p>
<div class="bmx" style="font-family: monospace;background-color:#FFFFFF;border:1px dashed #CCCCCC;padding:10px;background-color:#01516B;color:#FFFFFF;border:1px solid #003040;padding:10px;">Percent &nbsp;= <span style=" ">&#40;</span>CurPts / MaxPts<span style=" ">&#41;</span> * <span style="color: #FFFFFF;">100</span></div>
<p>Ок, рассчитали. Вставим эту формулу в наш метод Update().
</p><p>Теперь надо рассчитать длину нашего красного прямоугольника (CurWidth) , который символизирует текущее количество жизни. 
</p>
<div class="center"><div class="floatnone"><span><a href="http://blitzetcetera.org/index.php/%D0%98%D0%B7%D0%BE%D0%B1%D1%80%D0%B0%D0%B6%D0%B5%D0%BD%D0%B8%D0%B5:LifeBar03.png" class="image" title=""><img alt="" longdesc="http://blitzetcetera.org/index.php/%D0%98%D0%B7%D0%BE%D0%B1%D1%80%D0%B0%D0%B6%D0%B5%D0%BD%D0%B8%D0%B5:LifeBar03.png" src="3h0k_1zt-2.png" width="294" height="135" /></a></span></div></div>
<p>Кто сказал, что это сигарета? А в глаз! Нет, это не сигарета, и не “косяк” какой-нибудь межгалактический, это наш с вами lifebar. На рисунке я обозначил все ключевые точки.
</p><p>Итак мы хотим, чтобы максимальная длина(Width) отображала макимальное кол-во очков(MaxPts), а (CurWidth) отображала текущее кол-во очков(CurPts). То есть математически: Width = MaxPts, а CurWidth = CurPts. Из этого очевидно, что CurWidth должна так относиться к Width, как CurPts относится к MaxPts. Напомню: отношение –  это частное двух чисел выраженных в одной и той же единице измерения. А вот математическая запись этой пропорции:
</p>
<div class="center"><div class="floatnone"><span><a href="http://blitzetcetera.org/index.php/%D0%98%D0%B7%D0%BE%D0%B1%D1%80%D0%B0%D0%B6%D0%B5%D0%BD%D0%B8%D0%B5:LifeBar04.png" class="image" title=""><img alt="" longdesc="http://blitzetcetera.org/index.php/%D0%98%D0%B7%D0%BE%D0%B1%D1%80%D0%B0%D0%B6%D0%B5%D0%BD%D0%B8%D0%B5:LifeBar04.png" src="b4v2276g.png" width="213" height="39" /></a></span></div></div>
<p>Из 4 параметров, 3 нам известны (CurPts, MaxPts и Width) нам осталось найти один.
</p><p>Проделав нехитрые перестановки, мы видим, что CurWidth рассчитывается так:
</p>
<div class="bmx" style="font-family: monospace;background-color:#FFFFFF;border:1px dashed #CCCCCC;padding:10px;background-color:#01516B;color:#FFFFFF;border:1px solid #003040;padding:10px;">CurWidth = <span style=" ">&#40;</span>Width * CurPts<span style=" ">&#41;</span> / MaxPts</div>
<p>Занесем и эту формулу в метод Update(). 
</p><p>Отлично. Все необходимые функции и методы у нас есть. Конечно, не мешало бы добавить еще парочку методов, типа SetXY(x,y), SetPts(pts) и других, но тут я ,думаю вы справитесь и без меня. Поздравляю, теперь можно использовать TBar  в вашем проекте! Но я бы хотел еще немного задержать ваше внимание. Я решил добавить парочку методов, а заодно и протестить созданные функции. Лишний тест никогда не повредит, уж поверьте. Предлагаю ввести два тестовых метода: первый будет увеличивать текущую жизнь(CurPts) на единицу, а второй будет на единицу её уменьшать. 
</p>
<div class="bmx" style="font-family: monospace;background-color:#FFFFFF;border:1px dashed #CCCCCC;padding:10px;background-color:#01516B;color:#FFFFFF;border:1px solid #003040;padding:10px;"><span style="color: #ffff00; font-weight: bold;">Method</span> AddPts<span style=" ">&#40;</span><span style=" ">&#41;</span><br />
<p>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">If</span><span style=" ">&#40;</span>CurPts &lt; MaxPts<span style=" ">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; CurPts&nbsp;:+ <span style="color: #FFFFFF;">1</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">EndIf</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">End</span> <span style="color: #ffff00; font-weight: bold;">Method</span> &nbsp; &nbsp; <br />
<br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">Method</span> SubPts<span style=" ">&#40;</span><span style=" ">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">If</span><span style=" ">&#40;</span>CurPts &gt; <span style="color: #FFFFFF;">0</span><span style=" ">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; CurPts&nbsp;:- <span style="color: #FFFFFF;">1</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">EndIf</span><br />
</p>
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">End</span> <span style="color: #ffff00; font-weight: bold;">Method</span></div> 
<p>Думаю здесь особого описания не надо, так как очевидно, что делает каждая из функций. 
</p><p>Добавим в Update() парочку строк:
</p>
<div class="bmx" style="font-family: monospace;background-color:#FFFFFF;border:1px dashed #CCCCCC;padding:10px;background-color:#01516B;color:#FFFFFF;border:1px solid #003040;padding:10px;"><span style="color: #ffff00; font-weight: bold;">If</span> <span style=" ">&#40;</span><span style="color: #ffff00; font-weight: bold;">KeyDown</span><span style=" ">&#40;</span>KEY_RIGHT<span style=" ">&#41;</span><span style=" ">&#41;</span><br />
<p>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; AddPts<span style=" ">&#40;</span><span style=" ">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">End</span> <span style="color: #ffff00; font-weight: bold;">If</span><br />
&nbsp;<br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">If</span> <span style=" ">&#40;</span><span style="color: #ffff00; font-weight: bold;">KeyDown</span><span style=" ">&#40;</span>KEY_LEFT<span style=" ">&#41;</span><span style=" ">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; SubPts<span style=" ">&#40;</span><span style=" ">&#41;</span><br />
</p>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">EndIf</span></div>
<p>Нетрудно догадаться, что делает и этот код. Если нажать кнопку «вправо», то CurPts (текущее кол-во здоровья) будет увеличиваться, а если кнопку «влево», то уменьшаться. Теперь наконец-таки создадим 3 lifebar-а:
</p>
<div class="bmx" style="font-family: monospace;background-color:#FFFFFF;border:1px dashed #CCCCCC;padding:10px;background-color:#01516B;color:#FFFFFF;border:1px solid #003040;padding:10px;">TBar.<span style="">Create</span><span style=" ">&#40;</span><span style="color: #FFFFFF;">200</span> , <span style="color: #FFFFFF;">150</span> <span style=" ">&#41;</span><br />
<p>TBar.<span style="">Create</span><span style=" ">&#40;</span><span style="color: #FFFFFF;">200</span> , <span style="color: #FFFFFF;">200</span> , <span style="color: #FFFFFF;">25</span><span style=" ">&#41;</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />
</p>
TBar.<span style="">Create</span><span style=" ">&#40;</span><span style="color: #FFFFFF;">200</span> , <span style="color: #FFFFFF;">250</span> , <span style="color: #FFFFFF;">50</span> , <span style="color: #FFFFFF;">300</span><span style=" ">&#41;</span></div>
<p>Заметьте, что благодаря параметрам «по-умолчанию», функция создания стала очень гибкой. Можно использовать как все 4 параметра, так и 3, а то и всего лишь 2. 
</p><p>Теперь напишем главный цикл нашей тестовой программы.
</p>
<div class="bmx" style="font-family: monospace;background-color:#FFFFFF;border:1px dashed #CCCCCC;padding:10px;background-color:#01516B;color:#FFFFFF;border:1px solid #003040;padding:10px;"><span style="color: #ffff00; font-weight: bold;">Global</span> ScrWidth&nbsp;: <span style="color: #ffff00; font-weight: bold;">Int</span> &nbsp;= <span style="color: #FFFFFF;">640</span><br />
<p><span style="color: #ffff00; font-weight: bold;">Global</span> ScrHeight&nbsp;: <span style="color: #ffff00; font-weight: bold;">Int</span> = <span style="color: #FFFFFF;">480</span><br />
&nbsp;<br />
<span style="color: #ffff00; font-weight: bold;">Graphics</span><span style=" ">&#40;</span>ScrWidth, ScrHeight<span style=" ">&#41;</span> <br />
&nbsp;<br />
<span style="color: #ffff00; font-weight: bold;">Repeat</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span style="color: #ffff00; font-weight: bold;">Cls</span><br />
&nbsp;<br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">For</span> <span style="color: #ffff00; font-weight: bold;">Local</span> TB:TBar = <span style="color: #ffff00; font-weight: bold;">EachIn</span> BarList<br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; TB.<span style="">Update</span><span style=" ">&#40;</span><span style=" ">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; TB.<span style="">Draw</span><span style=" ">&#40;</span><span style=" ">&#41;</span> &nbsp; &nbsp; &nbsp; <br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">Next</span> &nbsp; &nbsp; &nbsp; &nbsp; <br />
&nbsp;<br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">DrawText</span><span style=" ">&#40;</span><span style="color: #00FF66;">&quot;KEY LEFT &nbsp;- sub points, KEY RIGHT - add points&quot;</span> , <span style="color: #FFFFFF;">150</span> , <span style="color: #FFFFFF;">450</span><span style=" ">&#41;</span><br />
&nbsp;<br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span style="color: #ffff00; font-weight: bold;">Flip</span> <br />
<span style="color: #ffff00; font-weight: bold;">Until</span> <span style=" ">&#40;</span><span style="color: #ffff00; font-weight: bold;">KeyDown</span><span style=" ">&#40;</span>KEY_ESCAPE<span style=" ">&#41;</span> <span style="color: #ffff00; font-weight: bold;">Or</span> <span style="color: #ffff00; font-weight: bold;">AppTerminate</span><span style=" ">&#40;</span><span style=" ">&#41;</span><span style=" ">&#41;</span><br />
&nbsp;<br />
</p>
<span style="color: #ffff00; font-weight: bold;">End</span></div>
<p>Здесь все стандартно, для приложения BMax. Устанавливаем графический режим, крутим список Lifebar-ов, апдейтим и рисуем их. Напоминаем, какие кнопки надо жать, в этой «ну ооочень сложной» программе))). Повторять это всё, пока не нажат ESC или крестик окна.
</p><p>У кого не получилось, вот весь исходник программы “tutor_bar.bmx”. Давайте эксперементируйте, а я пошел в бар, меня уже друзья заждались&nbsp;;)
</p>
<div class="bmx" style="font-family: monospace;background-color:#FFFFFF;border:1px dashed #CCCCCC;padding:10px;background-color:#01516B;color:#FFFFFF;border:1px solid #003040;padding:10px;"><span style="color: #ffff00; font-weight: bold;">SuperStrict</span><br />
<p>&nbsp;<br />
<span style="color: #ffff00; font-weight: bold;">Global</span> ScrWidth&nbsp;: <span style="color: #ffff00; font-weight: bold;">Int</span> &nbsp;= <span style="color: #FFFFFF;">640</span><br />
<span style="color: #ffff00; font-weight: bold;">Global</span> ScrHeight&nbsp;: <span style="color: #ffff00; font-weight: bold;">Int</span> = <span style="color: #FFFFFF;">480</span><br />
&nbsp;<br />
<span style="color: #ffff00; font-weight: bold;">Global</span> BarList:<span style="color: #ffff00; font-weight: bold;">TList</span> = <span style="color: #ffff00; font-weight: bold;">CreateList</span><span style=" ">&#40;</span><span style=" ">&#41;</span><br />
&nbsp;<br />
<span style="color: #ffff00; font-weight: bold;">Const</span> WIDTHBAR:<span style="color: #ffff00; font-weight: bold;">Int</span> = <span style="color: #FFFFFF;">200</span><br />
<span style="color: #ffff00; font-weight: bold;">Const</span> HEIGHTBAR:<span style="color: #ffff00; font-weight: bold;">Int</span> = <span style="color: #FFFFFF;">16</span><br />
&nbsp;<br />
<span style="color: #ffff00; font-weight: bold;">Type</span> TBar<br />
&nbsp;<br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">Field</span> CurPts:<span style="color: #ffff00; font-weight: bold;">Int</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">Field</span> MaxPts:<span style="color: #ffff00; font-weight: bold;">Int</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">Field</span> x:<span style="color: #ffff00; font-weight: bold;">Int</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">Field</span> y:<span style="color: #ffff00; font-weight: bold;">Int</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">Field</span> Width:<span style="color: #ffff00; font-weight: bold;">Int</span> = WIDTHBAR<br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">Field</span> Height:<span style="color: #ffff00; font-weight: bold;">Int</span> = HEIGHTBAR<br />
&nbsp;<br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">Field</span> Percent:<span style="color: #ffff00; font-weight: bold;">Int</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">Field</span> CurWidth:<span style="color: #ffff00; font-weight: bold;">Int</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">Function</span> Create:TBar<span style=" ">&#40;</span>sx:<span style="color: #ffff00; font-weight: bold;">Int</span> , sy:<span style="color: #ffff00; font-weight: bold;">Int</span>, pts:<span style="color: #ffff00; font-weight: bold;">Int</span> = <span style="color: #FFFFFF;">0</span>, mxpts:<span style="color: #ffff00; font-weight: bold;">Int</span> = <span style="color: #FFFFFF;">100</span><span style=" ">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">Local</span> TB:TBar = <span style="color: #ffff00; font-weight: bold;">New</span> TBar<br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; TB.<span style="">x</span> = sx<br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; TB.<span style="">y</span> = sy<br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; TB.<span style="">CurPts</span> = pts<br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; TB.<span style="">MaxPts</span> = mxpts<br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">ListAddLast</span><span style=" ">&#40;</span>BarList , TB<span style=" ">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">Return</span> TB<br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">End</span> <span style="color: #ffff00; font-weight: bold;">Function</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">Method</span> Update<span style=" ">&#40;</span><span style=" ">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">If</span> <span style=" ">&#40;</span><span style="color: #ffff00; font-weight: bold;">KeyDown</span><span style=" ">&#40;</span>KEY_RIGHT<span style=" ">&#41;</span><span style=" ">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; AddPts<span style=" ">&#40;</span><span style=" ">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">End</span> <span style="color: #ffff00; font-weight: bold;">If</span><br />
&nbsp;<br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">If</span> <span style=" ">&#40;</span><span style="color: #ffff00; font-weight: bold;">KeyDown</span><span style=" ">&#40;</span>KEY_LEFT<span style=" ">&#41;</span><span style=" ">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; SubPts<span style=" ">&#40;</span><span style=" ">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">EndIf</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; CurWidth = <span style=" ">&#40;</span>Width * CurPts<span style=" ">&#41;</span> / MaxPts<br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Percent = <span style="color: #ffff00; font-weight: bold;">Float</span><span style=" ">&#40;</span>CurPts<span style=" ">&#41;</span> / MaxPts * <span style="color: #FFFFFF;">100</span><br />
&nbsp;<br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">End</span> <span style="color: #ffff00; font-weight: bold;">Method</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">Method</span> AddPts<span style=" ">&#40;</span><span style=" ">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">If</span><span style=" ">&#40;</span>CurPts &lt; MaxPts<span style=" ">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; CurPts&nbsp;:+ <span style="color: #FFFFFF;">1</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">EndIf</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">End</span> <span style="color: #ffff00; font-weight: bold;">Method</span> &nbsp; &nbsp; <br />
&nbsp;<br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">Method</span> SubPts<span style=" ">&#40;</span><span style=" ">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">If</span><span style=" ">&#40;</span>CurPts &gt; <span style="color: #FFFFFF;">0</span><span style=" ">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; CurPts&nbsp;:- <span style="color: #FFFFFF;">1</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">EndIf</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">End</span> <span style="color: #ffff00; font-weight: bold;">Method</span> &nbsp; &nbsp; <br />
&nbsp; &nbsp; &nbsp; &nbsp; <br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">Method</span> Draw<span style=" ">&#40;</span><span style=" ">&#41;</span><br />
&nbsp;<br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">SetColor</span><span style=" ">&#40;</span><span style="color: #FFFFFF;">0</span> , <span style="color: #FFFFFF;">0</span> , <span style="color: #FFFFFF;">255</span><span style=" ">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">DrawRect</span><span style=" ">&#40;</span>x , y , Width , Height<span style=" ">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">SetColor</span><span style=" ">&#40;</span><span style="color: #FFFFFF;">255</span> , <span style="color: #FFFFFF;">0</span> , <span style="color: #FFFFFF;">0</span><span style=" ">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">DrawRect</span><span style=" ">&#40;</span>x , y , CurWidth , Height<span style=" ">&#41;</span><br />
&nbsp;<br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">SetColor</span><span style=" ">&#40;</span><span style="color: #FFFFFF;">255</span> , <span style="color: #FFFFFF;">255</span> , <span style="color: #FFFFFF;">255</span><span style=" ">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">DrawText</span><span style=" ">&#40;</span>Percent + <span style="color: #00FF66;">&quot;%&quot;</span> , x + <span style=" ">&#40;</span>Width / <span style="color: #FFFFFF;">2</span><span style=" ">&#41;</span> - <span style="color: #FFFFFF;">10</span> , y + <span style="color: #FFFFFF;">2</span> <span style=" ">&#41;</span> <br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">DrawText</span><span style=" ">&#40;</span>CurPts + <span style="color: #00FF66;">&quot;/&quot;</span> + MaxPts + <span style="color: #00FF66;">&quot; pts&quot;</span>, x + Width + <span style="color: #FFFFFF;">10</span> , y + <span style="color: #FFFFFF;">2</span><span style=" ">&#41;</span><br />
&nbsp;<br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">End</span> <span style="color: #ffff00; font-weight: bold;">Method</span><br />
&nbsp; &nbsp; &nbsp; &nbsp;<br />
<span style="color: #ffff00; font-weight: bold;">End</span> <span style="color: #ffff00; font-weight: bold;">Type</span> <br />
&nbsp;<br />
TBar.<span style="">Create</span><span style=" ">&#40;</span><span style="color: #FFFFFF;">200</span> , <span style="color: #FFFFFF;">150</span> <span style=" ">&#41;</span><br />
TBar.<span style="">Create</span><span style=" ">&#40;</span><span style="color: #FFFFFF;">200</span> , <span style="color: #FFFFFF;">200</span> , <span style="color: #FFFFFF;">25</span><span style=" ">&#41;</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />
TBar.<span style="">Create</span><span style=" ">&#40;</span><span style="color: #FFFFFF;">200</span> , <span style="color: #FFFFFF;">250</span> , <span style="color: #FFFFFF;">50</span> , <span style="color: #FFFFFF;">200</span><span style=" ">&#41;</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<br />
&nbsp;<br />
<span style="color: #ffff00; font-weight: bold;">Graphics</span><span style=" ">&#40;</span>ScrWidth, ScrHeight<span style=" ">&#41;</span> <br />
&nbsp;<br />
<span style="color: #ffff00; font-weight: bold;">Repeat</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span style="color: #ffff00; font-weight: bold;">Cls</span><br />
&nbsp;<br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">For</span> <span style="color: #ffff00; font-weight: bold;">Local</span> TB:TBar = <span style="color: #ffff00; font-weight: bold;">EachIn</span> BarList<br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; TB.<span style="">Update</span><span style=" ">&#40;</span><span style=" ">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; TB.<span style="">Draw</span><span style=" ">&#40;</span><span style=" ">&#41;</span> &nbsp; &nbsp; &nbsp; <br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">Next</span> &nbsp; &nbsp; &nbsp; &nbsp; <br />
&nbsp;<br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #ffff00; font-weight: bold;">DrawText</span><span style=" ">&#40;</span><span style="color: #00FF66;">&quot;KEY LEFT &nbsp;- sub points, KEY RIGHT - add points&quot;</span> , <span style="color: #FFFFFF;">150</span> , <span style="color: #FFFFFF;">450</span><span style=" ">&#41;</span><br />
&nbsp;<br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span style="color: #ffff00; font-weight: bold;">Flip</span> <br />
<span style="color: #ffff00; font-weight: bold;">Until</span> <span style=" ">&#40;</span><span style="color: #ffff00; font-weight: bold;">KeyDown</span><span style=" ">&#40;</span>KEY_ESCAPE<span style=" ">&#41;</span> <span style="color: #ffff00; font-weight: bold;">Or</span> <span style="color: #ffff00; font-weight: bold;">AppTerminate</span><span style=" ">&#40;</span><span style=" ">&#41;</span><span style=" ">&#41;</span><br />
&nbsp;<br />
</p>
<span style="color: #ffff00; font-weight: bold;">End</span></div>
<a name=".D0.92.D1.8B.D0.B2.D0.B5.D0.B4.D0.B5.D0.BD.D0.B8.D0.B5"></a><h2><span class="editsection">[<a href="http://blitzetcetera.org/index.php?title=%D0%9B%D0%B0%D0%B9%D1%84-%D0%B1%D0%B0%D1%80%D1%8B_%D0%B2_BlitzMax&amp;action=edit&amp;section=7" title="Править секцию: Выведение">править</a>]</span> <span class="mw-headline">Выведение</span></h2>
<p>Об опечатках, багах и других неточностях пишите на почтовый ящик. Спасибо, за внимание&nbsp;;)
</p>
<hr />
<p>Автор: <a href="http://blitzetcetera.org/index.php/%D0%A3%D1%87%D0%B0%D1%81%D1%82%D0%BD%D0%B8%D0%BA:Dimanche13" title="Участник:Dimanche13">Dimanche13</a> (e-mail: dimanche13@rambler.ru)
</p><!-- 
Pre-expand include size: 2756 bytes
Post-expand include size: 189 bytes
Template argument size: 7 bytes
Maximum: 2097152 bytes
-->

<!-- Saved in parser cache with key db1:pcache:idhash:1689-0!1!0!!ru!2 and timestamp 20071110033634 -->
<div class="printfooter">
Получено с <a href="_69k0tey.html">http://blitzetcetera.org/index.php/%D0%9B%D0%B0%D0%B9%D1%84-%D0%B1%D0%B0%D1%80%D1%8B_%D0%B2_BlitzMax</a></div>
			<!-- end content -->			<div class="visualClear"></div>				</td>				<td class="rightside">				</td>			</tr>		</table>		</div>	</div>		</div>	
		<script type="text/javascript">if (window.runOnloadHook) runOnloadHook();</script>
</div></body>
<!-- Mirrored from localhost/index.php/%D0%9B%D0%B0%D0%B9%D1%84-%D0%B1%D0%B0%D1%80%D1%8B_%D0%B2_BlitzMax by HTTrack Website Copier/3.x [XR&CO'2007], Sat, 10 Nov 2007 05:16:22 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8"><!-- /Added by HTTrack -->
</html>