<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml" xml:lang="ru" lang="ru" dir="ltr">	
<!-- Mirrored from localhost/index.php/%D0%9A%D1%83%D1%80%D1%81_%D0%BC%D0%BE%D0%BB%D0%BE%D0%B4%D0%BE%D0%B3%D0%BE_%D0%B1%D0%BE%D0%B9%D1%86%D0%B0%2C_%D1%87%D0%B0%D1%81%D1%82%D1%8C_3:_%D0%BF%D1%80%D0%B0%D0%BA%D1%82%D0%B8%D1%87%D0%B5%D1%81%D0%BA%D0%B8%D0%B5_%D0%B7%D0%B0%D0%BD%D1%8F%D1%82%D0%B8%D1%8F by HTTrack Website Copier/3.x [XR&CO'2007], Sat, 10 Nov 2007 05:15:29 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8"><!-- /Added by HTTrack -->
<head>		<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />				<meta name="keywords" content="Курс молодого бойца, часть 3: практические занятия,Tolking" />
		<link rel="shortcut icon" href="http://blitzetcetera.org/favicon.ico" />
		<link rel="search" type="application/opensearchdescription+xml" href="http://blitzetcetera.org/opensearch_desc.php" title="Blitz Et Cetera (Русский)" />
		<title>Курс молодого бойца, часть 3: практические занятия — Blitz Et Cetera</title>		<style type="text/css" media="screen,projection">/*<![CDATA[*/ @import "bvih5rde.css?63"; /*]]>*/</style>		<link rel="stylesheet" type="text/css" media="print" href="gcxktlm6.css?63" />		<link rel="stylesheet" type="text/css" media="handheld" href="zumsslq_.css?63" />		<!--[if lt IE 5.5000]><style type="text/css">@import "/skins/OfflineNew/IE50Fixes.css?63";</style><![endif]-->		<!--[if IE 5.5000]><style type="text/css">@import "/skins/OfflineNew/IE55Fixes.css?63";</style><![endif]-->		<!--[if IE 6]><style type="text/css">@import "/skins/OfflineNew/IE60Fixes.css?63";</style><![endif]-->		<!--[if IE 7]><style type="text/css">@import "/skins/OfflineNew/IE70Fixes.css?63";</style><![endif]-->		<!--[if lt IE 7]><script type="text/javascript" src="/skins/common/IEFixes.js?63"></script>		<meta http-equiv="imagetoolbar" content="no" /><![endif]-->		<script type= "text/javascript">/*<![CDATA[*/
var skin = "OfflineNew";
var stylepath = "/skins";
var wgArticlePath = "/index.php/$1";
var wgScriptPath = "";
var wgServer = "http://blitzetcetera.org/";
var wgCanonicalNamespace = "";
var wgCanonicalSpecialPageName = false;
var wgNamespaceNumber = 0;
var wgPageName = "Курс_молодого_бойца,_часть_3:_практические_занятия";
var wgTitle = "Курс молодого бойца, часть 3: практические занятия";
var wgAction = "view";
var wgArticleId = "592";
var wgIsArticle = true;
var wgUserName = null;
var wgUserGroups = null;
var wgUserLanguage = "ru";
var wgContentLanguage = "ru";
var wgBreakFrames = false;
var wgCurRevisionId = "3542";
/*]]>*/</script>
		<script type="text/javascript" src="2nq-6cel.js?63"><!-- wikibits js --></script>		<script type="text/javascript" src="http://blitzetcetera.org/index.php?title=-&amp;action=raw&amp;gen=js"><!-- site js --></script>		<style type="text/css">/*<![CDATA[*/
@import "http://blitzetcetera.org/index.php?title=MediaWiki:Common.css&amp;usemsgcache=yes&amp;action=raw&amp;ctype=text/css&amp;smaxage=18000";
@import "http://blitzetcetera.org/index.php?title=MediaWiki:OfflineNew.css&amp;usemsgcache=yes&amp;action=raw&amp;ctype=text/css&amp;smaxage=18000";
@import "http://blitzetcetera.org/index.php?title=-&amp;action=raw&amp;gen=css&amp;maxage=18000";
/*]]>*/</style>		<!-- Head Scripts -->	</head><body  class="mediawiki ns-0 ltr page-Курс_молодого_бойца_часть_3_практические_занятия">	<div id="globalWrapper">	<div id="logocontainer">		<table align="center">		  <tr>				<td id="blitzetclogo">				</td>			</tr>		</table>	</div>	<div id="magbar">	Журнал о программированнии на языках Blitz3D, BlitzMax, BlitzPlus	</div>		<div id="column-content">	<div id="content">		<a name="top" id="top"></a>				<div id="bodyContent">		<table cellspacing=0 cellpadding=0 width=100%>			<tr>			  <td class="leftside">				</td>				<td class="sheetbody">					<h1 class="sheet">Курс молодого бойца, часть 3: практические занятия</h1>			<h3 id="siteSub">Материал из Blitz Et Cetera.</h3>			<div id="contentSub"></div>			<!-- start content -->			<a name=".D0.92.D0.B2.D0.B5.D0.B4.D0.B5.D0.BD.D0.B8.D0.B5"></a><h2><span class="editsection">[<a href="http://blitzetcetera.org/index.php?title=%D0%9A%D1%83%D1%80%D1%81_%D0%BC%D0%BE%D0%BB%D0%BE%D0%B4%D0%BE%D0%B3%D0%BE_%D0%B1%D0%BE%D0%B9%D1%86%D0%B0%2C_%D1%87%D0%B0%D1%81%D1%82%D1%8C_3:_%D0%BF%D1%80%D0%B0%D0%BA%D1%82%D0%B8%D1%87%D0%B5%D1%81%D0%BA%D0%B8%D0%B5_%D0%B7%D0%B0%D0%BD%D1%8F%D1%82%D0%B8%D1%8F&amp;action=edit&amp;section=1" title="Править секцию: Введение">править</a>]</span> <span class="mw-headline">Введение</span></h2>
<p>Поразмыслив, я понял, банальный ФПС - это фигня для создателя Мега-игры. Раздобыв Диздок самой успешной MMORPG в мире, я решил, основываясь на нем, попытаться рассказать, как делаются мега игры. Конечно, сразу все не получится, многие вопросы придется прорабатывать отдельно, но задача будет интересной. Запасаемся терпением, и приступаем к с созданию нашего мира. Чтобы внести ясность: все примеры это только примеры, всегда есть более другой и красивый способ сделать что-либо. Я буду всегда выбирать тот, в котором можно задействовать минимум Медиа и приложить минимум труда, основной упор на прозрачность принципа создания: Поэтому очень извиняюсь за неподходящие модели, текстуры и т.д. С другой стороны это вполне отражает ситуацию, с которой сталкивается настоящий создатель Мега-игры. (Тащат к себе все, до чего могут дотянуться.) Картинка пока будет получаться не очень, но постепенно все проработаем до удовлетворительного результата: Особенно если найдется добрый самаритянин, готовый пожертвовать свое время и медиа, на благое дело...
</p>
<a name=".D0.91.D1.8B.D1.82.D0.B8.D0.B5"></a><h2><span class="editsection">[<a href="http://blitzetcetera.org/index.php?title=%D0%9A%D1%83%D1%80%D1%81_%D0%BC%D0%BE%D0%BB%D0%BE%D0%B4%D0%BE%D0%B3%D0%BE_%D0%B1%D0%BE%D0%B9%D1%86%D0%B0%2C_%D1%87%D0%B0%D1%81%D1%82%D1%8C_3:_%D0%BF%D1%80%D0%B0%D0%BA%D1%82%D0%B8%D1%87%D0%B5%D1%81%D0%BA%D0%B8%D0%B5_%D0%B7%D0%B0%D0%BD%D1%8F%D1%82%D0%B8%D1%8F&amp;action=edit&amp;section=2" title="Править секцию: Бытие">править</a>]</span> <span class="mw-headline">Бытие</span></h2>
<ol>
<li>В начале сотворил Бог небо и землю.
<li>Земля же была безвидна и пуста, и тьма над бездною, и Дух Божий носился над водою.
<li>И сказал Бог: да будет свет. И стал свет.
<li>И увидел Бог свет, что он хорош, и отделил Бог свет от тьмы.
<li>И назвал Бог свет днем, а тьму ночью. И был вечер, и было утро: день один.
</ol>
<p>Для работы программ нужно <a href="http://blitzetcetera.org/images/5/53/SoldierMedia.zip" class="internal" title="SoldierMedia.zip">скачать архив с изображениями</a>.
</p>
<div class="bb" style="font-family: monospace;background-color:#FFFFFF;border:1px dashed #CCCCCC;padding:10px;background-color:#225588;color:#FFFFFF;border:1px solid #003040;padding:10px;"><span style="color: #aaffff; font-weight: bold;">Graphics3D</span> <span style="color: #33ffdd;">640</span>, <span style="color: #33ffdd;">480</span>, <span style="color: #33ffdd;">32</span><br />
<p><span style="color: #aaffff; font-weight: bold;">SetBuffer</span> <span style="color: #aaffff; font-weight: bold;">BackBuffer</span><span style=" ">&#40;</span><span style=" ">&#41;</span><br />
<span style="color: #aaffff; font-weight: bold;">HidePointer</span><br />
<br />
<span style="color: #aaffff; font-weight: bold;">Global</span> God = <span style="color: #aaffff; font-weight: bold;">CreateCamera</span><span style=" ">&#40;</span><span style=" ">&#41;</span><br />
<br />
<span style="color: #aaffff; font-weight: bold;">MoveEntity</span> god,<span style="color: #33ffdd;">0</span>,<span style="color: #33ffdd;">2</span>,<span style="color: #33ffdd;">0</span><br />
<br />
<span style="color: #aaffff; font-weight: bold;">Global</span> Red=<span style="color: #33ffdd;">0</span> &nbsp; &nbsp; &nbsp;<span style="color: #ffee00">; Составляющие</span><br />
<span style="color: #aaffff; font-weight: bold;">Global</span> Green=<span style="color: #33ffdd;">150</span> &nbsp;<span style="color: #ffee00">; цвета</span><br />
<span style="color: #aaffff; font-weight: bold;">Global</span> Blue=<span style="color: #33ffdd;">200</span> &nbsp; <span style="color: #ffee00">; Неба</span><br />
<br />
<span style="color: #aaffff; font-weight: bold;">Global</span> Day=<span style="color: #33ffdd;">1.0</span> &nbsp; &nbsp;<span style="color: #ffee00">; Значит у нас кончилась ночь</span><br />
<span style="color: #aaffff; font-weight: bold;">CameraClsColor</span> God,red,green,Blue<span style="color: #ffee00">; Небо</span><br />
<br />
<span style="color: #aaffff; font-weight: bold;">Global</span> DayTime=<span style="color: #33ffdd;">10000</span> <span style="color: #ffee00">; скорость смены</span><br />
<span style="color: #aaffff; font-weight: bold;">Global</span> DayBegin=<span style="color: #33ffdd;">0</span> &nbsp; <span style="color: #ffee00">; когда произошла смена дня и ночи</span><br />
<br />
<br />
Pl= <span style="color: #aaffff; font-weight: bold;">CreatePlane</span><span style=" ">&#40;</span><span style=" ">&#41;</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #ffee00">;Земля, которая вода</span><br />
tx=<span style="color: #aaffff; font-weight: bold;">LoadTexture</span><span style=" ">&#40;</span><span style="color: #00ff66;">&quot;media\water.jpg&quot;</span><span style=" ">&#41;</span> &nbsp; <span style="color: #ffee00">;</span><br />
<span style="color: #aaffff; font-weight: bold;">EntityTexture</span> Pl,tx &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #ffee00">;</span><br />
<br />
<span style="color: #aaffff; font-weight: bold;">AmbientLight</span> <span style="color: #33ffdd;">50</span>,<span style="color: #33ffdd;">50</span>,<span style="color: #33ffdd;">50</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span style="color: #ffee00">; как освещены предметы ночью</span><br />
<span style="color: #aaffff; font-weight: bold;">Global</span> l = <span style="color: #aaffff; font-weight: bold;">CreateLight</span><span style=" ">&#40;</span><span style=" ">&#41;</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #ffee00">; Свет, который хорошо</span><br />
<span style="color: #aaffff; font-weight: bold;">TurnEntity</span> l,<span style="color: #33ffdd;">30</span>,<span style="color: #33ffdd;">20</span>,<span style="color: #33ffdd;">0</span><br />
<br />
<span style="color: #aaffff; font-weight: bold;">While</span> <span style="color: #aaffff; font-weight: bold;">Not</span> <span style="color: #aaffff; font-weight: bold;">KeyDown</span><span style=" ">&#40;</span><span style="color: #33ffdd;">1</span><span style=" ">&#41;</span><br />
<br />
GodMovement<span style=" ">&#40;</span><span style=" ">&#41;</span> &nbsp; <span style="color: #ffee00">; носится над водой и под ней</span><br />
<br />
DayControl<span style=" ">&#40;</span><span style=" ">&#41;</span> &nbsp;<span style="color: #ffee00">;смена дня и ночи</span><br />
<br />
<span style="color: #aaffff; font-weight: bold;">RenderWorld</span><br />
<span style="color: #aaffff; font-weight: bold;">Flip</span><br />
<br />
<span style="color: #aaffff; font-weight: bold;">Wend</span><br />
<br />
<span style="color: #aaffff; font-weight: bold;">End</span><br />
<br />
<span style="color: #aaffff; font-weight: bold;">Function</span> GodMovement<span style=" ">&#40;</span><span style=" ">&#41;</span><br />
<span style="color: #aaffff; font-weight: bold;">TurnEntity</span> God,<span style="color: #aaffff; font-weight: bold;">MouseYSpeed</span><span style=" ">&#40;</span><span style=" ">&#41;</span>,-<span style="color: #aaffff; font-weight: bold;">MouseXSpeed</span><span style=" ">&#40;</span><span style=" ">&#41;</span>,<span style="color: #33ffdd;">0</span> <span style="color: #ffee00">; поворот камеры мышкой аля FPS</span><br />
<span style="color: #aaffff; font-weight: bold;">TurnEntity</span> god,<span style="color: #33ffdd;">0</span>,<span style="color: #33ffdd;">0</span>,-<span style="color: #aaffff; font-weight: bold;">EntityRoll</span><span style=" ">&#40;</span>god<span style=" ">&#41;</span> <span style="color: #ffee00">; чтобы не переворачивалась камера</span><br />
<span style="color: #aaffff; font-weight: bold;">MoveEntity</span> God,<span style="color: #aaffff; font-weight: bold;">KeyDown</span><span style=" ">&#40;</span><span style="color: #33ffdd;">32</span><span style=" ">&#41;</span>-<span style="color: #aaffff; font-weight: bold;">KeyDown</span><span style=" ">&#40;</span><span style="color: #33ffdd;">30</span><span style=" ">&#41;</span>,<span style="color: #33ffdd;">0</span>,<span style="color: #aaffff; font-weight: bold;">KeyDown</span><span style=" ">&#40;</span><span style="color: #33ffdd;">17</span><span style=" ">&#41;</span>-<span style="color: #aaffff; font-weight: bold;">KeyDown</span><span style=" ">&#40;</span><span style="color: #33ffdd;">31</span><span style=" ">&#41;</span> <span style="color: #ffee00">; Движение камеры wasd</span><br />
<span style="color: #aaffff; font-weight: bold;">MoveMouse</span> <span style="color: #aaffff; font-weight: bold;">GraphicsWidth</span><span style=" ">&#40;</span><span style=" ">&#41;</span>/<span style="color: #33ffdd;">2</span>,<span style="color: #aaffff; font-weight: bold;">GraphicsHeight</span><span style=" ">&#40;</span><span style=" ">&#41;</span>/<span style="color: #33ffdd;">2</span> <span style="color: #ffee00">; Это нужно чтобы машка не уходила за экран</span><br />
<span style="color: #aaffff; font-weight: bold;">End Function</span><br />
<br />
<span style="color: #aaffff; font-weight: bold;">Function</span> DayControl<span style=" ">&#40;</span><span style=" ">&#41;</span><br />
<span style="color: #aaffff; font-weight: bold;">If</span> DayBegin=<span style="color: #33ffdd;">0</span> <span style="color: #aaffff; font-weight: bold;">Then</span> DayBegin=<span style="color: #aaffff; font-weight: bold;">MilliSecs</span><span style=" ">&#40;</span><span style=" ">&#41;</span> &nbsp;<span style="color: #ffee00">; день первый начался</span><br />
delta#=<span style="color: #aaffff; font-weight: bold;">Float</span><span style=" ">&#40;</span><span style="color: #aaffff; font-weight: bold;">MilliSecs</span><span style=" ">&#40;</span><span style=" ">&#41;</span>-DayBegin<span style=" ">&#41;</span>/DayTime <span style="color: #ffee00">; Какая часть дня прошла?</span><br />
<span style="color: #aaffff; font-weight: bold;">If</span> delta&gt;=<span style="color: #33ffdd;">1</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span style="color: #ffee00">; День/ночь кончился</span><br />
&nbsp;delta=<span style="color: #33ffdd;">1</span><br />
&nbsp;DayBegin=<span style="color: #aaffff; font-weight: bold;">MilliSecs</span><span style=" ">&#40;</span><span style=" ">&#41;</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #ffee00">;Начался новый день/ночь</span><br />
<span style="color: #aaffff; font-weight: bold;">EndIf</span><br />
<span style="color: #aaffff; font-weight: bold;">If</span> day=<span style="color: #33ffdd;">-1</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span style="color: #ffee00">;Ночью света становится меньше</span><br />
&nbsp;delta=<span style="color: #33ffdd;">1</span>-delta<br />
<span style="color: #aaffff; font-weight: bold;">EndIf</span><br />
<span style="color: #aaffff; font-weight: bold;">LightColor</span> l,<span style="color: #33ffdd;">255</span>*delta,<span style="color: #33ffdd;">255</span>*delta,<span style="color: #33ffdd;">255</span>*delta<br />
<span style="color: #aaffff; font-weight: bold;">CameraClsColor</span> God,red*delta,green*delta,Blue*delta &nbsp;<span style="color: #ffee00">; цвет неба зависит от времени суток</span><br />
<span style="color: #aaffff; font-weight: bold;">If</span> delta=<span style="color: #33ffdd;">1</span> <span style="color: #aaffff; font-weight: bold;">Or</span> delta=<span style="color: #33ffdd;">0</span> <span style="color: #aaffff; font-weight: bold;">Then</span> day=-day &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span style="color: #ffee00">; в полдень/полночь сменяем признак половины дня</span><br />
</p>
<span style="color: #aaffff; font-weight: bold;">End Function</span></div>
<p>Рассмотрим чего я наворотил:
</p><p>Налицо локация (Типа море), персонаж (Мы - камера). Есть блок управления персонажем и камерой GodMovement(). Есть блок игровой логики DayControl(). День и ночь в данном примере равны и цвет неба изменяется в линейной зависимости синхронно с освещенностью. В жизни все происходит иначе. Цвет изменяется быстрее, чем падает освещенность. Вернее неравномерно. Сначала небо темнеет, освещенность падает медленнее, затем освещенность начинает быстро падать (солнце заходит) и "догоняет" цвет неба, затем небо начинает светлеть, но освещенность отстает и когда солнце восходит, освещенность "догоняет" цвет неба: Подобрать зависимость изменения цвета неба и цвета света я завещаю вам. Принципиально возможно сделать, чтобы вечером все предметы освещались красноватым цветом. Кстати непонятно почему бог сотворил землю, а его дух носился над водой: 
</p>
<ol start="6">
<li>И сказал Бог: да будет твердь посреди воды, и да отделяет она воду от воды. [И стало так.]
<li>И создал Бог твердь, и отделил воду, которая под твердью, от воды, которая над твердью. И стало так.
<li>И назвал Бог твердь небом. [И увидел Бог, что это хорошо.] И был вечер, и было утро: день второй.
<li>И сказал Бог: да соберется вода, которая под небом, в одно место, и да явится суша. И стало так. [И собралась вода под небом в свои места, и явилась суша.]
<li>И назвал Бог сушу землею, а собрание вод назвал морями. И увидел Бог, что это хорошо.
</ol>
<p>Если воду (текстуру) для первого дня, я нагло спер у кого-то (прошу у него прощения за это), то для того чтобы сказать: "да будет твердь посреди воды", потребуется спереть(Купить) что либо покрупнее например Terragen (www.planetside.co.uk) c eго помощью можно генерировать карты высот, или Total terrain - можно редактировать и создавать карты высот. Если вы думаете, что сейчас скачаете программу, ткнете кнопку и получите результат, то вы ошибаетесь. Результат, то вы получите, но не такой, какой хотите. Рандом - он и есть рандом. С ним или мирятся, или исправляют руками, или делают руками сразу: Я сгенерил в Терагене карту высот, которая при опускании в воду должна стать архипелагом, и опустил края в PaintBrush (Очень полезная программка - входящая в состав Виндовс). Я схалтурил, ясен пень, каждый остров архипелага нужно было генерить/создавать отдельно и расставлять ручками, но пока и так сойдет: Непонятные промежуточные этапы с созданием тверди отделяющей воду от воды я пропустил. Бог наверное сначала создал океан как и мы, только сферой, затем сделал дно (литосферу) , которое разделило воду, а затем скалил литосферу таким образом, чтобы неровности литосферы вышли на поверхность, и вода образовала моря и океаны. В общем, ему с движком повезло. И полигонов он держит, не меряно, и размер возможной вселенной впечатляет. Нам придется много изворачиваться:
</p>
<div class="bb" style="font-family: monospace;background-color:#FFFFFF;border:1px dashed #CCCCCC;padding:10px;background-color:#225588;color:#FFFFFF;border:1px solid #003040;padding:10px;"><span style="color: #aaffff; font-weight: bold;">Graphics3D</span> <span style="color: #33ffdd;">640</span>, <span style="color: #33ffdd;">480</span>, <span style="color: #33ffdd;">32</span><br />
<p><span style="color: #aaffff; font-weight: bold;">SetBuffer</span> <span style="color: #aaffff; font-weight: bold;">BackBuffer</span><span style=" ">&#40;</span><span style=" ">&#41;</span><br />
<span style="color: #aaffff; font-weight: bold;">HidePointer</span><br />
<br />
<span style="color: #aaffff; font-weight: bold;">Global</span> God = <span style="color: #aaffff; font-weight: bold;">CreateCamera</span><span style=" ">&#40;</span><span style=" ">&#41;</span><br />
<br />
<span style="color: #aaffff; font-weight: bold;">MoveEntity</span> god,<span style="color: #33ffdd;">0</span>,<span style="color: #33ffdd;">2</span>,<span style="color: #33ffdd;">0</span><br />
<br />
<span style="color: #aaffff; font-weight: bold;">Global</span> Red=<span style="color: #33ffdd;">0</span> &nbsp; &nbsp; &nbsp;<span style="color: #ffee00">; Составляющие</span><br />
<span style="color: #aaffff; font-weight: bold;">Global</span> Green=<span style="color: #33ffdd;">150</span> &nbsp;<span style="color: #ffee00">; цвета</span><br />
<span style="color: #aaffff; font-weight: bold;">Global</span> Blue=<span style="color: #33ffdd;">200</span> &nbsp; <span style="color: #ffee00">; Неба</span><br />
<br />
<span style="color: #aaffff; font-weight: bold;">Global</span> Day=<span style="color: #33ffdd;">1.0</span> &nbsp; &nbsp;<span style="color: #ffee00">; Значит у нас кончилась ночь</span><br />
<span style="color: #aaffff; font-weight: bold;">CameraClsColor</span> God,red,green,Blue<span style="color: #ffee00">; Небо</span><br />
<br />
<span style="color: #aaffff; font-weight: bold;">Global</span> DayTime=<span style="color: #33ffdd;">10000</span> <span style="color: #ffee00">; скорость смены</span><br />
<span style="color: #aaffff; font-weight: bold;">Global</span> DayBegin=<span style="color: #33ffdd;">0</span> &nbsp; <span style="color: #ffee00">; когда произошла смена дня и ночи</span><br />
<br />
<br />
Pl= <span style="color: #aaffff; font-weight: bold;">CreatePlane</span><span style=" ">&#40;</span><span style=" ">&#41;</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #ffee00">;Земля, которая вода</span><br />
<span style="color: #aaffff; font-weight: bold;">EntityAlpha</span> Pl,<span style="color: #33ffdd;">0.4</span><br />
tx=<span style="color: #aaffff; font-weight: bold;">LoadTexture</span><span style=" ">&#40;</span><span style="color: #00ff66;">&quot;media\water.jpg&quot;</span><span style=" ">&#41;</span> &nbsp; <span style="color: #ffee00">;</span><br />
<span style="color: #aaffff; font-weight: bold;">EntityTexture</span> Pl,tx &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #ffee00">;</span><br />
<span style="color: #aaffff; font-weight: bold;">FreeTexture</span> tx<br />
<br />
sh= <span style="color: #aaffff; font-weight: bold;">CreatePlane</span><span style=" ">&#40;</span><span style=" ">&#41;</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #ffee00">; дно - шельф</span><br />
<br />
Land=<span style="color: #aaffff; font-weight: bold;">LoadTerrain</span><span style=" ">&#40;</span><span style="color: #00ff66;">&quot;media\land.png&quot;</span><span style=" ">&#41;</span> &nbsp; &nbsp;<span style="color: #ffee00">; Острова</span><br />
tx=<span style="color: #aaffff; font-weight: bold;">LoadTexture</span><span style=" ">&#40;</span><span style="color: #00ff66;">&quot;media\dirt001.jpg&quot;</span><span style=" ">&#41;</span> &nbsp; <span style="color: #ffee00">;</span><br />
<span style="color: #aaffff; font-weight: bold;">ScaleTexture</span> tx,<span style="color: #33ffdd;">0.2</span>,<span style="color: #33ffdd;">0.2</span><br />
<span style="color: #aaffff; font-weight: bold;">EntityTexture</span> sh,tx &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #ffee00">;</span><br />
<span style="color: #aaffff; font-weight: bold;">EntityTexture</span> land,tx &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #ffee00">;</span><br />
<span style="color: #aaffff; font-weight: bold;">FreeTexture</span> tx<br />
<br />
<br />
<span style="color: #aaffff; font-weight: bold;">ScaleEntity</span> sh,<span style="color: #33ffdd;">5</span>,<span style="color: #33ffdd;">1</span>,<span style="color: #33ffdd;">5</span><br />
<span style="color: #aaffff; font-weight: bold;">ScaleEntity</span> Land,<span style="color: #33ffdd;">5</span>,<span style="color: #33ffdd;">80</span>,<span style="color: #33ffdd;">5</span><br />
<span style="color: #aaffff; font-weight: bold;">MoveEntity</span> Land,<span style="color: #33ffdd;">-256</span>*<span style="color: #33ffdd;">5</span>,<span style="color: #33ffdd;">-20</span>,<span style="color: #33ffdd;">-256</span>*<span style="color: #33ffdd;">5</span><br />
<span style="color: #aaffff; font-weight: bold;">MoveEntity</span> sh,<span style="color: #33ffdd;">0</span>,<span style="color: #33ffdd;">-20.001</span>,<span style="color: #33ffdd;">0</span><br />
<br />
<span style="color: #aaffff; font-weight: bold;">AmbientLight</span> <span style="color: #33ffdd;">100</span>,<span style="color: #33ffdd;">100</span>,<span style="color: #33ffdd;">100</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span style="color: #ffee00">; как освещены предметы ночью</span><br />
<span style="color: #aaffff; font-weight: bold;">Global</span> l = <span style="color: #aaffff; font-weight: bold;">CreateLight</span><span style=" ">&#40;</span><span style=" ">&#41;</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #ffee00">; Свет, который хорошо</span><br />
<span style="color: #aaffff; font-weight: bold;">TurnEntity</span> l,<span style="color: #33ffdd;">30</span>,<span style="color: #33ffdd;">20</span>,<span style="color: #33ffdd;">0</span><br />
<br />
<span style="color: #aaffff; font-weight: bold;">While</span> <span style="color: #aaffff; font-weight: bold;">Not</span> <span style="color: #aaffff; font-weight: bold;">KeyDown</span><span style=" ">&#40;</span><span style="color: #33ffdd;">1</span><span style=" ">&#41;</span><br />
<br />
GodMovement<span style=" ">&#40;</span><span style=" ">&#41;</span> &nbsp; <span style="color: #ffee00">; носится над водой и под ней</span><br />
<br />
DayControl<span style=" ">&#40;</span><span style=" ">&#41;</span> &nbsp;<span style="color: #ffee00">;смена дня и ночи</span><br />
<br />
<span style="color: #aaffff; font-weight: bold;">RenderWorld</span><br />
<span style="color: #aaffff; font-weight: bold;">Flip</span><br />
<br />
<span style="color: #aaffff; font-weight: bold;">Wend</span><br />
<br />
<span style="color: #aaffff; font-weight: bold;">End</span><br />
<br />
<span style="color: #aaffff; font-weight: bold;">Function</span> GodMovement<span style=" ">&#40;</span><span style=" ">&#41;</span><br />
<span style="color: #aaffff; font-weight: bold;">TurnEntity</span> God,<span style="color: #aaffff; font-weight: bold;">MouseYSpeed</span><span style=" ">&#40;</span><span style=" ">&#41;</span>,-<span style="color: #aaffff; font-weight: bold;">MouseXSpeed</span><span style=" ">&#40;</span><span style=" ">&#41;</span>,<span style="color: #33ffdd;">0</span> <span style="color: #ffee00">; поворот камеры мышкой аля FPS</span><br />
<span style="color: #aaffff; font-weight: bold;">TurnEntity</span> god,<span style="color: #33ffdd;">0</span>,<span style="color: #33ffdd;">0</span>,-<span style="color: #aaffff; font-weight: bold;">EntityRoll</span><span style=" ">&#40;</span>god<span style=" ">&#41;</span> <span style="color: #ffee00">; чтобы не переворачивалась камера</span><br />
<span style="color: #aaffff; font-weight: bold;">MoveEntity</span> God,<span style="color: #aaffff; font-weight: bold;">KeyDown</span><span style=" ">&#40;</span><span style="color: #33ffdd;">32</span><span style=" ">&#41;</span>-<span style="color: #aaffff; font-weight: bold;">KeyDown</span><span style=" ">&#40;</span><span style="color: #33ffdd;">30</span><span style=" ">&#41;</span>,<span style="color: #33ffdd;">0</span>,<span style="color: #aaffff; font-weight: bold;">KeyDown</span><span style=" ">&#40;</span><span style="color: #33ffdd;">17</span><span style=" ">&#41;</span>-<span style="color: #aaffff; font-weight: bold;">KeyDown</span><span style=" ">&#40;</span><span style="color: #33ffdd;">31</span><span style=" ">&#41;</span> <span style="color: #ffee00">; Движение камеры wasd</span><br />
<span style="color: #aaffff; font-weight: bold;">MoveMouse</span> <span style="color: #aaffff; font-weight: bold;">GraphicsWidth</span><span style=" ">&#40;</span><span style=" ">&#41;</span>/<span style="color: #33ffdd;">2</span>,<span style="color: #aaffff; font-weight: bold;">GraphicsHeight</span><span style=" ">&#40;</span><span style=" ">&#41;</span>/<span style="color: #33ffdd;">2</span> <span style="color: #ffee00">; Это нужно чтобы машка не уходила за экран</span><br />
<span style="color: #aaffff; font-weight: bold;">End Function</span><br />
<br />
<span style="color: #aaffff; font-weight: bold;">Function</span> DayControl<span style=" ">&#40;</span><span style=" ">&#41;</span><br />
<span style="color: #aaffff; font-weight: bold;">If</span> DayBegin=<span style="color: #33ffdd;">0</span> <span style="color: #aaffff; font-weight: bold;">Then</span> DayBegin=<span style="color: #aaffff; font-weight: bold;">MilliSecs</span><span style=" ">&#40;</span><span style=" ">&#41;</span> &nbsp;<span style="color: #ffee00">; день первый начался</span><br />
delta#=<span style="color: #aaffff; font-weight: bold;">Float</span><span style=" ">&#40;</span><span style="color: #aaffff; font-weight: bold;">MilliSecs</span><span style=" ">&#40;</span><span style=" ">&#41;</span>-DayBegin<span style=" ">&#41;</span>/DayTime <span style="color: #ffee00">; Какая часть дня прошла?</span><br />
<span style="color: #aaffff; font-weight: bold;">If</span> delta&gt;=<span style="color: #33ffdd;">1</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span style="color: #ffee00">; День/ночь кончился</span><br />
&nbsp;delta=<span style="color: #33ffdd;">1</span><br />
&nbsp;DayBegin=<span style="color: #aaffff; font-weight: bold;">MilliSecs</span><span style=" ">&#40;</span><span style=" ">&#41;</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #ffee00">;Начался новый день/ночь</span><br />
<span style="color: #aaffff; font-weight: bold;">EndIf</span><br />
<span style="color: #aaffff; font-weight: bold;">If</span> day=<span style="color: #33ffdd;">-1</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span style="color: #ffee00">;Ночью света становится меньше</span><br />
&nbsp;delta=<span style="color: #33ffdd;">1</span>-delta<br />
<span style="color: #aaffff; font-weight: bold;">EndIf</span><br />
<span style="color: #aaffff; font-weight: bold;">LightColor</span> l,<span style="color: #33ffdd;">255</span>*delta,<span style="color: #33ffdd;">255</span>*delta,<span style="color: #33ffdd;">255</span>*delta<br />
<span style="color: #aaffff; font-weight: bold;">CameraClsColor</span> God,red*delta,green*delta,Blue*delta &nbsp;<span style="color: #ffee00">; цвет неба зависит от времени суток</span><br />
<span style="color: #aaffff; font-weight: bold;">If</span> delta=<span style="color: #33ffdd;">1</span> <span style="color: #aaffff; font-weight: bold;">Or</span> delta=<span style="color: #33ffdd;">0</span> <span style="color: #aaffff; font-weight: bold;">Then</span> day=-day &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span style="color: #ffee00">; в полдень/полночь сменяем признак половины дня</span><br />
</p>
<span style="color: #aaffff; font-weight: bold;">End Function</span></div>
<p>Получилось что-то похожее. Суши маловато, но нужно же с чего-то начать? Мы еще пока не опытные боги: Кстати, как я писал выше внешний вид игры - это 90% медиа. Найти тайловую (на противоположных краях "переходит" сама в себя), равномерно освещенную текстуру очень сложно. Взять цифровик, нащелкать траву, землю и использовать в игре можно, но на открытых пространствах будут видны стыки текстур из-за их не тайловости, что можно убрать при некоторой сноровке, а главное, от неравномерного освещения, что невозможно убрать. Такие текстуры образуют на поверхности ощутимые квадраты как, это получается в нашем случае. Для того чтобы сгладить эффект необходимо или раздобыть тайловую текстуру, или применять мультитекстурирование. Чтобы заретушировать стыки, можно взять почти любую текстуру, изменить ее пропорции (ScaleTexture) и наложить на поверхность сверху, если сможете создать текстуру с неравномерной прозрачностью будет еще круче, нужно будет с TextureBlend экспериментировать: Нафоткать текстур получится для игровых объектов, на которых текстура не тайлится (текстура помещается на объекте один раз). И это имеет смысл. Только без фанатизма! А то, как сфоткаете 2700х1900 и начнете на модели прилаживать, так делать ненужно, нужно помучиться и подобрать минимальное разрешение текстуры, при котором получается приличный внешний вид. Например, натягивать на ландшафт текстуру 256х256 - расточительство, замена ее на текстуру 64х64 не очень влияет на внешний вид. Если, конечно, вы не собираетесь эту текстуру увеличивать:
</p><p>Хочу еще предупредить вас от гонки вооружений. Немного поэкспериментировав, вы увидите, что чем больше скалится терран, тем меньше на нем видно квадраты текстур, но одновременно мы становимся малюсенькими, для того чтобы почувствовать себя нормального размера мы поднимаемся повыше и приходим к тому с чего начали.
</p>
<ol start="11">
<li>И сказал Бог: да произрастит земля зелень, траву, сеющую семя [по роду и по подобию ее, и] дерево плодовитое, приносящее по роду своему плод, в котором семя его на земле. И стало так.
<li>И произвела земля зелень, траву, сеющую семя по роду [и по подобию] ее, и дерево [плодовитое], приносящее плод, в котором семя его по роду его [на земле]. И увидел Бог, что это хорошо.
<li>И был вечер, и было утро: день третий.
</ol>
<p>Вот и начинаются грабли. Замете, а мы даже еще не дошли до физических взаимодействий! Деревья мы раздобудем, сделать чтобы они росли, размножались и приносили плоды - проблема: Пока. Сейчас просто рассадим деревья по островам. Для создания деревьев использовали программу Tree[d] и экспортер созданный Barlok'ом на основе функций Progs'а. (Правда, нужно его немного подкрутить, флаги текстур неправильно экспортятся)
</p>
<div class="bb" style="font-family: monospace;background-color:#FFFFFF;border:1px dashed #CCCCCC;padding:10px;background-color:#225588;color:#FFFFFF;border:1px solid #003040;padding:10px;"><span style="color: #aaffff; font-weight: bold;">Graphics3D</span> <span style="color: #33ffdd;">640</span>, <span style="color: #33ffdd;">480</span>, <span style="color: #33ffdd;">32</span><br />
<p><span style="color: #aaffff; font-weight: bold;">SetBuffer</span> <span style="color: #aaffff; font-weight: bold;">BackBuffer</span><span style=" ">&#40;</span><span style=" ">&#41;</span><br />
<span style="color: #aaffff; font-weight: bold;">HidePointer</span><br />
<br />
<span style="color: #aaffff; font-weight: bold;">Global</span> God = <span style="color: #aaffff; font-weight: bold;">CreateCamera</span><span style=" ">&#40;</span><span style=" ">&#41;</span><br />
<br />
<span style="color: #aaffff; font-weight: bold;">MoveEntity</span> god,<span style="color: #33ffdd;">0</span>,<span style="color: #33ffdd;">2</span>,<span style="color: #33ffdd;">0</span><br />
<br />
<span style="color: #aaffff; font-weight: bold;">Global</span> Red=<span style="color: #33ffdd;">0</span> &nbsp; &nbsp; &nbsp;<span style="color: #ffee00">; Составляющие</span><br />
<span style="color: #aaffff; font-weight: bold;">Global</span> Green=<span style="color: #33ffdd;">150</span> &nbsp;<span style="color: #ffee00">; цвета</span><br />
<span style="color: #aaffff; font-weight: bold;">Global</span> Blue=<span style="color: #33ffdd;">200</span> &nbsp; <span style="color: #ffee00">; Неба</span><br />
<br />
<span style="color: #aaffff; font-weight: bold;">Global</span> Day=<span style="color: #33ffdd;">1.0</span> &nbsp; &nbsp;<span style="color: #ffee00">; Значит у нас кончилась ночь</span><br />
<span style="color: #aaffff; font-weight: bold;">CameraClsColor</span> God,red,green,Blue<span style="color: #ffee00">; Небо</span><br />
<br />
<span style="color: #aaffff; font-weight: bold;">Global</span> DayTime=<span style="color: #33ffdd;">10000</span> <span style="color: #ffee00">; скорость смены</span><br />
<span style="color: #aaffff; font-weight: bold;">Global</span> DayBegin=<span style="color: #33ffdd;">0</span> &nbsp; <span style="color: #ffee00">; когда произошла смена дня и ночи</span><br />
<br />
<br />
Pl= <span style="color: #aaffff; font-weight: bold;">CreatePlane</span><span style=" ">&#40;</span><span style=" ">&#41;</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #ffee00">;Земля, которая вода</span><br />
<span style="color: #aaffff; font-weight: bold;">EntityAlpha</span> Pl,<span style="color: #33ffdd;">0.4</span><br />
tx=<span style="color: #aaffff; font-weight: bold;">LoadTexture</span><span style=" ">&#40;</span><span style="color: #00ff66;">&quot;media\water.jpg&quot;</span><span style=" ">&#41;</span> &nbsp; <span style="color: #ffee00">;</span><br />
<span style="color: #aaffff; font-weight: bold;">EntityTexture</span> Pl,tx &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #ffee00">;</span><br />
<span style="color: #aaffff; font-weight: bold;">FreeTexture</span> tx<br />
<span style="color: #aaffff; font-weight: bold;">EntityPickMode</span> pl,<span style="color: #33ffdd;">2</span><br />
<span style="color: #aaffff; font-weight: bold;">NameEntity</span> pl,<span style="color: #00ff66;">&quot;Water&quot;</span><br />
<br />
sh= <span style="color: #aaffff; font-weight: bold;">CreatePlane</span><span style=" ">&#40;</span><span style=" ">&#41;</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #ffee00">; дно - шельф</span><br />
<br />
Land=<span style="color: #aaffff; font-weight: bold;">LoadTerrain</span><span style=" ">&#40;</span><span style="color: #00ff66;">&quot;media\land.png&quot;</span><span style=" ">&#41;</span> &nbsp; &nbsp;<span style="color: #ffee00">; Острова</span><br />
<br />
<span style="color: #aaffff; font-weight: bold;">EntityPickMode</span> Land,<span style="color: #33ffdd;">2</span><br />
<span style="color: #aaffff; font-weight: bold;">NameEntity</span> Land,<span style="color: #00ff66;">&quot;Land&quot;</span><br />
<br />
tx=<span style="color: #aaffff; font-weight: bold;">LoadTexture</span><span style=" ">&#40;</span><span style="color: #00ff66;">&quot;media\dirt001.jpg&quot;</span><span style=" ">&#41;</span> &nbsp; <span style="color: #ffee00">;</span><br />
<span style="color: #aaffff; font-weight: bold;">ScaleTexture</span> tx,<span style="color: #33ffdd;">0.2</span>,<span style="color: #33ffdd;">0.2</span><br />
<span style="color: #aaffff; font-weight: bold;">EntityTexture</span> sh,tx &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #ffee00">;</span><br />
<span style="color: #aaffff; font-weight: bold;">EntityTexture</span> land,tx &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #ffee00">;</span><br />
<span style="color: #aaffff; font-weight: bold;">FreeTexture</span> tx<br />
<br />
<br />
<span style="color: #aaffff; font-weight: bold;">ScaleEntity</span> sh,<span style="color: #33ffdd;">5</span>,<span style="color: #33ffdd;">1</span>,<span style="color: #33ffdd;">5</span><br />
<span style="color: #aaffff; font-weight: bold;">ScaleEntity</span> Land,<span style="color: #33ffdd;">5</span>,<span style="color: #33ffdd;">80</span>,<span style="color: #33ffdd;">5</span><br />
<span style="color: #aaffff; font-weight: bold;">MoveEntity</span> Land,<span style="color: #33ffdd;">-256</span>*<span style="color: #33ffdd;">5</span>,<span style="color: #33ffdd;">-20</span>,<span style="color: #33ffdd;">-256</span>*<span style="color: #33ffdd;">5</span><br />
<span style="color: #aaffff; font-weight: bold;">MoveEntity</span> sh,<span style="color: #33ffdd;">0</span>,<span style="color: #33ffdd;">-20.001</span>,<span style="color: #33ffdd;">0</span><br />
<br />
<span style="color: #aaffff; font-weight: bold;">AmbientLight</span> <span style="color: #33ffdd;">100</span>,<span style="color: #33ffdd;">100</span>,<span style="color: #33ffdd;">100</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span style="color: #ffee00">; как освещены предметы ночью</span><br />
<span style="color: #aaffff; font-weight: bold;">Global</span> l = <span style="color: #aaffff; font-weight: bold;">CreateLight</span><span style=" ">&#40;</span><span style=" ">&#41;</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #ffee00">; Свет, который хорошо</span><br />
<span style="color: #aaffff; font-weight: bold;">TurnEntity</span> l,<span style="color: #33ffdd;">30</span>,<span style="color: #33ffdd;">20</span>,<span style="color: #33ffdd;">0</span><br />
<br />
<br />
<span style="color: #aaffff; font-weight: bold;">Dim</span> Flora<span style=" ">&#40;</span><span style="color: #33ffdd;">2</span><span style=" ">&#41;</span><br />
<br />
Flora<span style=" ">&#40;</span><span style="color: #33ffdd;">1</span><span style=" ">&#41;</span>=<span style="color: #aaffff; font-weight: bold;">LoadMesh</span><span style=" ">&#40;</span><span style="color: #00ff66;">&quot;media\tree\tree01.b3d&quot;</span><span style=" ">&#41;</span><br />
<span style="color: #aaffff; font-weight: bold;">HideEntity</span> Flora<span style=" ">&#40;</span><span style="color: #33ffdd;">1</span><span style=" ">&#41;</span><br />
Flora<span style=" ">&#40;</span><span style="color: #33ffdd;">2</span><span style=" ">&#41;</span>=<span style="color: #aaffff; font-weight: bold;">LoadMesh</span><span style=" ">&#40;</span><span style="color: #00ff66;">&quot;media\tree\tree01.b3d&quot;</span><span style=" ">&#41;</span><br />
<span style="color: #aaffff; font-weight: bold;">ScaleEntity</span> Flora<span style=" ">&#40;</span><span style="color: #33ffdd;">2</span><span style=" ">&#41;</span>,<span style="color: #33ffdd;">1</span>,<span style="color: #33ffdd;">0.5</span>,<span style="color: #33ffdd;">1</span><br />
<span style="color: #aaffff; font-weight: bold;">HideEntity</span> Flora<span style=" ">&#40;</span><span style="color: #33ffdd;">2</span><span style=" ">&#41;</span><br />
<br />
<span style="color: #aaffff; font-weight: bold;">For</span> i=<span style="color: #33ffdd;">1</span> <span style="color: #aaffff; font-weight: bold;">To</span> <span style="color: #33ffdd;">3000</span> <span style="color: #ffee00">; количество растений</span><br />
en=<span style="color: #33ffdd;">0</span><br />
<span style="color: #aaffff; font-weight: bold;">While</span> en=<span style="color: #33ffdd;">0</span><br />
&nbsp;x#=<span style="color: #aaffff; font-weight: bold;">Rnd</span><span style=" ">&#40;</span><span style="color: #33ffdd;">-2500</span>,<span style="color: #33ffdd;">2500</span><span style=" ">&#41;</span><br />
&nbsp;z#=<span style="color: #aaffff; font-weight: bold;">Rnd</span><span style=" ">&#40;</span><span style="color: #33ffdd;">-2500</span>,<span style="color: #33ffdd;">2500</span><span style=" ">&#41;</span><br />
&nbsp;<span style="color: #aaffff; font-weight: bold;">LinePick</span> x,<span style="color: #33ffdd;">200</span>,z,<span style="color: #33ffdd;">0</span>,<span style="color: #33ffdd;">-200</span>,<span style="color: #33ffdd;">0</span><br />
&nbsp;en=<span style="color: #aaffff; font-weight: bold;">PickedEntity</span><span style=" ">&#40;</span><span style=" ">&#41;</span><br />
&nbsp;<span style="color: #aaffff; font-weight: bold;">If</span> en<br />
&nbsp; <span style="color: #aaffff; font-weight: bold;">If</span> <span style="color: #aaffff; font-weight: bold;">EntityName</span><span style=" ">&#40;</span>en<span style=" ">&#41;</span>=<span style="color: #00ff66;">&quot;Land&quot;</span> &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #ffee00">; В воду растения не сажаем.</span><br />
&nbsp; &nbsp;tr=<span style="color: #aaffff; font-weight: bold;">CopyEntity</span><span style=" ">&#40;</span>flora<span style=" ">&#40;</span><span style="color: #aaffff; font-weight: bold;">Rnd</span><span style=" ">&#40;</span><span style="color: #33ffdd;">1</span>,<span style="color: #33ffdd;">2</span><span style=" ">&#41;</span><span style=" ">&#41;</span><span style=" ">&#41;</span><br />
&nbsp; &nbsp;<span style="color: #aaffff; font-weight: bold;">PositionEntity</span> tr,x,<span style="color: #aaffff; font-weight: bold;">PickedY</span>#<span style=" ">&#40;</span><span style=" ">&#41;</span>,z<br />
&nbsp; <span style="color: #aaffff; font-weight: bold;">Else</span><br />
&nbsp; &nbsp;en=<span style="color: #33ffdd;">0</span><br />
&nbsp; <span style="color: #aaffff; font-weight: bold;">EndIf</span><br />
&nbsp;<span style="color: #aaffff; font-weight: bold;">EndIf</span><br />
<span style="color: #aaffff; font-weight: bold;">Wend</span><br />
<span style="color: #aaffff; font-weight: bold;">Next</span><br />
<br />
<span style="color: #aaffff; font-weight: bold;">While</span> <span style="color: #aaffff; font-weight: bold;">Not</span> <span style="color: #aaffff; font-weight: bold;">KeyDown</span><span style=" ">&#40;</span><span style="color: #33ffdd;">1</span><span style=" ">&#41;</span><br />
<br />
GodMovement<span style=" ">&#40;</span><span style=" ">&#41;</span> &nbsp; <span style="color: #ffee00">; носится над водой и под ней</span><br />
<br />
DayControl<span style=" ">&#40;</span><span style=" ">&#41;</span> &nbsp;<span style="color: #ffee00">;смена дня и ночи</span><br />
<br />
<span style="color: #aaffff; font-weight: bold;">RenderWorld</span><br />
<span style="color: #aaffff; font-weight: bold;">Flip</span><br />
<br />
<span style="color: #aaffff; font-weight: bold;">Wend</span><br />
<br />
<span style="color: #aaffff; font-weight: bold;">End</span><br />
<br />
<span style="color: #aaffff; font-weight: bold;">Function</span> GodMovement<span style=" ">&#40;</span><span style=" ">&#41;</span><br />
<span style="color: #aaffff; font-weight: bold;">TurnEntity</span> God,<span style="color: #aaffff; font-weight: bold;">MouseYSpeed</span><span style=" ">&#40;</span><span style=" ">&#41;</span>,-<span style="color: #aaffff; font-weight: bold;">MouseXSpeed</span><span style=" ">&#40;</span><span style=" ">&#41;</span>,<span style="color: #33ffdd;">0</span> <span style="color: #ffee00">; поворот камеры мышкой аля FPS</span><br />
<span style="color: #aaffff; font-weight: bold;">TurnEntity</span> god,<span style="color: #33ffdd;">0</span>,<span style="color: #33ffdd;">0</span>,-<span style="color: #aaffff; font-weight: bold;">EntityRoll</span><span style=" ">&#40;</span>god<span style=" ">&#41;</span> <span style="color: #ffee00">; чтобы не переворачивалась камера</span><br />
<span style="color: #aaffff; font-weight: bold;">MoveEntity</span> God,<span style="color: #aaffff; font-weight: bold;">KeyDown</span><span style=" ">&#40;</span><span style="color: #33ffdd;">32</span><span style=" ">&#41;</span>-<span style="color: #aaffff; font-weight: bold;">KeyDown</span><span style=" ">&#40;</span><span style="color: #33ffdd;">30</span><span style=" ">&#41;</span>,<span style="color: #33ffdd;">0</span>,<span style="color: #aaffff; font-weight: bold;">KeyDown</span><span style=" ">&#40;</span><span style="color: #33ffdd;">17</span><span style=" ">&#41;</span>-<span style="color: #aaffff; font-weight: bold;">KeyDown</span><span style=" ">&#40;</span><span style="color: #33ffdd;">31</span><span style=" ">&#41;</span> <span style="color: #ffee00">; Движение камеры wasd</span><br />
<span style="color: #aaffff; font-weight: bold;">MoveMouse</span> <span style="color: #aaffff; font-weight: bold;">GraphicsWidth</span><span style=" ">&#40;</span><span style=" ">&#41;</span>/<span style="color: #33ffdd;">2</span>,<span style="color: #aaffff; font-weight: bold;">GraphicsHeight</span><span style=" ">&#40;</span><span style=" ">&#41;</span>/<span style="color: #33ffdd;">2</span> <span style="color: #ffee00">; Это нужно чтобы машка не уходила за экран</span><br />
<span style="color: #aaffff; font-weight: bold;">End Function</span><br />
<br />
<span style="color: #aaffff; font-weight: bold;">Function</span> DayControl<span style=" ">&#40;</span><span style=" ">&#41;</span><br />
<span style="color: #aaffff; font-weight: bold;">If</span> DayBegin=<span style="color: #33ffdd;">0</span> <span style="color: #aaffff; font-weight: bold;">Then</span> DayBegin=<span style="color: #aaffff; font-weight: bold;">MilliSecs</span><span style=" ">&#40;</span><span style=" ">&#41;</span> &nbsp;<span style="color: #ffee00">; день первый начался</span><br />
delta#=<span style="color: #aaffff; font-weight: bold;">Float</span><span style=" ">&#40;</span><span style="color: #aaffff; font-weight: bold;">MilliSecs</span><span style=" ">&#40;</span><span style=" ">&#41;</span>-DayBegin<span style=" ">&#41;</span>/DayTime <span style="color: #ffee00">; Какая часть дня прошла?</span><br />
<span style="color: #aaffff; font-weight: bold;">If</span> delta&gt;=<span style="color: #33ffdd;">1</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span style="color: #ffee00">; День/ночь кончился</span><br />
&nbsp;delta=<span style="color: #33ffdd;">1</span><br />
&nbsp;DayBegin=<span style="color: #aaffff; font-weight: bold;">MilliSecs</span><span style=" ">&#40;</span><span style=" ">&#41;</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #ffee00">;Начался новый день/ночь</span><br />
<span style="color: #aaffff; font-weight: bold;">EndIf</span><br />
<span style="color: #aaffff; font-weight: bold;">If</span> day=<span style="color: #33ffdd;">-1</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span style="color: #ffee00">;Ночью света становится меньше</span><br />
&nbsp;delta=<span style="color: #33ffdd;">1</span>-delta<br />
<span style="color: #aaffff; font-weight: bold;">EndIf</span><br />
<span style="color: #aaffff; font-weight: bold;">LightColor</span> l,<span style="color: #33ffdd;">255</span>*delta,<span style="color: #33ffdd;">255</span>*delta,<span style="color: #33ffdd;">255</span>*delta<br />
<span style="color: #aaffff; font-weight: bold;">CameraClsColor</span> God,red*delta,green*delta,Blue*delta &nbsp;<span style="color: #ffee00">; цвет неба зависит от времени суток</span><br />
<span style="color: #aaffff; font-weight: bold;">If</span> delta=<span style="color: #33ffdd;">1</span> <span style="color: #aaffff; font-weight: bold;">Or</span> delta=<span style="color: #33ffdd;">0</span> <span style="color: #aaffff; font-weight: bold;">Then</span> day=-day &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span style="color: #ffee00">; в полдень/полночь сменяем признак половины дня</span><br />
</p>
<span style="color: #aaffff; font-weight: bold;">End Function</span></div>
<p>Для осуществления задуманного, вводим первые {физические} параметры - PickMode и NameEntity чтобы знать, куда попало растение в воду или на благодатную почву. Для рассады райских садов, используем генератор псевдослучайных чисел (это занимает какое-то время и чем больше деревьев тем дольше). Наш "Райский" сад состоит из двух типов деревьев. Но все готово чтобы работать с произвольным набором флоры: В данном случае деревья и "кусты" - это спецэффекты, впрочем как и весь мир: Изменив количество растений, можете дойти до такого количества, что все начнет тормозить по полной, ну и придется подождать пока засадятся острова: Значительно увеличить количество деревьев при котором ФПС не падает на ногу можно объединив флору в несколько мешей. Подобными штуками занимается библиотека Single Surface, рекомендую. Ну или сделать самим.
</p>
<ol start="14"> 
<li>И сказал Бог: да будут светила на тверди небесной [для освещения земли и] для отделения дня от ночи, и для знамений, и времен, и дней, и годов;
<li>и да будут они светильниками на тверди небесной, чтобы светить на землю. И стало так.
<li>И создал Бог два светила великие: светило большее, для управления днем, и светило меньшее, для управления ночью, и звезды;
<li>и поставил их Бог на тверди небесной, чтобы светить на землю,
<li>и управлять днем и ночью, и отделять свет от тьмы. И увидел Бог, что это хорошо.
<li>И был вечер, и было утро: день четвёртый.
</ol>
<p>Просто поразительно, как сильно изменилась самая популярная ММОРПГ вселенная со времен диздока. Если Бету делали по нему, то до релиза кто-то впахивал как проклятый: В первый день у нас был свет-день и тьма-ночь, и только на четвертый Бог сделал Солнце, Луну и звезды: Я то, наивный полагал, что свет от солнца идет, а оказывается наоборот! Если есть свет - значит день и Солнце. Что вроде и неплохо для нас:
</p>
<div class="bb" style="font-family: monospace;background-color:#FFFFFF;border:1px dashed #CCCCCC;padding:10px;background-color:#225588;color:#FFFFFF;border:1px solid #003040;padding:10px;"><span style="color: #aaffff; font-weight: bold;">Graphics3D</span> <span style="color: #33ffdd;">640</span>, <span style="color: #33ffdd;">480</span>, <span style="color: #33ffdd;">32</span><br />
<p><span style="color: #aaffff; font-weight: bold;">SetBuffer</span> <span style="color: #aaffff; font-weight: bold;">BackBuffer</span><span style=" ">&#40;</span><span style=" ">&#41;</span><br />
<span style="color: #aaffff; font-weight: bold;">HidePointer</span><br />
<br />
<span style="color: #aaffff; font-weight: bold;">Global</span> God = <span style="color: #aaffff; font-weight: bold;">CreateCamera</span><span style=" ">&#40;</span><span style=" ">&#41;</span><br />
<br />
<span style="color: #aaffff; font-weight: bold;">MoveEntity</span> god,<span style="color: #33ffdd;">0</span>,<span style="color: #33ffdd;">2</span>,<span style="color: #33ffdd;">0</span><br />
<br />
<span style="color: #aaffff; font-weight: bold;">Global</span> Red=<span style="color: #33ffdd;">0</span> &nbsp; &nbsp; &nbsp;<span style="color: #ffee00">; Составляющие</span><br />
<span style="color: #aaffff; font-weight: bold;">Global</span> Green=<span style="color: #33ffdd;">150</span> &nbsp;<span style="color: #ffee00">; цвета</span><br />
<span style="color: #aaffff; font-weight: bold;">Global</span> Blue=<span style="color: #33ffdd;">200</span> &nbsp; <span style="color: #ffee00">; Неба</span><br />
<br />
<span style="color: #aaffff; font-weight: bold;">Global</span> Day=<span style="color: #33ffdd;">1.0</span> &nbsp; &nbsp;<span style="color: #ffee00">; Значит у нас кончилась ночь</span><br />
<span style="color: #aaffff; font-weight: bold;">CameraClsColor</span> God,red,green,Blue<span style="color: #ffee00">; Небо</span><br />
<br />
<span style="color: #aaffff; font-weight: bold;">Global</span> DayTime=<span style="color: #33ffdd;">100000</span> <span style="color: #ffee00">; скорость смены</span><br />
<span style="color: #aaffff; font-weight: bold;">Global</span> DayBegin=<span style="color: #33ffdd;">0</span> &nbsp; <span style="color: #ffee00">; когда произошла смена дня и ночи</span><br />
<br />
<br />
Pl= <span style="color: #aaffff; font-weight: bold;">CreatePlane</span><span style=" ">&#40;</span><span style=" ">&#41;</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #ffee00">;Земля, которая вода</span><br />
<span style="color: #aaffff; font-weight: bold;">EntityAlpha</span> Pl,<span style="color: #33ffdd;">0.5</span><br />
tx=<span style="color: #aaffff; font-weight: bold;">LoadTexture</span><span style=" ">&#40;</span><span style="color: #00ff66;">&quot;media\water.jpg&quot;</span><span style=" ">&#41;</span> &nbsp; <span style="color: #ffee00">;</span><br />
<span style="color: #aaffff; font-weight: bold;">EntityTexture</span> Pl,tx &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #ffee00">;</span><br />
<span style="color: #aaffff; font-weight: bold;">FreeTexture</span> tx<br />
<span style="color: #aaffff; font-weight: bold;">EntityPickMode</span> pl,<span style="color: #33ffdd;">2</span><br />
<span style="color: #aaffff; font-weight: bold;">NameEntity</span> pl,<span style="color: #00ff66;">&quot;Water&quot;</span><br />
<br />
sh= <span style="color: #aaffff; font-weight: bold;">CreatePlane</span><span style=" ">&#40;</span><span style=" ">&#41;</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #ffee00">; дно - шельф</span><br />
<br />
Land=<span style="color: #aaffff; font-weight: bold;">LoadTerrain</span><span style=" ">&#40;</span><span style="color: #00ff66;">&quot;media\land.png&quot;</span><span style=" ">&#41;</span> &nbsp; &nbsp;<span style="color: #ffee00">; Острова</span><br />
<br />
<span style="color: #aaffff; font-weight: bold;">EntityPickMode</span> Land,<span style="color: #33ffdd;">2</span><br />
<span style="color: #aaffff; font-weight: bold;">NameEntity</span> Land,<span style="color: #00ff66;">&quot;Land&quot;</span><br />
<br />
tx=<span style="color: #aaffff; font-weight: bold;">LoadTexture</span><span style=" ">&#40;</span><span style="color: #00ff66;">&quot;media\dirt001.jpg&quot;</span><span style=" ">&#41;</span> &nbsp; <span style="color: #ffee00">;</span><br />
<br />
<span style="color: #aaffff; font-weight: bold;">ScaleTexture</span> tx,<span style="color: #33ffdd;">0.2</span>,<span style="color: #33ffdd;">0.2</span><br />
<span style="color: #aaffff; font-weight: bold;">EntityTexture</span> sh,tx &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #ffee00">;</span><br />
<span style="color: #aaffff; font-weight: bold;">EntityTexture</span> land,tx &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #ffee00">;</span><br />
<span style="color: #aaffff; font-weight: bold;">FreeTexture</span> tx<br />
<br />
<span style="color: #aaffff; font-weight: bold;">ScaleEntity</span> sh,<span style="color: #33ffdd;">5</span>,<span style="color: #33ffdd;">1</span>,<span style="color: #33ffdd;">5</span><br />
<span style="color: #aaffff; font-weight: bold;">ScaleEntity</span> Land,<span style="color: #33ffdd;">5</span>,<span style="color: #33ffdd;">80</span>,<span style="color: #33ffdd;">5</span><br />
<span style="color: #aaffff; font-weight: bold;">MoveEntity</span> Land,<span style="color: #33ffdd;">-256</span>*<span style="color: #33ffdd;">5</span>,<span style="color: #33ffdd;">-20</span>,<span style="color: #33ffdd;">-256</span>*<span style="color: #33ffdd;">5</span><br />
<span style="color: #aaffff; font-weight: bold;">MoveEntity</span> sh,<span style="color: #33ffdd;">0</span>,<span style="color: #33ffdd;">-20.001</span>,<span style="color: #33ffdd;">0</span><br />
<br />
<span style="color: #aaffff; font-weight: bold;">AmbientLight</span> <span style="color: #33ffdd;">100</span>,<span style="color: #33ffdd;">100</span>,<span style="color: #33ffdd;">100</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span style="color: #ffee00">; как освещены предметы ночью</span><br />
<span style="color: #aaffff; font-weight: bold;">Global</span> l = <span style="color: #aaffff; font-weight: bold;">CreateLight</span><span style=" ">&#40;</span><span style=" ">&#41;</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #ffee00">; Свет, который хорошо</span><br />
<span style="color: #aaffff; font-weight: bold;">TurnEntity</span> l,<span style="color: #33ffdd;">30</span>,<span style="color: #33ffdd;">20</span>,<span style="color: #33ffdd;">0</span><br />
<br />
<span style="color: #aaffff; font-weight: bold;">Dim</span> Flora<span style=" ">&#40;</span><span style="color: #33ffdd;">2</span><span style=" ">&#41;</span><br />
<br />
Flora<span style=" ">&#40;</span><span style="color: #33ffdd;">1</span><span style=" ">&#41;</span>=<span style="color: #aaffff; font-weight: bold;">LoadMesh</span><span style=" ">&#40;</span><span style="color: #00ff66;">&quot;media\tree\tree01.b3d&quot;</span><span style=" ">&#41;</span><br />
<span style="color: #aaffff; font-weight: bold;">HideEntity</span> Flora<span style=" ">&#40;</span><span style="color: #33ffdd;">1</span><span style=" ">&#41;</span><br />
Flora<span style=" ">&#40;</span><span style="color: #33ffdd;">2</span><span style=" ">&#41;</span>=<span style="color: #aaffff; font-weight: bold;">LoadMesh</span><span style=" ">&#40;</span><span style="color: #00ff66;">&quot;media\tree\tree01.b3d&quot;</span><span style=" ">&#41;</span><br />
<span style="color: #aaffff; font-weight: bold;">ScaleEntity</span> Flora<span style=" ">&#40;</span><span style="color: #33ffdd;">2</span><span style=" ">&#41;</span>,<span style="color: #33ffdd;">1</span>,<span style="color: #33ffdd;">0.5</span>,<span style="color: #33ffdd;">1</span><br />
<span style="color: #aaffff; font-weight: bold;">HideEntity</span> Flora<span style=" ">&#40;</span><span style="color: #33ffdd;">2</span><span style=" ">&#41;</span><br />
<br />
<span style="color: #aaffff; font-weight: bold;">For</span> i=<span style="color: #33ffdd;">1</span> <span style="color: #aaffff; font-weight: bold;">To</span> <span style="color: #33ffdd;">3000</span> <span style="color: #ffee00">; количество растений</span><br />
en=<span style="color: #33ffdd;">0</span><br />
<span style="color: #aaffff; font-weight: bold;">While</span> en=<span style="color: #33ffdd;">0</span><br />
&nbsp;x#=<span style="color: #aaffff; font-weight: bold;">Rnd</span><span style=" ">&#40;</span><span style="color: #33ffdd;">-2500</span>,<span style="color: #33ffdd;">2500</span><span style=" ">&#41;</span><br />
&nbsp;z#=<span style="color: #aaffff; font-weight: bold;">Rnd</span><span style=" ">&#40;</span><span style="color: #33ffdd;">-2500</span>,<span style="color: #33ffdd;">2500</span><span style=" ">&#41;</span><br />
&nbsp;<span style="color: #aaffff; font-weight: bold;">LinePick</span> x,<span style="color: #33ffdd;">200</span>,z,<span style="color: #33ffdd;">0</span>,<span style="color: #33ffdd;">-200</span>,<span style="color: #33ffdd;">0</span><br />
&nbsp;en=<span style="color: #aaffff; font-weight: bold;">PickedEntity</span><span style=" ">&#40;</span><span style=" ">&#41;</span><br />
&nbsp;<span style="color: #aaffff; font-weight: bold;">If</span> en<br />
&nbsp; <span style="color: #aaffff; font-weight: bold;">If</span> <span style="color: #aaffff; font-weight: bold;">EntityName</span><span style=" ">&#40;</span>en<span style=" ">&#41;</span>=<span style="color: #00ff66;">&quot;Land&quot;</span> &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #ffee00">; В воду растения не сажаем.</span><br />
&nbsp; &nbsp;tr=<span style="color: #aaffff; font-weight: bold;">CopyEntity</span><span style=" ">&#40;</span>flora<span style=" ">&#40;</span><span style="color: #aaffff; font-weight: bold;">Rnd</span><span style=" ">&#40;</span><span style="color: #33ffdd;">1</span>,<span style="color: #33ffdd;">2</span><span style=" ">&#41;</span><span style=" ">&#41;</span><span style=" ">&#41;</span><br />
&nbsp; &nbsp;<span style="color: #aaffff; font-weight: bold;">PositionEntity</span> tr,x,<span style="color: #aaffff; font-weight: bold;">PickedY</span>#<span style=" ">&#40;</span><span style=" ">&#41;</span>,z<br />
&nbsp; <span style="color: #aaffff; font-weight: bold;">Else</span><br />
&nbsp; &nbsp;en=<span style="color: #33ffdd;">0</span><br />
&nbsp; <span style="color: #aaffff; font-weight: bold;">EndIf</span><br />
&nbsp;<span style="color: #aaffff; font-weight: bold;">EndIf</span><br />
<span style="color: #aaffff; font-weight: bold;">Wend</span><br />
<span style="color: #aaffff; font-weight: bold;">Next</span><br />
<br />
<span style="color: #aaffff; font-weight: bold;">Global</span> Center=<span style="color: #aaffff; font-weight: bold;">CreatePivot</span><span style=" ">&#40;</span><span style=" ">&#41;</span> <span style="color: #ffee00">; центр системы, его постоянно совмещаем с камерой (с нами т.е.)</span><br />
<span style="color: #aaffff; font-weight: bold;">Global</span> star=<span style="color: #aaffff; font-weight: bold;">CreateSphere</span><span style=" ">&#40;</span><span style="color: #33ffdd;">8</span>,center<span style=" ">&#41;</span> <span style="color: #ffee00">; ЗВЕЗДЫ</span><br />
<span style="color: #aaffff; font-weight: bold;">EntityFX</span> star,<span style="color: #33ffdd;">1</span><br />
<span style="color: #aaffff; font-weight: bold;">ScaleEntity</span> star,<span style="color: #33ffdd;">50</span>,<span style="color: #33ffdd;">50</span>,<span style="color: #33ffdd;">50</span><br />
<span style="color: #aaffff; font-weight: bold;">FlipMesh</span> star<br />
tx=<span style="color: #aaffff; font-weight: bold;">LoadTexture</span><span style=" ">&#40;</span><span style="color: #00ff66;">&quot;Media\space\stars.png&quot;</span>,<span style="color: #33ffdd;">4</span><span style=" ">&#41;</span><br />
<span style="color: #aaffff; font-weight: bold;">EntityTexture</span> star,tx<br />
<span style="color: #aaffff; font-weight: bold;">FreeTexture</span> tx<br />
<span style="color: #aaffff; font-weight: bold;">EntityOrder</span> star,<span style="color: #33ffdd;">1.0</span><br />
<span style="color: #aaffff; font-weight: bold;">Global</span> solCen=<span style="color: #aaffff; font-weight: bold;">CreatePivot</span><span style=" ">&#40;</span>Center<span style=" ">&#41;</span> &nbsp;<span style="color: #ffee00">; центр вокруг которого вращается Солнце</span><br />
sol=<span style="color: #aaffff; font-weight: bold;">LoadSprite</span><span style=" ">&#40;</span><span style="color: #00ff66;">&quot;Media\space\sol.png&quot;</span>,<span style="color: #33ffdd;">1</span>,SolCen<span style=" ">&#41;</span><span style="color: #ffee00">; Солнце</span><br />
<span style="color: #aaffff; font-weight: bold;">MoveEntity</span> sol,<span style="color: #33ffdd;">0</span>,<span style="color: #33ffdd;">0</span>,<span style="color: #33ffdd;">15</span><br />
<span style="color: #aaffff; font-weight: bold;">EntityOrder</span> sol,<span style="color: #33ffdd;">0.9</span><br />
<br />
<span style="color: #aaffff; font-weight: bold;">Global</span> MoonCen=<span style="color: #aaffff; font-weight: bold;">CreatePivot</span><span style=" ">&#40;</span>Center<span style=" ">&#41;</span> <span style="color: #ffee00">; центр вокруг которого вращается Луна</span><br />
Moon=<span style="color: #aaffff; font-weight: bold;">LoadSprite</span><span style=" ">&#40;</span><span style="color: #00ff66;">&quot;Media\space\moon.png&quot;</span>,<span style="color: #33ffdd;">1</span>,MoonCen<span style=" ">&#41;</span><span style="color: #ffee00">; Луна</span><br />
<span style="color: #aaffff; font-weight: bold;">MoveEntity</span> moon,<span style="color: #33ffdd;">0</span>,<span style="color: #33ffdd;">0</span>,<span style="color: #33ffdd;">-15</span><br />
<span style="color: #aaffff; font-weight: bold;">EntityOrder</span> moon,<span style="color: #33ffdd;">0.8</span><br />
<br />
<br />
<br />
<span style="color: #aaffff; font-weight: bold;">While</span> <span style="color: #aaffff; font-weight: bold;">Not</span> <span style="color: #aaffff; font-weight: bold;">KeyDown</span><span style=" ">&#40;</span><span style="color: #33ffdd;">1</span><span style=" ">&#41;</span><br />
<br />
GodMovement<span style=" ">&#40;</span><span style=" ">&#41;</span> &nbsp; <span style="color: #ffee00">; носится над водой и под ней</span><br />
<br />
DayControl<span style=" ">&#40;</span><span style=" ">&#41;</span> &nbsp;<span style="color: #ffee00">;смена дня и ночи</span><br />
<br />
<span style="color: #aaffff; font-weight: bold;">RenderWorld</span><br />
<span style="color: #aaffff; font-weight: bold;">Flip</span><br />
<br />
<span style="color: #aaffff; font-weight: bold;">Wend</span><br />
<br />
<span style="color: #aaffff; font-weight: bold;">End</span><br />
<br />
<span style="color: #aaffff; font-weight: bold;">Function</span> SpaceControl<span style=" ">&#40;</span>fase#,day<span style=" ">&#41;</span><br />
<span style="color: #aaffff; font-weight: bold;">PositionEntity</span> center,<span style="color: #aaffff; font-weight: bold;">EntityX</span><span style=" ">&#40;</span>god<span style=" ">&#41;</span>,<span style="color: #aaffff; font-weight: bold;">EntityY</span><span style=" ">&#40;</span>god<span style=" ">&#41;</span>,<span style="color: #aaffff; font-weight: bold;">EntityZ</span><span style=" ">&#40;</span>god<span style=" ">&#41;</span><br />
<span style="color: #aaffff; font-weight: bold;">If</span> day=<span style="color: #33ffdd;">-1</span><br />
&nbsp;<span style="color: #aaffff; font-weight: bold;">RotateEntity</span> SolCen,<span style="color: #33ffdd;">90</span>-<span style=" ">&#40;</span><span style="color: #33ffdd;">180</span>*fase<span style=" ">&#41;</span>,<span style="color: #33ffdd;">0</span>,<span style="color: #33ffdd;">0</span><br />
&nbsp;<span style="color: #aaffff; font-weight: bold;">RotateEntity</span> MoonCen,<span style="color: #33ffdd;">90</span>-<span style=" ">&#40;</span><span style="color: #33ffdd;">180</span>*fase<span style=" ">&#41;</span>,<span style="color: #33ffdd;">0</span>,<span style="color: #33ffdd;">0</span><br />
<span style="color: #aaffff; font-weight: bold;">Else</span><br />
&nbsp;<span style="color: #aaffff; font-weight: bold;">RotateEntity</span> SolCen,<span style=" ">&#40;</span><span style="color: #33ffdd;">180</span>*fase<span style=" ">&#41;</span><span style="color: #33ffdd;">+90</span>,<span style="color: #33ffdd;">0</span>,<span style="color: #33ffdd;">0</span><br />
&nbsp;<span style="color: #aaffff; font-weight: bold;">RotateEntity</span> MoonCen,<span style=" ">&#40;</span><span style="color: #33ffdd;">180</span>*fase<span style=" ">&#41;</span><span style="color: #33ffdd;">+90</span>,<span style="color: #33ffdd;">0</span>,<span style="color: #33ffdd;">0</span><br />
<span style="color: #aaffff; font-weight: bold;">EndIf</span><br />
<span style="color: #aaffff; font-weight: bold;">End Function</span><br />
<br />
<span style="color: #aaffff; font-weight: bold;">Function</span> GodMovement<span style=" ">&#40;</span><span style=" ">&#41;</span><br />
<span style="color: #aaffff; font-weight: bold;">TurnEntity</span> God,<span style="color: #aaffff; font-weight: bold;">MouseYSpeed</span><span style=" ">&#40;</span><span style=" ">&#41;</span>,-<span style="color: #aaffff; font-weight: bold;">MouseXSpeed</span><span style=" ">&#40;</span><span style=" ">&#41;</span>,<span style="color: #33ffdd;">0</span> <span style="color: #ffee00">; поворот камеры мышкой аля FPS</span><br />
<span style="color: #aaffff; font-weight: bold;">TurnEntity</span> god,<span style="color: #33ffdd;">0</span>,<span style="color: #33ffdd;">0</span>,-<span style="color: #aaffff; font-weight: bold;">EntityRoll</span><span style=" ">&#40;</span>god<span style=" ">&#41;</span> <span style="color: #ffee00">; чтобы не переворачивалась камера</span><br />
<span style="color: #aaffff; font-weight: bold;">MoveEntity</span> God,<span style="color: #aaffff; font-weight: bold;">KeyDown</span><span style=" ">&#40;</span><span style="color: #33ffdd;">32</span><span style=" ">&#41;</span>-<span style="color: #aaffff; font-weight: bold;">KeyDown</span><span style=" ">&#40;</span><span style="color: #33ffdd;">30</span><span style=" ">&#41;</span>,<span style="color: #33ffdd;">0</span>,<span style="color: #aaffff; font-weight: bold;">KeyDown</span><span style=" ">&#40;</span><span style="color: #33ffdd;">17</span><span style=" ">&#41;</span>-<span style="color: #aaffff; font-weight: bold;">KeyDown</span><span style=" ">&#40;</span><span style="color: #33ffdd;">31</span><span style=" ">&#41;</span> <span style="color: #ffee00">; Движение камеры wasd</span><br />
<span style="color: #aaffff; font-weight: bold;">MoveMouse</span> <span style="color: #aaffff; font-weight: bold;">GraphicsWidth</span><span style=" ">&#40;</span><span style=" ">&#41;</span>/<span style="color: #33ffdd;">2</span>,<span style="color: #aaffff; font-weight: bold;">GraphicsHeight</span><span style=" ">&#40;</span><span style=" ">&#41;</span>/<span style="color: #33ffdd;">2</span> <span style="color: #ffee00">; Это нужно чтобы машка не уходила за экран</span><br />
<span style="color: #aaffff; font-weight: bold;">End Function</span><br />
<br />
<span style="color: #aaffff; font-weight: bold;">Function</span> DayControl<span style=" ">&#40;</span><span style=" ">&#41;</span><br />
<span style="color: #aaffff; font-weight: bold;">If</span> DayBegin=<span style="color: #33ffdd;">0</span> <span style="color: #aaffff; font-weight: bold;">Then</span> DayBegin=<span style="color: #aaffff; font-weight: bold;">MilliSecs</span><span style=" ">&#40;</span><span style=" ">&#41;</span> &nbsp;<span style="color: #ffee00">; день первый начался</span><br />
delta#=<span style="color: #aaffff; font-weight: bold;">Float</span><span style=" ">&#40;</span><span style="color: #aaffff; font-weight: bold;">MilliSecs</span><span style=" ">&#40;</span><span style=" ">&#41;</span>-DayBegin<span style=" ">&#41;</span>/DayTime <span style="color: #ffee00">; Какая часть дня прошла?</span><br />
<span style="color: #aaffff; font-weight: bold;">If</span> delta&gt;=<span style="color: #33ffdd;">1</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span style="color: #ffee00">; День/ночь кончился</span><br />
&nbsp;delta=<span style="color: #33ffdd;">1</span><br />
&nbsp;DayBegin=<span style="color: #aaffff; font-weight: bold;">MilliSecs</span><span style=" ">&#40;</span><span style=" ">&#41;</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #ffee00">;Начался новый день/ночь</span><br />
<span style="color: #aaffff; font-weight: bold;">EndIf</span><br />
<span style="color: #aaffff; font-weight: bold;">If</span> day=<span style="color: #33ffdd;">-1</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span style="color: #ffee00">;Ночью света становится меньше</span><br />
&nbsp;delta=<span style="color: #33ffdd;">1</span>-delta<br />
<span style="color: #aaffff; font-weight: bold;">EndIf</span><br />
<span style="color: #aaffff; font-weight: bold;">LightColor</span> l,<span style="color: #33ffdd;">255</span>*delta,<span style="color: #33ffdd;">255</span>*delta,<span style="color: #33ffdd;">255</span>*delta<br />
<span style="color: #aaffff; font-weight: bold;">CameraClsColor</span> God,red*delta,green*delta,Blue*delta &nbsp;<span style="color: #ffee00">; цвет неба зависит от времени суток</span><br />
<span style="color: #aaffff; font-weight: bold;">EntityAlpha</span> star,<span style="color: #33ffdd;">1</span>-delta<br />
SpaceControl<span style=" ">&#40;</span>delta,day<span style=" ">&#41;</span><br />
<span style="color: #aaffff; font-weight: bold;">If</span> delta=<span style="color: #33ffdd;">1</span> <span style="color: #aaffff; font-weight: bold;">Or</span> delta=<span style="color: #33ffdd;">0</span> <span style="color: #aaffff; font-weight: bold;">Then</span> day=-day &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span style="color: #ffee00">; в полдень/полночь сменяем признак половины дня</span><br />
</p>
<span style="color: #aaffff; font-weight: bold;">End Function</span></div>
<p>Досконально переводим в код то, что записано в диздоке. Само собой, что твердь небесная это сфера, на которой мы намалевали звезды. (я там созвездие большой медведицы намалевал) Солнышко и Луну запустили по круговой орбите: Теперь ясно почему Джордано Бруно сожгли! Движок пропачили, но что пропачили не сказали: Джордано фишку просек, о чем и сказал, но если он был прав, у клириков заклинание "Майнд контрол" обламывалось и они его на респ отправили, принеся в жертву.
</p><p>Как вы знаете Солнце, Луна и звезды находятся на большом расстоянии от нас, и находились на большом расстоянии даже при Геоцентрической системе мира. Но формально - далеко значит, рисуется первым. Для создания небесных сфер, использован контроль над Z-буфером. Первой выводятся звезды, которые днем становятся прозрачными, потом солнце, потом луна. Сделано это из-за того, что нужно одновременно противоположного. Сферы должны быть такими большими, чтобы все предмеры в радиусе видимости были внутри нее, а это возможно только если сфера больше радиуса видимости. Если сферы будут меньше, то будет видно как предметы проходят сквозь них: А слабо вам сделать солнечное затменье? Подсказка: для более наглядного и понятного обращения с планетами имеет смысл сделать свой календарь и время, которые будут привязаны к миллисекундам. Так как это сделал я сейчас - быстро, требует минимум квалификации, но несколько натянуто и не гибко. Помучавшись со своими часами и календарем, вы сможете легко управлять периодом обращения небесных тел. 
</p>
<ol start="20">
<li>И сказал Бог: да произведет вода пресмыкающихся, душу живую; и птицы да полетят над землею, по тверди небесной. [И стало так.]
<li>И сотворил Бог рыб больших и всякую душу животных пресмыкающихся, которых произвела вода, по роду их, и всякую птицу пернатую по роду ее. И увидел Бог, что это хорошо.
<li>И благословил их Бог, говоря: плодитесь и размножайтесь, и наполняйте воды в морях, и птицы да размножаются на земле.
<li>И был вечер, и было утро: день пятый.
</ol>
<p>Позволю себе заметить, сначала появилась земля, потом растения - стоят на месте и без анимации, потом звезды и планеты и потом пресмыкающиеся и птицы. Т.е. целый день Бог собирался с силами для того, что бы ввести в свой мир анимированные, перемещающиеся модели. И не зря. Для того чтобы сделать возможным их перемещение придется сделать гравитацию. (Может, поэтому он сделал планеты и звезды сначала?&nbsp;;)) Естественно делаем себе послабление - птиц не будет, животные ходить не будут. Почему? Потому что для того чтобы ходить, животным нужны мозги (АИ), а птицы - летают, зависшие птицы никуда не годятся, а вот стоящие на месте животные - это нормально. Животное я сделал с помощью Wings3D. Хто это? Сказать сложно, но то что это животное - однозначно.
</p>
<div class="bb" style="font-family: monospace;background-color:#FFFFFF;border:1px dashed #CCCCCC;padding:10px;background-color:#225588;color:#FFFFFF;border:1px solid #003040;padding:10px;"><span style="color: #aaffff; font-weight: bold;">Graphics3D</span> <span style="color: #33ffdd;">640</span>, <span style="color: #33ffdd;">480</span>, <span style="color: #33ffdd;">32</span><br />
<p><span style="color: #aaffff; font-weight: bold;">SetBuffer</span> <span style="color: #aaffff; font-weight: bold;">BackBuffer</span><span style=" ">&#40;</span><span style=" ">&#41;</span><br />
<span style="color: #aaffff; font-weight: bold;">HidePointer</span><br />
<br />
<br />
<span style="color: #aaffff; font-weight: bold;">Global</span> God = <span style="color: #aaffff; font-weight: bold;">CreateCamera</span><span style=" ">&#40;</span><span style=" ">&#41;</span><br />
<br />
<span style="color: #aaffff; font-weight: bold;">MoveEntity</span> god,<span style="color: #33ffdd;">0</span>,<span style="color: #33ffdd;">2</span>,<span style="color: #33ffdd;">0</span><br />
<br />
<span style="color: #aaffff; font-weight: bold;">Global</span> Red=<span style="color: #33ffdd;">0</span> &nbsp; &nbsp; &nbsp;<span style="color: #ffee00">; Составляющие</span><br />
<span style="color: #aaffff; font-weight: bold;">Global</span> Green=<span style="color: #33ffdd;">150</span> &nbsp;<span style="color: #ffee00">; цвета</span><br />
<span style="color: #aaffff; font-weight: bold;">Global</span> Blue=<span style="color: #33ffdd;">200</span> &nbsp; <span style="color: #ffee00">; Неба</span><br />
<br />
<span style="color: #aaffff; font-weight: bold;">Global</span> Day=<span style="color: #33ffdd;">1.0</span> &nbsp; &nbsp;<span style="color: #ffee00">; Значит у нас кончилась ночь</span><br />
<span style="color: #aaffff; font-weight: bold;">CameraClsColor</span> God,red,green,Blue<span style="color: #ffee00">; Небо</span><br />
<br />
<span style="color: #aaffff; font-weight: bold;">Global</span> DayTime=<span style="color: #33ffdd;">100000</span> <span style="color: #ffee00">; скорость смены</span><br />
<span style="color: #aaffff; font-weight: bold;">Global</span> DayBegin=<span style="color: #33ffdd;">0</span> &nbsp; <span style="color: #ffee00">; когда произошла смена дня и ночи</span><br />
<br />
<br />
Pl= <span style="color: #aaffff; font-weight: bold;">CreatePlane</span><span style=" ">&#40;</span><span style=" ">&#41;</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #ffee00">;Земля, которая вода</span><br />
<span style="color: #aaffff; font-weight: bold;">EntityAlpha</span> Pl,<span style="color: #33ffdd;">0.5</span><br />
tx=<span style="color: #aaffff; font-weight: bold;">LoadTexture</span><span style=" ">&#40;</span><span style="color: #00ff66;">&quot;media\water.jpg&quot;</span><span style=" ">&#41;</span> &nbsp; <span style="color: #ffee00">;</span><br />
<span style="color: #aaffff; font-weight: bold;">EntityTexture</span> Pl,tx &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #ffee00">;</span><br />
<span style="color: #aaffff; font-weight: bold;">FreeTexture</span> tx<br />
<span style="color: #aaffff; font-weight: bold;">EntityPickMode</span> pl,<span style="color: #33ffdd;">2</span><br />
<span style="color: #aaffff; font-weight: bold;">NameEntity</span> pl,<span style="color: #00ff66;">&quot;Water&quot;</span><br />
<br />
sh= <span style="color: #aaffff; font-weight: bold;">CreatePlane</span><span style=" ">&#40;</span><span style=" ">&#41;</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #ffee00">; дно - шельф</span><br />
<br />
Land=<span style="color: #aaffff; font-weight: bold;">LoadTerrain</span><span style=" ">&#40;</span><span style="color: #00ff66;">&quot;media\Land.png&quot;</span><span style=" ">&#41;</span> &nbsp; &nbsp;<span style="color: #ffee00">; Острова</span><br />
<br />
<span style="color: #aaffff; font-weight: bold;">EntityPickMode</span> Land,<span style="color: #33ffdd;">2</span><br />
<span style="color: #aaffff; font-weight: bold;">NameEntity</span> Land,<span style="color: #00ff66;">&quot;Land&quot;</span><br />
<br />
tx=<span style="color: #aaffff; font-weight: bold;">LoadTexture</span><span style=" ">&#40;</span><span style="color: #00ff66;">&quot;media\dirt001.jpg&quot;</span><span style=" ">&#41;</span> &nbsp; <span style="color: #ffee00">;</span><br />
<br />
<span style="color: #aaffff; font-weight: bold;">ScaleTexture</span> tx,<span style="color: #33ffdd;">0.2</span>,<span style="color: #33ffdd;">0.2</span><br />
<span style="color: #aaffff; font-weight: bold;">EntityTexture</span> sh,tx &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #ffee00">;</span><br />
<span style="color: #aaffff; font-weight: bold;">EntityTexture</span> land,tx &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #ffee00">;</span><br />
<span style="color: #aaffff; font-weight: bold;">FreeTexture</span> tx<br />
<br />
<span style="color: #aaffff; font-weight: bold;">ScaleEntity</span> sh,<span style="color: #33ffdd;">5</span>,<span style="color: #33ffdd;">1</span>,<span style="color: #33ffdd;">5</span><br />
<span style="color: #aaffff; font-weight: bold;">ScaleEntity</span> Land,<span style="color: #33ffdd;">5</span>,<span style="color: #33ffdd;">80</span>,<span style="color: #33ffdd;">5</span><br />
<span style="color: #aaffff; font-weight: bold;">MoveEntity</span> Land,<span style="color: #33ffdd;">-256</span>*<span style="color: #33ffdd;">5</span>,<span style="color: #33ffdd;">-20</span>,<span style="color: #33ffdd;">-256</span>*<span style="color: #33ffdd;">5</span><br />
<span style="color: #aaffff; font-weight: bold;">MoveEntity</span> sh,<span style="color: #33ffdd;">0</span>,<span style="color: #33ffdd;">-20.001</span>,<span style="color: #33ffdd;">0</span><br />
<br />
<span style="color: #aaffff; font-weight: bold;">AmbientLight</span> <span style="color: #33ffdd;">100</span>,<span style="color: #33ffdd;">100</span>,<span style="color: #33ffdd;">100</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span style="color: #ffee00">; как освещены предметы ночью</span><br />
<span style="color: #aaffff; font-weight: bold;">Global</span> l = <span style="color: #aaffff; font-weight: bold;">CreateLight</span><span style=" ">&#40;</span><span style=" ">&#41;</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #ffee00">; Свет, который хорошо</span><br />
<span style="color: #aaffff; font-weight: bold;">TurnEntity</span> l,<span style="color: #33ffdd;">30</span>,<span style="color: #33ffdd;">20</span>,<span style="color: #33ffdd;">0</span><br />
<br />
<br />
<span style="color: #ffee00">; Зеленые насаждения</span><br />
<span style="color: #aaffff; font-weight: bold;">Dim</span> Flora<span style=" ">&#40;</span><span style="color: #33ffdd;">2</span><span style=" ">&#41;</span><br />
<br />
Flora<span style=" ">&#40;</span><span style="color: #33ffdd;">1</span><span style=" ">&#41;</span>=<span style="color: #aaffff; font-weight: bold;">LoadMesh</span><span style=" ">&#40;</span><span style="color: #00ff66;">&quot;media\tree\tree01.b3d&quot;</span><span style=" ">&#41;</span><br />
<span style="color: #aaffff; font-weight: bold;">HideEntity</span> Flora<span style=" ">&#40;</span><span style="color: #33ffdd;">1</span><span style=" ">&#41;</span><br />
Flora<span style=" ">&#40;</span><span style="color: #33ffdd;">2</span><span style=" ">&#41;</span>=<span style="color: #aaffff; font-weight: bold;">LoadMesh</span><span style=" ">&#40;</span><span style="color: #00ff66;">&quot;media\tree\tree01.b3d&quot;</span><span style=" ">&#41;</span><br />
<span style="color: #aaffff; font-weight: bold;">ScaleEntity</span> Flora<span style=" ">&#40;</span><span style="color: #33ffdd;">2</span><span style=" ">&#41;</span>,<span style="color: #33ffdd;">1</span>,<span style="color: #33ffdd;">0.5</span>,<span style="color: #33ffdd;">1</span><br />
<span style="color: #aaffff; font-weight: bold;">HideEntity</span> Flora<span style=" ">&#40;</span><span style="color: #33ffdd;">2</span><span style=" ">&#41;</span><br />
<br />
<span style="color: #aaffff; font-weight: bold;">For</span> i=<span style="color: #33ffdd;">1</span> <span style="color: #aaffff; font-weight: bold;">To</span> <span style="color: #33ffdd;">1000</span> <span style="color: #ffee00">; количество растений</span><br />
en=<span style="color: #33ffdd;">0</span><br />
<span style="color: #aaffff; font-weight: bold;">While</span> en=<span style="color: #33ffdd;">0</span><br />
&nbsp;x#=<span style="color: #aaffff; font-weight: bold;">Rnd</span><span style=" ">&#40;</span><span style="color: #33ffdd;">-2500</span>,<span style="color: #33ffdd;">2500</span><span style=" ">&#41;</span><br />
&nbsp;z#=<span style="color: #aaffff; font-weight: bold;">Rnd</span><span style=" ">&#40;</span><span style="color: #33ffdd;">-2500</span>,<span style="color: #33ffdd;">2500</span><span style=" ">&#41;</span><br />
&nbsp;<span style="color: #aaffff; font-weight: bold;">LinePick</span> x,<span style="color: #33ffdd;">500</span>,z,<span style="color: #33ffdd;">0</span>,<span style="color: #33ffdd;">-500</span>,<span style="color: #33ffdd;">0</span><br />
&nbsp;en=<span style="color: #aaffff; font-weight: bold;">PickedEntity</span><span style=" ">&#40;</span><span style=" ">&#41;</span><br />
&nbsp;<span style="color: #aaffff; font-weight: bold;">If</span> en<br />
&nbsp; <span style="color: #aaffff; font-weight: bold;">If</span> <span style="color: #aaffff; font-weight: bold;">EntityName</span><span style=" ">&#40;</span>en<span style=" ">&#41;</span>=<span style="color: #00ff66;">&quot;Land&quot;</span> &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #ffee00">; В воду растения не сажаем.</span><br />
&nbsp; &nbsp;tr=<span style="color: #aaffff; font-weight: bold;">CopyEntity</span><span style=" ">&#40;</span>flora<span style=" ">&#40;</span><span style="color: #aaffff; font-weight: bold;">Rnd</span><span style=" ">&#40;</span><span style="color: #33ffdd;">1</span>,<span style="color: #33ffdd;">2</span><span style=" ">&#41;</span><span style=" ">&#41;</span><span style=" ">&#41;</span><br />
&nbsp; &nbsp;<span style="color: #aaffff; font-weight: bold;">PositionEntity</span> tr,x,<span style="color: #aaffff; font-weight: bold;">PickedY</span>#<span style=" ">&#40;</span><span style=" ">&#41;</span>,z<br />
&nbsp; <span style="color: #aaffff; font-weight: bold;">Else</span><br />
&nbsp; &nbsp;en=<span style="color: #33ffdd;">0</span><br />
&nbsp; <span style="color: #aaffff; font-weight: bold;">EndIf</span><br />
&nbsp;<span style="color: #aaffff; font-weight: bold;">EndIf</span><br />
<span style="color: #aaffff; font-weight: bold;">Wend</span><br />
<span style="color: #aaffff; font-weight: bold;">Next</span><br />
<br />
<span style="color: #ffee00">;Космические тела</span><br />
<span style="color: #aaffff; font-weight: bold;">Global</span> Center=<span style="color: #aaffff; font-weight: bold;">CreatePivot</span><span style=" ">&#40;</span><span style=" ">&#41;</span> <span style="color: #ffee00">; центр системы, его постоянно совмещаем с камерой (с нами т.е.)</span><br />
<span style="color: #aaffff; font-weight: bold;">Global</span> star=<span style="color: #aaffff; font-weight: bold;">CreateSphere</span><span style=" ">&#40;</span><span style="color: #33ffdd;">8</span>,center<span style=" ">&#41;</span> <span style="color: #ffee00">; ЗВЕЗДЫ</span><br />
<span style="color: #aaffff; font-weight: bold;">EntityFX</span> star,<span style="color: #33ffdd;">1</span><br />
<span style="color: #aaffff; font-weight: bold;">ScaleEntity</span> star,<span style="color: #33ffdd;">50</span>,<span style="color: #33ffdd;">50</span>,<span style="color: #33ffdd;">50</span><br />
<span style="color: #aaffff; font-weight: bold;">FlipMesh</span> star<br />
tx=<span style="color: #aaffff; font-weight: bold;">LoadTexture</span><span style=" ">&#40;</span><span style="color: #00ff66;">&quot;Media\space\stars.png&quot;</span>,<span style="color: #33ffdd;">4</span><span style=" ">&#41;</span><br />
<span style="color: #aaffff; font-weight: bold;">EntityTexture</span> star,tx<br />
<span style="color: #aaffff; font-weight: bold;">FreeTexture</span> tx<br />
<span style="color: #aaffff; font-weight: bold;">EntityOrder</span> star,<span style="color: #33ffdd;">1.0</span><br />
<span style="color: #aaffff; font-weight: bold;">Global</span> solCen=<span style="color: #aaffff; font-weight: bold;">CreatePivot</span><span style=" ">&#40;</span>Center<span style=" ">&#41;</span> &nbsp;<span style="color: #ffee00">; центр вокруг которого вращается Солнце</span><br />
sol=<span style="color: #aaffff; font-weight: bold;">LoadSprite</span><span style=" ">&#40;</span><span style="color: #00ff66;">&quot;Media\space\sol.png&quot;</span>,<span style="color: #33ffdd;">1</span>,SolCen<span style=" ">&#41;</span><span style="color: #ffee00">; Солнце</span><br />
<span style="color: #aaffff; font-weight: bold;">MoveEntity</span> sol,<span style="color: #33ffdd;">0</span>,<span style="color: #33ffdd;">0</span>,<span style="color: #33ffdd;">15</span><br />
<span style="color: #aaffff; font-weight: bold;">EntityOrder</span> sol,<span style="color: #33ffdd;">0.9</span><br />
<br />
<span style="color: #aaffff; font-weight: bold;">Global</span> MoonCen=<span style="color: #aaffff; font-weight: bold;">CreatePivot</span><span style=" ">&#40;</span>Center<span style=" ">&#41;</span> <span style="color: #ffee00">; центр вокруг которого вращается Луна</span><br />
Moon=<span style="color: #aaffff; font-weight: bold;">LoadSprite</span><span style=" ">&#40;</span><span style="color: #00ff66;">&quot;Media\space\moon.png&quot;</span>,<span style="color: #33ffdd;">1</span>,MoonCen<span style=" ">&#41;</span><span style="color: #ffee00">; Луна</span><br />
<span style="color: #aaffff; font-weight: bold;">MoveEntity</span> moon,<span style="color: #33ffdd;">0</span>,<span style="color: #33ffdd;">0</span>,<span style="color: #33ffdd;">-15</span><br />
<span style="color: #aaffff; font-weight: bold;">EntityOrder</span> moon,<span style="color: #33ffdd;">0.8</span><br />
<br />
<span style="color: #ffee00">; гравитация</span><br />
<br />
<span style="color: #aaffff; font-weight: bold;">Const</span> Terrain_type=<span style="color: #33ffdd;">1</span><br />
<span style="color: #aaffff; font-weight: bold;">Const</span> Object_type=<span style="color: #33ffdd;">2</span><br />
<span style="color: #aaffff; font-weight: bold;">Const</span> Water_type=<span style="color: #33ffdd;">3</span><br />
<span style="color: #aaffff; font-weight: bold;">Collisions</span> Object_type,Terrain_type,<span style="color: #33ffdd;">2</span>,<span style="color: #33ffdd;">2</span><br />
<span style="color: #aaffff; font-weight: bold;">Collisions</span> Object_type,Water_type,<span style="color: #33ffdd;">2</span>,<span style="color: #33ffdd;">3</span><br />
<span style="color: #aaffff; font-weight: bold;">Const</span> gravity#=<span style="color: #33ffdd;">0.1</span><br />
<br />
<br />
<span style="color: #aaffff; font-weight: bold;">EntityType</span> Land,Terrain_Type<br />
<span style="color: #aaffff; font-weight: bold;">EntityType</span> Pl,Water_Type<br />
<br />
<span style="color: #aaffff; font-weight: bold;">Type</span> Grav<br />
<span style="color: #aaffff; font-weight: bold;">Field</span> Ent<br />
<span style="color: #aaffff; font-weight: bold;">Field</span> Vy#<br />
<span style="color: #aaffff; font-weight: bold;">End Type</span><br />
<br />
<span style="color: #ffee00">; фауна</span><br />
Monstr=<span style="color: #aaffff; font-weight: bold;">LoadMesh</span><span style=" ">&#40;</span><span style="color: #00ff66;">&quot;Media\Animal\dog.3ds&quot;</span><span style=" ">&#41;</span><br />
<span style="color: #aaffff; font-weight: bold;">EntityType</span> Monstr,Object_Type<br />
<span style="color: #aaffff; font-weight: bold;">EntityRadius</span> Monstr,<span style="color: #33ffdd;">0.1</span><br />
<span style="color: #aaffff; font-weight: bold;">HideEntity</span> Monstr<br />
<br />
<span style="color: #aaffff; font-weight: bold;">For</span> i=<span style="color: #33ffdd;">1</span> <span style="color: #aaffff; font-weight: bold;">To</span> <span style="color: #33ffdd;">200</span> <span style="color: #ffee00">; количество зверей</span><br />
en=<span style="color: #33ffdd;">0</span><br />
<span style="color: #aaffff; font-weight: bold;">While</span> en=<span style="color: #33ffdd;">0</span><br />
&nbsp;x#=<span style="color: #aaffff; font-weight: bold;">Rnd</span><span style=" ">&#40;</span><span style="color: #33ffdd;">-2500</span>,<span style="color: #33ffdd;">2500</span><span style=" ">&#41;</span><br />
&nbsp;z#=<span style="color: #aaffff; font-weight: bold;">Rnd</span><span style=" ">&#40;</span><span style="color: #33ffdd;">-2500</span>,<span style="color: #33ffdd;">2500</span><span style=" ">&#41;</span><br />
&nbsp;<span style="color: #aaffff; font-weight: bold;">LinePick</span> x,<span style="color: #33ffdd;">500</span>,z,<span style="color: #33ffdd;">0</span>,<span style="color: #33ffdd;">-500</span>,<span style="color: #33ffdd;">0</span><br />
&nbsp;en=<span style="color: #aaffff; font-weight: bold;">PickedEntity</span><span style=" ">&#40;</span><span style=" ">&#41;</span><br />
&nbsp;<span style="color: #aaffff; font-weight: bold;">If</span> en<br />
&nbsp; <span style="color: #aaffff; font-weight: bold;">If</span> <span style="color: #aaffff; font-weight: bold;">EntityName</span><span style=" ">&#40;</span>en<span style=" ">&#41;</span>=<span style="color: #00ff66;">&quot;Land&quot;</span> &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #ffee00">; В воду зверюшек не кидаем.</span><br />
&nbsp; &nbsp;G.Grav=<span style="color: #aaffff; font-weight: bold;">New</span> grav<br />
&nbsp; &nbsp;g\ent=<span style="color: #aaffff; font-weight: bold;">CopyEntity</span><span style=" ">&#40;</span>Monstr<span style=" ">&#41;</span><br />
&nbsp; &nbsp;<span style="color: #aaffff; font-weight: bold;">PositionEntity</span> g\ent,x,<span style="color: #aaffff; font-weight: bold;">PickedY</span>#<span style=" ">&#40;</span><span style=" ">&#41;</span><span style="color: #33ffdd;">+2</span>,z<br />
&nbsp; &nbsp;tr=g\ent<br />
&nbsp; <span style="color: #aaffff; font-weight: bold;">Else</span><br />
&nbsp; &nbsp;en=<span style="color: #33ffdd;">0</span><br />
&nbsp; <span style="color: #aaffff; font-weight: bold;">EndIf</span><br />
&nbsp;<span style="color: #aaffff; font-weight: bold;">EndIf</span><br />
<span style="color: #aaffff; font-weight: bold;">Wend</span><br />
<span style="color: #aaffff; font-weight: bold;">Next</span><br />
<br />
<br />
<span style="color: #aaffff; font-weight: bold;">Global</span> jamp=<span style="color: #aaffff; font-weight: bold;">MilliSecs</span><span style=" ">&#40;</span><span style=" ">&#41;</span><br />
<br />
<span style="color: #aaffff; font-weight: bold;">While</span> <span style="color: #aaffff; font-weight: bold;">Not</span> <span style="color: #aaffff; font-weight: bold;">KeyDown</span><span style=" ">&#40;</span><span style="color: #33ffdd;">1</span><span style=" ">&#41;</span><br />
<br />
GodMovement<span style=" ">&#40;</span><span style=" ">&#41;</span> &nbsp; <span style="color: #ffee00">; носится над водой и под ней</span><br />
<br />
DayControl<span style=" ">&#40;</span><span style=" ">&#41;</span> &nbsp;<span style="color: #ffee00">;смена дня и ночи</span><br />
<br />
GravityControl<span style=" ">&#40;</span><span style=" ">&#41;</span> <span style="color: #ffee00">; Обработка воздействия гравитации на объекты</span><br />
<br />
<span style="color: #aaffff; font-weight: bold;">UpdateWorld</span><br />
<span style="color: #aaffff; font-weight: bold;">RenderWorld</span><br />
<span style="color: #aaffff; font-weight: bold;">Flip</span><br />
<span style="color: #aaffff; font-weight: bold;">Wend</span><br />
<br />
<span style="color: #aaffff; font-weight: bold;">End</span><br />
<br />
<span style="color: #aaffff; font-weight: bold;">Function</span> GravityControl<span style=" ">&#40;</span><span style=" ">&#41;</span><br />
TekMillisecs=<span style="color: #aaffff; font-weight: bold;">MilliSecs</span><span style=" ">&#40;</span><span style=" ">&#41;</span><br />
<span style="color: #aaffff; font-weight: bold;">For</span> t.grav= <span style="color: #aaffff; font-weight: bold;">Each</span> grav<br />
&nbsp;<span style="color: #aaffff; font-weight: bold;">If</span> <span style="color: #aaffff; font-weight: bold;">EntityCollided</span><span style=" ">&#40;</span>t\ent,Terrain_type<span style=" ">&#41;</span>&gt;<span style="color: #33ffdd;">0</span><br />
&nbsp; <span style="color: #aaffff; font-weight: bold;">AlignToVector</span> t\ent,<span style="color: #aaffff; font-weight: bold;">CollisionNX</span><span style=" ">&#40;</span>t\ent,<span style="color: #33ffdd;">1</span><span style=" ">&#41;</span>,<span style="color: #aaffff; font-weight: bold;">CollisionNY</span><span style=" ">&#40;</span>t\ent,<span style="color: #33ffdd;">1</span><span style=" ">&#41;</span>,<span style="color: #aaffff; font-weight: bold;">CollisionNZ</span><span style=" ">&#40;</span>t\ent,<span style="color: #33ffdd;">1</span><span style=" ">&#41;</span>,<span style="color: #33ffdd;">2</span>,<span style="color: #33ffdd;">0.2</span><br />
&nbsp; t\Vy=<span style="color: #33ffdd;">0</span><br />
&nbsp; <span style="color: #aaffff; font-weight: bold;">If</span> TekMillisecs&gt;=Jamp<span style="color: #33ffdd;">+2000</span> <span style="color: #ffee00">; Раз в 2 секундs зверь прыгает, Для этого должен был-бы использоваться</span><br />
&nbsp; <span style="color: #ffee00">; модуль АИ, но пока и так хорошо.</span><br />
&nbsp; &nbsp;t\Vy=<span style="color: #33ffdd;">1</span><br />
&nbsp; <span style="color: #aaffff; font-weight: bold;">EndIf</span><br />
&nbsp;<span style="color: #aaffff; font-weight: bold;">EndIf</span><br />
&nbsp;t\Vy= t\Vy-gravity<br />
&nbsp;<span style="color: #aaffff; font-weight: bold;">TranslateEntity</span> t\ent,<span style="color: #33ffdd;">0</span>,t\vy,<span style="color: #33ffdd;">0</span>,<span style="color: #33ffdd;">1</span><br />
<span style="color: #aaffff; font-weight: bold;">Next</span><br />
&nbsp;<span style="color: #aaffff; font-weight: bold;">If</span> TekMillisecs&gt;=Jamp<span style="color: #33ffdd;">+2000</span> <span style="color: #ffee00">; Раз в 2 секундs зверь прыгает, Для этого должен был-бы использоваться</span><br />
&nbsp;<span style="color: #ffee00">; модуль АИ, но пока и так хорошо.</span><br />
&nbsp; jamp=TekMillisecs<br />
&nbsp;<span style="color: #aaffff; font-weight: bold;">EndIf</span><br />
<span style="color: #aaffff; font-weight: bold;">End Function</span><br />
<br />
<br />
<span style="color: #aaffff; font-weight: bold;">Function</span> SpaceControl<span style=" ">&#40;</span>fase#,day<span style=" ">&#41;</span><br />
<span style="color: #aaffff; font-weight: bold;">PositionEntity</span> center,<span style="color: #aaffff; font-weight: bold;">EntityX</span><span style=" ">&#40;</span>god<span style=" ">&#41;</span>,<span style="color: #aaffff; font-weight: bold;">EntityY</span><span style=" ">&#40;</span>god<span style=" ">&#41;</span>,<span style="color: #aaffff; font-weight: bold;">EntityZ</span><span style=" ">&#40;</span>god<span style=" ">&#41;</span><br />
<span style="color: #aaffff; font-weight: bold;">If</span> day=<span style="color: #33ffdd;">-1</span><br />
&nbsp;<span style="color: #aaffff; font-weight: bold;">RotateEntity</span> SolCen,<span style="color: #33ffdd;">90</span>-<span style=" ">&#40;</span><span style="color: #33ffdd;">180</span>*fase<span style=" ">&#41;</span>,<span style="color: #33ffdd;">0</span>,<span style="color: #33ffdd;">0</span><br />
&nbsp;<span style="color: #aaffff; font-weight: bold;">RotateEntity</span> MoonCen,<span style="color: #33ffdd;">90</span>-<span style=" ">&#40;</span><span style="color: #33ffdd;">180</span>*fase<span style=" ">&#41;</span>,<span style="color: #33ffdd;">0</span>,<span style="color: #33ffdd;">0</span><br />
<span style="color: #aaffff; font-weight: bold;">Else</span><br />
&nbsp;<span style="color: #aaffff; font-weight: bold;">RotateEntity</span> SolCen,<span style=" ">&#40;</span><span style="color: #33ffdd;">180</span>*fase<span style=" ">&#41;</span><span style="color: #33ffdd;">+90</span>,<span style="color: #33ffdd;">0</span>,<span style="color: #33ffdd;">0</span><br />
&nbsp;<span style="color: #aaffff; font-weight: bold;">RotateEntity</span> MoonCen,<span style=" ">&#40;</span><span style="color: #33ffdd;">180</span>*fase<span style=" ">&#41;</span><span style="color: #33ffdd;">+90</span>,<span style="color: #33ffdd;">0</span>,<span style="color: #33ffdd;">0</span><br />
<span style="color: #aaffff; font-weight: bold;">EndIf</span><br />
<span style="color: #aaffff; font-weight: bold;">End Function</span><br />
<br />
<span style="color: #aaffff; font-weight: bold;">Function</span> GodMovement<span style=" ">&#40;</span><span style=" ">&#41;</span><br />
<span style="color: #aaffff; font-weight: bold;">TurnEntity</span> God,<span style="color: #aaffff; font-weight: bold;">MouseYSpeed</span><span style=" ">&#40;</span><span style=" ">&#41;</span>,-<span style="color: #aaffff; font-weight: bold;">MouseXSpeed</span><span style=" ">&#40;</span><span style=" ">&#41;</span>,<span style="color: #33ffdd;">0</span> <span style="color: #ffee00">; поворот камеры мышкой аля FPS</span><br />
<span style="color: #aaffff; font-weight: bold;">TurnEntity</span> god,<span style="color: #33ffdd;">0</span>,<span style="color: #33ffdd;">0</span>,-<span style="color: #aaffff; font-weight: bold;">EntityRoll</span><span style=" ">&#40;</span>god<span style=" ">&#41;</span> <span style="color: #ffee00">; чтобы не переворачивалась камера</span><br />
<span style="color: #aaffff; font-weight: bold;">MoveEntity</span> God,<span style="color: #aaffff; font-weight: bold;">KeyDown</span><span style=" ">&#40;</span><span style="color: #33ffdd;">32</span><span style=" ">&#41;</span>-<span style="color: #aaffff; font-weight: bold;">KeyDown</span><span style=" ">&#40;</span><span style="color: #33ffdd;">30</span><span style=" ">&#41;</span>,<span style="color: #33ffdd;">0</span>,<span style="color: #aaffff; font-weight: bold;">KeyDown</span><span style=" ">&#40;</span><span style="color: #33ffdd;">17</span><span style=" ">&#41;</span>-<span style="color: #aaffff; font-weight: bold;">KeyDown</span><span style=" ">&#40;</span><span style="color: #33ffdd;">31</span><span style=" ">&#41;</span> <span style="color: #ffee00">; Движение камеры wasd</span><br />
<span style="color: #aaffff; font-weight: bold;">MoveMouse</span> <span style="color: #aaffff; font-weight: bold;">GraphicsWidth</span><span style=" ">&#40;</span><span style=" ">&#41;</span>/<span style="color: #33ffdd;">2</span>,<span style="color: #aaffff; font-weight: bold;">GraphicsHeight</span><span style=" ">&#40;</span><span style=" ">&#41;</span>/<span style="color: #33ffdd;">2</span> <span style="color: #ffee00">; Это нужно чтобы машка не уходила за экран</span><br />
<span style="color: #aaffff; font-weight: bold;">End Function</span><br />
<br />
<span style="color: #aaffff; font-weight: bold;">Function</span> DayControl<span style=" ">&#40;</span><span style=" ">&#41;</span><br />
<span style="color: #aaffff; font-weight: bold;">If</span> DayBegin=<span style="color: #33ffdd;">0</span> <span style="color: #aaffff; font-weight: bold;">Then</span> DayBegin=<span style="color: #aaffff; font-weight: bold;">MilliSecs</span><span style=" ">&#40;</span><span style=" ">&#41;</span> &nbsp;<span style="color: #ffee00">; день первый начался</span><br />
delta#=<span style="color: #aaffff; font-weight: bold;">Float</span><span style=" ">&#40;</span><span style="color: #aaffff; font-weight: bold;">MilliSecs</span><span style=" ">&#40;</span><span style=" ">&#41;</span>-DayBegin<span style=" ">&#41;</span>/DayTime <span style="color: #ffee00">; Какая часть дня прошла?</span><br />
<span style="color: #aaffff; font-weight: bold;">If</span> delta&gt;=<span style="color: #33ffdd;">1</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span style="color: #ffee00">; День/ночь кончился</span><br />
&nbsp;delta=<span style="color: #33ffdd;">1</span><br />
&nbsp;DayBegin=<span style="color: #aaffff; font-weight: bold;">MilliSecs</span><span style=" ">&#40;</span><span style=" ">&#41;</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #ffee00">;Начался новый день/ночь</span><br />
<span style="color: #aaffff; font-weight: bold;">EndIf</span><br />
<span style="color: #aaffff; font-weight: bold;">If</span> day=<span style="color: #33ffdd;">-1</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span style="color: #ffee00">;Ночью света становится меньше</span><br />
&nbsp;delta=<span style="color: #33ffdd;">1</span>-delta<br />
<span style="color: #aaffff; font-weight: bold;">EndIf</span><br />
<span style="color: #aaffff; font-weight: bold;">LightColor</span> l,<span style="color: #33ffdd;">255</span>*delta,<span style="color: #33ffdd;">255</span>*delta,<span style="color: #33ffdd;">255</span>*delta<br />
<span style="color: #aaffff; font-weight: bold;">CameraClsColor</span> God,red*delta,green*delta,Blue*delta &nbsp;<span style="color: #ffee00">; цвет неба зависит от времени суток</span><br />
<span style="color: #aaffff; font-weight: bold;">EntityAlpha</span> star,<span style="color: #33ffdd;">1</span>-delta<br />
SpaceControl<span style=" ">&#40;</span>delta,day<span style=" ">&#41;</span><br />
<span style="color: #aaffff; font-weight: bold;">If</span> delta=<span style="color: #33ffdd;">1</span> <span style="color: #aaffff; font-weight: bold;">Or</span> delta=<span style="color: #33ffdd;">0</span> <span style="color: #aaffff; font-weight: bold;">Then</span> day=-day &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span style="color: #ffee00">; в полдень/полночь сменяем признак половины дня</span><br />
</p>
<span style="color: #aaffff; font-weight: bold;">End Function</span></div>
<p>Хочу отметить одну деталь. Когда предмет лежит на поверхности, на него тоже действует сила тяжести! Она ежесекундно смещает предмет вниз. Именно поэтому наши животины скатываются в воду, что противоречит привычной для нас логике. Исправляется это изменением одной цифры в коде. Когда вы захотите оптимизировать код и начнете писать что-то типа: "если предмет касается земли, то гравитацию не считать", а в результате время от времени быстро движущиеся предметы будут как бы отскакивать назад, вспомните об этой детали. Животные прыгают и радуются жизни, чтобы показать действие гравитации. Данная гравитация очень проста в использовании, достаточно включить гравитацию для 3Д объекта, и правильно установить радиус коллизии (самое сложное): Лучше всего использовать модели в специализированном формате движка, на котором вы создаете свой шедевр, в моем случае это B3D - жалко, что кроме 3D Max с ним нормально никто больше не работает. Кстати, особенно много глюков заложено в последнем дне. Почему, добравшись до воды, животные перестают прыгать? Почему 1000 деревьев стоит на суше, куча зверюшек попала в воду при одинаковом алгоритме расстановки? Намекаю - все дело в настройках коллизии! 
</p>
<ol start="24">
<li>И сказал Бог: да произведет земля душу живую по роду ее, скотов, и гадов, и зверей земных по роду их. И стало так.
<li>И создал Бог зверей земных по роду их, и скот по роду его, и всех гадов земных по роду их. И увидел Бог, что это хорошо.
</ol>
<p>Здесь ничего нового не происходит, просто новые модели в игру ввели.
</p>
<ol start="26">
<li>И сказал Бог: сотворим человека по образу Нашему [и] по подобию Нашему, и да владычествуют они над рыбами морскими, и над птицами небесными, [и над зверями,] и над скотом, и над всею землею, и над всеми гадами, пресмыкающимися по земле.
<li>И сотворил Бог человека по образу Своему, по образу Божию сотворил его; мужчину и женщину сотворил их.
<li>И благословил их Бог, и сказал им Бог: плодитесь и размножайтесь, и наполняйте землю, и обладайте ею, и владычествуйте над рыбами морскими [и над зверями,] и над птицами небесными, [и над всяким скотом, и над всею землею,] и над всяким животным, пресмыкающимся по земле.
</ol>
<p>Это самого страшного монстра в игру ввел - персонаж. В общем - начиналось все как обычно: Персонаж - папка, а все монстры - сынки, предназначенные исключительно для экспы: Но как все в релизе изменилось!
</p>
<ol start="29">
<li>И сказал Бог: вот, Я дал вам всякую траву, сеющую семя, какая есть на всей земле, и всякое дерево, у которого плод древесный, сеющий семя; -- вам сие будет в пищу;
<li>а всем зверям земным, и всем птицам небесным, и всякому [гаду,] пресмыкающемуся по земле, в котором душа живая, дал Я всю зелень травную в пищу. И стало так.
</ol>
<p>А это ролевую систему приладил.
</p>
<ol start="31">
<li>И увидел Бог все, что Он создал, и вот, хорошо весьма. И был вечер, и было утро: день шестой.
</ol>
<p>В общем день шестой Бог занимался левелдизайном и ролевой системой. С этого момента начался закрытый бета-тест двумя бета-тестерами: Адамом и Евой на тестовой локации "Рай".
</p><p>На данный момент, мы имеем основу мира.(Как скажут некоторые основное уже сделано&nbsp;:)) Исходники нашей вселенной нам все равно не достать. Придется писать свои. На данном этапе мы не готовы вдохнуть жизнь в наш мир, для этого нужна предварительная подготовка. В следующий раз мы заставим зверюшек шляться по островку (как минимум). Если есть вопросы - пишите (roman_tnp@mail.ru), они будут учтены при более тщательной проработке игровых моментов.
</p>
<div align="right"><a href="http://blitzetcetera.org/images/8/80/Rookie_Tutorial_1.zip" class="internal" title="Rookie Tutorial 1.zip">скачать архив с файлами к статье</a></div>
<hr />
<p>Автор: <a href="http://blitzetcetera.org/index.php/%D0%A3%D1%87%D0%B0%D1%81%D1%82%D0%BD%D0%B8%D0%BA:Tolking" title="Участник:Tolking">Роман Прядко</a> (roman_tnp@mail.ru)
</p><!-- 
Pre-expand include size: 19411 bytes
Post-expand include size: 465 bytes
Template argument size: 28 bytes
Maximum: 2097152 bytes
-->

<!-- Saved in parser cache with key db1:pcache:idhash:592-0!1!0!!ru!2 and timestamp 20071110035740 -->
<div class="printfooter">
Получено с <a href="8qae2uct.html">http://blitzetcetera.org/index.php/%D0%9A%D1%83%D1%80%D1%81_%D0%BC%D0%BE%D0%BB%D0%BE%D0%B4%D0%BE%D0%B3%D0%BE_%D0%B1%D0%BE%D0%B9%D1%86%D0%B0%2C_%D1%87%D0%B0%D1%81%D1%82%D1%8C_3:_%D0%BF%D1%80%D0%B0%D0%BA%D1%82%D0%B8%D1%87%D0%B5%D1%81%D0%BA%D0%B8%D0%B5_%D0%B7%D0%B0%D0%BD%D1%8F%D1%82%D0%B8%D1%8F</a></div>
			<!-- end content -->			<div class="visualClear"></div>				</td>				<td class="rightside">				</td>			</tr>		</table>		</div>	</div>		</div>	
		<script type="text/javascript">if (window.runOnloadHook) runOnloadHook();</script>
</div></body>
<!-- Mirrored from localhost/index.php/%D0%9A%D1%83%D1%80%D1%81_%D0%BC%D0%BE%D0%BB%D0%BE%D0%B4%D0%BE%D0%B3%D0%BE_%D0%B1%D0%BE%D0%B9%D1%86%D0%B0%2C_%D1%87%D0%B0%D1%81%D1%82%D1%8C_3:_%D0%BF%D1%80%D0%B0%D0%BA%D1%82%D0%B8%D1%87%D0%B5%D1%81%D0%BA%D0%B8%D0%B5_%D0%B7%D0%B0%D0%BD%D1%8F%D1%82%D0%B8%D1%8F by HTTrack Website Copier/3.x [XR&CO'2007], Sat, 10 Nov 2007 05:15:29 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8"><!-- /Added by HTTrack -->
</html>