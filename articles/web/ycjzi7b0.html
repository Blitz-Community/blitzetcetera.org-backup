<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml" xml:lang="ru" lang="ru" dir="ltr">	
<!-- Mirrored from localhost/index.php/%D0%A2%D0%B5%D0%BB%D0%B0_%D0%B2%D1%80%D0%B0%D1%89%D0%B5%D0%BD%D0%B8%D1%8F by HTTrack Website Copier/3.x [XR&CO'2007], Sat, 10 Nov 2007 05:16:36 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8"><!-- /Added by HTTrack -->
<head>		<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />				<meta name="keywords" content="Тела вращения,Matt Merkulov" />
		<link rel="shortcut icon" href="http://blitzetcetera.org/favicon.ico" />
		<link rel="search" type="application/opensearchdescription+xml" href="http://blitzetcetera.org/opensearch_desc.php" title="Blitz Et Cetera (Русский)" />
		<title>Тела вращения — Blitz Et Cetera</title>		<style type="text/css" media="screen,projection">/*<![CDATA[*/ @import "bvih5rde.css?63"; /*]]>*/</style>		<link rel="stylesheet" type="text/css" media="print" href="gcxktlm6.css?63" />		<link rel="stylesheet" type="text/css" media="handheld" href="zumsslq_.css?63" />		<!--[if lt IE 5.5000]><style type="text/css">@import "/skins/OfflineNew/IE50Fixes.css?63";</style><![endif]-->		<!--[if IE 5.5000]><style type="text/css">@import "/skins/OfflineNew/IE55Fixes.css?63";</style><![endif]-->		<!--[if IE 6]><style type="text/css">@import "/skins/OfflineNew/IE60Fixes.css?63";</style><![endif]-->		<!--[if IE 7]><style type="text/css">@import "/skins/OfflineNew/IE70Fixes.css?63";</style><![endif]-->		<!--[if lt IE 7]><script type="text/javascript" src="/skins/common/IEFixes.js?63"></script>		<meta http-equiv="imagetoolbar" content="no" /><![endif]-->		<script type= "text/javascript">/*<![CDATA[*/
var skin = "OfflineNew";
var stylepath = "/skins";
var wgArticlePath = "/index.php/$1";
var wgScriptPath = "";
var wgServer = "http://blitzetcetera.org/";
var wgCanonicalNamespace = "";
var wgCanonicalSpecialPageName = false;
var wgNamespaceNumber = 0;
var wgPageName = "Тела_вращения";
var wgTitle = "Тела вращения";
var wgAction = "view";
var wgArticleId = "588";
var wgIsArticle = true;
var wgUserName = null;
var wgUserGroups = null;
var wgUserLanguage = "ru";
var wgContentLanguage = "ru";
var wgBreakFrames = false;
var wgCurRevisionId = "3569";
/*]]>*/</script>
		<script type="text/javascript" src="2nq-6cel.js?63"><!-- wikibits js --></script>		<script type="text/javascript" src="http://blitzetcetera.org/index.php?title=-&amp;action=raw&amp;gen=js"><!-- site js --></script>		<style type="text/css">/*<![CDATA[*/
@import "http://blitzetcetera.org/index.php?title=MediaWiki:Common.css&amp;usemsgcache=yes&amp;action=raw&amp;ctype=text/css&amp;smaxage=18000";
@import "http://blitzetcetera.org/index.php?title=MediaWiki:OfflineNew.css&amp;usemsgcache=yes&amp;action=raw&amp;ctype=text/css&amp;smaxage=18000";
@import "http://blitzetcetera.org/index.php?title=-&amp;action=raw&amp;gen=css&amp;maxage=18000";
/*]]>*/</style>		<!-- Head Scripts -->	</head><body  class="mediawiki ns-0 ltr page-Тела_вращения">	<div id="globalWrapper">	<div id="logocontainer">		<table align="center">		  <tr>				<td id="blitzetclogo">				</td>			</tr>		</table>	</div>	<div id="magbar">	Журнал о программированнии на языках Blitz3D, BlitzMax, BlitzPlus	</div>		<div id="column-content">	<div id="content">		<a name="top" id="top"></a>				<div id="bodyContent">		<table cellspacing=0 cellpadding=0 width=100%>			<tr>			  <td class="leftside">				</td>				<td class="sheetbody">					<h1 class="sheet">Тела вращения</h1>			<h3 id="siteSub">Материал из Blitz Et Cetera.</h3>			<div id="contentSub"></div>			<!-- start content -->			<p>Как известно, тела вращения - это трехмерные фигуры, полученные вращением двумерных фигур вокруг выбираемой произвольно оси. Вот простейшие тела вращения - цилиндр, конус, усеченный конус, шар, тор, а также более комплексное - бокал, получаемые вращением фигур слева вокруг оси в центре:
</p>
<div class="center"><div class="floatnone"><span><a href="http://blitzetcetera.org/index.php/%D0%98%D0%B7%D0%BE%D0%B1%D1%80%D0%B0%D0%B6%D0%B5%D0%BD%D0%B8%D0%B5:3D01.gif" class="image" title=""><img alt="" longdesc="http://blitzetcetera.org/index.php/%D0%98%D0%B7%D0%BE%D0%B1%D1%80%D0%B0%D0%B6%D0%B5%D0%BD%D0%B8%D0%B5:3D01.gif" src="0j0k_rj3.gif" width="610" height="305" /></a></span></div></div>
<a name=".D0.A1.D0.BE.D0.B7.D0.B4.D0.B0.D0.BD.D0.B8.D0.B5_.D1.82.D0.B5.D0.BB_.D0.B2.D1.80.D0.B0.D1.89.D0.B5.D0.BD.D0.B8.D1.8F"></a><h2><span class="editsection">[<a href="http://blitzetcetera.org/index.php?title=%D0%A2%D0%B5%D0%BB%D0%B0_%D0%B2%D1%80%D0%B0%D1%89%D0%B5%D0%BD%D0%B8%D1%8F&amp;action=edit&amp;section=1" title="Править секцию: Создание тел вращения">править</a>]</span> <span class="mw-headline">Создание тел вращения</span></h2>
<p>Для начала, разберемся с тем, как работают функции Blitz3D, создающие тела вращения. Взгляните на рисунок:
</p>
<div class="center"><div class="floatnone"><span><a href="http://blitzetcetera.org/index.php/%D0%98%D0%B7%D0%BE%D0%B1%D1%80%D0%B0%D0%B6%D0%B5%D0%BD%D0%B8%D0%B5:3D02.gif" class="image" title=""><img alt="" longdesc="http://blitzetcetera.org/index.php/%D0%98%D0%B7%D0%BE%D0%B1%D1%80%D0%B0%D0%B6%D0%B5%D0%BD%D0%B8%D0%B5:3D02.gif" src="d6nr2_q9.gif" width="500" height="246" /></a></span></div></div>
<p>Если цилиндр сгенерирован довольно неплохо (минимум граней - максимум сходства), то на сферу треугольники расходуются неэффективно. Сфера построена по принципу разбивки глобуса меридианами и параллелями на квадратоподобные секции: получается, что у полюсов они гораздо уже, чем у экватора.
</p><p>Итак, чтобы построить трехмерное тело, вернее его оболочку из треугольников, прежде всего необходимо определить контур и ось вращения. Усложним задачу - контур будет задан кривой. Естественно, кривую нужно будет преобразовать в ломаную, то есть разбить на отрезки. Каждый отрезок, вращаясь вокруг оси даст усеченный конус без оснований. Поэтому на втором этапе необходимо построить конуса для всех отрезков.
</p><p>Первый этап: как построить кривую уже было рассказано, теперь как эту кривую разбить на отрезки? Сначала необходимо определить степень детализации (sen#) - на сколько единиц (в данном случае - пикселов) допустимо отклонение ломаной от кривой. Необходимо построить такую ломаную, чтобы, расширив ее на заданное кол-во пикселов, можно было покрыть ей кривую:
</p>
<div class="center"><div class="floatnone"><span><a href="http://blitzetcetera.org/index.php/%D0%98%D0%B7%D0%BE%D0%B1%D1%80%D0%B0%D0%B6%D0%B5%D0%BD%D0%B8%D0%B5:3D03.gif" class="image" title=""><img alt="" longdesc="http://blitzetcetera.org/index.php/%D0%98%D0%B7%D0%BE%D0%B1%D1%80%D0%B0%D0%B6%D0%B5%D0%BD%D0%B8%D0%B5:3D03.gif" src="sb_y1x7v.gif" width="598" height="195" /></a></span></div></div>
<p>Как видно из рисунка, кривая вписывается в набор "корридоров", которые задают ломаную. Здесь возникают два вопроса, на которые не так-то легко найти ответы: как определить угол "корридора" от заданной точки и точку, в которой кривая пересекается с этим "корридором". Найти идеальный алгоритм (результат которого показан на рисунке) мне пока не удалось (возможно, тогда придется решать обе задачи сразу), поэтому приравняем направление "корридора" к направлению касательной к кривой в исходной точке. Точку пересечения определить с помощью формул, в принципе, можно, но как-то не хочется искать корни кубического уравнения (попробуйте найти точку сами, если есть желание). Пойдем более простым путем - определим шаг (точка кривой по формулам из предыдущей статьи определяется исходя из параметра t, изменяющегося от 0 - начало кривой до 1 - конец кривой, поэтому вполне достаточна одна сотая) и будем двигаться вдоль кривой, пока не выйдем за пределы "корридора". После этого определяем отрезок, устанавливаем новый "корридор" от полученной точки и продолжаем весь процесс по достижении конца кривой:
</p>
<div class="center"><div class="floatnone"><span><a href="http://blitzetcetera.org/index.php/%D0%98%D0%B7%D0%BE%D0%B1%D1%80%D0%B0%D0%B6%D0%B5%D0%BD%D0%B8%D0%B5:3D04.gif" class="image" title=""><img alt="" longdesc="http://blitzetcetera.org/index.php/%D0%98%D0%B7%D0%BE%D0%B1%D1%80%D0%B0%D0%B6%D0%B5%D0%BD%D0%B8%D0%B5:3D04.gif" src="nf7juq98.gif" width="604" height="208" /></a></span></div></div>
<p>"Корридор" расширяется в 2 раза, т. к. начальная точка всегда находится в его середине и отклонение будет по крайней мере в 2 раза меньше. На самом деле оно обычно еще меньше, поэтому детализация увеличивается, но из-за особенностей данного метода количество отрезков увеличивается тоже. Еще один момент: линия может выйти за пределы окружности (sen# &gt; 2 * R), тогда количество точек = 1.
</p><p>Второй этап: построение конуса. Метод, в котором количество вершин на каждой окружности фиксировано (так Blitz строит сферу) не подходит. Тогда необходимо задать формулу, определяющую количество вершин для окружности (и, соответственно, тип многоугольника, ее представляющий), в зависимости от радиуса. Возьмем окружность с центром в точке (0,0) и радиусом R. Руководствуясь алгоритмом построения кривой, начав от точки (0,R), в которой касательная параллельна оси OY, нужно было бы, двигаясь по окружности, определить точку, расстояние от которой будет больше или равно sen# - это и будет первый отрезок. Так как кривизна окружности в каждой точке одинакова, то отрезки будут равны (последний в расчет не берем), значит дуги тоже будут равны, поэтому достаточно найти угол между двумя радиусами к соседним точкам, чтобы найти количество точек на окружности и задать их координаты. Точка, в которой расстояние равно sen# - это точка пересечения между линией, параллельной касательной и отстоящей от нее влево на sen# единиц:
</p>
<div class="center"><div class="floatnone"><span><a href="http://blitzetcetera.org/index.php/%D0%98%D0%B7%D0%BE%D0%B1%D1%80%D0%B0%D0%B6%D0%B5%D0%BD%D0%B8%D0%B5:3D05.gif" class="image" title=""><img alt="" longdesc="http://blitzetcetera.org/index.php/%D0%98%D0%B7%D0%BE%D0%B1%D1%80%D0%B0%D0%B6%D0%B5%D0%BD%D0%B8%D0%B5:3D05.gif" src="ik5umj0_.gif" width="492" height="289" /></a></span></div></div>
<p>Установка вершин завершена, теперь дело за треугольниками. Представим развертку конуса прямоугольником, на верхней стороне которого 6 точек, на нижней 8. Они разбивают стороны на 5 и 7 отрезков соответственно. Вот очень эффективный способ разбивки на треугольники (по шагам):
</p>
<ul><li>Начинаем с крайних левых точек. Верхняя - А, нижняя - Б.
</li><li>Определяем следующую по x-координате точку (она может быть из верхнего или нижнего ряда, если две точки имеют одинаковые координаты x, берем верхнюю). Пусть это будет В.
</li><li>Добавляем треугольник АБВ.
</li><li>Если В на той же стороне, что и А, то А = В, иначе Б = В.
</li><li>Повторяем процесс (переходим на пункт 2) пока точки А и Б не окажутся крайними правыми.
</li></ul>
<div class="center"><div class="floatnone"><span><a href="http://blitzetcetera.org/index.php/%D0%98%D0%B7%D0%BE%D0%B1%D1%80%D0%B0%D0%B6%D0%B5%D0%BD%D0%B8%D0%B5:3D06.gif" class="image" title=""><img alt="" longdesc="http://blitzetcetera.org/index.php/%D0%98%D0%B7%D0%BE%D0%B1%D1%80%D0%B0%D0%B6%D0%B5%D0%BD%D0%B8%D0%B5:3D06.gif" src="gof0gln8.gif" width="360" height="70" /></a></span></div></div>
<p>Не стоит делать каждый конус отдельно - пусть вторые вершины одного конуса будут первыми следующего, так, чтобы получилась своеобразная труба.
</p>
<a name=".D0.A0.D0.B5.D0.B4.D0.B0.D0.BA.D1.82.D0.BE.D1.80_.D1.82.D0.B5.D0.BB_.D0.B2.D1.80.D0.B0.D1.89.D0.B5.D0.BD.D0.B8.D1.8F"></a><h2><span class="editsection">[<a href="http://blitzetcetera.org/index.php?title=%D0%A2%D0%B5%D0%BB%D0%B0_%D0%B2%D1%80%D0%B0%D1%89%D0%B5%D0%BD%D0%B8%D1%8F&amp;action=edit&amp;section=2" title="Править секцию: Редактор тел вращения">править</a>]</span> <span class="mw-headline">Редактор тел вращения</span></h2>
<p>Для создания такого редактора, воспользуемся программой из предыдущей статьи и немного изменим ее. Одна половина экрана будет отведена для редактирования кривой, вторая - для просмотра вращающейся трехмерной фигуры (формируется при нажатии "Enter"). Очень красиво смотрятся блики (команда EntityShininess).
</p>
<div class="bb" style="font-family: monospace;background-color:#FFFFFF;border:1px dashed #CCCCCC;padding:10px;background-color:#225588;color:#FFFFFF;border:1px solid #003040;padding:10px;"><span style="color: #aaffff; font-weight: bold;">Type</span> dot<br />
<p>&nbsp;<span style="color: #aaffff; font-weight: bold;">Field</span> x,y,dx1,dy1,dx2,dy2<br />
<span style="color: #aaffff; font-weight: bold;">End Type</span><br />
<br />
<span style="color: #aaffff; font-weight: bold;">Const</span> xres=<span style="color: #33ffdd;">800</span>, yres=<span style="color: #33ffdd;">600</span>, stp#=.<span style="color: #33ffdd;">01</span>, sen#=<span style="color: #33ffdd;">2</span>, maxr#=<span style="color: #33ffdd;">20</span><br />
<span style="color: #aaffff; font-weight: bold;">Const</span> xres2=xres <span style="color: #aaffff; font-weight: bold;">Shr</span> <span style="color: #33ffdd;">1</span>, yres2=yres <span style="color: #aaffff; font-weight: bold;">Shr</span> <span style="color: #33ffdd;">1</span><br />
<br />
<span style="color: #aaffff; font-weight: bold;">Global</span> seldot.dot, sel, mx, my<br />
<span style="color: #aaffff; font-weight: bold;">Dim</span> a#<span style=" ">&#40;</span><span style="color: #33ffdd;">1</span><span style=" ">&#41;</span>,b#<span style=" ">&#40;</span><span style="color: #33ffdd;">1</span><span style=" ">&#41;</span>,c#<span style=" ">&#40;</span><span style="color: #33ffdd;">1</span><span style=" ">&#41;</span>,d#<span style=" ">&#40;</span><span style="color: #33ffdd;">1</span><span style=" ">&#41;</span>,oc#<span style=" ">&#40;</span><span style="color: #33ffdd;">1</span><span style=" ">&#41;</span><br />
<br />
<span style="color: #aaffff; font-weight: bold;">Graphics3D</span> xres,yres,<span style="color: #33ffdd;">32</span><br />
<span style="color: #ffee00">;Слаживание линий</span><br />
<span style="color: #aaffff; font-weight: bold;">AntiAlias</span> <span style="color: #aaffff; font-weight: bold;">True</span><br />
<span style="color: #ffee00">;WireFrame True</span><br />
<br />
<span style="color: #aaffff; font-weight: bold;">PositionEntity</span> <span style="color: #aaffff; font-weight: bold;">CreateCamera</span><span style=" ">&#40;</span><span style=" ">&#41;</span>,<span style="color: #33ffdd;">-2.1</span>,<span style="color: #33ffdd;">0</span>,<span style="color: #33ffdd;">-4</span><br />
<span style="color: #aaffff; font-weight: bold;">RotateEntity</span> <span style="color: #aaffff; font-weight: bold;">CreateLight</span><span style=" ">&#40;</span><span style=" ">&#41;</span>,<span style="color: #33ffdd;">0</span>,<span style="color: #33ffdd;">45</span>,<span style="color: #33ffdd;">45</span><br />
<span style="color: #ffee00">;Создание модели</span><br />
m=<span style="color: #aaffff; font-weight: bold;">CreateMesh</span><span style=" ">&#40;</span><span style=" ">&#41;</span><br />
s=<span style="color: #aaffff; font-weight: bold;">CreateSurface</span><span style=" ">&#40;</span>m<span style=" ">&#41;</span><br />
<span style="color: #ffee00">;Создание блика на модели</span><br />
<span style="color: #aaffff; font-weight: bold;">EntityShininess</span> m,<span style="color: #33ffdd;">1</span><br />
<br />
dt.dot=<span style="color: #aaffff; font-weight: bold;">New</span> dot<br />
dt\x=.<span style="color: #33ffdd;">5</span>*xres<br />
dt\y=.<span style="color: #33ffdd;">15</span>*yres<br />
dt.dot=<span style="color: #aaffff; font-weight: bold;">New</span> dot<br />
dt\x=.<span style="color: #33ffdd;">5</span>*xres<br />
dt\y=.<span style="color: #33ffdd;">85</span>*yres<br />
<br />
<span style="color: #aaffff; font-weight: bold;">SetBuffer</span> <span style="color: #aaffff; font-weight: bold;">BackBuffer</span><span style=" ">&#40;</span><span style=" ">&#41;</span><br />
<span style="color: #aaffff; font-weight: bold;">Repeat</span><br />
<br />
&nbsp;<span style="color: #ffee00">;Вращаем модель</span><br />
&nbsp;<span style="color: #aaffff; font-weight: bold;">TurnEntity</span> m,.<span style="color: #33ffdd;">3</span>,.<span style="color: #33ffdd;">2</span>,<span style="color: #33ffdd;">0</span><br />
<br />
&nbsp;<span style="color: #aaffff; font-weight: bold;">RenderWorld</span><br />
&nbsp;<span style="color: #aaffff; font-weight: bold;">Text</span> <span style="color: #33ffdd;">0</span>,<span style="color: #33ffdd;">0</span>,<span style="color: #00ff66;">&quot;Triangles rendered:&quot;</span>+<span style="color: #aaffff; font-weight: bold;">TrisRendered</span><span style=" ">&#40;</span><span style=" ">&#41;</span><br />
&nbsp;<br />
&nbsp;<span style="color: #ffee00">;Рисуем ось</span><br />
&nbsp;<span style="color: #aaffff; font-weight: bold;">Color</span> <span style="color: #33ffdd;">128</span>,<span style="color: #33ffdd;">128</span>,<span style="color: #33ffdd;">128</span><br />
&nbsp;<span style="color: #aaffff; font-weight: bold;">Line</span> xres2,<span style="color: #33ffdd;">0</span>,xres2,yres<br />
&nbsp;<span style="color: #aaffff; font-weight: bold;">Color</span> <span style="color: #33ffdd;">255</span>,<span style="color: #33ffdd;">255</span>,<span style="color: #33ffdd;">255</span><br />
<br />
&nbsp;redraw<br />
&nbsp;<span style="color: #aaffff; font-weight: bold;">Flip</span> <br />
<br />
&nbsp;mx=<span style="color: #aaffff; font-weight: bold;">MouseX</span><span style=" ">&#40;</span><span style=" ">&#41;</span><br />
&nbsp;my=<span style="color: #aaffff; font-weight: bold;">MouseY</span><span style=" ">&#40;</span><span style=" ">&#41;</span><br />
&nbsp;mb=<span style="color: #aaffff; font-weight: bold;">MouseDown</span><span style=" ">&#40;</span><span style="color: #33ffdd;">1</span><span style=" ">&#41;</span><span style="color: #33ffdd;">+2</span>*<span style="color: #aaffff; font-weight: bold;">MouseDown</span><span style=" ">&#40;</span><span style="color: #33ffdd;">2</span><span style=" ">&#41;</span><br />
<br />
&nbsp;<span style="color: #aaffff; font-weight: bold;">Select</span> mb+sel*<span style="color: #33ffdd;">10</span><br />
&nbsp; <span style="color: #aaffff; font-weight: bold;">Case</span> <span style="color: #33ffdd;">11</span><br />
&nbsp; &nbsp;sel=<span style="color: #33ffdd;">3</span><br />
&nbsp; <span style="color: #aaffff; font-weight: bold;">Case</span> <span style="color: #33ffdd;">31</span><br />
&nbsp; &nbsp;sel=<span style="color: #33ffdd;">0</span><br />
&nbsp; &nbsp;redraw<br />
&nbsp; &nbsp;<span style="color: #aaffff; font-weight: bold;">If</span> sel=<span style="color: #33ffdd;">1</span> <span style="color: #aaffff; font-weight: bold;">Then</span> sel=<span style="color: #33ffdd;">3</span><br />
&nbsp; <span style="color: #aaffff; font-weight: bold;">Case</span> <span style="color: #33ffdd;">12</span><br />
&nbsp; &nbsp;seldot\x=min<span style=" ">&#40;</span>mx,xres2<span style=" ">&#41;</span><br />
&nbsp; &nbsp;seldot\y=my<br />
&nbsp; <span style="color: #aaffff; font-weight: bold;">Case</span> <span style="color: #33ffdd;">22</span><br />
&nbsp; &nbsp;dt.dot=<span style="color: #aaffff; font-weight: bold;">New</span> dot<br />
&nbsp; &nbsp;dt\x=mx<br />
&nbsp; &nbsp;dt\y=my<br />
&nbsp; &nbsp;<span style="color: #aaffff; font-weight: bold;">Insert</span> dt <span style="color: #aaffff; font-weight: bold;">After</span> seldot<br />
&nbsp; &nbsp;seldot=dt<br />
&nbsp; &nbsp;sel=<span style="color: #33ffdd;">0</span><br />
&nbsp;<span style="color: #aaffff; font-weight: bold;">End Select</span><br />
<br />
&nbsp;<span style="color: #aaffff; font-weight: bold;">If</span> sel=<span style="color: #33ffdd;">3</span> <span style="color: #aaffff; font-weight: bold;">Then</span><br />
&nbsp; <span style="color: #aaffff; font-weight: bold;">If</span> <span style="color: #aaffff; font-weight: bold;">KeyDown</span><span style=" ">&#40;</span><span style="color: #33ffdd;">3</span><span style=" ">&#41;</span> <span style="color: #aaffff; font-weight: bold;">Then</span><br />
&nbsp; &nbsp;seldot\dx1=seldot\x-mx<br />
&nbsp; &nbsp;seldot\dy1=seldot\y-my<br />
&nbsp; <span style="color: #aaffff; font-weight: bold;">End</span> <span style="color: #aaffff; font-weight: bold;">If</span><br />
&nbsp; <span style="color: #aaffff; font-weight: bold;">If</span> <span style="color: #aaffff; font-weight: bold;">KeyDown</span><span style=" ">&#40;</span><span style="color: #33ffdd;">2</span><span style=" ">&#41;</span> <span style="color: #aaffff; font-weight: bold;">Or</span> <span style="color: #aaffff; font-weight: bold;">KeyDown</span><span style=" ">&#40;</span><span style="color: #33ffdd;">4</span><span style=" ">&#41;</span> <span style="color: #aaffff; font-weight: bold;">Then</span><br />
&nbsp; &nbsp;seldot\dx2=mx-seldot\x<br />
&nbsp; &nbsp;seldot\dy2=my-seldot\y<br />
&nbsp; &nbsp;<span style="color: #aaffff; font-weight: bold;">If</span> <span style="color: #aaffff; font-weight: bold;">KeyDown</span><span style=" ">&#40;</span><span style="color: #33ffdd;">4</span><span style=" ">&#41;</span> <span style="color: #aaffff; font-weight: bold;">Then</span><br />
&nbsp; &nbsp; seldot\dx1=mx-seldot\x<br />
&nbsp; &nbsp; seldot\dy1=my-seldot\y<br />
&nbsp; &nbsp;<span style="color: #aaffff; font-weight: bold;">End</span> <span style="color: #aaffff; font-weight: bold;">If</span><br />
&nbsp; <span style="color: #aaffff; font-weight: bold;">End</span> <span style="color: #aaffff; font-weight: bold;">If</span><br />
&nbsp;<span style="color: #aaffff; font-weight: bold;">End</span> <span style="color: #aaffff; font-weight: bold;">If</span><br />
<br />
&nbsp;<span style="color: #aaffff; font-weight: bold;">If</span> sel=<span style="color: #33ffdd;">1</span> <span style="color: #aaffff; font-weight: bold;">Or</span> sel=<span style="color: #33ffdd;">3</span> <span style="color: #aaffff; font-weight: bold;">Then</span><br />
&nbsp; <span style="color: #aaffff; font-weight: bold;">If</span> <span style="color: #aaffff; font-weight: bold;">KeyDown</span><span style=" ">&#40;</span><span style="color: #33ffdd;">211</span><span style=" ">&#41;</span> <span style="color: #aaffff; font-weight: bold;">And</span> <span style="color: #aaffff; font-weight: bold;">After</span> <span style="color: #aaffff; font-weight: bold;">First</span> dot&lt;&gt;Last dot <span style="color: #aaffff; font-weight: bold;">Then</span><br />
&nbsp; &nbsp;<span style="color: #aaffff; font-weight: bold;">Delete</span> seldot<br />
&nbsp; &nbsp;sel=<span style="color: #33ffdd;">0</span><br />
&nbsp; <span style="color: #aaffff; font-weight: bold;">End</span> <span style="color: #aaffff; font-weight: bold;">If</span><br />
&nbsp; <span style="color: #aaffff; font-weight: bold;">If</span> <span style="color: #aaffff; font-weight: bold;">KeyDown</span><span style=" ">&#40;</span><span style="color: #33ffdd;">11</span><span style=" ">&#41;</span> <span style="color: #aaffff; font-weight: bold;">Then</span><br />
&nbsp; &nbsp;seldot\dx1=<span style="color: #33ffdd;">0</span><br />
&nbsp; &nbsp;seldot\dy1=<span style="color: #33ffdd;">0</span><br />
&nbsp; &nbsp;seldot\dx2=<span style="color: #33ffdd;">0</span><br />
&nbsp; &nbsp;seldot\dy2=<span style="color: #33ffdd;">0</span><br />
&nbsp; <span style="color: #aaffff; font-weight: bold;">End</span> <span style="color: #aaffff; font-weight: bold;">If</span><br />
&nbsp;<span style="color: #aaffff; font-weight: bold;">End</span> <span style="color: #aaffff; font-weight: bold;">If</span><br />
<br />
&nbsp;<span style="color: #ffee00">;Формирование модели (&quot;ENTER&quot;)</span><br />
&nbsp;<span style="color: #aaffff; font-weight: bold;">If</span> <span style="color: #aaffff; font-weight: bold;">KeyHit</span><span style=" ">&#40;</span><span style="color: #33ffdd;">28</span><span style=" ">&#41;</span> <span style="color: #aaffff; font-weight: bold;">Then</span><br />
&nbsp; <span style="color: #ffee00">;Очистка поверхности</span><br />
&nbsp; <span style="color: #aaffff; font-weight: bold;">ClearSurface</span> s<br />
&nbsp; rbeg=<span style="color: #33ffdd;">0</span><br />
&nbsp; <span style="color: #aaffff; font-weight: bold;">For</span> dt1.dot=<span style="color: #aaffff; font-weight: bold;">Each</span> dot<br />
&nbsp; &nbsp;dt2.dot=<span style="color: #aaffff; font-weight: bold;">After</span> dt1<br />
&nbsp; &nbsp;<span style="color: #aaffff; font-weight: bold;">If</span> dt2=<span style="color: #aaffff; font-weight: bold;">Null</span> <span style="color: #aaffff; font-weight: bold;">Then</span> <span style="color: #aaffff; font-weight: bold;">Exit</span><br />
&nbsp; &nbsp;kcalc dt1,dt2<br />
&nbsp; &nbsp;t#=<span style="color: #33ffdd;">0</span><br />
&nbsp; &nbsp;tt#=<span style="color: #33ffdd;">0</span><br />
&nbsp; &nbsp;oc<span style=" ">&#40;</span><span style="color: #33ffdd;">0</span><span style=" ">&#41;</span>=d#<span style=" ">&#40;</span><span style="color: #33ffdd;">0</span><span style=" ">&#41;</span><br />
&nbsp; &nbsp;oc<span style=" ">&#40;</span><span style="color: #33ffdd;">1</span><span style=" ">&#41;</span>=d#<span style=" ">&#40;</span><span style="color: #33ffdd;">1</span><span style=" ">&#41;</span><br />
&nbsp; &nbsp;<span style="color: #ffee00">;Формирование начального кольца вершин</span><br />
&nbsp; &nbsp;<span style="color: #aaffff; font-weight: bold;">If</span> dt1=<span style="color: #aaffff; font-weight: bold;">First</span> dot <span style="color: #aaffff; font-weight: bold;">Then</span> r1=vertexes<span style=" ">&#40;</span>s<span style=" ">&#41;</span><br />
&nbsp; &nbsp;<span style="color: #aaffff; font-weight: bold;">Repeat</span><br />
&nbsp; &nbsp; x#=oc<span style=" ">&#40;</span><span style="color: #33ffdd;">0</span><span style=" ">&#41;</span><br />
&nbsp; &nbsp; y#=oc<span style=" ">&#40;</span><span style="color: #33ffdd;">1</span><span style=" ">&#41;</span><br />
&nbsp; &nbsp; <span style="color: #ffee00">;Вычисление коэффициентов касательной - производных многочлена</span><br />
&nbsp; &nbsp; la#=<span style="color: #33ffdd;">-3.0</span>*a#<span style=" ">&#40;</span><span style="color: #33ffdd;">1</span><span style=" ">&#41;</span>*tt#<span style="color: #33ffdd;">-2.0</span>*b#<span style=" ">&#40;</span><span style="color: #33ffdd;">1</span><span style=" ">&#41;</span>*t#-c#<span style=" ">&#40;</span><span style="color: #33ffdd;">1</span><span style=" ">&#41;</span><br />
&nbsp; &nbsp; lb#=<span style="color: #33ffdd;">3.0</span>*a#<span style=" ">&#40;</span><span style="color: #33ffdd;">0</span><span style=" ">&#41;</span>*tt#<span style="color: #33ffdd;">+2.0</span>*b#<span style=" ">&#40;</span><span style="color: #33ffdd;">0</span><span style=" ">&#41;</span>*t#+c#<span style=" ">&#40;</span><span style="color: #33ffdd;">0</span><span style=" ">&#41;</span><br />
&nbsp; &nbsp; <span style="color: #ffee00">;Если A и B равны нулю - определяем грубым способом</span><br />
&nbsp; &nbsp; <span style="color: #aaffff; font-weight: bold;">If</span> la#=<span style="color: #33ffdd;">0</span> <span style="color: #aaffff; font-weight: bold;">And</span> lb#=<span style="color: #33ffdd;">0</span> <span style="color: #aaffff; font-weight: bold;">Then</span><br />
&nbsp; &nbsp; &nbsp;la#=dt1\y-dt2\y<br />
&nbsp; &nbsp; &nbsp;lb#=dt2\x-dt1\x<br />
&nbsp; &nbsp; <span style="color: #aaffff; font-weight: bold;">End</span> <span style="color: #aaffff; font-weight: bold;">If</span><br />
&nbsp; &nbsp; lc#=-la#*x#-lb#*y#<br />
&nbsp; &nbsp; <span style="color: #ffee00">;Предварительные вычисления для условия выхода</span><br />
&nbsp; &nbsp; sen2#=<span style="color: #aaffff; font-weight: bold;">Sqr</span><span style=" ">&#40;</span>la#*la#+lb#*lb#<span style=" ">&#41;</span>*sen#<br />
&nbsp; &nbsp; <span style="color: #aaffff; font-weight: bold;">Repeat</span> <br />
&nbsp; &nbsp; &nbsp;t#=t#+stp<br />
&nbsp; &nbsp; &nbsp;<span style="color: #aaffff; font-weight: bold;">If</span> t#&gt;<span style="color: #33ffdd;">1</span> <span style="color: #aaffff; font-weight: bold;">Then</span> t#=<span style="color: #33ffdd;">1</span><br />
&nbsp; &nbsp; &nbsp;tt#=t#*t#<br />
&nbsp; &nbsp; &nbsp;<span style="color: #aaffff; font-weight: bold;">For</span> nn=<span style="color: #33ffdd;">0</span> <span style="color: #aaffff; font-weight: bold;">To</span> <span style="color: #33ffdd;">1</span><br />
&nbsp; &nbsp; &nbsp; oc<span style=" ">&#40;</span>nn<span style=" ">&#41;</span>=a#<span style=" ">&#40;</span>nn<span style=" ">&#41;</span>*tt#*t#+b#<span style=" ">&#40;</span>nn<span style=" ">&#41;</span>*tt#+c#<span style=" ">&#40;</span>nn<span style=" ">&#41;</span>*t#+d#<span style=" ">&#40;</span>nn<span style=" ">&#41;</span><br />
&nbsp; &nbsp; &nbsp;<span style="color: #aaffff; font-weight: bold;">Next</span><br />
&nbsp; &nbsp; &nbsp;<span style="color: #ffee00">;Здесь определяется, превысила ли длина отрезка максимальную (тогда выходим)</span><br />
&nbsp; &nbsp; &nbsp;<span style="color: #aaffff; font-weight: bold;">If</span> <span style="color: #aaffff; font-weight: bold;">Sqr</span><span style=" ">&#40;</span><span style=" ">&#40;</span>x#-oc<span style=" ">&#40;</span><span style="color: #33ffdd;">0</span><span style=" ">&#41;</span><span style=" ">&#41;</span>*<span style=" ">&#40;</span>x#-oc<span style=" ">&#40;</span><span style="color: #33ffdd;">0</span><span style=" ">&#41;</span><span style=" ">&#41;</span>+<span style=" ">&#40;</span>y#-oc<span style=" ">&#40;</span><span style="color: #33ffdd;">1</span><span style=" ">&#41;</span><span style=" ">&#41;</span>*<span style=" ">&#40;</span>y#-oc<span style=" ">&#40;</span><span style="color: #33ffdd;">1</span><span style=" ">&#41;</span><span style=" ">&#41;</span><span style=" ">&#41;</span>&gt;maxr <span style="color: #aaffff; font-weight: bold;">Then</span> <span style="color: #aaffff; font-weight: bold;">Exit</span><br />
&nbsp; &nbsp; &nbsp;<span style="color: #ffee00">;Проверка на превышение расстояния до касательной в исходной точке</span><br />
&nbsp; &nbsp; <span style="color: #aaffff; font-weight: bold;">Until</span> t#=<span style="color: #33ffdd;">1</span> <span style="color: #aaffff; font-weight: bold;">Or</span> <span style="color: #aaffff; font-weight: bold;">Abs</span><span style=" ">&#40;</span>la#*oc<span style=" ">&#40;</span><span style="color: #33ffdd;">0</span><span style=" ">&#41;</span>+lb#*oc<span style=" ">&#40;</span><span style="color: #33ffdd;">1</span><span style=" ">&#41;</span>+lc#<span style=" ">&#41;</span>&gt;=sen2#<br />
&nbsp; &nbsp; <span style="color: #ffee00">;Добавление кольца вершин для конечной точки отрезка</span><br />
&nbsp; &nbsp; r2=vertexes<span style=" ">&#40;</span>s<span style=" ">&#41;</span><br />
<br />
&nbsp; &nbsp; <span style="color: #ffee00">;Процедура создания усовершенствованного усеченного конуса</span><br />
&nbsp; &nbsp; rbeg2=rbeg+r1<br />
&nbsp; &nbsp; r10=<span style="color: #33ffdd;">0</span><br />
&nbsp; &nbsp; r20=<span style="color: #33ffdd;">0</span><br />
&nbsp; &nbsp; <span style="color: #aaffff; font-weight: bold;">Repeat</span><br />
&nbsp; &nbsp; &nbsp;<span style="color: #ffee00">;Выбор ближайшей вершины и задание соответствующего треугольника</span><br />
&nbsp; &nbsp; &nbsp;<span style="color: #aaffff; font-weight: bold;">If</span> <span style=" ">&#40;</span>r10<span style="color: #33ffdd;">+1</span><span style=" ">&#41;</span>*r2&lt;<span style=" ">&#40;</span>r20<span style="color: #33ffdd;">+1</span><span style=" ">&#41;</span>*r1 <span style="color: #aaffff; font-weight: bold;">Then</span><br />
&nbsp; &nbsp; &nbsp; r10=r10<span style="color: #33ffdd;">+1</span><br />
&nbsp; &nbsp; &nbsp; r11=r12<br />
&nbsp; &nbsp; &nbsp; r12=r10 <span style="color: #aaffff; font-weight: bold;">Mod</span> r1<br />
&nbsp; &nbsp; &nbsp; <span style="color: #aaffff; font-weight: bold;">AddTriangle</span> s,rbeg2+r22,rbeg+r11,rbeg+r12<br />
&nbsp; &nbsp; &nbsp;<span style="color: #aaffff; font-weight: bold;">Else</span><br />
&nbsp; &nbsp; &nbsp; r20=r20<span style="color: #33ffdd;">+1</span><br />
&nbsp; &nbsp; &nbsp; r21=r22<br />
&nbsp; &nbsp; &nbsp; r22=r20 <span style="color: #aaffff; font-weight: bold;">Mod</span> r2<br />
&nbsp; &nbsp; &nbsp; <span style="color: #aaffff; font-weight: bold;">AddTriangle</span> s,rbeg+r12,rbeg2+r22,rbeg2+r21<br />
&nbsp; &nbsp; &nbsp;<span style="color: #aaffff; font-weight: bold;">End</span> <span style="color: #aaffff; font-weight: bold;">If</span><br />
&nbsp; &nbsp; <span style="color: #aaffff; font-weight: bold;">Until</span> r12=<span style="color: #33ffdd;">0</span> <span style="color: #aaffff; font-weight: bold;">And</span> r22=<span style="color: #33ffdd;">0</span><br />
<br />
&nbsp; &nbsp; rbeg=rbeg2<br />
&nbsp; &nbsp; r1=r2<br />
&nbsp; &nbsp; <span style="color: #aaffff; font-weight: bold;">If</span> t#=<span style="color: #33ffdd;">1</span> <span style="color: #aaffff; font-weight: bold;">Then</span> <span style="color: #aaffff; font-weight: bold;">Exit</span><br />
&nbsp; &nbsp;<span style="color: #aaffff; font-weight: bold;">Forever</span><br />
<br />
&nbsp; <span style="color: #aaffff; font-weight: bold;">Next</span><br />
&nbsp; <span style="color: #aaffff; font-weight: bold;">UpdateNormals</span> m<br />
&nbsp;<span style="color: #aaffff; font-weight: bold;">End</span> <span style="color: #aaffff; font-weight: bold;">If</span><br />
<br />
&nbsp;<span style="color: #aaffff; font-weight: bold;">If</span> <span style="color: #aaffff; font-weight: bold;">KeyHit</span><span style=" ">&#40;</span><span style="color: #33ffdd;">60</span><span style=" ">&#41;</span> <span style="color: #aaffff; font-weight: bold;">Then</span><br />
&nbsp; f=<span style="color: #aaffff; font-weight: bold;">WriteFile</span><span style=" ">&#40;</span><span style="color: #00ff66;">&quot;data.bb&quot;</span><span style=" ">&#41;</span><br />
&nbsp; <span style="color: #aaffff; font-weight: bold;">For</span> dt.dot=<span style="color: #aaffff; font-weight: bold;">Each</span> dot<br />
&nbsp; &nbsp;<span style="color: #aaffff; font-weight: bold;">WriteLine</span> f,<span style="color: #00ff66;">&quot;Data &quot;</span>+dt\x+<span style="color: #00ff66;">&quot;,&quot;</span>+dt\y+<span style="color: #00ff66;">&quot;,&quot;</span>+dt\dx1+<span style="color: #00ff66;">&quot;,&quot;</span>+dt\dy1+<span style="color: #00ff66;">&quot;,&quot;</span>+dt\dx2+<span style="color: #00ff66;">&quot;,&quot;</span>+dt\dy2 &nbsp; <br />
&nbsp; <span style="color: #aaffff; font-weight: bold;">Next</span><br />
&nbsp; <span style="color: #aaffff; font-weight: bold;">CloseFile</span> f<br />
&nbsp;<span style="color: #aaffff; font-weight: bold;">End</span> <span style="color: #aaffff; font-weight: bold;">If</span> <br />
<br />
&nbsp;<span style="color: #aaffff; font-weight: bold;">If</span> <span style="color: #aaffff; font-weight: bold;">KeyHit</span><span style=" ">&#40;</span><span style="color: #33ffdd;">61</span><span style=" ">&#41;</span> <span style="color: #aaffff; font-weight: bold;">Then</span><br />
&nbsp; <span style="color: #aaffff; font-weight: bold;">Delete</span> <span style="color: #aaffff; font-weight: bold;">Each</span> dot<br />
&nbsp; f=<span style="color: #aaffff; font-weight: bold;">ReadFile</span><span style=" ">&#40;</span><span style="color: #00ff66;">&quot;data.bb&quot;</span><span style=" ">&#41;</span><br />
&nbsp; <span style="color: #aaffff; font-weight: bold;">While</span> <span style="color: #aaffff; font-weight: bold;">Not</span> <span style="color: #aaffff; font-weight: bold;">Eof</span><span style=" ">&#40;</span>f<span style=" ">&#41;</span><br />
&nbsp; &nbsp;dt.dot=<span style="color: #aaffff; font-weight: bold;">New</span> dot<br />
&nbsp; &nbsp;dat$=<span style="color: #00ff66;">&quot;,&quot;</span>+<span style="color: #aaffff; font-weight: bold;">Mid</span>$<span style=" ">&#40;</span><span style="color: #aaffff; font-weight: bold;">ReadLine</span>$<span style=" ">&#40;</span>f<span style=" ">&#41;</span>,<span style="color: #33ffdd;">6</span><span style=" ">&#41;</span><br />
&nbsp; &nbsp;<span style="color: #aaffff; font-weight: bold;">For</span> n=<span style="color: #33ffdd;">1</span> <span style="color: #aaffff; font-weight: bold;">To</span> <span style="color: #33ffdd;">6</span><br />
&nbsp; &nbsp; dat$=<span style="color: #aaffff; font-weight: bold;">Mid</span>$<span style=" ">&#40;</span>dat$,<span style="color: #aaffff; font-weight: bold;">Instr</span><span style=" ">&#40;</span>dat$,<span style="color: #00ff66;">&quot;,&quot;</span><span style=" ">&#41;</span><span style="color: #33ffdd;">+1</span><span style=" ">&#41;</span><br />
&nbsp; &nbsp; <span style="color: #aaffff; font-weight: bold;">Select</span> n<br />
&nbsp; &nbsp; &nbsp;<span style="color: #aaffff; font-weight: bold;">Case</span> <span style="color: #33ffdd;">1</span>:dt\x=dat$<br />
&nbsp; &nbsp; &nbsp;<span style="color: #aaffff; font-weight: bold;">Case</span> <span style="color: #33ffdd;">2</span>:dt\y=dat$<br />
&nbsp; &nbsp; &nbsp;<span style="color: #aaffff; font-weight: bold;">Case</span> <span style="color: #33ffdd;">3</span>:dt\dx1=dat$<br />
&nbsp; &nbsp; &nbsp;<span style="color: #aaffff; font-weight: bold;">Case</span> <span style="color: #33ffdd;">4</span>:dt\dy1=dat$<br />
&nbsp; &nbsp; &nbsp;<span style="color: #aaffff; font-weight: bold;">Case</span> <span style="color: #33ffdd;">5</span>:dt\dx2=dat$<br />
&nbsp; &nbsp; &nbsp;<span style="color: #aaffff; font-weight: bold;">Case</span> <span style="color: #33ffdd;">6</span>:dt\dy2=dat$<br />
&nbsp; &nbsp; <span style="color: #aaffff; font-weight: bold;">End Select</span><br />
&nbsp; &nbsp;<span style="color: #aaffff; font-weight: bold;">Next</span><br />
&nbsp; <span style="color: #aaffff; font-weight: bold;">Wend</span><br />
&nbsp; <span style="color: #aaffff; font-weight: bold;">CloseFile</span> f<br />
&nbsp;<span style="color: #aaffff; font-weight: bold;">End</span> <span style="color: #aaffff; font-weight: bold;">If</span> <br />
&nbsp;<br />
<span style="color: #aaffff; font-weight: bold;">Until</span> <span style="color: #aaffff; font-weight: bold;">KeyHit</span><span style=" ">&#40;</span><span style="color: #33ffdd;">1</span><span style=" ">&#41;</span><br />
<br />
<span style="color: #aaffff; font-weight: bold;">Function</span> redraw<span style=" ">&#40;</span><span style=" ">&#41;</span><br />
<span style="color: #aaffff; font-weight: bold;">If</span> sel&lt;<span style="color: #33ffdd;">3</span> <span style="color: #aaffff; font-weight: bold;">Then</span> sel=<span style="color: #33ffdd;">0</span><br />
<br />
<span style="color: #aaffff; font-weight: bold;">Color</span> <span style="color: #33ffdd;">255</span>,<span style="color: #33ffdd;">255</span>,<span style="color: #33ffdd;">255</span><br />
<span style="color: #aaffff; font-weight: bold;">If</span> sel=<span style="color: #33ffdd;">0</span> <span style="color: #aaffff; font-weight: bold;">Then</span><br />
&nbsp;<span style="color: #aaffff; font-weight: bold;">For</span> dt.dot=<span style="color: #aaffff; font-weight: bold;">Each</span> dot<br />
&nbsp; <span style="color: #aaffff; font-weight: bold;">If</span> <span style="color: #aaffff; font-weight: bold;">Abs</span><span style=" ">&#40;</span>mx-dt\x<span style=" ">&#41;</span>&lt;=<span style="color: #33ffdd;">3</span> <span style="color: #aaffff; font-weight: bold;">And</span> <span style="color: #aaffff; font-weight: bold;">Abs</span><span style=" ">&#40;</span>my-dt\y<span style=" ">&#41;</span>&lt;=<span style="color: #33ffdd;">3</span> <span style="color: #aaffff; font-weight: bold;">Then</span> seldot=dt: sel=<span style="color: #33ffdd;">1</span><br />
&nbsp;<span style="color: #aaffff; font-weight: bold;">Next</span><br />
<span style="color: #aaffff; font-weight: bold;">End</span> <span style="color: #aaffff; font-weight: bold;">If</span><br />
<span style="color: #aaffff; font-weight: bold;">For</span> dt.dot=<span style="color: #aaffff; font-weight: bold;">Each</span> dot<br />
&nbsp;<span style="color: #aaffff; font-weight: bold;">Oval</span> dt\x<span style="color: #33ffdd;">-1</span>,dt\y<span style="color: #33ffdd;">-1</span>,<span style="color: #33ffdd;">3</span>,<span style="color: #33ffdd;">3</span><br />
&nbsp;drawcurve dt<br />
<span style="color: #aaffff; font-weight: bold;">Next</span><br />
<span style="color: #aaffff; font-weight: bold;">If</span> sel <span style="color: #aaffff; font-weight: bold;">Then</span> <span style="color: #aaffff; font-weight: bold;">Oval</span> seldot\x<span style="color: #33ffdd;">-3</span>,seldot\y<span style="color: #33ffdd;">-3</span>,<span style="color: #33ffdd;">7</span>,<span style="color: #33ffdd;">7</span><br />
<span style="color: #aaffff; font-weight: bold;">End Function</span><br />
<br />
<span style="color: #aaffff; font-weight: bold;">Function</span> drawcurve<span style=" ">&#40;</span>dt1.dot<span style=" ">&#41;</span><br />
dt2.dot=<span style="color: #aaffff; font-weight: bold;">After</span> dt1<br />
<span style="color: #aaffff; font-weight: bold;">If</span> dt2=<span style="color: #aaffff; font-weight: bold;">Null</span> <span style="color: #aaffff; font-weight: bold;">Then</span> <span style="color: #aaffff; font-weight: bold;">Return</span><br />
<br />
kcalc dt1,dt2<br />
<br />
<span style="color: #aaffff; font-weight: bold;">For</span> t#=<span style="color: #33ffdd;">0</span> <span style="color: #aaffff; font-weight: bold;">To</span> <span style="color: #33ffdd;">1</span> <span style="color: #aaffff; font-weight: bold;">Step</span> stp<br />
&nbsp;tt#=t#*t#<br />
&nbsp;<span style="color: #aaffff; font-weight: bold;">For</span> nn=<span style="color: #33ffdd;">0</span> <span style="color: #aaffff; font-weight: bold;">To</span> <span style="color: #33ffdd;">1</span><br />
&nbsp; oc<span style=" ">&#40;</span>nn<span style=" ">&#41;</span>=a#<span style=" ">&#40;</span>nn<span style=" ">&#41;</span>*tt#*t#+b#<span style=" ">&#40;</span>nn<span style=" ">&#41;</span>*tt#+c#<span style=" ">&#40;</span>nn<span style=" ">&#41;</span>*t#+d#<span style=" ">&#40;</span>nn<span style=" ">&#41;</span><br />
&nbsp;<span style="color: #aaffff; font-weight: bold;">Next</span><br />
<br />
&nbsp;<span style="color: #aaffff; font-weight: bold;">If</span> t#&gt;<span style="color: #33ffdd;">0</span> <span style="color: #aaffff; font-weight: bold;">Then</span><br />
&nbsp; <span style="color: #aaffff; font-weight: bold;">If</span> sel=<span style="color: #33ffdd;">4</span> <span style="color: #aaffff; font-weight: bold;">Then</span><br />
&nbsp; &nbsp;<span style="color: #aaffff; font-weight: bold;">For</span> xx=<span style="color: #33ffdd;">-1</span> <span style="color: #aaffff; font-weight: bold;">To</span> <span style="color: #33ffdd;">1</span><br />
&nbsp; &nbsp; <span style="color: #aaffff; font-weight: bold;">For</span> yy=<span style="color: #33ffdd;">-1</span> <span style="color: #aaffff; font-weight: bold;">To</span> <span style="color: #33ffdd;">1</span><br />
&nbsp; &nbsp; &nbsp;<span style="color: #aaffff; font-weight: bold;">Line</span> oc<span style=" ">&#40;</span><span style="color: #33ffdd;">0</span><span style=" ">&#41;</span>+xx,oc<span style=" ">&#40;</span><span style="color: #33ffdd;">1</span><span style=" ">&#41;</span>+yy,x+xx,y+yy<br />
&nbsp; &nbsp; <span style="color: #aaffff; font-weight: bold;">Next</span><br />
&nbsp; &nbsp;<span style="color: #aaffff; font-weight: bold;">Next</span><br />
&nbsp; <span style="color: #aaffff; font-weight: bold;">Else</span><br />
&nbsp; &nbsp;<span style="color: #aaffff; font-weight: bold;">Line</span> oc<span style=" ">&#40;</span><span style="color: #33ffdd;">0</span><span style=" ">&#41;</span>,oc<span style=" ">&#40;</span><span style="color: #33ffdd;">1</span><span style=" ">&#41;</span>,x,y<br />
&nbsp; <span style="color: #aaffff; font-weight: bold;">End</span> <span style="color: #aaffff; font-weight: bold;">If</span><br />
&nbsp;<span style="color: #aaffff; font-weight: bold;">End</span> <span style="color: #aaffff; font-weight: bold;">If</span><br />
<br />
&nbsp;<span style="color: #aaffff; font-weight: bold;">If</span> sel=<span style="color: #33ffdd;">0</span> <span style="color: #aaffff; font-weight: bold;">Then</span><br />
&nbsp; <span style="color: #aaffff; font-weight: bold;">If</span> mx&gt;=min<span style=" ">&#40;</span>x,oc<span style=" ">&#40;</span><span style="color: #33ffdd;">0</span><span style=" ">&#41;</span><span style=" ">&#41;</span><span style="color: #33ffdd;">-3</span> <span style="color: #aaffff; font-weight: bold;">And</span> mx&lt;=max<span style=" ">&#40;</span>x,oc<span style=" ">&#40;</span><span style="color: #33ffdd;">0</span><span style=" ">&#41;</span><span style=" ">&#41;</span><span style="color: #33ffdd;">+3</span> <span style="color: #aaffff; font-weight: bold;">Then</span><br />
&nbsp; &nbsp;<span style="color: #aaffff; font-weight: bold;">If</span> my&gt;=min<span style=" ">&#40;</span>y,oc<span style=" ">&#40;</span><span style="color: #33ffdd;">1</span><span style=" ">&#41;</span><span style=" ">&#41;</span><span style="color: #33ffdd;">-3</span> <span style="color: #aaffff; font-weight: bold;">And</span> my&lt;=max<span style=" ">&#40;</span>y,oc<span style=" ">&#40;</span><span style="color: #33ffdd;">1</span><span style=" ">&#41;</span><span style=" ">&#41;</span><span style="color: #33ffdd;">+3</span> <span style="color: #aaffff; font-weight: bold;">Then</span><br />
&nbsp; &nbsp; aa#=y-oc<span style=" ">&#40;</span><span style="color: #33ffdd;">1</span><span style=" ">&#41;</span><br />
&nbsp; &nbsp; bb#=oc<span style=" ">&#40;</span><span style="color: #33ffdd;">0</span><span style=" ">&#41;</span>-x<br />
&nbsp; &nbsp; <span style="color: #aaffff; font-weight: bold;">If</span> <span style="color: #aaffff; font-weight: bold;">Abs</span><span style=" ">&#40;</span>aa#*<span style=" ">&#40;</span>mx-x<span style=" ">&#41;</span>+bb#*<span style=" ">&#40;</span>my-y<span style=" ">&#41;</span><span style=" ">&#41;</span>&lt;=<span style="color: #33ffdd;">3.0</span>*<span style="color: #aaffff; font-weight: bold;">Sqr</span><span style=" ">&#40;</span>aa#*aa#+bb#*bb#<span style=" ">&#41;</span> <span style="color: #aaffff; font-weight: bold;">Then</span><br />
&nbsp; &nbsp; &nbsp;seldot=dt1<br />
&nbsp; &nbsp; &nbsp;sel=<span style="color: #33ffdd;">4</span><br />
&nbsp; &nbsp; &nbsp;t#=-stp<br />
&nbsp; &nbsp; <span style="color: #aaffff; font-weight: bold;">End</span> <span style="color: #aaffff; font-weight: bold;">If</span><br />
&nbsp; &nbsp;<span style="color: #aaffff; font-weight: bold;">End</span> <span style="color: #aaffff; font-weight: bold;">If</span><br />
&nbsp; <span style="color: #aaffff; font-weight: bold;">End</span> <span style="color: #aaffff; font-weight: bold;">If</span><br />
&nbsp;<span style="color: #aaffff; font-weight: bold;">End</span> <span style="color: #aaffff; font-weight: bold;">If</span><br />
<br />
&nbsp;x=oc<span style=" ">&#40;</span><span style="color: #33ffdd;">0</span><span style=" ">&#41;</span><br />
&nbsp;y=oc<span style=" ">&#40;</span><span style="color: #33ffdd;">1</span><span style=" ">&#41;</span><br />
<br />
<span style="color: #aaffff; font-weight: bold;">Next</span><br />
<span style="color: #aaffff; font-weight: bold;">If</span> sel=<span style="color: #33ffdd;">4</span> <span style="color: #aaffff; font-weight: bold;">Then</span> sel=<span style="color: #33ffdd;">2</span><br />
<br />
<span style="color: #aaffff; font-weight: bold;">Color</span> <span style="color: #33ffdd;">0</span>,<span style="color: #33ffdd;">255</span>,<span style="color: #33ffdd;">255</span><br />
<span style="color: #aaffff; font-weight: bold;">If</span> dt1\dx2&lt;&gt;<span style="color: #33ffdd;">0</span> <span style="color: #aaffff; font-weight: bold;">Or</span> dt1\dy2&lt;&gt;<span style="color: #33ffdd;">0</span> <span style="color: #aaffff; font-weight: bold;">Then</span><br />
&nbsp;<span style="color: #aaffff; font-weight: bold;">Line</span> dt1\x,dt1\y,dt1\x+dt1\dx2,dt1\y+dt1\dy2<br />
&nbsp;<span style="color: #aaffff; font-weight: bold;">Oval</span> dt1\x+dt1\dx2<span style="color: #33ffdd;">-1</span>,dt1\y+dt1\dy2<span style="color: #33ffdd;">-1</span>,<span style="color: #33ffdd;">3</span>,<span style="color: #33ffdd;">3</span><br />
<span style="color: #aaffff; font-weight: bold;">End</span> <span style="color: #aaffff; font-weight: bold;">If</span><br />
<span style="color: #aaffff; font-weight: bold;">If</span> dt2\dx1&lt;&gt;<span style="color: #33ffdd;">0</span> <span style="color: #aaffff; font-weight: bold;">Or</span> dt2\dy1&lt;&gt;<span style="color: #33ffdd;">0</span> <span style="color: #aaffff; font-weight: bold;">Then</span><br />
&nbsp;<span style="color: #aaffff; font-weight: bold;">Line</span> dt2\x,dt2\y,dt2\x-dt2\dx1,dt2\y-dt2\dy1<br />
&nbsp;<span style="color: #aaffff; font-weight: bold;">Oval</span> dt2\x-dt2\dx1<span style="color: #33ffdd;">-1</span>,dt2\y-dt2\dy1<span style="color: #33ffdd;">-1</span>,<span style="color: #33ffdd;">3</span>,<span style="color: #33ffdd;">3</span><br />
<span style="color: #aaffff; font-weight: bold;">End</span> <span style="color: #aaffff; font-weight: bold;">If</span><br />
<span style="color: #aaffff; font-weight: bold;">Color</span> <span style="color: #33ffdd;">255</span>,<span style="color: #33ffdd;">255</span>,<span style="color: #33ffdd;">255</span><br />
<br />
<span style="color: #aaffff; font-weight: bold;">End Function</span><br />
<br />
<span style="color: #aaffff; font-weight: bold;">Function</span> min<span style=" ">&#40;</span>v1,v2<span style=" ">&#41;</span><br />
<span style="color: #aaffff; font-weight: bold;">If</span> v1&lt;v2 <span style="color: #aaffff; font-weight: bold;">Then</span> <span style="color: #aaffff; font-weight: bold;">Return</span> v1 <span style="color: #aaffff; font-weight: bold;">Else</span> <span style="color: #aaffff; font-weight: bold;">Return</span> v2<br />
<span style="color: #aaffff; font-weight: bold;">End Function</span><br />
<br />
<span style="color: #aaffff; font-weight: bold;">Function</span> max<span style=" ">&#40;</span>v1,v2<span style=" ">&#41;</span><br />
<span style="color: #aaffff; font-weight: bold;">If</span> v1&gt;v2 <span style="color: #aaffff; font-weight: bold;">Then</span> <span style="color: #aaffff; font-weight: bold;">Return</span> v1 <span style="color: #aaffff; font-weight: bold;">Else</span> <span style="color: #aaffff; font-weight: bold;">Return</span> v2<br />
<span style="color: #aaffff; font-weight: bold;">End Function</span><br />
<br />
<span style="color: #aaffff; font-weight: bold;">Function</span> kcalc<span style=" ">&#40;</span>dt1.dot,dt2.dot<span style=" ">&#41;</span><br />
r#=.<span style="color: #33ffdd;">05</span>*<span style="color: #aaffff; font-weight: bold;">Sqr</span><span style=" ">&#40;</span><span style=" ">&#40;</span>dt1\x-dt2\x<span style=" ">&#41;</span>*<span style=" ">&#40;</span>dt1\x-dt2\x<span style=" ">&#41;</span>+<span style=" ">&#40;</span>dt1\y-dt2\y<span style=" ">&#41;</span>*<span style=" ">&#40;</span>dt1\y-dt2\y<span style=" ">&#41;</span><span style=" ">&#41;</span><br />
<span style="color: #aaffff; font-weight: bold;">For</span> nn=<span style="color: #33ffdd;">0</span> <span style="color: #aaffff; font-weight: bold;">To</span> <span style="color: #33ffdd;">1</span><br />
&nbsp;<span style="color: #aaffff; font-weight: bold;">If</span> nn <span style="color: #aaffff; font-weight: bold;">Then</span><br />
&nbsp; x1=dt1\y<br />
&nbsp; x2=dt2\y<br />
&nbsp; c#<span style=" ">&#40;</span>nn<span style=" ">&#41;</span>=r#*dt1\dy2<br />
&nbsp; dy2#=r#*dt2\dy1<br />
&nbsp;<span style="color: #aaffff; font-weight: bold;">Else</span><br />
&nbsp; x1=dt1\x<br />
&nbsp; x2=dt2\x<br />
&nbsp; c#<span style=" ">&#40;</span>nn<span style=" ">&#41;</span>=r#*dt1\dx2<br />
&nbsp; dy2#=r#*dt2\dx1<br />
&nbsp;<span style="color: #aaffff; font-weight: bold;">End</span> <span style="color: #aaffff; font-weight: bold;">If</span><br />
&nbsp;d#<span style=" ">&#40;</span>nn<span style=" ">&#41;</span>=x1<br />
&nbsp;b#<span style=" ">&#40;</span>nn<span style=" ">&#41;</span>=<span style="color: #33ffdd;">3.0</span>*x2-dy2#<span style="color: #33ffdd;">-2.0</span>*c#<span style=" ">&#40;</span>nn<span style=" ">&#41;</span><span style="color: #33ffdd;">-3.0</span>*d#<span style=" ">&#40;</span>nn<span style=" ">&#41;</span><br />
&nbsp;a#<span style=" ">&#40;</span>nn<span style=" ">&#41;</span>=<span style=" ">&#40;</span>dy2#<span style="color: #33ffdd;">-2</span>*b#<span style=" ">&#40;</span>nn<span style=" ">&#41;</span>-c#<span style=" ">&#40;</span>nn<span style=" ">&#41;</span><span style=" ">&#41;</span>/<span style="color: #33ffdd;">3.0</span><br />
<span style="color: #aaffff; font-weight: bold;">Next</span><br />
<span style="color: #aaffff; font-weight: bold;">End Function</span><br />
<br />
<span style="color: #aaffff; font-weight: bold;">Function</span> vertexes<span style=" ">&#40;</span>s<span style=" ">&#41;</span><br />
vx#=<span style="color: #33ffdd;">1.0</span>*<span style=" ">&#40;</span>xres2-oc<span style=" ">&#40;</span><span style="color: #33ffdd;">0</span><span style=" ">&#41;</span><span style=" ">&#41;</span>/yres2<br />
vy#=<span style="color: #33ffdd;">1.0</span>*<span style=" ">&#40;</span>yres2-oc<span style=" ">&#40;</span><span style="color: #33ffdd;">1</span><span style=" ">&#41;</span><span style=" ">&#41;</span>/yres2<br />
r=<span style="color: #aaffff; font-weight: bold;">Abs</span><span style=" ">&#40;</span>xres2-oc<span style=" ">&#40;</span><span style="color: #33ffdd;">0</span><span style=" ">&#41;</span><span style=" ">&#41;</span><br />
<span style="color: #aaffff; font-weight: bold;">If</span> sen&gt;=r*<span style="color: #33ffdd;">2</span> <span style="color: #aaffff; font-weight: bold;">Then</span><br />
&nbsp;r=<span style="color: #33ffdd;">1</span><br />
&nbsp;<span style="color: #aaffff; font-weight: bold;">AddVertex</span> s,<span style="color: #33ffdd;">0</span>,vy#,<span style="color: #33ffdd;">0</span><br />
<span style="color: #aaffff; font-weight: bold;">Else</span><br />
&nbsp;r=<span style="color: #aaffff; font-weight: bold;">Ceil</span><span style=" ">&#40;</span><span style="color: #33ffdd;">360.0</span>/<span style="color: #aaffff; font-weight: bold;">ACos</span><span style=" ">&#40;</span><span style="color: #33ffdd;">1.0</span>-sen#/r<span style=" ">&#41;</span><span style=" ">&#41;</span><br />
&nbsp;ang#=<span style="color: #33ffdd;">0</span><br />
&nbsp;dang#=<span style="color: #33ffdd;">360.0</span>/r<br />
&nbsp;<span style="color: #aaffff; font-weight: bold;">Repeat</span><br />
&nbsp; <span style="color: #aaffff; font-weight: bold;">AddVertex</span> s,<span style="color: #aaffff; font-weight: bold;">Cos</span><span style=" ">&#40;</span>ang#<span style=" ">&#41;</span>*vx#,vy#,<span style="color: #aaffff; font-weight: bold;">Sin</span><span style=" ">&#40;</span>ang#<span style=" ">&#41;</span>*vx#<br />
&nbsp; ang#=ang#+dang#<br />
&nbsp; <span style="color: #aaffff; font-weight: bold;">If</span> ang#&gt;<span style="color: #33ffdd;">359.9</span> <span style="color: #aaffff; font-weight: bold;">Then</span> <span style="color: #aaffff; font-weight: bold;">Exit</span><br />
&nbsp;<span style="color: #aaffff; font-weight: bold;">Forever</span><br />
<span style="color: #aaffff; font-weight: bold;">End</span> <span style="color: #aaffff; font-weight: bold;">If</span><br />
<span style="color: #aaffff; font-weight: bold;">Return</span> r<br />
</p>
<span style="color: #aaffff; font-weight: bold;">End Function</span></div>
<a name=".D0.9F.D1.80.D0.B8.D0.BC.D0.B5.D1.80"></a><h2><span class="editsection">[<a href="http://blitzetcetera.org/index.php?title=%D0%A2%D0%B5%D0%BB%D0%B0_%D0%B2%D1%80%D0%B0%D1%89%D0%B5%D0%BD%D0%B8%D1%8F&amp;action=edit&amp;section=3" title="Править секцию: Пример">править</a>]</span> <span class="mw-headline">Пример</span></h2>
<p>На основе редактора можно сделать игру, где используется множество тел вращения - шахматы, но для начала хватит просто трехмерной доски с фигурами. Сделаем шаблоны каждой фигуры и расставим копии по местам, покрасив в соответствующий цвет. Единственная проблема - конь, его голову придется загрузить из <a href="http://blitzetcetera.org/images/9/9f/ChessKnight.zip" class="internal" title="ChessKnight.zip">модели</a>. Введем динамически меняющий направление источник света, а текстуру доски сгенерируем. Все это будет неплохо смотреться на градиентном фоне.
</p>
<div class="bb" style="font-family: monospace;background-color:#FFFFFF;border:1px dashed #CCCCCC;padding:10px;background-color:#225588;color:#FFFFFF;border:1px solid #003040;padding:10px;"><span style="color: #aaffff; font-weight: bold;">Const</span> xres=<span style="color: #33ffdd;">800</span>, yres=<span style="color: #33ffdd;">600</span>, stp#=.<span style="color: #33ffdd;">001</span>, sen#=<span style="color: #33ffdd;">4</span>, maxr#=<span style="color: #33ffdd;">30</span><br />
<p><span style="color: #aaffff; font-weight: bold;">Const</span> txp=<span style="color: #33ffdd;">8</span>, txres=<span style="color: #33ffdd;">1</span> <span style="color: #aaffff; font-weight: bold;">Shl</span> txp, txcp=txp<span style="color: #33ffdd;">-6</span>, txcell=<span style="color: #33ffdd;">1</span> <span style="color: #aaffff; font-weight: bold;">Shl</span> txcp<span style="color: #33ffdd;">-1</span><br />
<br />
<span style="color: #aaffff; font-weight: bold;">Dim</span> fg<span style=" ">&#40;</span><span style="color: #33ffdd;">5</span><span style=" ">&#41;</span>,a#<span style=" ">&#40;</span><span style="color: #33ffdd;">1</span><span style=" ">&#41;</span>,b#<span style=" ">&#40;</span><span style="color: #33ffdd;">1</span><span style=" ">&#41;</span>,c#<span style=" ">&#40;</span><span style="color: #33ffdd;">1</span><span style=" ">&#41;</span>,d#<span style=" ">&#40;</span><span style="color: #33ffdd;">1</span><span style=" ">&#41;</span>,oc#<span style=" ">&#40;</span><span style="color: #33ffdd;">1</span><span style=" ">&#41;</span><br />
<br />
<span style="color: #aaffff; font-weight: bold;">Graphics3D</span> xres,yres,<span style="color: #33ffdd;">32</span>,<span style="color: #33ffdd;">2</span><br />
<span style="color: #aaffff; font-weight: bold;">AntiAlias</span> <span style="color: #aaffff; font-weight: bold;">True</span><br />
<span style="color: #ffee00">;WireFrame True</span><br />
<br />
<span style="color: #ffee00">;Пивот для удобного управления камерой</span><br />
p=<span style="color: #aaffff; font-weight: bold;">CreatePivot</span><span style=" ">&#40;</span><span style=" ">&#41;</span><br />
cam=<span style="color: #aaffff; font-weight: bold;">CreateCamera</span><span style=" ">&#40;</span>p<span style=" ">&#41;</span><br />
<span style="color: #aaffff; font-weight: bold;">PositionEntity</span> cam,<span style="color: #33ffdd;">0</span>,<span style="color: #33ffdd;">3.5</span>,<span style="color: #33ffdd;">-7</span><br />
<span style="color: #aaffff; font-weight: bold;">RotateEntity</span> cam,<span style="color: #33ffdd;">30</span>,<span style="color: #33ffdd;">0</span>,<span style="color: #33ffdd;">0</span><br />
<br />
<span style="color: #ffee00">;Эта строка нужна, чтобы фон не стирался перед рендерингом 3D-сцены</span><br />
<span style="color: #aaffff; font-weight: bold;">CameraClsMode</span> cam,<span style="color: #33ffdd;">0</span>,<span style="color: #33ffdd;">1</span><br />
<br />
l=<span style="color: #aaffff; font-weight: bold;">CreateLight</span><span style=" ">&#40;</span><span style=" ">&#41;</span><br />
<span style="color: #aaffff; font-weight: bold;">RotateEntity</span> l,<span style="color: #33ffdd;">45</span>,<span style="color: #33ffdd;">0</span>,<span style="color: #33ffdd;">0</span><br />
<br />
<span style="color: #ffee00">;Создание шаблонов моделей</span><br />
<span style="color: #aaffff; font-weight: bold;">For</span> n1=<span style="color: #33ffdd;">0</span> <span style="color: #aaffff; font-weight: bold;">To</span> <span style="color: #33ffdd;">5</span><br />
&nbsp;<span style="color: #aaffff; font-weight: bold;">Read</span> q,x2,y2,dx21,dy21,dx22,dy22<br />
&nbsp;rbeg=<span style="color: #33ffdd;">0</span><br />
&nbsp;fg<span style=" ">&#40;</span>n1<span style=" ">&#41;</span>=<span style="color: #aaffff; font-weight: bold;">CreateMesh</span><span style=" ">&#40;</span><span style=" ">&#41;</span><br />
&nbsp;<span style="color: #ffee00">;Сам шаблон должен быть невидим</span><br />
&nbsp;<span style="color: #aaffff; font-weight: bold;">HideEntity</span> fg<span style=" ">&#40;</span>n1<span style=" ">&#41;</span><br />
&nbsp;s=<span style="color: #aaffff; font-weight: bold;">CreateSurface</span><span style=" ">&#40;</span>fg<span style=" ">&#40;</span>n1<span style=" ">&#41;</span><span style=" ">&#41;</span><br />
&nbsp;<span style="color: #aaffff; font-weight: bold;">For</span> n2=<span style="color: #33ffdd;">2</span> <span style="color: #aaffff; font-weight: bold;">To</span> q<br />
&nbsp; x1=x2:y1=y2:dx11=dx21:dy11=dy21:dx12=dx22:dy12=dy22<br />
&nbsp; <span style="color: #aaffff; font-weight: bold;">Read</span> x2,y2,dx21,dy21,dx22,dy22<br />
<br />
&nbsp; r#=.<span style="color: #33ffdd;">05</span>*<span style="color: #aaffff; font-weight: bold;">Sqr</span><span style=" ">&#40;</span><span style=" ">&#40;</span>x1-x2<span style=" ">&#41;</span>*<span style=" ">&#40;</span>x1-x2<span style=" ">&#41;</span>+<span style=" ">&#40;</span>y1-y2<span style=" ">&#41;</span>*<span style=" ">&#40;</span>y1-y2<span style=" ">&#41;</span><span style=" ">&#41;</span><br />
&nbsp; <span style="color: #aaffff; font-weight: bold;">For</span> n3=<span style="color: #33ffdd;">0</span> <span style="color: #aaffff; font-weight: bold;">To</span> <span style="color: #33ffdd;">1</span><br />
&nbsp; &nbsp;<span style="color: #aaffff; font-weight: bold;">If</span> n3 <span style="color: #aaffff; font-weight: bold;">Then</span><br />
&nbsp; &nbsp; ux1=y1<br />
&nbsp; &nbsp; ux2=y2<br />
&nbsp; &nbsp; c#<span style=" ">&#40;</span>n3<span style=" ">&#41;</span>=r#*dy12<br />
&nbsp; &nbsp; dy2#=r#*dy21<br />
&nbsp; &nbsp;<span style="color: #aaffff; font-weight: bold;">Else</span><br />
&nbsp; &nbsp; ux1=x1<br />
&nbsp; &nbsp; ux2=x2<br />
&nbsp; &nbsp; c#<span style=" ">&#40;</span>n3<span style=" ">&#41;</span>=r#*dx12<br />
&nbsp; &nbsp; dy2#=r#*dx21<br />
&nbsp; &nbsp;<span style="color: #aaffff; font-weight: bold;">End</span> <span style="color: #aaffff; font-weight: bold;">If</span><br />
&nbsp; &nbsp;d#<span style=" ">&#40;</span>n3<span style=" ">&#41;</span>=ux1<br />
&nbsp; &nbsp;b#<span style=" ">&#40;</span>n3<span style=" ">&#41;</span>=<span style="color: #33ffdd;">3.0</span>*ux2-dy2#<span style="color: #33ffdd;">-2.0</span>*c#<span style=" ">&#40;</span>n3<span style=" ">&#41;</span><span style="color: #33ffdd;">-3.0</span>*d#<span style=" ">&#40;</span>n3<span style=" ">&#41;</span><br />
&nbsp; &nbsp;a#<span style=" ">&#40;</span>n3<span style=" ">&#41;</span>=<span style=" ">&#40;</span>dy2#<span style="color: #33ffdd;">-2</span>*b#<span style=" ">&#40;</span>n3<span style=" ">&#41;</span>-c#<span style=" ">&#40;</span>n3<span style=" ">&#41;</span><span style=" ">&#41;</span>/<span style="color: #33ffdd;">3.0</span><br />
&nbsp; <span style="color: #aaffff; font-weight: bold;">Next</span><br />
<br />
&nbsp; t#=<span style="color: #33ffdd;">0</span><br />
&nbsp; tt#=<span style="color: #33ffdd;">0</span><br />
&nbsp; oc<span style=" ">&#40;</span><span style="color: #33ffdd;">0</span><span style=" ">&#41;</span>=d#<span style=" ">&#40;</span><span style="color: #33ffdd;">0</span><span style=" ">&#41;</span><br />
&nbsp; oc<span style=" ">&#40;</span><span style="color: #33ffdd;">1</span><span style=" ">&#41;</span>=d#<span style=" ">&#40;</span><span style="color: #33ffdd;">1</span><span style=" ">&#41;</span><br />
&nbsp; <span style="color: #aaffff; font-weight: bold;">If</span> n2=<span style="color: #33ffdd;">2</span> <span style="color: #aaffff; font-weight: bold;">Then</span> r1=vertexes<span style=" ">&#40;</span>s<span style=" ">&#41;</span><br />
&nbsp; <span style="color: #aaffff; font-weight: bold;">Repeat</span><br />
&nbsp; &nbsp;x#=oc<span style=" ">&#40;</span><span style="color: #33ffdd;">0</span><span style=" ">&#41;</span><br />
&nbsp; &nbsp;y#=oc<span style=" ">&#40;</span><span style="color: #33ffdd;">1</span><span style=" ">&#41;</span><br />
&nbsp; &nbsp;la#=<span style="color: #33ffdd;">-3.0</span>*a#<span style=" ">&#40;</span><span style="color: #33ffdd;">1</span><span style=" ">&#41;</span>*tt#<span style="color: #33ffdd;">-2.0</span>*b#<span style=" ">&#40;</span><span style="color: #33ffdd;">1</span><span style=" ">&#41;</span>*t#-c#<span style=" ">&#40;</span><span style="color: #33ffdd;">1</span><span style=" ">&#41;</span><br />
&nbsp; &nbsp;lb#=<span style="color: #33ffdd;">3.0</span>*a#<span style=" ">&#40;</span><span style="color: #33ffdd;">0</span><span style=" ">&#41;</span>*tt#<span style="color: #33ffdd;">+2.0</span>*b#<span style=" ">&#40;</span><span style="color: #33ffdd;">0</span><span style=" ">&#41;</span>*t#+c#<span style=" ">&#40;</span><span style="color: #33ffdd;">0</span><span style=" ">&#41;</span><br />
&nbsp; &nbsp;<span style="color: #aaffff; font-weight: bold;">If</span> la#=<span style="color: #33ffdd;">0</span> <span style="color: #aaffff; font-weight: bold;">And</span> lb#=<span style="color: #33ffdd;">0</span> <span style="color: #aaffff; font-weight: bold;">Then</span><br />
&nbsp; &nbsp; la#=y1-y2<br />
&nbsp; &nbsp; lb#=x2-x1<br />
&nbsp; &nbsp;<span style="color: #aaffff; font-weight: bold;">End</span> <span style="color: #aaffff; font-weight: bold;">If</span><br />
&nbsp; &nbsp;lc#=-la#*x#-lb#*y#<br />
&nbsp; &nbsp;sen2#=<span style="color: #aaffff; font-weight: bold;">Sqr</span><span style=" ">&#40;</span>la#*la#+lb#*lb#<span style=" ">&#41;</span>*sen#<br />
&nbsp; &nbsp;<span style="color: #aaffff; font-weight: bold;">Repeat</span> <br />
&nbsp; &nbsp; t#=t#+stp<br />
&nbsp; &nbsp; <span style="color: #aaffff; font-weight: bold;">If</span> t#&gt;<span style="color: #33ffdd;">1</span> <span style="color: #aaffff; font-weight: bold;">Then</span> t#=<span style="color: #33ffdd;">1</span><br />
&nbsp; &nbsp; tt#=t#*t#<br />
&nbsp; &nbsp; <span style="color: #aaffff; font-weight: bold;">For</span> n3=<span style="color: #33ffdd;">0</span> <span style="color: #aaffff; font-weight: bold;">To</span> <span style="color: #33ffdd;">1</span><br />
&nbsp; &nbsp; &nbsp;oc<span style=" ">&#40;</span>n3<span style=" ">&#41;</span>=a#<span style=" ">&#40;</span>n3<span style=" ">&#41;</span>*tt#*t#+b#<span style=" ">&#40;</span>n3<span style=" ">&#41;</span>*tt#+c#<span style=" ">&#40;</span>n3<span style=" ">&#41;</span>*t#+d#<span style=" ">&#40;</span>n3<span style=" ">&#41;</span><br />
&nbsp; &nbsp; <span style="color: #aaffff; font-weight: bold;">Next</span><br />
&nbsp; &nbsp; <span style="color: #aaffff; font-weight: bold;">If</span> <span style="color: #aaffff; font-weight: bold;">Sqr</span><span style=" ">&#40;</span><span style=" ">&#40;</span>x#-oc<span style=" ">&#40;</span><span style="color: #33ffdd;">0</span><span style=" ">&#41;</span><span style=" ">&#41;</span>*<span style=" ">&#40;</span>x#-oc<span style=" ">&#40;</span><span style="color: #33ffdd;">0</span><span style=" ">&#41;</span><span style=" ">&#41;</span>+<span style=" ">&#40;</span>y#-oc<span style=" ">&#40;</span><span style="color: #33ffdd;">1</span><span style=" ">&#41;</span><span style=" ">&#41;</span>*<span style=" ">&#40;</span>y#-oc<span style=" ">&#40;</span><span style="color: #33ffdd;">1</span><span style=" ">&#41;</span><span style=" ">&#41;</span><span style=" ">&#41;</span>&gt;maxr <span style="color: #aaffff; font-weight: bold;">Then</span> <span style="color: #aaffff; font-weight: bold;">Exit</span><br />
&nbsp; &nbsp;<span style="color: #aaffff; font-weight: bold;">Until</span> t#=<span style="color: #33ffdd;">1</span> <span style="color: #aaffff; font-weight: bold;">Or</span> <span style="color: #aaffff; font-weight: bold;">Abs</span><span style=" ">&#40;</span>la#*oc<span style=" ">&#40;</span><span style="color: #33ffdd;">0</span><span style=" ">&#41;</span>+lb#*oc<span style=" ">&#40;</span><span style="color: #33ffdd;">1</span><span style=" ">&#41;</span>+lc#<span style=" ">&#41;</span>&gt;=sen2#<br />
&nbsp; &nbsp;r2=vertexes<span style=" ">&#40;</span>s<span style=" ">&#41;</span><br />
<br />
&nbsp; &nbsp;rbeg2=rbeg+r1<br />
&nbsp; &nbsp;r10=<span style="color: #33ffdd;">0</span><br />
&nbsp; &nbsp;r20=<span style="color: #33ffdd;">0</span><br />
&nbsp; &nbsp;<span style="color: #aaffff; font-weight: bold;">Repeat</span><br />
&nbsp; &nbsp; <span style="color: #aaffff; font-weight: bold;">If</span> <span style=" ">&#40;</span>r10<span style="color: #33ffdd;">+1</span><span style=" ">&#41;</span>*r2&lt;<span style=" ">&#40;</span>r20<span style="color: #33ffdd;">+1</span><span style=" ">&#41;</span>*r1 <span style="color: #aaffff; font-weight: bold;">Then</span><br />
&nbsp; &nbsp; &nbsp;r10=r10<span style="color: #33ffdd;">+1</span><br />
&nbsp; &nbsp; &nbsp;r11=r12<br />
&nbsp; &nbsp; &nbsp;r12=r10 <span style="color: #aaffff; font-weight: bold;">Mod</span> r1<br />
&nbsp; &nbsp; &nbsp;<span style="color: #aaffff; font-weight: bold;">AddTriangle</span> s,rbeg2+r22,rbeg+r11,rbeg+r12<br />
&nbsp; &nbsp; <span style="color: #aaffff; font-weight: bold;">Else</span><br />
&nbsp; &nbsp; &nbsp;r20=r20<span style="color: #33ffdd;">+1</span><br />
&nbsp; &nbsp; &nbsp;r21=r22<br />
&nbsp; &nbsp; &nbsp;r22=r20 <span style="color: #aaffff; font-weight: bold;">Mod</span> r2<br />
&nbsp; &nbsp; &nbsp;<span style="color: #aaffff; font-weight: bold;">AddTriangle</span> s,rbeg+r12,rbeg2+r22,rbeg2+r21<br />
&nbsp; &nbsp; <span style="color: #aaffff; font-weight: bold;">End</span> <span style="color: #aaffff; font-weight: bold;">If</span><br />
&nbsp; &nbsp;<span style="color: #aaffff; font-weight: bold;">Until</span> r12=<span style="color: #33ffdd;">0</span> <span style="color: #aaffff; font-weight: bold;">And</span> r22=<span style="color: #33ffdd;">0</span><br />
<br />
&nbsp; &nbsp;rbeg=rbeg2<br />
&nbsp; &nbsp;r1=r2<br />
&nbsp; &nbsp;<span style="color: #aaffff; font-weight: bold;">If</span> t#=<span style="color: #33ffdd;">1</span> <span style="color: #aaffff; font-weight: bold;">Then</span> <span style="color: #aaffff; font-weight: bold;">Exit</span><br />
&nbsp; <span style="color: #aaffff; font-weight: bold;">Forever</span><br />
<br />
&nbsp;<span style="color: #aaffff; font-weight: bold;">Next</span><br />
&nbsp;<span style="color: #aaffff; font-weight: bold;">UpdateNormals</span> fg<span style=" ">&#40;</span>n1<span style=" ">&#41;</span><br />
<span style="color: #aaffff; font-weight: bold;">Next</span><br />
<br />
<span style="color: #ffee00">;Загрузка и установка головы коня</span><br />
m=<span style="color: #aaffff; font-weight: bold;">LoadMesh</span><span style=" ">&#40;</span><span style="color: #00ff66;">&quot;knight.3ds&quot;</span><span style=" ">&#41;</span><br />
<span style="color: #aaffff; font-weight: bold;">ScaleMesh</span> m,.<span style="color: #33ffdd;">5</span>,<span style="color: #33ffdd;">1</span>,.<span style="color: #33ffdd;">5</span><br />
<span style="color: #aaffff; font-weight: bold;">PositionMesh</span> m,<span style="color: #33ffdd;">0</span>,<span style="color: #33ffdd;">1</span>,-.<span style="color: #33ffdd;">05</span><br />
<span style="color: #aaffff; font-weight: bold;">UpdateNormals</span> m<br />
<span style="color: #aaffff; font-weight: bold;">AddMesh</span> m,fg<span style=" ">&#40;</span><span style="color: #33ffdd;">3</span><span style=" ">&#41;</span><br />
<span style="color: #aaffff; font-weight: bold;">FreeEntity</span> m<br />
<br />
<span style="color: #ffee00">;Создание и расстановка фигур</span><br />
<span style="color: #aaffff; font-weight: bold;">For</span> x=<span style="color: #33ffdd;">0</span> <span style="color: #aaffff; font-weight: bold;">To</span> <span style="color: #33ffdd;">7</span><br />
&nbsp;<span style="color: #aaffff; font-weight: bold;">For</span> y=<span style="color: #33ffdd;">0</span> <span style="color: #aaffff; font-weight: bold;">To</span> <span style="color: #33ffdd;">7</span><br />
&nbsp; e=<span style="color: #33ffdd;">-1</span><br />
&nbsp; <span style="color: #ffee00">;Определение типа фигуры</span><br />
&nbsp; <span style="color: #aaffff; font-weight: bold;">If</span> y=<span style="color: #33ffdd;">0</span> <span style="color: #aaffff; font-weight: bold;">Or</span> y=<span style="color: #33ffdd;">7</span> <span style="color: #aaffff; font-weight: bold;">Then</span> e=<span style="color: #aaffff; font-weight: bold;">Mid</span>$<span style=" ">&#40;</span><span style="color: #00ff66;">&quot;43210234&quot;</span>,x<span style="color: #33ffdd;">+1</span>,<span style="color: #33ffdd;">1</span><span style=" ">&#41;</span><br />
&nbsp; <span style="color: #aaffff; font-weight: bold;">If</span> y=<span style="color: #33ffdd;">1</span> <span style="color: #aaffff; font-weight: bold;">Or</span> y=<span style="color: #33ffdd;">6</span> <span style="color: #aaffff; font-weight: bold;">Then</span> e=<span style="color: #33ffdd;">5</span><br />
&nbsp; <span style="color: #aaffff; font-weight: bold;">If</span> e&gt;=<span style="color: #33ffdd;">0</span> <span style="color: #aaffff; font-weight: bold;">Then</span><br />
&nbsp; &nbsp;<span style="color: #ffee00">;Создание копии шаблона</span><br />
&nbsp; &nbsp;e=<span style="color: #aaffff; font-weight: bold;">CopyEntity</span><span style=" ">&#40;</span>fg<span style=" ">&#40;</span>e<span style=" ">&#41;</span><span style=" ">&#41;</span><br />
&nbsp; &nbsp;<span style="color: #aaffff; font-weight: bold;">PositionEntity</span> e,x<span style="color: #33ffdd;">-3.5</span>,<span style="color: #33ffdd;">0</span>,y<span style="color: #33ffdd;">-3.5</span><br />
&nbsp; &nbsp;<span style="color: #ffee00">;Определение цвета фигуры</span><br />
&nbsp; &nbsp;col=<span style="color: #33ffdd;">128</span>*<span style=" ">&#40;</span>y&lt;<span style="color: #33ffdd;">4</span><span style=" ">&#41;</span><span style="color: #33ffdd;">+48</span><br />
&nbsp; &nbsp;<span style="color: #ffee00">;Вращение черного коня на 180 градусов (так как он несимметричен)</span><br />
&nbsp; &nbsp;<span style="color: #aaffff; font-weight: bold;">If</span> y&lt;<span style="color: #33ffdd;">4</span> <span style="color: #aaffff; font-weight: bold;">Then</span> <span style="color: #aaffff; font-weight: bold;">RotateEntity</span> e,<span style="color: #33ffdd;">0</span>,<span style="color: #33ffdd;">180</span>,<span style="color: #33ffdd;">0</span><br />
&nbsp; &nbsp;<span style="color: #aaffff; font-weight: bold;">EntityColor</span> e,col,col,col<br />
&nbsp; &nbsp;<span style="color: #aaffff; font-weight: bold;">EntityShininess</span> e,<span style="color: #33ffdd;">1</span><br />
&nbsp; <span style="color: #aaffff; font-weight: bold;">End</span> <span style="color: #aaffff; font-weight: bold;">If</span><br />
&nbsp;<span style="color: #aaffff; font-weight: bold;">Next</span><br />
<span style="color: #aaffff; font-weight: bold;">Next</span><br />
<br />
<span style="color: #ffee00">;Создание фона (градиент от голубого к синему)</span><br />
bg=<span style="color: #aaffff; font-weight: bold;">CreateImage</span><span style=" ">&#40;</span>xres,yres<span style=" ">&#41;</span><br />
<span style="color: #aaffff; font-weight: bold;">SetBuffer</span> <span style="color: #aaffff; font-weight: bold;">ImageBuffer</span><span style=" ">&#40;</span>bg<span style=" ">&#41;</span><br />
<span style="color: #aaffff; font-weight: bold;">For</span> y=<span style="color: #33ffdd;">0</span> <span style="color: #aaffff; font-weight: bold;">To</span> yres<br />
&nbsp;<span style="color: #aaffff; font-weight: bold;">Color</span> <span style="color: #33ffdd;">0</span>,<span style="color: #33ffdd;">255</span><span style="color: #33ffdd;">-255</span>*y/yres,<span style="color: #33ffdd;">255</span><br />
&nbsp;<span style="color: #aaffff; font-weight: bold;">Line</span> <span style="color: #33ffdd;">0</span>,y,xres,y<br />
<span style="color: #aaffff; font-weight: bold;">Next</span><br />
<br />
<span style="color: #ffee00">;Отрисовка текстуры доски</span><br />
tex=<span style="color: #aaffff; font-weight: bold;">CreateTexture</span><span style=" ">&#40;</span>txres,txres<span style=" ">&#41;</span><br />
<span style="color: #aaffff; font-weight: bold;">SetBuffer</span> <span style="color: #aaffff; font-weight: bold;">TextureBuffer</span><span style=" ">&#40;</span>tex<span style=" ">&#41;</span><br />
<span style="color: #aaffff; font-weight: bold;">For</span> x=<span style="color: #33ffdd;">0</span> <span style="color: #aaffff; font-weight: bold;">To</span> <span style="color: #33ffdd;">63</span><br />
&nbsp;ux=x <span style="color: #aaffff; font-weight: bold;">Shl</span> txcp<br />
&nbsp;<span style="color: #aaffff; font-weight: bold;">For</span> y=<span style="color: #33ffdd;">0</span> <span style="color: #aaffff; font-weight: bold;">To</span> <span style="color: #33ffdd;">63</span><br />
&nbsp; uy=y <span style="color: #aaffff; font-weight: bold;">Shl</span> txcp<br />
&nbsp; col=<span style="color: #33ffdd;">1</span><br />
&nbsp; <span style="color: #ffee00">;Определение цвета секции</span><br />
&nbsp; <span style="color: #aaffff; font-weight: bold;">If</span> x&gt;=<span style="color: #33ffdd;">4</span> <span style="color: #aaffff; font-weight: bold;">And</span> x&lt;<span style="color: #33ffdd;">60</span> <span style="color: #aaffff; font-weight: bold;">And</span> y&gt;=<span style="color: #33ffdd;">4</span> <span style="color: #aaffff; font-weight: bold;">And</span> y&lt;<span style="color: #33ffdd;">60</span> <span style="color: #aaffff; font-weight: bold;">Then</span><br />
&nbsp; &nbsp;<span style="color: #aaffff; font-weight: bold;">If</span> <span style="color: #aaffff; font-weight: bold;">Floor</span><span style=" ">&#40;</span><span style=" ">&#40;</span>x<span style="color: #33ffdd;">-4</span><span style=" ">&#41;</span>/<span style="color: #33ffdd;">7</span><span style=" ">&#41;</span>+<span style="color: #aaffff; font-weight: bold;">Floor</span><span style=" ">&#40;</span><span style=" ">&#40;</span>y<span style="color: #33ffdd;">-4</span><span style=" ">&#41;</span>/<span style="color: #33ffdd;">7</span><span style=" ">&#41;</span> <span style="color: #aaffff; font-weight: bold;">And</span> <span style="color: #33ffdd;">1</span> <span style="color: #aaffff; font-weight: bold;">Then</span> col=<span style="color: #33ffdd;">0</span><br />
&nbsp; <span style="color: #aaffff; font-weight: bold;">ElseIf</span> x&gt;=<span style="color: #33ffdd;">3</span> <span style="color: #aaffff; font-weight: bold;">And</span> x&lt;<span style="color: #33ffdd;">61</span> <span style="color: #aaffff; font-weight: bold;">And</span> y&gt;=<span style="color: #33ffdd;">3</span> <span style="color: #aaffff; font-weight: bold;">And</span> y&lt;<span style="color: #33ffdd;">61</span> <span style="color: #aaffff; font-weight: bold;">Then</span> <br />
&nbsp; &nbsp;col=<span style="color: #33ffdd;">0</span><br />
&nbsp; <span style="color: #aaffff; font-weight: bold;">End</span> <span style="color: #aaffff; font-weight: bold;">If</span><br />
&nbsp; <br />
&nbsp; <span style="color: #ffee00">;Закраска секции с добавлением цветового шума</span><br />
&nbsp; <span style="color: #aaffff; font-weight: bold;">For</span> xx=ux <span style="color: #aaffff; font-weight: bold;">To</span> ux+txcell<br />
&nbsp; &nbsp;<span style="color: #aaffff; font-weight: bold;">For</span> yy=uy <span style="color: #aaffff; font-weight: bold;">To</span> uy+txcell<br />
&nbsp; &nbsp; <span style="color: #aaffff; font-weight: bold;">Color</span> <span style="color: #aaffff; font-weight: bold;">Rand</span><span style=" ">&#40;</span><span style="color: #33ffdd;">-8</span>,<span style="color: #33ffdd;">8</span><span style=" ">&#41;</span><span style="color: #33ffdd;">+192</span>*col<span style="color: #33ffdd;">+16</span>,<span style="color: #aaffff; font-weight: bold;">Rand</span><span style=" ">&#40;</span><span style="color: #33ffdd;">-8</span>,<span style="color: #33ffdd;">8</span><span style=" ">&#41;</span><span style="color: #33ffdd;">+128</span>*col<span style="color: #33ffdd;">+16</span>,<span style="color: #aaffff; font-weight: bold;">Rand</span><span style=" ">&#40;</span><span style="color: #33ffdd;">-8</span>,<span style="color: #33ffdd;">8</span><span style=" ">&#41;</span><span style="color: #33ffdd;">+16</span><br />
&nbsp; &nbsp; <span style="color: #aaffff; font-weight: bold;">Plot</span> xx,yy<br />
&nbsp; &nbsp;<span style="color: #aaffff; font-weight: bold;">Next</span><br />
&nbsp; <span style="color: #aaffff; font-weight: bold;">Next</span> &nbsp;<br />
&nbsp;<span style="color: #aaffff; font-weight: bold;">Next</span><br />
<span style="color: #aaffff; font-weight: bold;">Next</span><br />
<br />
<span style="color: #ffee00">;Создание доски</span><br />
brd=<span style="color: #aaffff; font-weight: bold;">CreateCube</span><span style=" ">&#40;</span><span style=" ">&#41;</span><br />
s=<span style="color: #aaffff; font-weight: bold;">GetSurface</span><span style=" ">&#40;</span>brd,<span style="color: #33ffdd;">1</span><span style=" ">&#41;</span><br />
<span style="color: #ffee00">;Корректировка текстурных координат доски</span><br />
<span style="color: #aaffff; font-weight: bold;">For</span> n=<span style="color: #33ffdd;">0</span> <span style="color: #aaffff; font-weight: bold;">To</span> <span style="color: #33ffdd;">23</span><br />
&nbsp;<span style="color: #aaffff; font-weight: bold;">If</span> <span style="color: #aaffff; font-weight: bold;">VertexY</span><span style=" ">&#40;</span>s,n<span style=" ">&#41;</span>&lt;<span style="color: #33ffdd;">0</span> <span style="color: #aaffff; font-weight: bold;">Then</span> <span style="color: #aaffff; font-weight: bold;">VertexTexCoords</span> s,n,<span style="color: #aaffff; font-weight: bold;">VertexU</span><span style=" ">&#40;</span>s,n<span style=" ">&#41;</span>,<span style="color: #33ffdd;">3.0</span>/<span style="color: #33ffdd;">64</span><br />
<span style="color: #aaffff; font-weight: bold;">Next</span><br />
<span style="color: #aaffff; font-weight: bold;">ScaleEntity</span> brd,<span style="color: #33ffdd;">32.0</span>/<span style="color: #33ffdd;">7</span>,.<span style="color: #33ffdd;">25</span>,<span style="color: #33ffdd;">32.0</span>/<span style="color: #33ffdd;">7</span><br />
<span style="color: #aaffff; font-weight: bold;">PositionEntity</span> brd,<span style="color: #33ffdd;">0</span>,-.<span style="color: #33ffdd;">25</span>,<span style="color: #33ffdd;">0</span><br />
<span style="color: #aaffff; font-weight: bold;">EntityTexture</span> brd,tex<br />
<br />
<span style="color: #aaffff; font-weight: bold;">SetBuffer</span> <span style="color: #aaffff; font-weight: bold;">BackBuffer</span><span style=" ">&#40;</span><span style=" ">&#41;</span><br />
<span style="color: #aaffff; font-weight: bold;">Repeat</span><br />
&nbsp;<span style="color: #ffee00">;Поворот доски</span><br />
&nbsp;<span style="color: #aaffff; font-weight: bold;">TurnEntity</span> p,<span style="color: #33ffdd;">0</span>,.<span style="color: #33ffdd;">4</span>,<span style="color: #33ffdd;">0</span><br />
&nbsp;<span style="color: #ffee00">;Изменение направления света (так, чтобы он не светил вверх)</span><br />
&nbsp;<span style="color: #aaffff; font-weight: bold;">TurnEntity</span> l,.<span style="color: #33ffdd;">2</span>,.<span style="color: #33ffdd;">3</span>,.<span style="color: #33ffdd;">3</span><br />
&nbsp;<span style="color: #ffee00">;Печать фона</span><br />
&nbsp;<span style="color: #aaffff; font-weight: bold;">DrawBlock</span> bg,<span style="color: #33ffdd;">0</span>,<span style="color: #33ffdd;">0</span><br />
&nbsp;<span style="color: #aaffff; font-weight: bold;">RenderWorld</span><br />
&nbsp;<span style="color: #aaffff; font-weight: bold;">Text</span> <span style="color: #33ffdd;">0</span>,<span style="color: #33ffdd;">0</span>,<span style="color: #00ff66;">&quot;Triangles rendered:&quot;</span>+<span style="color: #aaffff; font-weight: bold;">TrisRendered</span><span style=" ">&#40;</span><span style=" ">&#41;</span><br />
&nbsp;<span style="color: #aaffff; font-weight: bold;">Flip</span><br />
<span style="color: #aaffff; font-weight: bold;">Until</span> <span style="color: #aaffff; font-weight: bold;">KeyHit</span><span style=" ">&#40;</span><span style="color: #33ffdd;">1</span><span style=" ">&#41;</span><br />
<br />
<span style="color: #ffee00">;Данные для построения кривых:</span><br />
<br />
<span style="color: #ffee00">;0-Король</span><br />
<span style="color: #aaffff; font-weight: bold;">Data</span> <span style="color: #33ffdd;">24</span><br />
<span style="color: #aaffff; font-weight: bold;">Data</span> <span style="color: #33ffdd;">400</span>,<span style="color: #33ffdd;">0</span>,<span style="color: #33ffdd;">0</span>,<span style="color: #33ffdd;">0</span>,<span style="color: #33ffdd;">0</span>,<span style="color: #33ffdd;">0</span><br />
<span style="color: #aaffff; font-weight: bold;">Data</span> <span style="color: #33ffdd;">391</span>,<span style="color: #33ffdd;">0</span>,<span style="color: #33ffdd;">0</span>,<span style="color: #33ffdd;">0</span>,<span style="color: #33ffdd;">0</span>,<span style="color: #33ffdd;">0</span><br />
<span style="color: #aaffff; font-weight: bold;">Data</span> <span style="color: #33ffdd;">391</span>,<span style="color: #33ffdd;">26</span>,<span style="color: #33ffdd;">0</span>,<span style="color: #33ffdd;">0</span>,<span style="color: #33ffdd;">0</span>,<span style="color: #33ffdd;">0</span><br />
<span style="color: #aaffff; font-weight: bold;">Data</span> <span style="color: #33ffdd;">377</span>,<span style="color: #33ffdd;">26</span>,<span style="color: #33ffdd;">0</span>,<span style="color: #33ffdd;">0</span>,<span style="color: #33ffdd;">0</span>,<span style="color: #33ffdd;">0</span><br />
<span style="color: #aaffff; font-weight: bold;">Data</span> <span style="color: #33ffdd;">377</span>,<span style="color: #33ffdd;">36</span>,<span style="color: #33ffdd;">0</span>,<span style="color: #33ffdd;">0</span>,<span style="color: #33ffdd;">0</span>,<span style="color: #33ffdd;">0</span><br />
<span style="color: #aaffff; font-weight: bold;">Data</span> <span style="color: #33ffdd;">391</span>,<span style="color: #33ffdd;">36</span>,<span style="color: #33ffdd;">0</span>,<span style="color: #33ffdd;">0</span>,<span style="color: #33ffdd;">0</span>,<span style="color: #33ffdd;">0</span><br />
<span style="color: #aaffff; font-weight: bold;">Data</span> <span style="color: #33ffdd;">391</span>,<span style="color: #33ffdd;">62</span>,<span style="color: #33ffdd;">0</span>,<span style="color: #33ffdd;">0</span>,<span style="color: #33ffdd;">0</span>,<span style="color: #33ffdd;">0</span><br />
<span style="color: #aaffff; font-weight: bold;">Data</span> <span style="color: #33ffdd;">352</span>,<span style="color: #33ffdd;">79</span>,<span style="color: #33ffdd;">-5</span>,<span style="color: #33ffdd;">31</span>,<span style="color: #33ffdd;">0</span>,<span style="color: #33ffdd;">1</span><br />
<span style="color: #aaffff; font-weight: bold;">Data</span> <span style="color: #33ffdd;">331</span>,<span style="color: #33ffdd;">74</span>,<span style="color: #33ffdd;">0</span>,<span style="color: #33ffdd;">0</span>,<span style="color: #33ffdd;">0</span>,<span style="color: #33ffdd;">0</span><br />
<span style="color: #aaffff; font-weight: bold;">Data</span> <span style="color: #33ffdd;">355</span>,<span style="color: #33ffdd;">162</span>,<span style="color: #33ffdd;">0</span>,<span style="color: #33ffdd;">0</span>,<span style="color: #33ffdd;">-53</span>,<span style="color: #33ffdd;">0</span><br />
<span style="color: #aaffff; font-weight: bold;">Data</span> <span style="color: #33ffdd;">355</span>,<span style="color: #33ffdd;">177</span>,<span style="color: #33ffdd;">53</span>,<span style="color: #33ffdd;">0</span>,<span style="color: #33ffdd;">0</span>,<span style="color: #33ffdd;">0</span><br />
<span style="color: #aaffff; font-weight: bold;">Data</span> <span style="color: #33ffdd;">355</span>,<span style="color: #33ffdd;">190</span>,<span style="color: #33ffdd;">0</span>,<span style="color: #33ffdd;">0</span>,<span style="color: #33ffdd;">-53</span>,<span style="color: #33ffdd;">0</span><br />
<span style="color: #aaffff; font-weight: bold;">Data</span> <span style="color: #33ffdd;">355</span>,<span style="color: #33ffdd;">205</span>,<span style="color: #33ffdd;">53</span>,<span style="color: #33ffdd;">0</span>,<span style="color: #33ffdd;">0</span>,<span style="color: #33ffdd;">0</span><br />
<span style="color: #aaffff; font-weight: bold;">Data</span> <span style="color: #33ffdd;">326</span>,<span style="color: #33ffdd;">205</span>,<span style="color: #33ffdd;">0</span>,<span style="color: #33ffdd;">0</span>,<span style="color: #33ffdd;">-69</span>,<span style="color: #33ffdd;">0</span><br />
<span style="color: #aaffff; font-weight: bold;">Data</span> <span style="color: #33ffdd;">326</span>,<span style="color: #33ffdd;">219</span>,<span style="color: #33ffdd;">69</span>,<span style="color: #33ffdd;">0</span>,<span style="color: #33ffdd;">0</span>,<span style="color: #33ffdd;">0</span><br />
<span style="color: #aaffff; font-weight: bold;">Data</span> <span style="color: #33ffdd;">373</span>,<span style="color: #33ffdd;">219</span>,<span style="color: #33ffdd;">0</span>,<span style="color: #33ffdd;">0</span>,<span style="color: #33ffdd;">0</span>,<span style="color: #33ffdd;">0</span><br />
<span style="color: #aaffff; font-weight: bold;">Data</span> <span style="color: #33ffdd;">341</span>,<span style="color: #33ffdd;">462</span>,<span style="color: #33ffdd;">-10</span>,<span style="color: #33ffdd;">28</span>,<span style="color: #33ffdd;">0</span>,<span style="color: #33ffdd;">0</span><br />
<span style="color: #aaffff; font-weight: bold;">Data</span> <span style="color: #33ffdd;">351</span>,<span style="color: #33ffdd;">473</span>,<span style="color: #33ffdd;">0</span>,<span style="color: #33ffdd;">0</span>,<span style="color: #33ffdd;">-33</span>,<span style="color: #33ffdd;">14</span><br />
<span style="color: #aaffff; font-weight: bold;">Data</span> <span style="color: #33ffdd;">295</span>,<span style="color: #33ffdd;">573</span>,<span style="color: #33ffdd;">0</span>,<span style="color: #33ffdd;">28</span>,<span style="color: #33ffdd;">0</span>,<span style="color: #33ffdd;">0</span><br />
<span style="color: #aaffff; font-weight: bold;">Data</span> <span style="color: #33ffdd;">305</span>,<span style="color: #33ffdd;">573</span>,<span style="color: #33ffdd;">0</span>,<span style="color: #33ffdd;">0</span>,<span style="color: #33ffdd;">0</span>,<span style="color: #33ffdd;">0</span><br />
<span style="color: #aaffff; font-weight: bold;">Data</span> <span style="color: #33ffdd;">305</span>,<span style="color: #33ffdd;">584</span>,<span style="color: #33ffdd;">0</span>,<span style="color: #33ffdd;">0</span>,<span style="color: #33ffdd;">0</span>,<span style="color: #33ffdd;">0</span><br />
<span style="color: #aaffff; font-weight: bold;">Data</span> <span style="color: #33ffdd;">295</span>,<span style="color: #33ffdd;">584</span>,<span style="color: #33ffdd;">0</span>,<span style="color: #33ffdd;">0</span>,<span style="color: #33ffdd;">0</span>,<span style="color: #33ffdd;">0</span><br />
<span style="color: #aaffff; font-weight: bold;">Data</span> <span style="color: #33ffdd;">295</span>,<span style="color: #33ffdd;">599</span>,<span style="color: #33ffdd;">0</span>,<span style="color: #33ffdd;">0</span>,<span style="color: #33ffdd;">0</span>,<span style="color: #33ffdd;">0</span><br />
<span style="color: #aaffff; font-weight: bold;">Data</span> <span style="color: #33ffdd;">400</span>,<span style="color: #33ffdd;">599</span>,<span style="color: #33ffdd;">0</span>,<span style="color: #33ffdd;">0</span>,<span style="color: #33ffdd;">0</span>,<span style="color: #33ffdd;">0</span><br />
<br />
<span style="color: #ffee00">;1-Ферзь</span><br />
<span style="color: #aaffff; font-weight: bold;">Data</span> <span style="color: #33ffdd;">20</span><br />
<span style="color: #aaffff; font-weight: bold;">Data</span> <span style="color: #33ffdd;">400</span>,<span style="color: #33ffdd;">45</span>,<span style="color: #33ffdd;">0</span>,<span style="color: #33ffdd;">0</span>,<span style="color: #33ffdd;">0</span>,<span style="color: #33ffdd;">0</span><br />
<span style="color: #aaffff; font-weight: bold;">Data</span> <span style="color: #33ffdd;">380</span>,<span style="color: #33ffdd;">53</span>,<span style="color: #33ffdd;">0</span>,<span style="color: #33ffdd;">0</span>,<span style="color: #33ffdd;">0</span>,<span style="color: #33ffdd;">0</span><br />
<span style="color: #aaffff; font-weight: bold;">Data</span> <span style="color: #33ffdd;">391</span>,<span style="color: #33ffdd;">62</span>,<span style="color: #33ffdd;">0</span>,<span style="color: #33ffdd;">0</span>,<span style="color: #33ffdd;">0</span>,<span style="color: #33ffdd;">0</span><br />
<span style="color: #aaffff; font-weight: bold;">Data</span> <span style="color: #33ffdd;">352</span>,<span style="color: #33ffdd;">79</span>,<span style="color: #33ffdd;">-5</span>,<span style="color: #33ffdd;">31</span>,<span style="color: #33ffdd;">0</span>,<span style="color: #33ffdd;">1</span><br />
<span style="color: #aaffff; font-weight: bold;">Data</span> <span style="color: #33ffdd;">331</span>,<span style="color: #33ffdd;">74</span>,<span style="color: #33ffdd;">0</span>,<span style="color: #33ffdd;">0</span>,<span style="color: #33ffdd;">30</span>,<span style="color: #33ffdd;">39</span><br />
<span style="color: #aaffff; font-weight: bold;">Data</span> <span style="color: #33ffdd;">355</span>,<span style="color: #33ffdd;">162</span>,<span style="color: #33ffdd;">0</span>,<span style="color: #33ffdd;">0</span>,<span style="color: #33ffdd;">-53</span>,<span style="color: #33ffdd;">0</span><br />
<span style="color: #aaffff; font-weight: bold;">Data</span> <span style="color: #33ffdd;">355</span>,<span style="color: #33ffdd;">177</span>,<span style="color: #33ffdd;">53</span>,<span style="color: #33ffdd;">0</span>,<span style="color: #33ffdd;">0</span>,<span style="color: #33ffdd;">0</span><br />
<span style="color: #aaffff; font-weight: bold;">Data</span> <span style="color: #33ffdd;">355</span>,<span style="color: #33ffdd;">190</span>,<span style="color: #33ffdd;">0</span>,<span style="color: #33ffdd;">0</span>,<span style="color: #33ffdd;">-53</span>,<span style="color: #33ffdd;">0</span><br />
<span style="color: #aaffff; font-weight: bold;">Data</span> <span style="color: #33ffdd;">355</span>,<span style="color: #33ffdd;">205</span>,<span style="color: #33ffdd;">53</span>,<span style="color: #33ffdd;">0</span>,<span style="color: #33ffdd;">0</span>,<span style="color: #33ffdd;">0</span><br />
<span style="color: #aaffff; font-weight: bold;">Data</span> <span style="color: #33ffdd;">326</span>,<span style="color: #33ffdd;">205</span>,<span style="color: #33ffdd;">0</span>,<span style="color: #33ffdd;">0</span>,<span style="color: #33ffdd;">-69</span>,<span style="color: #33ffdd;">0</span><br />
<span style="color: #aaffff; font-weight: bold;">Data</span> <span style="color: #33ffdd;">326</span>,<span style="color: #33ffdd;">219</span>,<span style="color: #33ffdd;">69</span>,<span style="color: #33ffdd;">0</span>,<span style="color: #33ffdd;">0</span>,<span style="color: #33ffdd;">0</span><br />
<span style="color: #aaffff; font-weight: bold;">Data</span> <span style="color: #33ffdd;">373</span>,<span style="color: #33ffdd;">219</span>,<span style="color: #33ffdd;">0</span>,<span style="color: #33ffdd;">0</span>,<span style="color: #33ffdd;">0</span>,<span style="color: #33ffdd;">0</span><br />
<span style="color: #aaffff; font-weight: bold;">Data</span> <span style="color: #33ffdd;">341</span>,<span style="color: #33ffdd;">462</span>,<span style="color: #33ffdd;">-10</span>,<span style="color: #33ffdd;">28</span>,<span style="color: #33ffdd;">0</span>,<span style="color: #33ffdd;">0</span><br />
<span style="color: #aaffff; font-weight: bold;">Data</span> <span style="color: #33ffdd;">351</span>,<span style="color: #33ffdd;">473</span>,<span style="color: #33ffdd;">0</span>,<span style="color: #33ffdd;">0</span>,<span style="color: #33ffdd;">-33</span>,<span style="color: #33ffdd;">14</span><br />
<span style="color: #aaffff; font-weight: bold;">Data</span> <span style="color: #33ffdd;">295</span>,<span style="color: #33ffdd;">573</span>,<span style="color: #33ffdd;">0</span>,<span style="color: #33ffdd;">28</span>,<span style="color: #33ffdd;">0</span>,<span style="color: #33ffdd;">0</span><br />
<span style="color: #aaffff; font-weight: bold;">Data</span> <span style="color: #33ffdd;">305</span>,<span style="color: #33ffdd;">573</span>,<span style="color: #33ffdd;">0</span>,<span style="color: #33ffdd;">0</span>,<span style="color: #33ffdd;">0</span>,<span style="color: #33ffdd;">0</span><br />
<span style="color: #aaffff; font-weight: bold;">Data</span> <span style="color: #33ffdd;">305</span>,<span style="color: #33ffdd;">584</span>,<span style="color: #33ffdd;">0</span>,<span style="color: #33ffdd;">0</span>,<span style="color: #33ffdd;">0</span>,<span style="color: #33ffdd;">0</span><br />
<span style="color: #aaffff; font-weight: bold;">Data</span> <span style="color: #33ffdd;">295</span>,<span style="color: #33ffdd;">584</span>,<span style="color: #33ffdd;">0</span>,<span style="color: #33ffdd;">0</span>,<span style="color: #33ffdd;">0</span>,<span style="color: #33ffdd;">0</span><br />
<span style="color: #aaffff; font-weight: bold;">Data</span> <span style="color: #33ffdd;">295</span>,<span style="color: #33ffdd;">599</span>,<span style="color: #33ffdd;">0</span>,<span style="color: #33ffdd;">0</span>,<span style="color: #33ffdd;">0</span>,<span style="color: #33ffdd;">0</span><br />
<span style="color: #aaffff; font-weight: bold;">Data</span> <span style="color: #33ffdd;">400</span>,<span style="color: #33ffdd;">599</span>,<span style="color: #33ffdd;">0</span>,<span style="color: #33ffdd;">0</span>,<span style="color: #33ffdd;">0</span>,<span style="color: #33ffdd;">0</span><br />
<br />
<span style="color: #ffee00">;2-Слон</span><br />
<span style="color: #aaffff; font-weight: bold;">Data</span> <span style="color: #33ffdd;">18</span><br />
<span style="color: #aaffff; font-weight: bold;">Data</span> <span style="color: #33ffdd;">400</span>,<span style="color: #33ffdd;">84</span>,<span style="color: #33ffdd;">0</span>,<span style="color: #33ffdd;">0</span>,<span style="color: #33ffdd;">-46</span>,<span style="color: #33ffdd;">1</span><br />
<span style="color: #aaffff; font-weight: bold;">Data</span> <span style="color: #33ffdd;">392</span>,<span style="color: #33ffdd;">107</span>,<span style="color: #33ffdd;">24</span>,<span style="color: #33ffdd;">8</span>,<span style="color: #33ffdd;">6</span>,<span style="color: #33ffdd;">13</span><br />
<span style="color: #aaffff; font-weight: bold;">Data</span> <span style="color: #33ffdd;">369</span>,<span style="color: #33ffdd;">162</span>,<span style="color: #33ffdd;">-29</span>,<span style="color: #33ffdd;">33</span>,<span style="color: #33ffdd;">-29</span>,<span style="color: #33ffdd;">33</span><br />
<span style="color: #aaffff; font-weight: bold;">Data</span> <span style="color: #33ffdd;">366</span>,<span style="color: #33ffdd;">253</span>,<span style="color: #33ffdd;">0</span>,<span style="color: #33ffdd;">0</span>,<span style="color: #33ffdd;">-53</span>,<span style="color: #33ffdd;">0</span><br />
<span style="color: #aaffff; font-weight: bold;">Data</span> <span style="color: #33ffdd;">366</span>,<span style="color: #33ffdd;">266</span>,<span style="color: #33ffdd;">53</span>,<span style="color: #33ffdd;">0</span>,<span style="color: #33ffdd;">0</span>,<span style="color: #33ffdd;">0</span><br />
<span style="color: #aaffff; font-weight: bold;">Data</span> <span style="color: #33ffdd;">366</span>,<span style="color: #33ffdd;">292</span>,<span style="color: #33ffdd;">0</span>,<span style="color: #33ffdd;">0</span>,<span style="color: #33ffdd;">-53</span>,<span style="color: #33ffdd;">0</span><br />
<span style="color: #aaffff; font-weight: bold;">Data</span> <span style="color: #33ffdd;">366</span>,<span style="color: #33ffdd;">304</span>,<span style="color: #33ffdd;">53</span>,<span style="color: #33ffdd;">0</span>,<span style="color: #33ffdd;">0</span>,<span style="color: #33ffdd;">0</span><br />
<span style="color: #aaffff; font-weight: bold;">Data</span> <span style="color: #33ffdd;">346</span>,<span style="color: #33ffdd;">304</span>,<span style="color: #33ffdd;">0</span>,<span style="color: #33ffdd;">0</span>,<span style="color: #33ffdd;">-69</span>,<span style="color: #33ffdd;">0</span><br />
<span style="color: #aaffff; font-weight: bold;">Data</span> <span style="color: #33ffdd;">346</span>,<span style="color: #33ffdd;">317</span>,<span style="color: #33ffdd;">69</span>,<span style="color: #33ffdd;">0</span>,<span style="color: #33ffdd;">0</span>,<span style="color: #33ffdd;">0</span><br />
<span style="color: #aaffff; font-weight: bold;">Data</span> <span style="color: #33ffdd;">380</span>,<span style="color: #33ffdd;">317</span>,<span style="color: #33ffdd;">0</span>,<span style="color: #33ffdd;">0</span>,<span style="color: #33ffdd;">0</span>,<span style="color: #33ffdd;">0</span><br />
<span style="color: #aaffff; font-weight: bold;">Data</span> <span style="color: #33ffdd;">352</span>,<span style="color: #33ffdd;">497</span>,<span style="color: #33ffdd;">-10</span>,<span style="color: #33ffdd;">28</span>,<span style="color: #33ffdd;">0</span>,<span style="color: #33ffdd;">0</span><br />
<span style="color: #aaffff; font-weight: bold;">Data</span> <span style="color: #33ffdd;">359</span>,<span style="color: #33ffdd;">505</span>,<span style="color: #33ffdd;">0</span>,<span style="color: #33ffdd;">0</span>,<span style="color: #33ffdd;">-19</span>,<span style="color: #33ffdd;">15</span><br />
<span style="color: #aaffff; font-weight: bold;">Data</span> <span style="color: #33ffdd;">309</span>,<span style="color: #33ffdd;">577</span>,<span style="color: #33ffdd;">-5</span>,<span style="color: #33ffdd;">20</span>,<span style="color: #33ffdd;">0</span>,<span style="color: #33ffdd;">0</span><br />
<span style="color: #aaffff; font-weight: bold;">Data</span> <span style="color: #33ffdd;">321</span>,<span style="color: #33ffdd;">577</span>,<span style="color: #33ffdd;">0</span>,<span style="color: #33ffdd;">0</span>,<span style="color: #33ffdd;">0</span>,<span style="color: #33ffdd;">0</span><br />
<span style="color: #aaffff; font-weight: bold;">Data</span> <span style="color: #33ffdd;">321</span>,<span style="color: #33ffdd;">586</span>,<span style="color: #33ffdd;">0</span>,<span style="color: #33ffdd;">0</span>,<span style="color: #33ffdd;">0</span>,<span style="color: #33ffdd;">0</span><br />
<span style="color: #aaffff; font-weight: bold;">Data</span> <span style="color: #33ffdd;">309</span>,<span style="color: #33ffdd;">586</span>,<span style="color: #33ffdd;">0</span>,<span style="color: #33ffdd;">0</span>,<span style="color: #33ffdd;">0</span>,<span style="color: #33ffdd;">0</span><br />
<span style="color: #aaffff; font-weight: bold;">Data</span> <span style="color: #33ffdd;">309</span>,<span style="color: #33ffdd;">599</span>,<span style="color: #33ffdd;">0</span>,<span style="color: #33ffdd;">0</span>,<span style="color: #33ffdd;">0</span>,<span style="color: #33ffdd;">0</span><br />
<span style="color: #aaffff; font-weight: bold;">Data</span> <span style="color: #33ffdd;">400</span>,<span style="color: #33ffdd;">599</span>,<span style="color: #33ffdd;">0</span>,<span style="color: #33ffdd;">0</span>,<span style="color: #33ffdd;">0</span>,<span style="color: #33ffdd;">0</span><br />
<br />
<span style="color: #ffee00">;3-Конь</span><br />
<span style="color: #aaffff; font-weight: bold;">Data</span> <span style="color: #33ffdd;">9</span><br />
<span style="color: #aaffff; font-weight: bold;">Data</span> <span style="color: #33ffdd;">400</span>,<span style="color: #33ffdd;">475</span>,<span style="color: #33ffdd;">0</span>,<span style="color: #33ffdd;">0</span>,<span style="color: #33ffdd;">0</span>,<span style="color: #33ffdd;">0</span><br />
<span style="color: #aaffff; font-weight: bold;">Data</span> <span style="color: #33ffdd;">333</span>,<span style="color: #33ffdd;">475</span>,<span style="color: #33ffdd;">0</span>,<span style="color: #33ffdd;">0</span>,<span style="color: #33ffdd;">0</span>,<span style="color: #33ffdd;">0</span><br />
<span style="color: #aaffff; font-weight: bold;">Data</span> <span style="color: #33ffdd;">345</span>,<span style="color: #33ffdd;">493</span>,<span style="color: #33ffdd;">0</span>,<span style="color: #33ffdd;">0</span>,<span style="color: #33ffdd;">0</span>,<span style="color: #33ffdd;">0</span><br />
<span style="color: #aaffff; font-weight: bold;">Data</span> <span style="color: #33ffdd;">297</span>,<span style="color: #33ffdd;">578</span>,<span style="color: #33ffdd;">-2</span>,<span style="color: #33ffdd;">20</span>,<span style="color: #33ffdd;">0</span>,<span style="color: #33ffdd;">0</span><br />
<span style="color: #aaffff; font-weight: bold;">Data</span> <span style="color: #33ffdd;">310</span>,<span style="color: #33ffdd;">578</span>,<span style="color: #33ffdd;">0</span>,<span style="color: #33ffdd;">0</span>,<span style="color: #33ffdd;">0</span>,<span style="color: #33ffdd;">0</span><br />
<span style="color: #aaffff; font-weight: bold;">Data</span> <span style="color: #33ffdd;">310</span>,<span style="color: #33ffdd;">586</span>,<span style="color: #33ffdd;">0</span>,<span style="color: #33ffdd;">0</span>,<span style="color: #33ffdd;">0</span>,<span style="color: #33ffdd;">0</span><br />
<span style="color: #aaffff; font-weight: bold;">Data</span> <span style="color: #33ffdd;">297</span>,<span style="color: #33ffdd;">586</span>,<span style="color: #33ffdd;">0</span>,<span style="color: #33ffdd;">0</span>,<span style="color: #33ffdd;">0</span>,<span style="color: #33ffdd;">0</span><br />
<span style="color: #aaffff; font-weight: bold;">Data</span> <span style="color: #33ffdd;">297</span>,<span style="color: #33ffdd;">599</span>,<span style="color: #33ffdd;">0</span>,<span style="color: #33ffdd;">0</span>,<span style="color: #33ffdd;">0</span>,<span style="color: #33ffdd;">0</span><br />
<span style="color: #aaffff; font-weight: bold;">Data</span> <span style="color: #33ffdd;">400</span>,<span style="color: #33ffdd;">599</span>,<span style="color: #33ffdd;">0</span>,<span style="color: #33ffdd;">0</span>,<span style="color: #33ffdd;">0</span>,<span style="color: #33ffdd;">0</span><br />
<br />
<span style="color: #ffee00">;4-Ладья</span><br />
<span style="color: #aaffff; font-weight: bold;">Data</span> <span style="color: #33ffdd;">20</span><br />
<span style="color: #aaffff; font-weight: bold;">Data</span> <span style="color: #33ffdd;">400</span>,<span style="color: #33ffdd;">181</span>,<span style="color: #33ffdd;">0</span>,<span style="color: #33ffdd;">0</span>,<span style="color: #33ffdd;">0</span>,<span style="color: #33ffdd;">0</span><br />
<span style="color: #aaffff; font-weight: bold;">Data</span> <span style="color: #33ffdd;">332</span>,<span style="color: #33ffdd;">181</span>,<span style="color: #33ffdd;">0</span>,<span style="color: #33ffdd;">0</span>,<span style="color: #33ffdd;">0</span>,<span style="color: #33ffdd;">0</span><br />
<span style="color: #aaffff; font-weight: bold;">Data</span> <span style="color: #33ffdd;">332</span>,<span style="color: #33ffdd;">161</span>,<span style="color: #33ffdd;">0</span>,<span style="color: #33ffdd;">0</span>,<span style="color: #33ffdd;">0</span>,<span style="color: #33ffdd;">0</span><br />
<span style="color: #aaffff; font-weight: bold;">Data</span> <span style="color: #33ffdd;">316</span>,<span style="color: #33ffdd;">161</span>,<span style="color: #33ffdd;">0</span>,<span style="color: #33ffdd;">0</span>,<span style="color: #33ffdd;">0</span>,<span style="color: #33ffdd;">0</span><br />
<span style="color: #aaffff; font-weight: bold;">Data</span> <span style="color: #33ffdd;">316</span>,<span style="color: #33ffdd;">193</span>,<span style="color: #33ffdd;">0</span>,<span style="color: #33ffdd;">0</span>,<span style="color: #33ffdd;">0</span>,<span style="color: #33ffdd;">0</span><br />
<span style="color: #aaffff; font-weight: bold;">Data</span> <span style="color: #33ffdd;">332</span>,<span style="color: #33ffdd;">193</span>,<span style="color: #33ffdd;">0</span>,<span style="color: #33ffdd;">0</span>,<span style="color: #33ffdd;">0</span>,<span style="color: #33ffdd;">0</span><br />
<span style="color: #aaffff; font-weight: bold;">Data</span> <span style="color: #33ffdd;">332</span>,<span style="color: #33ffdd;">215</span>,<span style="color: #33ffdd;">0</span>,<span style="color: #33ffdd;">0</span>,<span style="color: #33ffdd;">0</span>,<span style="color: #33ffdd;">0</span><br />
<span style="color: #aaffff; font-weight: bold;">Data</span> <span style="color: #33ffdd;">344</span>,<span style="color: #33ffdd;">215</span>,<span style="color: #33ffdd;">0</span>,<span style="color: #33ffdd;">0</span>,<span style="color: #33ffdd;">0</span>,<span style="color: #33ffdd;">0</span><br />
<span style="color: #aaffff; font-weight: bold;">Data</span> <span style="color: #33ffdd;">344</span>,<span style="color: #33ffdd;">238</span>,<span style="color: #33ffdd;">0</span>,<span style="color: #33ffdd;">0</span>,<span style="color: #33ffdd;">0</span>,<span style="color: #33ffdd;">0</span><br />
<span style="color: #aaffff; font-weight: bold;">Data</span> <span style="color: #33ffdd;">359</span>,<span style="color: #33ffdd;">238</span>,<span style="color: #33ffdd;">0</span>,<span style="color: #33ffdd;">0</span>,<span style="color: #33ffdd;">0</span>,<span style="color: #33ffdd;">0</span><br />
<span style="color: #aaffff; font-weight: bold;">Data</span> <span style="color: #33ffdd;">359</span>,<span style="color: #33ffdd;">268</span>,<span style="color: #33ffdd;">0</span>,<span style="color: #33ffdd;">0</span>,<span style="color: #33ffdd;">0</span>,<span style="color: #33ffdd;">0</span><br />
<span style="color: #aaffff; font-weight: bold;">Data</span> <span style="color: #33ffdd;">346</span>,<span style="color: #33ffdd;">454</span>,<span style="color: #33ffdd;">0</span>,<span style="color: #33ffdd;">0</span>,<span style="color: #33ffdd;">0</span>,<span style="color: #33ffdd;">0</span><br />
<span style="color: #aaffff; font-weight: bold;">Data</span> <span style="color: #33ffdd;">333</span>,<span style="color: #33ffdd;">460</span>,<span style="color: #33ffdd;">0</span>,<span style="color: #33ffdd;">0</span>,<span style="color: #33ffdd;">0</span>,<span style="color: #33ffdd;">0</span><br />
<span style="color: #aaffff; font-weight: bold;">Data</span> <span style="color: #33ffdd;">342</span>,<span style="color: #33ffdd;">473</span>,<span style="color: #33ffdd;">0</span>,<span style="color: #33ffdd;">0</span>,<span style="color: #33ffdd;">0</span>,<span style="color: #33ffdd;">0</span><br />
<span style="color: #aaffff; font-weight: bold;">Data</span> <span style="color: #33ffdd;">309</span>,<span style="color: #33ffdd;">577</span>,<span style="color: #33ffdd;">-2</span>,<span style="color: #33ffdd;">20</span>,<span style="color: #33ffdd;">0</span>,<span style="color: #33ffdd;">0</span><br />
<span style="color: #aaffff; font-weight: bold;">Data</span> <span style="color: #33ffdd;">321</span>,<span style="color: #33ffdd;">577</span>,<span style="color: #33ffdd;">0</span>,<span style="color: #33ffdd;">0</span>,<span style="color: #33ffdd;">0</span>,<span style="color: #33ffdd;">0</span><br />
<span style="color: #aaffff; font-weight: bold;">Data</span> <span style="color: #33ffdd;">321</span>,<span style="color: #33ffdd;">586</span>,<span style="color: #33ffdd;">0</span>,<span style="color: #33ffdd;">0</span>,<span style="color: #33ffdd;">0</span>,<span style="color: #33ffdd;">0</span><br />
<span style="color: #aaffff; font-weight: bold;">Data</span> <span style="color: #33ffdd;">309</span>,<span style="color: #33ffdd;">586</span>,<span style="color: #33ffdd;">0</span>,<span style="color: #33ffdd;">0</span>,<span style="color: #33ffdd;">0</span>,<span style="color: #33ffdd;">0</span><br />
<span style="color: #aaffff; font-weight: bold;">Data</span> <span style="color: #33ffdd;">309</span>,<span style="color: #33ffdd;">599</span>,<span style="color: #33ffdd;">0</span>,<span style="color: #33ffdd;">0</span>,<span style="color: #33ffdd;">0</span>,<span style="color: #33ffdd;">0</span><br />
<span style="color: #aaffff; font-weight: bold;">Data</span> <span style="color: #33ffdd;">400</span>,<span style="color: #33ffdd;">599</span>,<span style="color: #33ffdd;">0</span>,<span style="color: #33ffdd;">0</span>,<span style="color: #33ffdd;">0</span>,<span style="color: #33ffdd;">0</span><br />
<br />
<span style="color: #ffee00">;5-Пешка</span><br />
<span style="color: #aaffff; font-weight: bold;">Data</span> <span style="color: #33ffdd;">13</span><br />
<span style="color: #aaffff; font-weight: bold;">Data</span> <span style="color: #33ffdd;">400</span>,<span style="color: #33ffdd;">209</span>,<span style="color: #33ffdd;">0</span>,<span style="color: #33ffdd;">0</span>,<span style="color: #33ffdd;">-37</span>,<span style="color: #33ffdd;">0</span><br />
<span style="color: #aaffff; font-weight: bold;">Data</span> <span style="color: #33ffdd;">375</span>,<span style="color: #33ffdd;">283</span>,<span style="color: #33ffdd;">31</span>,<span style="color: #33ffdd;">11</span>,<span style="color: #33ffdd;">0</span>,<span style="color: #33ffdd;">0</span><br />
<span style="color: #aaffff; font-weight: bold;">Data</span> <span style="color: #33ffdd;">339</span>,<span style="color: #33ffdd;">334</span>,<span style="color: #33ffdd;">0</span>,<span style="color: #33ffdd;">0</span>,<span style="color: #33ffdd;">0</span>,<span style="color: #33ffdd;">0</span><br />
<span style="color: #aaffff; font-weight: bold;">Data</span> <span style="color: #33ffdd;">382</span>,<span style="color: #33ffdd;">334</span>,<span style="color: #33ffdd;">0</span>,<span style="color: #33ffdd;">0</span>,<span style="color: #33ffdd;">-1</span>,<span style="color: #33ffdd;">46</span><br />
<span style="color: #aaffff; font-weight: bold;">Data</span> <span style="color: #33ffdd;">355</span>,<span style="color: #33ffdd;">501</span>,<span style="color: #33ffdd;">0</span>,<span style="color: #33ffdd;">0</span>,<span style="color: #33ffdd;">0</span>,<span style="color: #33ffdd;">0</span><br />
<span style="color: #aaffff; font-weight: bold;">Data</span> <span style="color: #33ffdd;">339</span>,<span style="color: #33ffdd;">498</span>,<span style="color: #33ffdd;">0</span>,<span style="color: #33ffdd;">0</span>,<span style="color: #33ffdd;">0</span>,<span style="color: #33ffdd;">0</span><br />
<span style="color: #aaffff; font-weight: bold;">Data</span> <span style="color: #33ffdd;">346</span>,<span style="color: #33ffdd;">512</span>,<span style="color: #33ffdd;">0</span>,<span style="color: #33ffdd;">0</span>,<span style="color: #33ffdd;">0</span>,<span style="color: #33ffdd;">0</span><br />
<span style="color: #aaffff; font-weight: bold;">Data</span> <span style="color: #33ffdd;">309</span>,<span style="color: #33ffdd;">577</span>,<span style="color: #33ffdd;">-2</span>,<span style="color: #33ffdd;">20</span>,<span style="color: #33ffdd;">0</span>,<span style="color: #33ffdd;">0</span><br />
<span style="color: #aaffff; font-weight: bold;">Data</span> <span style="color: #33ffdd;">321</span>,<span style="color: #33ffdd;">577</span>,<span style="color: #33ffdd;">0</span>,<span style="color: #33ffdd;">0</span>,<span style="color: #33ffdd;">0</span>,<span style="color: #33ffdd;">0</span><br />
<span style="color: #aaffff; font-weight: bold;">Data</span> <span style="color: #33ffdd;">321</span>,<span style="color: #33ffdd;">586</span>,<span style="color: #33ffdd;">0</span>,<span style="color: #33ffdd;">0</span>,<span style="color: #33ffdd;">0</span>,<span style="color: #33ffdd;">0</span><br />
<span style="color: #aaffff; font-weight: bold;">Data</span> <span style="color: #33ffdd;">309</span>,<span style="color: #33ffdd;">586</span>,<span style="color: #33ffdd;">0</span>,<span style="color: #33ffdd;">0</span>,<span style="color: #33ffdd;">0</span>,<span style="color: #33ffdd;">0</span><br />
<span style="color: #aaffff; font-weight: bold;">Data</span> <span style="color: #33ffdd;">309</span>,<span style="color: #33ffdd;">599</span>,<span style="color: #33ffdd;">0</span>,<span style="color: #33ffdd;">0</span>,<span style="color: #33ffdd;">0</span>,<span style="color: #33ffdd;">0</span><br />
<span style="color: #aaffff; font-weight: bold;">Data</span> <span style="color: #33ffdd;">400</span>,<span style="color: #33ffdd;">599</span>,<span style="color: #33ffdd;">0</span>,<span style="color: #33ffdd;">0</span>,<span style="color: #33ffdd;">0</span>,<span style="color: #33ffdd;">0</span><br />
<br />
<span style="color: #aaffff; font-weight: bold;">Function</span> vertexes<span style=" ">&#40;</span>s<span style=" ">&#41;</span><br />
vx#=<span style="color: #33ffdd;">1.0</span>*<span style=" ">&#40;</span><span style="color: #33ffdd;">400</span>-oc<span style=" ">&#40;</span><span style="color: #33ffdd;">0</span><span style=" ">&#41;</span><span style=" ">&#41;</span>/<span style="color: #33ffdd;">300</span><br />
vy#=<span style="color: #33ffdd;">1.0</span>*<span style=" ">&#40;</span><span style="color: #33ffdd;">600</span>-oc<span style=" ">&#40;</span><span style="color: #33ffdd;">1</span><span style=" ">&#41;</span><span style=" ">&#41;</span>/<span style="color: #33ffdd;">300</span><br />
r1=<span style="color: #aaffff; font-weight: bold;">Abs</span><span style=" ">&#40;</span><span style="color: #33ffdd;">400</span>-oc<span style=" ">&#40;</span><span style="color: #33ffdd;">0</span><span style=" ">&#41;</span><span style=" ">&#41;</span><br />
<br />
<span style="color: #aaffff; font-weight: bold;">If</span> sen&gt;=r1*<span style="color: #33ffdd;">2</span> <span style="color: #aaffff; font-weight: bold;">Then</span><br />
&nbsp;r1=<span style="color: #33ffdd;">1</span><br />
&nbsp;<span style="color: #aaffff; font-weight: bold;">AddVertex</span> s,<span style="color: #33ffdd;">0</span>,vy#,<span style="color: #33ffdd;">0</span><br />
<span style="color: #aaffff; font-weight: bold;">Else</span><br />
&nbsp;r1=<span style="color: #aaffff; font-weight: bold;">Ceil</span><span style=" ">&#40;</span><span style="color: #33ffdd;">360.0</span>/<span style="color: #aaffff; font-weight: bold;">ACos</span><span style=" ">&#40;</span><span style="color: #33ffdd;">1.0</span>-sen#/r1<span style=" ">&#41;</span><span style=" ">&#41;</span><br />
&nbsp;ang#=<span style="color: #33ffdd;">0</span><br />
&nbsp;dang#=<span style="color: #33ffdd;">360.0</span>/r1<br />
&nbsp;<span style="color: #aaffff; font-weight: bold;">Repeat</span><br />
&nbsp; <span style="color: #aaffff; font-weight: bold;">AddVertex</span> s,<span style="color: #aaffff; font-weight: bold;">Cos</span><span style=" ">&#40;</span>ang#<span style=" ">&#41;</span>*vx#,vy#,<span style="color: #aaffff; font-weight: bold;">Sin</span><span style=" ">&#40;</span>ang#<span style=" ">&#41;</span>*vx#<br />
&nbsp; ang#=ang#+dang#<br />
&nbsp; <span style="color: #aaffff; font-weight: bold;">If</span> ang#&gt;<span style="color: #33ffdd;">359.9</span> <span style="color: #aaffff; font-weight: bold;">Then</span> <span style="color: #aaffff; font-weight: bold;">Exit</span><br />
&nbsp;<span style="color: #aaffff; font-weight: bold;">Forever</span><br />
<span style="color: #aaffff; font-weight: bold;">End</span> <span style="color: #aaffff; font-weight: bold;">If</span><br />
<span style="color: #aaffff; font-weight: bold;">Return</span> r1<br />
<span style="color: #aaffff; font-weight: bold;">End Function</span><br />
<br />
<span style="color: #aaffff; font-weight: bold;">Function</span> max<span style=" ">&#40;</span>v1,v2<span style=" ">&#41;</span><br />
<span style="color: #aaffff; font-weight: bold;">If</span> v1&gt;v2 <span style="color: #aaffff; font-weight: bold;">Then</span> <span style="color: #aaffff; font-weight: bold;">Return</span> v1 <span style="color: #aaffff; font-weight: bold;">Else</span> <span style="color: #aaffff; font-weight: bold;">Return</span> v2<br />
</p>
<span style="color: #aaffff; font-weight: bold;">End Function</span></div>
<div align="right"><a href="http://blitzetcetera.org/images/c/c5/Rotational_Bodies.zip" class="internal" title="Rotational Bodies.zip">скачать архив с файлами к статье</a></div>
<hr />
<p>Автор: <a href="http://blitzetcetera.org/index.php/%D0%A3%D1%87%D0%B0%D1%81%D1%82%D0%BD%D0%B8%D0%BA:Matt_Merkulov" title="Участник:Matt Merkulov">Матвей Меркулов</a> (E-mail: MattMerk@mail.ru, ICQ: 392-274-050)
</p><!-- 
Pre-expand include size: 14672 bytes
Post-expand include size: 419 bytes
Template argument size: 28 bytes
Maximum: 2097152 bytes
-->

<!-- Saved in parser cache with key db1:pcache:idhash:588-0!1!0!!ru!2 and timestamp 20071110040655 -->
<div class="printfooter">
Получено с <a href="ycjzi7b0.html">http://blitzetcetera.org/index.php/%D0%A2%D0%B5%D0%BB%D0%B0_%D0%B2%D1%80%D0%B0%D1%89%D0%B5%D0%BD%D0%B8%D1%8F</a></div>
			<!-- end content -->			<div class="visualClear"></div>				</td>				<td class="rightside">				</td>			</tr>		</table>		</div>	</div>		</div>	
		<script type="text/javascript">if (window.runOnloadHook) runOnloadHook();</script>
</div></body>
<!-- Mirrored from localhost/index.php/%D0%A2%D0%B5%D0%BB%D0%B0_%D0%B2%D1%80%D0%B0%D1%89%D0%B5%D0%BD%D0%B8%D1%8F by HTTrack Website Copier/3.x [XR&CO'2007], Sat, 10 Nov 2007 05:16:40 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8"><!-- /Added by HTTrack -->
</html>