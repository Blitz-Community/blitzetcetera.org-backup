<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml" xml:lang="ru" lang="ru" dir="ltr">	
<!-- Mirrored from localhost/index.php/%D0%A1%D0%BA%D1%80%D0%B8%D0%BF%D1%82%D1%8B by HTTrack Website Copier/3.x [XR&CO'2007], Sat, 10 Nov 2007 05:16:43 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8"><!-- /Added by HTTrack -->
<head>		<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />				<meta name="keywords" content="Скрипты,Matt Merkulov" />
		<link rel="shortcut icon" href="http://blitzetcetera.org/favicon.ico" />
		<link rel="search" type="application/opensearchdescription+xml" href="http://blitzetcetera.org/opensearch_desc.php" title="Blitz Et Cetera (Русский)" />
		<title>Скрипты — Blitz Et Cetera</title>		<style type="text/css" media="screen,projection">/*<![CDATA[*/ @import "bvih5rde.css?63"; /*]]>*/</style>		<link rel="stylesheet" type="text/css" media="print" href="gcxktlm6.css?63" />		<link rel="stylesheet" type="text/css" media="handheld" href="zumsslq_.css?63" />		<!--[if lt IE 5.5000]><style type="text/css">@import "/skins/OfflineNew/IE50Fixes.css?63";</style><![endif]-->		<!--[if IE 5.5000]><style type="text/css">@import "/skins/OfflineNew/IE55Fixes.css?63";</style><![endif]-->		<!--[if IE 6]><style type="text/css">@import "/skins/OfflineNew/IE60Fixes.css?63";</style><![endif]-->		<!--[if IE 7]><style type="text/css">@import "/skins/OfflineNew/IE70Fixes.css?63";</style><![endif]-->		<!--[if lt IE 7]><script type="text/javascript" src="/skins/common/IEFixes.js?63"></script>		<meta http-equiv="imagetoolbar" content="no" /><![endif]-->		<script type= "text/javascript">/*<![CDATA[*/
var skin = "OfflineNew";
var stylepath = "/skins";
var wgArticlePath = "/index.php/$1";
var wgScriptPath = "";
var wgServer = "http://blitzetcetera.org/";
var wgCanonicalNamespace = "";
var wgCanonicalSpecialPageName = false;
var wgNamespaceNumber = 0;
var wgPageName = "Скрипты";
var wgTitle = "Скрипты";
var wgAction = "view";
var wgArticleId = "634";
var wgIsArticle = true;
var wgUserName = null;
var wgUserGroups = null;
var wgUserLanguage = "ru";
var wgContentLanguage = "ru";
var wgBreakFrames = false;
var wgCurRevisionId = "3567";
/*]]>*/</script>
		<script type="text/javascript" src="2nq-6cel.js?63"><!-- wikibits js --></script>		<script type="text/javascript" src="http://blitzetcetera.org/index.php?title=-&amp;action=raw&amp;gen=js"><!-- site js --></script>		<style type="text/css">/*<![CDATA[*/
@import "http://blitzetcetera.org/index.php?title=MediaWiki:Common.css&amp;usemsgcache=yes&amp;action=raw&amp;ctype=text/css&amp;smaxage=18000";
@import "http://blitzetcetera.org/index.php?title=MediaWiki:OfflineNew.css&amp;usemsgcache=yes&amp;action=raw&amp;ctype=text/css&amp;smaxage=18000";
@import "http://blitzetcetera.org/index.php?title=-&amp;action=raw&amp;gen=css&amp;maxage=18000";
/*]]>*/</style>		<!-- Head Scripts -->	</head><body  class="mediawiki ns-0 ltr page-Скрипты">	<div id="globalWrapper">	<div id="logocontainer">		<table align="center">		  <tr>				<td id="blitzetclogo">				</td>			</tr>		</table>	</div>	<div id="magbar">	Журнал о программированнии на языках Blitz3D, BlitzMax, BlitzPlus	</div>		<div id="column-content">	<div id="content">		<a name="top" id="top"></a>				<div id="bodyContent">		<table cellspacing=0 cellpadding=0 width=100%>			<tr>			  <td class="leftside">				</td>				<td class="sheetbody">					<h1 class="sheet">Скрипты</h1>			<h3 id="siteSub">Материал из Blitz Et Cetera.</h3>			<div id="contentSub"></div>			<!-- start content -->			<p>Скриптом (в переводе с английского - сценарий) принято называть программу на специализированно языке, встроенном в другую программу и соданом для ее нужд. В играх, например, скрипты обычно описывают диалоги (как в японских RPG), видеовставки (Turok 2) и другие события, происходящие по ходу игры и, в основном, не требующие вмешательства игрока. Бывают и скриптовые программы знакомства с игрой (Metal Heart), где программа "учит" игрока и он выполняет определенную последовательность действий
</p><p>В редакторах (напр. 3DS Max) скрипты используются в качестве возможности создавать программы для построения сложных объектов, а также в виде демонстрационных роликов к помощи.
</p>
<a name=".D0.A1.D0.BA.D1.80.D0.B8.D0.BF.D1.82_.D0.B2_RPG"></a><h2><span class="editsection">[<a href="http://blitzetcetera.org/index.php?title=%D0%A1%D0%BA%D1%80%D0%B8%D0%BF%D1%82%D1%8B&amp;action=edit&amp;section=1" title="Править секцию: Скрипт в RPG">править</a>]</span> <span class="mw-headline">Скрипт в RPG</span></h2>
<p>Итак, что нужно для создания скрипта? Прежде всего - список простейших действий, из которых будет состоять программа. Рассмотрим типичный для фэнтезийных РПГ сценарий:
</p>
<ul><li>Главный герой Леонард беседует со стражником
<ul><li>Стражник) Стой, кто идет!
</li><li>Леонард) Мое имя Леонард, я пришел из города Сэндворм сражаться с гигантскими пауками!
</li><li>Стражник) Леонард? Я слышал о тебе. Проходи к капитану дворцовой стражи, налево и по коридору 2-я дверь.
</li></ul>
</li><li>Стражники расступаются
</li><li>Леонард входит в замок
</li><li>В замке: Леонард идет к капитану стражи.
</li><li>Леонард беседует с капитаном стражи
<ul><li>Леонард) Здравствуйте.
</li><li>КС) Здравствуй. Тебя зовут Леонард, не так ли?
</li><li>Леонард) Да, я Леонард.
</li><li>КС) Мое имя Жан. Я слушаю тебя.
</li><li>Леонард) Я слышал, вы набираете людей для похода в горы, уничтожить гигантских пауков.
</li><li>КС) Да, эти пауки уже представляют угрозу.
</li><li>Леонард) Я хочу присоединиться к вам.
</li><li>КС) Хорошо, Леонард. Я наслышан о твоих подвигах, думаю, обойдемся без экзаменов. А пока, иди подзаправься. Завтра утром выходим.
</li></ul>
</li><li>Леонард уходит из комнаты, дверь закрывается, управление передается игроку.
</li></ul>
<p>Здесь можно выделить следующие моменты:
</p>
<ul><li>Текстовое окно с репликами персонажа
</li><li>Перемещение в заданную точку
</li><li>Смена тайлов (открыть дверь - закрыть дверь и т. д.)
</li></ul>
<p>Для каждого из них нужно выбрать команду и параметры, которые будут вводиться в скрипте:
</p>
<ul><li>Текстовое окно: SPEAK(№персонажа,текст)
</li><li>Перемещение: MOVE(кол-во_тайлов_по_горизонтали, по_вертикали)
</li><li>Смена тайлов: CHANGE (x,y,№нового_тайла)
</li></ul>
<p>Для программы понадобится вот эта полоска (вырезана из QB-игры Mysterious Song by DarkDread):
</p>
<div class="center"><div class="floatnone"><span><a href="http://blitzetcetera.org/index.php/%D0%98%D0%B7%D0%BE%D0%B1%D1%80%D0%B0%D0%B6%D0%B5%D0%BD%D0%B8%D0%B5:Script-Tiles.png" class="image" title=""><img alt="" longdesc="http://blitzetcetera.org/index.php/%D0%98%D0%B7%D0%BE%D0%B1%D1%80%D0%B0%D0%B6%D0%B5%D0%BD%D0%B8%D0%B5:Script-Tiles.png" src="okh6rm9i.png" width="240" height="20" /></a></span></div></div>
<div class="bb" style="font-family: monospace;background-color:#FFFFFF;border:1px dashed #CCCCCC;padding:10px;background-color:#225588;color:#FFFFFF;border:1px solid #003040;padding:10px;"><span style="color: #aaffff; font-weight: bold;">Graphics</span> <span style="color: #33ffdd;">640</span>,<span style="color: #33ffdd;">480</span>,<span style="color: #33ffdd;">32</span><br />
<p><br />
<span style="color: #ffee00">;Загрузка изображений тайлов (последняя - спрайт)</span><br />
<span style="color: #aaffff; font-weight: bold;">Global</span> tiles=<span style="color: #aaffff; font-weight: bold;">LoadAnimImage</span><span style=" ">&#40;</span><span style="color: #00ff66;">&quot;Script-Tiles.png&quot;</span>,<span style="color: #33ffdd;">20</span>,<span style="color: #33ffdd;">20</span>,<span style="color: #33ffdd;">0</span>,<span style="color: #33ffdd;">12</span><span style=" ">&#41;</span><br />
<span style="color: #ffee00">;Цвет маски - пурпурный</span><br />
<span style="color: #aaffff; font-weight: bold;">MaskImage</span> tiles,<span style="color: #33ffdd;">255</span>,<span style="color: #33ffdd;">0</span>,<span style="color: #33ffdd;">255</span><br />
<br />
<span style="color: #ffee00">;Буфер для тайловой карты</span><br />
<span style="color: #aaffff; font-weight: bold;">Global</span> buf=<span style="color: #aaffff; font-weight: bold;">CreateImage</span><span style=" ">&#40;</span><span style="color: #33ffdd;">640</span>,<span style="color: #33ffdd;">480</span><span style=" ">&#41;</span><br />
<span style="color: #aaffff; font-weight: bold;">Global</span> bufb=<span style="color: #aaffff; font-weight: bold;">ImageBuffer</span><span style=" ">&#40;</span>buf<span style=" ">&#41;</span><br />
<br />
<span style="color: #ffee00">;Координаты игрока, номер экрана</span><br />
<span style="color: #aaffff; font-weight: bold;">Global</span> px=<span style="color: #33ffdd;">16</span>,py=<span style="color: #33ffdd;">12</span>,sc=<span style="color: #33ffdd;">0</span><br />
<br />
<span style="color: #ffee00">;Занесение в память карт тайлов экранов</span><br />
<span style="color: #aaffff; font-weight: bold;">Dim</span> scr$<span style=" ">&#40;</span><span style="color: #33ffdd;">1</span>,<span style="color: #33ffdd;">19</span><span style=" ">&#41;</span><br />
<span style="color: #aaffff; font-weight: bold;">For</span> n1=<span style="color: #33ffdd;">0</span> <span style="color: #aaffff; font-weight: bold;">To</span> <span style="color: #33ffdd;">1</span><br />
&nbsp;<span style="color: #aaffff; font-weight: bold;">For</span> n2=<span style="color: #33ffdd;">0</span> <span style="color: #aaffff; font-weight: bold;">To</span> <span style="color: #33ffdd;">19</span><br />
&nbsp; <span style="color: #aaffff; font-weight: bold;">Read</span> scr$<span style=" ">&#40;</span>n1,n2<span style=" ">&#41;</span><br />
&nbsp;<span style="color: #aaffff; font-weight: bold;">Next</span><br />
<span style="color: #aaffff; font-weight: bold;">Next</span><br />
<br />
<span style="color: #aaffff; font-weight: bold;">SetBuffer</span> <span style="color: #aaffff; font-weight: bold;">BackBuffer</span><span style=" ">&#40;</span><span style=" ">&#41;</span><br />
<span style="color: #aaffff; font-weight: bold;">SetFont</span> <span style="color: #aaffff; font-weight: bold;">LoadFont</span><span style=" ">&#40;</span><span style="color: #00ff66;">&quot;Arial Cyr&quot;</span>,<span style="color: #33ffdd;">20</span>,<span style="color: #aaffff; font-weight: bold;">True</span><span style=" ">&#41;</span><br />
<span style="color: #ffee00">;Установка экрана номер 0</span><br />
setscr <span style="color: #33ffdd;">0</span><br />
<br />
<span style="color: #aaffff; font-weight: bold;">Repeat</span><br />
&nbsp;<span style="color: #ffee00">;Приращения, зависящие от нажатых клавиш</span><br />
&nbsp;dx=<span style="color: #aaffff; font-weight: bold;">KeyDown</span><span style=" ">&#40;</span><span style="color: #33ffdd;">205</span><span style=" ">&#41;</span>-<span style="color: #aaffff; font-weight: bold;">KeyDown</span><span style=" ">&#40;</span><span style="color: #33ffdd;">203</span><span style=" ">&#41;</span><br />
&nbsp;<span style="color: #aaffff; font-weight: bold;">If</span> dx=<span style="color: #33ffdd;">0</span> <span style="color: #aaffff; font-weight: bold;">Then</span> dy=<span style="color: #aaffff; font-weight: bold;">KeyDown</span><span style=" ">&#40;</span><span style="color: #33ffdd;">208</span><span style=" ">&#41;</span>-<span style="color: #aaffff; font-weight: bold;">KeyDown</span><span style=" ">&#40;</span><span style="color: #33ffdd;">200</span><span style=" ">&#41;</span> <span style="color: #aaffff; font-weight: bold;">Else</span> dy=<span style="color: #33ffdd;">0</span><br />
&nbsp;<span style="color: #ffee00">;Перемещение</span><br />
&nbsp;<span style="color: #aaffff; font-weight: bold;">If</span> dx&lt;&gt;<span style="color: #33ffdd;">0</span> <span style="color: #aaffff; font-weight: bold;">Or</span> dy&lt;&gt;<span style="color: #33ffdd;">0</span> <span style="color: #aaffff; font-weight: bold;">Then</span> move dx,dy<br />
&nbsp;<span style="color: #ffee00">;Пуск скрипта при нажатии пробела перед стражником</span><br />
&nbsp;<span style="color: #aaffff; font-weight: bold;">If</span> py&gt;<span style="color: #33ffdd;">0</span> <span style="color: #aaffff; font-weight: bold;">And</span> <span style="color: #aaffff; font-weight: bold;">KeyHit</span><span style=" ">&#40;</span><span style="color: #33ffdd;">57</span><span style=" ">&#41;</span> <span style="color: #aaffff; font-weight: bold;">Then</span> <span style="color: #aaffff; font-weight: bold;">If</span> land$<span style=" ">&#40;</span>px,py<span style="color: #33ffdd;">-1</span><span style=" ">&#41;</span>=<span style="color: #00ff66;">&quot;J&quot;</span> <span style="color: #aaffff; font-weight: bold;">Then</span> runscript<br />
<br />
<span style="color: #aaffff; font-weight: bold;">Until</span> <span style="color: #aaffff; font-weight: bold;">KeyHit</span><span style=" ">&#40;</span><span style="color: #33ffdd;">1</span><span style=" ">&#41;</span><br />
<br />
<span style="color: #aaffff; font-weight: bold;">WaitKey</span><br />
<br />
<span style="color: #aaffff; font-weight: bold;">Function</span> setscr<span style=" ">&#40;</span>n1<span style=" ">&#41;</span><br />
<span style="color: #ffee00">;Рисование тайлов в буфер тайловой карты</span><br />
<span style="color: #aaffff; font-weight: bold;">SetBuffer</span> bufb<br />
<span style="color: #aaffff; font-weight: bold;">For</span> n2=<span style="color: #33ffdd;">0</span> <span style="color: #aaffff; font-weight: bold;">To</span> <span style="color: #33ffdd;">19</span><br />
&nbsp;<span style="color: #aaffff; font-weight: bold;">For</span> n3=<span style="color: #33ffdd;">0</span> <span style="color: #aaffff; font-weight: bold;">To</span> <span style="color: #33ffdd;">31</span><br />
&nbsp; <span style="color: #aaffff; font-weight: bold;">DrawBlock</span> tiles,n3*<span style="color: #33ffdd;">20</span>,n2*<span style="color: #33ffdd;">20</span>,<span style="color: #aaffff; font-weight: bold;">Asc</span><span style=" ">&#40;</span><span style="color: #aaffff; font-weight: bold;">Mid</span>$<span style=" ">&#40;</span>scr$<span style=" ">&#40;</span>n1,n2<span style=" ">&#41;</span>,n3<span style="color: #33ffdd;">+1</span>,<span style="color: #33ffdd;">1</span><span style=" ">&#41;</span><span style=" ">&#41;</span><span style="color: #33ffdd;">-65</span><br />
&nbsp;<span style="color: #aaffff; font-weight: bold;">Next</span><br />
<span style="color: #aaffff; font-weight: bold;">Next</span><br />
<span style="color: #aaffff; font-weight: bold;">SetBuffer</span> <span style="color: #aaffff; font-weight: bold;">BackBuffer</span><span style=" ">&#40;</span><span style=" ">&#41;</span><br />
sc=n1<br />
drawbuf<br />
<span style="color: #aaffff; font-weight: bold;">End Function</span><br />
<br />
<span style="color: #aaffff; font-weight: bold;">Function</span> drawbuf<span style=" ">&#40;</span><span style=" ">&#41;</span><br />
<span style="color: #ffee00">;Реинициализация</span><br />
<span style="color: #aaffff; font-weight: bold;">DrawBlock</span> buf,<span style="color: #33ffdd;">0</span>,<span style="color: #33ffdd;">0</span><br />
<span style="color: #aaffff; font-weight: bold;">DrawImage</span> tiles,px*<span style="color: #33ffdd;">20</span>,py*<span style="color: #33ffdd;">20</span>,<span style="color: #33ffdd;">11</span><br />
<span style="color: #aaffff; font-weight: bold;">Flip</span><br />
<span style="color: #aaffff; font-weight: bold;">End Function</span><br />
<br />
<span style="color: #aaffff; font-weight: bold;">Function</span> move<span style=" ">&#40;</span>dx,dy<span style=" ">&#41;</span><br />
<span style="color: #ffee00">;Пресечение возможности выхода за границу экрана</span><br />
<span style="color: #aaffff; font-weight: bold;">If</span> dx+px&gt;=<span style="color: #33ffdd;">0</span> <span style="color: #aaffff; font-weight: bold;">And</span> dx+px=&lt;<span style="color: #33ffdd;">31</span> <span style="color: #aaffff; font-weight: bold;">And</span> dy+py&gt;=<span style="color: #33ffdd;">0</span> <span style="color: #aaffff; font-weight: bold;">And</span> dy+py&lt;=<span style="color: #33ffdd;">19</span> <span style="color: #aaffff; font-weight: bold;">Then</span><br />
&nbsp;<span style="color: #aaffff; font-weight: bold;">Select</span> land$<span style=" ">&#40;</span>px+dx,py+dy<span style=" ">&#41;</span><br />
&nbsp; <span style="color: #ffee00">;Можно ходить только по траве, полу и дороге</span><br />
&nbsp; <span style="color: #aaffff; font-weight: bold;">Case</span> <span style="color: #00ff66;">&quot;E&quot;</span>,<span style="color: #00ff66;">&quot;H&quot;</span>,<span style="color: #00ff66;">&quot;I&quot;</span><br />
&nbsp; &nbsp;px=px+dx<br />
&nbsp; &nbsp;py=py+dy<br />
&nbsp; &nbsp;<span style="color: #ffee00">;Перемещение между экранами</span><br />
&nbsp; &nbsp;<span style="color: #aaffff; font-weight: bold;">If</span> py=<span style="color: #33ffdd;">0</span> <span style="color: #aaffff; font-weight: bold;">And</span> sc=<span style="color: #33ffdd;">0</span> <span style="color: #aaffff; font-weight: bold;">Then</span><br />
&nbsp; &nbsp; py=<span style="color: #33ffdd;">18</span><br />
&nbsp; &nbsp; setscr <span style="color: #33ffdd;">1</span><br />
&nbsp; &nbsp;<span style="color: #aaffff; font-weight: bold;">ElseIf</span> py=<span style="color: #33ffdd;">19</span> <span style="color: #aaffff; font-weight: bold;">And</span> sc=<span style="color: #33ffdd;">1</span> <span style="color: #aaffff; font-weight: bold;">Then</span><br />
&nbsp; &nbsp; py=<span style="color: #33ffdd;">1</span><br />
&nbsp; &nbsp; setscr <span style="color: #33ffdd;">0</span><br />
&nbsp; &nbsp;<span style="color: #aaffff; font-weight: bold;">End</span> <span style="color: #aaffff; font-weight: bold;">If</span><br />
&nbsp; &nbsp;drawbuf<br />
&nbsp; &nbsp;<span style="color: #aaffff; font-weight: bold;">Delay</span> <span style="color: #33ffdd;">100</span><br />
&nbsp;<span style="color: #aaffff; font-weight: bold;">End Select</span><br />
<span style="color: #aaffff; font-weight: bold;">End</span> <span style="color: #aaffff; font-weight: bold;">If</span><br />
<span style="color: #aaffff; font-weight: bold;">End Function</span><br />
<br />
<span style="color: #ffee00">;Функция возвращающая номер тайла по координатам</span><br />
<span style="color: #aaffff; font-weight: bold;">Function</span> land$<span style=" ">&#40;</span>x,y<span style=" ">&#41;</span><br />
<span style="color: #aaffff; font-weight: bold;">Return</span> <span style="color: #aaffff; font-weight: bold;">Mid</span>$<span style=" ">&#40;</span>scr$<span style=" ">&#40;</span>sc,y<span style=" ">&#41;</span>,x<span style="color: #33ffdd;">+1</span>,<span style="color: #33ffdd;">1</span><span style=" ">&#41;</span><br />
<span style="color: #aaffff; font-weight: bold;">End Function</span><br />
<br />
<span style="color: #ffee00">;</span><br />
<span style="color: #aaffff; font-weight: bold;">Function</span> runscript<span style=" ">&#40;</span><span style=" ">&#41;</span><br />
<span style="color: #aaffff; font-weight: bold;">Restore</span> script<br />
<span style="color: #aaffff; font-weight: bold;">Repeat</span><br />
&nbsp;<span style="color: #aaffff; font-weight: bold;">Read</span> m$<br />
&nbsp;<span style="color: #aaffff; font-weight: bold;">If</span> m$=<span style="color: #00ff66;">&quot;&quot;</span> <span style="color: #aaffff; font-weight: bold;">Then</span> <span style="color: #aaffff; font-weight: bold;">Exit</span><br />
&nbsp;<span style="color: #ffee00">;Адреса разделителей в строке</span><br />
&nbsp;i1=<span style="color: #aaffff; font-weight: bold;">Instr</span><span style=" ">&#40;</span>m$,<span style="color: #00ff66;">&quot; &quot;</span><span style=" ">&#41;</span><br />
&nbsp;i2=<span style="color: #aaffff; font-weight: bold;">Instr</span><span style=" ">&#40;</span>m$,<span style="color: #00ff66;">&quot;/&quot;</span>,i1<span style="color: #33ffdd;">+1</span><span style=" ">&#41;</span><br />
&nbsp;i3=<span style="color: #aaffff; font-weight: bold;">Instr</span><span style=" ">&#40;</span>m$+<span style="color: #00ff66;">&quot;/&quot;</span>,<span style="color: #00ff66;">&quot;/&quot;</span>,i2<span style="color: #33ffdd;">+1</span><span style=" ">&#41;</span><br />
&nbsp;<span style="color: #ffee00">;Выделение имени команды</span><br />
&nbsp;cmd$=<span style="color: #aaffff; font-weight: bold;">Mid</span>$<span style=" ">&#40;</span>m$,<span style="color: #33ffdd;">1</span>,i1<span style="color: #33ffdd;">-1</span><span style=" ">&#41;</span><br />
&nbsp;<span style="color: #ffee00">;Разбиение строки на параметры</span><br />
&nbsp;par1=<span style="color: #aaffff; font-weight: bold;">Mid</span>$<span style=" ">&#40;</span>m$,i1<span style="color: #33ffdd;">+1</span>,i2-i1<span style="color: #33ffdd;">-1</span><span style=" ">&#41;</span><br />
&nbsp;par2$=<span style="color: #aaffff; font-weight: bold;">Mid</span>$<span style=" ">&#40;</span>m$,i2<span style="color: #33ffdd;">+1</span>,i3-i2<span style="color: #33ffdd;">-1</span><span style=" ">&#41;</span><br />
&nbsp;par3$=<span style="color: #aaffff; font-weight: bold;">Mid</span>$<span style=" ">&#40;</span>m$,i3<span style="color: #33ffdd;">+1</span><span style=" ">&#41;</span><br />
&nbsp;x=par1:y=par2$<br />
&nbsp;<span style="color: #ffee00">;Stop</span><br />
&nbsp;<span style="color: #aaffff; font-weight: bold;">Select</span> cmd$<br />
&nbsp; <span style="color: #aaffff; font-weight: bold;">Case</span> <span style="color: #00ff66;">&quot;SPEAK&quot;</span><br />
&nbsp; &nbsp;<span style="color: #ffee00">;Команда &quot;говорить&quot; выдает текст в окне</span><br />
&nbsp; &nbsp;Textwindow par1,par2$<br />
&nbsp; <span style="color: #aaffff; font-weight: bold;">Case</span> <span style="color: #00ff66;">&quot;MOVE&quot;</span><br />
&nbsp; &nbsp;<span style="color: #ffee00">;Команда &quot;переместиться&quot; перемещает игрока в заданную точку</span><br />
&nbsp; &nbsp;drawbuf<br />
&nbsp; &nbsp;<span style="color: #ffee00">;Сначала по горизонтали</span><br />
&nbsp; &nbsp;x=x-px<br />
&nbsp; &nbsp;<span style="color: #aaffff; font-weight: bold;">For</span> dx=<span style="color: #33ffdd;">1</span> <span style="color: #aaffff; font-weight: bold;">To</span> <span style="color: #aaffff; font-weight: bold;">Abs</span><span style=" ">&#40;</span>x<span style=" ">&#41;</span><br />
&nbsp; &nbsp; move <span style="color: #aaffff; font-weight: bold;">Sgn</span><span style=" ">&#40;</span>x<span style=" ">&#41;</span>,<span style="color: #33ffdd;">0</span><br />
&nbsp; &nbsp;<span style="color: #aaffff; font-weight: bold;">Next</span><br />
&nbsp; &nbsp;<span style="color: #ffee00">;Затем по вертикали.</span><br />
&nbsp; &nbsp;y=y-py<br />
&nbsp; &nbsp;<span style="color: #aaffff; font-weight: bold;">For</span> dy=<span style="color: #33ffdd;">1</span> <span style="color: #aaffff; font-weight: bold;">To</span> <span style="color: #aaffff; font-weight: bold;">Abs</span><span style=" ">&#40;</span>y<span style=" ">&#41;</span><br />
&nbsp; &nbsp; move <span style="color: #33ffdd;">0</span>,<span style="color: #aaffff; font-weight: bold;">Sgn</span><span style=" ">&#40;</span>y<span style=" ">&#41;</span><br />
&nbsp; &nbsp;<span style="color: #aaffff; font-weight: bold;">Next</span><br />
&nbsp; <span style="color: #aaffff; font-weight: bold;">Case</span> <span style="color: #00ff66;">&quot;CHANGE&quot;</span><br />
&nbsp; &nbsp;<span style="color: #ffee00">;Команда &quot;изменить&quot; изменяет тайл с заданными координатами</span><br />
&nbsp; &nbsp;<span style="color: #ffee00">;Рисование тайла в буфере тайловой карты</span><br />
&nbsp; &nbsp;<span style="color: #aaffff; font-weight: bold;">SetBuffer</span> bufb<br />
&nbsp; &nbsp;<span style="color: #aaffff; font-weight: bold;">DrawBlock</span> tiles,x*<span style="color: #33ffdd;">20</span>,y*<span style="color: #33ffdd;">20</span>,<span style="color: #aaffff; font-weight: bold;">Asc</span><span style=" ">&#40;</span>par3$<span style=" ">&#41;</span><span style="color: #33ffdd;">-65</span><br />
&nbsp; &nbsp;<span style="color: #aaffff; font-weight: bold;">SetBuffer</span> <span style="color: #aaffff; font-weight: bold;">BackBuffer</span><span style=" ">&#40;</span><span style=" ">&#41;</span><br />
&nbsp; &nbsp;<span style="color: #ffee00">;Изменение карты тайлов - замена символа в строке</span><br />
&nbsp; &nbsp;scr$<span style=" ">&#40;</span>sc,y<span style=" ">&#41;</span>=<span style="color: #aaffff; font-weight: bold;">Mid</span>$<span style=" ">&#40;</span>scr$<span style=" ">&#40;</span>sc,y<span style=" ">&#41;</span>,<span style="color: #33ffdd;">1</span>,x<span style=" ">&#41;</span>+par3$+<span style="color: #aaffff; font-weight: bold;">Mid</span>$<span style=" ">&#40;</span>scr$<span style=" ">&#40;</span>sc,y<span style=" ">&#41;</span>,x<span style="color: #33ffdd;">+2</span><span style=" ">&#41;</span><br />
&nbsp; <span style="color: #aaffff; font-weight: bold;">Default</span><br />
&nbsp; &nbsp;<span style="color: #ffee00">;Сообщение об ошибке (при неизвестной команде)</span><br />
&nbsp; &nbsp;<span style="color: #aaffff; font-weight: bold;">DebugLog</span> <span style="color: #00ff66;">&quot;Unknow command '&quot;</span>+cmd$+<span style="color: #00ff66;">&quot;'&quot;</span><br />
&nbsp; &nbsp;<span style="color: #aaffff; font-weight: bold;">Stop</span><br />
&nbsp;<span style="color: #aaffff; font-weight: bold;">End Select</span><br />
<span style="color: #aaffff; font-weight: bold;">Forever</span><br />
drawbuf<br />
<span style="color: #aaffff; font-weight: bold;">End Function</span><br />
<br />
<span style="color: #aaffff; font-weight: bold;">Function</span> Textwindow<span style=" ">&#40;</span>v,txt$<span style=" ">&#41;</span><br />
<span style="color: #ffee00">;Окно текста</span><br />
<span style="color: #aaffff; font-weight: bold;">FlushKeys</span><br />
drawbuf<br />
<span style="color: #ffee00">;Рисование окна</span><br />
<span style="color: #aaffff; font-weight: bold;">Color</span> <span style="color: #33ffdd;">255</span>,<span style="color: #33ffdd;">255</span>,<span style="color: #33ffdd;">255</span><br />
<span style="color: #aaffff; font-weight: bold;">Rect</span> <span style="color: #33ffdd;">0</span>,<span style="color: #33ffdd;">400</span>,<span style="color: #33ffdd;">640</span>,<span style="color: #33ffdd;">80</span><br />
<span style="color: #aaffff; font-weight: bold;">Color</span> <span style="color: #33ffdd;">128</span>,<span style="color: #33ffdd;">128</span>,<span style="color: #33ffdd;">128</span><br />
<span style="color: #aaffff; font-weight: bold;">Rect</span> <span style="color: #33ffdd;">3</span>,<span style="color: #33ffdd;">403</span>,<span style="color: #33ffdd;">637</span>,<span style="color: #33ffdd;">77</span><br />
<span style="color: #aaffff; font-weight: bold;">Color</span> <span style="color: #33ffdd;">192</span>,<span style="color: #33ffdd;">192</span>,<span style="color: #33ffdd;">192</span><br />
<span style="color: #aaffff; font-weight: bold;">Rect</span> <span style="color: #33ffdd;">2</span>,<span style="color: #33ffdd;">402</span>,<span style="color: #33ffdd;">636</span>,<span style="color: #33ffdd;">76</span><br />
<span style="color: #ffee00">;Рисование персонажа, в данный момент говорящего</span><br />
<span style="color: #aaffff; font-weight: bold;">DrawImage</span> tiles,<span style="color: #33ffdd;">10</span>,<span style="color: #33ffdd;">410</span>,<span style="color: #33ffdd;">9</span>+v<br />
<span style="color: #aaffff; font-weight: bold;">Color</span> <span style="color: #33ffdd;">0</span>,<span style="color: #33ffdd;">0</span>,<span style="color: #33ffdd;">0</span><br />
y=<span style="color: #33ffdd;">410</span><br />
<br />
<span style="color: #aaffff; font-weight: bold;">For</span> n=<span style="color: #33ffdd;">1</span> <span style="color: #aaffff; font-weight: bold;">To</span> <span style="color: #aaffff; font-weight: bold;">Len</span><span style=" ">&#40;</span>txt$<span style=" ">&#41;</span><br />
&nbsp;k$=<span style="color: #aaffff; font-weight: bold;">Mid</span>$<span style=" ">&#40;</span>txt$,n,<span style="color: #33ffdd;">1</span><span style=" ">&#41;</span><br />
&nbsp;<span style="color: #ffee00">;Пробел - начало нового слова</span><br />
&nbsp;<span style="color: #aaffff; font-weight: bold;">If</span> k$=<span style="color: #00ff66;">&quot; &quot;</span> <span style="color: #aaffff; font-weight: bold;">Then</span><br />
&nbsp; <span style="color: #ffee00">;Если длина куска фразы с новым словом больше допустимой - переход на новую строку</span><br />
&nbsp; <span style="color: #aaffff; font-weight: bold;">If</span> <span style="color: #aaffff; font-weight: bold;">StringWidth</span><span style=" ">&#40;</span>m$+w$<span style=" ">&#41;</span>&gt;<span style="color: #33ffdd;">490</span> <span style="color: #aaffff; font-weight: bold;">Then</span> <br />
&nbsp; &nbsp;<span style="color: #aaffff; font-weight: bold;">Text</span> <span style="color: #33ffdd;">40</span>,y,m$<br />
&nbsp; &nbsp;y=y<span style="color: #33ffdd;">+20</span><br />
&nbsp; &nbsp;m$=w$<br />
&nbsp; <span style="color: #aaffff; font-weight: bold;">Else</span><br />
&nbsp; &nbsp;<span style="color: #ffee00">;Иначе - прибавить слово к фразе</span><br />
&nbsp; &nbsp;m$=m$+<span style="color: #00ff66;">&quot; &quot;</span>+w$<br />
&nbsp; <span style="color: #aaffff; font-weight: bold;">End</span> <span style="color: #aaffff; font-weight: bold;">If</span><br />
&nbsp; w$=<span style="color: #00ff66;">&quot;&quot;</span><br />
&nbsp;<span style="color: #aaffff; font-weight: bold;">Else</span><br />
&nbsp; w$=w$+k$<br />
&nbsp;<span style="color: #aaffff; font-weight: bold;">End</span> <span style="color: #aaffff; font-weight: bold;">If</span><br />
<span style="color: #aaffff; font-weight: bold;">Next</span><br />
<span style="color: #ffee00">;Печать остатка</span><br />
<span style="color: #aaffff; font-weight: bold;">Text</span> <span style="color: #33ffdd;">40</span>,y,m$+<span style="color: #00ff66;">&quot; &quot;</span>+w$<br />
<span style="color: #aaffff; font-weight: bold;">Flip</span><br />
<span style="color: #aaffff; font-weight: bold;">WaitKey</span><br />
<span style="color: #aaffff; font-weight: bold;">End Function</span><br />
<br />
<span style="color: #ffee00">;Карты</span><br />
<span style="color: #aaffff; font-weight: bold;">Data</span> <span style="color: #00ff66;">&quot;AAAAAAAAAAAAAAAEEAAAAAAAAAAAAAAA&quot;</span><br />
<span style="color: #aaffff; font-weight: bold;">Data</span> <span style="color: #00ff66;">&quot;BBBBBBBBBBBBBBAEEABBBBBBBBBBBBBB&quot;</span><br />
<span style="color: #aaffff; font-weight: bold;">Data</span> <span style="color: #00ff66;">&quot;FFFFFFFFFFFFFFBDDBFFFFFFFFFFFFFF&quot;</span><br />
<span style="color: #aaffff; font-weight: bold;">Data</span> <span style="color: #00ff66;">&quot;GGGGGGGGGGGGGGGIIGGGGGGGGGGGGGGG&quot;</span><br />
<span style="color: #aaffff; font-weight: bold;">Data</span> <span style="color: #00ff66;">&quot;GGGGGGGGGGGGGGGIIGGGGGGGGGGGGGGG&quot;</span><br />
<span style="color: #aaffff; font-weight: bold;">Data</span> <span style="color: #00ff66;">&quot;GGGGGGGGGGGGGGGIIGGGGGGGGGGGGGGG&quot;</span><br />
<span style="color: #aaffff; font-weight: bold;">Data</span> <span style="color: #00ff66;">&quot;GGGGGGGGGGGGGGGIIGGGGGGGGGGGGGGG&quot;</span><br />
<span style="color: #aaffff; font-weight: bold;">Data</span> <span style="color: #00ff66;">&quot;HHHHHHHHHHHHHHJJJJHHHHHHHHHHHHHH&quot;</span><br />
<span style="color: #aaffff; font-weight: bold;">Data</span> <span style="color: #00ff66;">&quot;HHHHHHHHHHHHHHJHHJHHHHHHHHHHHHHH&quot;</span><br />
<span style="color: #aaffff; font-weight: bold;">Data</span> <span style="color: #00ff66;">&quot;HHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHH&quot;</span><br />
<span style="color: #aaffff; font-weight: bold;">Data</span> <span style="color: #00ff66;">&quot;HHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHH&quot;</span><br />
<span style="color: #aaffff; font-weight: bold;">Data</span> <span style="color: #00ff66;">&quot;HHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHH&quot;</span><br />
<span style="color: #aaffff; font-weight: bold;">Data</span> <span style="color: #00ff66;">&quot;HHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHH&quot;</span><br />
<span style="color: #aaffff; font-weight: bold;">Data</span> <span style="color: #00ff66;">&quot;HHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHH&quot;</span><br />
<span style="color: #aaffff; font-weight: bold;">Data</span> <span style="color: #00ff66;">&quot;HHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHH&quot;</span><br />
<span style="color: #aaffff; font-weight: bold;">Data</span> <span style="color: #00ff66;">&quot;HHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHH&quot;</span><br />
<span style="color: #aaffff; font-weight: bold;">Data</span> <span style="color: #00ff66;">&quot;HHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHH&quot;</span><br />
<span style="color: #aaffff; font-weight: bold;">Data</span> <span style="color: #00ff66;">&quot;HHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHH&quot;</span><br />
<span style="color: #aaffff; font-weight: bold;">Data</span> <span style="color: #00ff66;">&quot;HHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHH&quot;</span><br />
<span style="color: #aaffff; font-weight: bold;">Data</span> <span style="color: #00ff66;">&quot;HHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHH&quot;</span><br />
<br />
<span style="color: #aaffff; font-weight: bold;">Data</span> <span style="color: #00ff66;">&quot;AAAAAAAAAAAAAAAEEAAAAAAAAAAAAAAA&quot;</span><br />
<span style="color: #aaffff; font-weight: bold;">Data</span> <span style="color: #00ff66;">&quot;BCBBBCBBBCBBBCBEEBCBBBCBBBCBBBCB&quot;</span><br />
<span style="color: #aaffff; font-weight: bold;">Data</span> <span style="color: #00ff66;">&quot;EEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEE&quot;</span><br />
<span style="color: #aaffff; font-weight: bold;">Data</span> <span style="color: #00ff66;">&quot;EEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEE&quot;</span><br />
<span style="color: #aaffff; font-weight: bold;">Data</span> <span style="color: #00ff66;">&quot;AAAAAEAAAAAEAAAEEAAAEAAAAAEAAAAA&quot;</span><br />
<span style="color: #aaffff; font-weight: bold;">Data</span> <span style="color: #00ff66;">&quot;BBABBDBBABBDBBAEEABBDBBABBDBBAEE&quot;</span><br />
<span style="color: #aaffff; font-weight: bold;">Data</span> <span style="color: #00ff66;">&quot;EEAEEEEEAEEEEEAEEAEEEEEAEEEEEAEE&quot;</span><br />
<span style="color: #aaffff; font-weight: bold;">Data</span> <span style="color: #00ff66;">&quot;EEAEEEEEAEEEEEAEEAEEEEEAEEEEEAEE&quot;</span><br />
<span style="color: #aaffff; font-weight: bold;">Data</span> <span style="color: #00ff66;">&quot;EEAEEEEEAEEEEEAEEAEEEEEAEEEEEAEE&quot;</span><br />
<span style="color: #aaffff; font-weight: bold;">Data</span> <span style="color: #00ff66;">&quot;AAAAAAAAAAAAAAAEEAAAAAAAAAAAAAAA&quot;</span><br />
<span style="color: #aaffff; font-weight: bold;">Data</span> <span style="color: #00ff66;">&quot;CBABCBCBABCBCBAEEABCBCBABCBBCABC&quot;</span><br />
<span style="color: #aaffff; font-weight: bold;">Data</span> <span style="color: #00ff66;">&quot;EEAEEEEEAEEEEEAEEAEEEEEAEEEEEAEE&quot;</span><br />
<span style="color: #aaffff; font-weight: bold;">Data</span> <span style="color: #00ff66;">&quot;EEAEEKEEAEEEEEAEEAEEEEEAEEEEEAEE&quot;</span><br />
<span style="color: #aaffff; font-weight: bold;">Data</span> <span style="color: #00ff66;">&quot;EEAEEEEEAEEEEEAEEAEEEEEAEEEEEAEE&quot;</span><br />
<span style="color: #aaffff; font-weight: bold;">Data</span> <span style="color: #00ff66;">&quot;EEAEEEEEAEEEEEAEEAEEEEEAEEEEEAEE&quot;</span><br />
<span style="color: #aaffff; font-weight: bold;">Data</span> <span style="color: #00ff66;">&quot;AAAAAEAAAAAEAAAEEAAAEAAAAAEAAAAA&quot;</span><br />
<span style="color: #aaffff; font-weight: bold;">Data</span> <span style="color: #00ff66;">&quot;BBCBBDBBCBBDBCBEEBCBDBBCBBDBBCBB&quot;</span><br />
<span style="color: #aaffff; font-weight: bold;">Data</span> <span style="color: #00ff66;">&quot;EEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEE&quot;</span><br />
<span style="color: #aaffff; font-weight: bold;">Data</span> <span style="color: #00ff66;">&quot;AAAAAAAAAAAAAAAEEAAAAAAAAAAAAAAA&quot;</span><br />
<span style="color: #aaffff; font-weight: bold;">Data</span> <span style="color: #00ff66;">&quot;BBBBBBBBBBBBBBAEEABBBBBBBBBBBBBB&quot;</span><br />
<br />
<span style="color: #ffee00">;Данные скрипта</span><br />
.script<br />
<span style="color: #aaffff; font-weight: bold;">Data</span> <span style="color: #00ff66;">&quot;SPEAK 0/Стой, кто идет!&quot;</span><br />
<span style="color: #aaffff; font-weight: bold;">Data</span> <span style="color: #00ff66;">&quot;SPEAK 2/Мое имя Леонард, я пришел из города Сэндворм сражаться с гигантскими пауками!&quot;</span><br />
<span style="color: #aaffff; font-weight: bold;">Data</span> <span style="color: #00ff66;">&quot;SPEAK 0/Леонард? Я слышал о тебе. Проходи к капитану дворцовой стражи, налево и по коридору 2-я дверь.&quot;</span><br />
<span style="color: #aaffff; font-weight: bold;">Data</span> <span style="color: #00ff66;">&quot;CHANGE 15/7/H&quot;</span><br />
<span style="color: #aaffff; font-weight: bold;">Data</span> <span style="color: #00ff66;">&quot;CHANGE 16/7/H&quot;</span><br />
<span style="color: #aaffff; font-weight: bold;">Data</span> <span style="color: #00ff66;">&quot;CHANGE 13/7/J&quot;</span><br />
<span style="color: #aaffff; font-weight: bold;">Data</span> <span style="color: #00ff66;">&quot;CHANGE 18/7/J&quot;</span><br />
<span style="color: #aaffff; font-weight: bold;">Data</span> <span style="color: #00ff66;">&quot;CHANGE 15/2/E&quot;</span><br />
<span style="color: #aaffff; font-weight: bold;">Data</span> <span style="color: #00ff66;">&quot;CHANGE 16/2/E&quot;</span><br />
<span style="color: #aaffff; font-weight: bold;">Data</span> <span style="color: #00ff66;">&quot;MOVE 16/1&quot;</span><br />
<span style="color: #aaffff; font-weight: bold;">Data</span> <span style="color: #00ff66;">&quot;CHANGE 15/2/D&quot;</span><br />
<span style="color: #aaffff; font-weight: bold;">Data</span> <span style="color: #00ff66;">&quot;CHANGE 16/2/D&quot;</span><br />
<span style="color: #aaffff; font-weight: bold;">Data</span> <span style="color: #00ff66;">&quot;MOVE 16/0&quot;</span><br />
<span style="color: #aaffff; font-weight: bold;">Data</span> <span style="color: #00ff66;">&quot;MOVE 16/17&quot;</span><br />
<span style="color: #aaffff; font-weight: bold;">Data</span> <span style="color: #00ff66;">&quot;MOVE 5/17&quot;</span><br />
<span style="color: #aaffff; font-weight: bold;">Data</span> <span style="color: #00ff66;">&quot;CHANGE 5/16/E&quot;</span><br />
<span style="color: #aaffff; font-weight: bold;">Data</span> <span style="color: #00ff66;">&quot;MOVE 5/13&quot;</span><br />
<span style="color: #aaffff; font-weight: bold;">Data</span> <span style="color: #00ff66;">&quot;SPEAK 2/Здравствуйте.&quot;</span><br />
<span style="color: #aaffff; font-weight: bold;">Data</span> <span style="color: #00ff66;">&quot;SPEAK 1/Здравствуй. Тебя зовут Леонард, не так ли?&quot;</span><br />
<span style="color: #aaffff; font-weight: bold;">Data</span> <span style="color: #00ff66;">&quot;SPEAK 2/Да, я Леонард.&quot;</span><br />
<span style="color: #aaffff; font-weight: bold;">Data</span> <span style="color: #00ff66;">&quot;SPEAK 1/Мое имя Жан. Я слушаю тебя.&quot;</span><br />
<span style="color: #aaffff; font-weight: bold;">Data</span> <span style="color: #00ff66;">&quot;SPEAK 2/Я слышал, вы набираете людей для похода в горы, уничтожить гигантских пауков.&quot;</span><br />
<span style="color: #aaffff; font-weight: bold;">Data</span> <span style="color: #00ff66;">&quot;SPEAK 1/Да, эти пауки уже представляют угрозу.&quot;</span><br />
<span style="color: #aaffff; font-weight: bold;">Data</span> <span style="color: #00ff66;">&quot;SPEAK 2/Я хочу присоединиться к вам.&quot;</span><br />
<span style="color: #aaffff; font-weight: bold;">Data</span> <span style="color: #00ff66;">&quot;SPEAK 1/Хорошо, Леонард. Я наслышан о твоих подвигах, думаю, обойдемся без экзаменов.<br />
Data &quot;</span>SPEAK <span style="color: #33ffdd;">1</span>/А пока, иди подзаправься. Завтра утром выходим.<span style="color: #00ff66;">&quot;<br />
Data &quot;</span>MOVE <span style="color: #33ffdd;">5</span>/<span style="color: #33ffdd;">17</span><span style="color: #00ff66;">&quot;<br />
Data &quot;</span>CHANGE <span style="color: #33ffdd;">5</span>/<span style="color: #33ffdd;">16</span>/D<span style="color: #00ff66;">&quot;<br />
</p>
<dl><dt>Пустая строка - конец скрипта<br />
</dt></dl>
Data &quot;</span><span style="color: #00ff66;">&quot;</span></div>
<p>В программе также показано, как сделать перемещение по  тайловой карте и между экранами и текстовое окно с разбивкой строк.
</p><p>Можно снабдить скриптовый движок дополнительными возможностями - добавить поддержку управляющих кодов. К примеру, нужно, чтобы часть текста выводилась жирным шрифтом. Пусть такой текст будет окружен решетками (#), вот пример: "Для битвы с пауками, тебе нужно #особое# оружие". Вывод на экран реализуется так: строка побуквенно выводится и каждая встреченная решетка переключает флаг (переменную, которая может принимать значения 0-False и 1-True) жирного шрифта (bold=1-bold). Если флаг равен единице - идет печать жирным шрифтом, иначе - обычным. Можно вводить и теги (как в HTML), открывающие и закрывающие: "Для битвы с пауками, тебе нужно <b>особое</b> оружие". Реализация тегов несколько более сложна, зато скрипт удобнее читать.
</p><p>Еще небольшое дополнение: если вы пользуетесь оператором DATA для хранения скрипта и хотели бы использовать кавычки, то можно вместо кавычек использовать апостроф, а потом заменять его командой m$=Replace$(m$,"'",chr$(34)).
</p>
<a name=".D0.A1.D0.BA.D1.80.D0.B8.D0.BF.D1.82_.D1.83.D1.87.D0.B5.D0.B1.D0.BD.D0.B8.D0.BA.D0.B0"></a><h2><span class="editsection">[<a href="http://blitzetcetera.org/index.php?title=%D0%A1%D0%BA%D1%80%D0%B8%D0%BF%D1%82%D1%8B&amp;action=edit&amp;section=2" title="Править секцию: Скрипт учебника">править</a>]</span> <span class="mw-headline">Скрипт учебника</span></h2>
<p>Пусть дана небольшая программа - просмотровщик трехмерных фигур и нужно сделать цикл уроков, показывающий как с ней работать. Можно, конечно, сделать html-справку, но она будет не так наглядна, как сценарий учебника, где с помощью подсказок пользователь сам осваивает программу. Скрипт в примере поддерживает 3 типа команд:
</p>
<ul><li>Вывод текста на экран
</li><li>Ожидание события
</li><li>Ожидание нажатия клавиши
</li></ul>
<p>При ожидании события, когда выполняется какое-либо действие, меняется переменная события и, если ее значение равно заданному в скрипте номеру, то скрипт выполняется дальше, иначе - приостанавливается.
</p>
<div class="bb" style="font-family: monospace;background-color:#FFFFFF;border:1px dashed #CCCCCC;padding:10px;background-color:#225588;color:#FFFFFF;border:1px solid #003040;padding:10px;"><span style="color: #aaffff; font-weight: bold;">Graphics3D</span> <span style="color: #33ffdd;">640</span>,<span style="color: #33ffdd;">480</span><br />
<p><br />
cam=<span style="color: #aaffff; font-weight: bold;">CreateCamera</span><span style=" ">&#40;</span><span style=" ">&#41;</span><br />
<span style="color: #aaffff; font-weight: bold;">PositionEntity</span> cam,<span style="color: #33ffdd;">0</span>,<span style="color: #33ffdd;">0</span>,<span style="color: #33ffdd;">-3</span><br />
<span style="color: #aaffff; font-weight: bold;">RotateEntity</span> <span style="color: #aaffff; font-weight: bold;">CreateLight</span><span style=" ">&#40;</span><span style=" ">&#41;</span>,<span style="color: #33ffdd;">45</span>,<span style="color: #33ffdd;">0</span>,<span style="color: #33ffdd;">45</span><br />
<br />
<span style="color: #ffee00">;Адрес, номер и детализация фигуры</span><br />
<span style="color: #aaffff; font-weight: bold;">Global</span> m,et=<span style="color: #33ffdd;">1</span>,det=<span style="color: #33ffdd;">10</span><br />
<span style="color: #ffee00">;Цвет фигуры</span><br />
<span style="color: #aaffff; font-weight: bold;">Global</span> cr=<span style="color: #33ffdd;">255</span>,cg=<span style="color: #33ffdd;">255</span>,cb=<span style="color: #33ffdd;">255</span><br />
<span style="color: #ffee00">;Создание фигуры</span><br />
recreate<br />
<br />
<span style="color: #aaffff; font-weight: bold;">CameraProject</span> cam,<span style="color: #33ffdd;">0</span>,<span style="color: #33ffdd;">0</span>,<span style="color: #33ffdd;">0</span><br />
<br />
<span style="color: #ffee00">;Вычисление приращения по осям X и Y</span><br />
d#=<span style="color: #aaffff; font-weight: bold;">ProjectedX</span><span style=" ">&#40;</span><span style=" ">&#41;</span><br />
<span style="color: #aaffff; font-weight: bold;">CameraProject</span> cam,<span style="color: #33ffdd;">1</span>,<span style="color: #33ffdd;">0</span>,<span style="color: #33ffdd;">0</span><br />
d#=<span style="color: #33ffdd;">1.0</span>/<span style=" ">&#40;</span><span style="color: #aaffff; font-weight: bold;">ProjectedX</span><span style=" ">&#40;</span><span style=" ">&#41;</span>-d#<span style=" ">&#41;</span><br />
esc#=<span style="color: #33ffdd;">1.0</span><br />
<br />
<span style="color: #ffee00">;Загрузка в память команд урока</span><br />
<span style="color: #aaffff; font-weight: bold;">Dim</span> cmd$<span style=" ">&#40;</span><span style="color: #33ffdd;">18</span>,<span style="color: #33ffdd;">1</span><span style=" ">&#41;</span><br />
<span style="color: #aaffff; font-weight: bold;">For</span> n=<span style="color: #33ffdd;">0</span> <span style="color: #aaffff; font-weight: bold;">To</span> <span style="color: #33ffdd;">17</span><br />
&nbsp;<span style="color: #aaffff; font-weight: bold;">Read</span> cmd$<span style=" ">&#40;</span>n,<span style="color: #33ffdd;">0</span><span style=" ">&#41;</span>,cmd$<span style=" ">&#40;</span>n,<span style="color: #33ffdd;">1</span><span style=" ">&#41;</span><br />
<span style="color: #aaffff; font-weight: bold;">Next</span><br />
<br />
<span style="color: #aaffff; font-weight: bold;">SetFont</span> <span style="color: #aaffff; font-weight: bold;">LoadFont</span><span style=" ">&#40;</span><span style="color: #00ff66;">&quot;Arial Cyr&quot;</span>,<span style="color: #33ffdd;">14</span><span style=" ">&#41;</span><br />
<span style="color: #aaffff; font-weight: bold;">SetBuffer</span> <span style="color: #aaffff; font-weight: bold;">BackBuffer</span><span style=" ">&#40;</span><span style=" ">&#41;</span><br />
<br />
<span style="color: #aaffff; font-weight: bold;">Repeat</span><br />
&nbsp;<span style="color: #ffee00">;Вычисление приращений значений для мыши</span><br />
&nbsp;dx#=<span style="color: #aaffff; font-weight: bold;">MouseX</span><span style=" ">&#40;</span><span style=" ">&#41;</span>-odx#<br />
&nbsp;dy#=ody#-<span style="color: #aaffff; font-weight: bold;">MouseY</span><span style=" ">&#40;</span><span style=" ">&#41;</span><br />
&nbsp;dmz=<span style="color: #aaffff; font-weight: bold;">MouseZ</span><span style=" ">&#40;</span><span style=" ">&#41;</span>-mz<br />
&nbsp;event=<span style="color: #33ffdd;">0</span><br />
<br />
&nbsp;<span style="color: #aaffff; font-weight: bold;">If</span> <span style="color: #aaffff; font-weight: bold;">MouseDown</span><span style=" ">&#40;</span><span style="color: #33ffdd;">1</span><span style=" ">&#41;</span> <span style="color: #aaffff; font-weight: bold;">Then</span><br />
&nbsp; <span style="color: #ffee00">;Перемещение фигуры (событие №1)</span><br />
&nbsp; ex#=ex#+d#*dx#<br />
&nbsp; ey#=ey#+d#*dy#<br />
&nbsp; event=<span style="color: #33ffdd;">1</span><br />
&nbsp;<span style="color: #aaffff; font-weight: bold;">ElseIf</span> <span style="color: #aaffff; font-weight: bold;">MouseDown</span><span style=" ">&#40;</span><span style="color: #33ffdd;">2</span><span style=" ">&#41;</span> <span style="color: #aaffff; font-weight: bold;">Then</span><br />
&nbsp; <span style="color: #ffee00">;Вращение фигуры (событие №2)</span><br />
&nbsp; exang#=exang#+dx#<br />
&nbsp; eyang#=eyang#+dy#<br />
&nbsp; event=<span style="color: #33ffdd;">2</span><br />
&nbsp;<span style="color: #aaffff; font-weight: bold;">ElseIf</span> <span style="color: #aaffff; font-weight: bold;">MouseDown</span><span style=" ">&#40;</span><span style="color: #33ffdd;">3</span><span style=" ">&#41;</span> <span style="color: #aaffff; font-weight: bold;">Then</span><br />
&nbsp; <span style="color: #ffee00">;Масштабирование фигуры (событие №3)</span><br />
&nbsp; esc#=esc#*<span style="color: #33ffdd;">1.01</span>^dy#<br />
&nbsp; event=<span style="color: #33ffdd;">3</span><br />
&nbsp;<span style="color: #aaffff; font-weight: bold;">ElseIf</span> dmz&lt;&gt;<span style="color: #33ffdd;">0</span> <span style="color: #aaffff; font-weight: bold;">Then</span><br />
&nbsp; <span style="color: #aaffff; font-weight: bold;">If</span> det+dmz&gt;<span style="color: #33ffdd;">2</span> <span style="color: #aaffff; font-weight: bold;">And</span> det+dmz&lt;<span style="color: #33ffdd;">20</span> <span style="color: #aaffff; font-weight: bold;">Then</span><br />
&nbsp; &nbsp;<span style="color: #ffee00">;Изменение детализации (событие №6)</span><br />
&nbsp; &nbsp;det=det+dmz<br />
&nbsp; &nbsp;recreate<br />
&nbsp; &nbsp;event=<span style="color: #33ffdd;">6</span><br />
&nbsp; <span style="color: #aaffff; font-weight: bold;">End</span> <span style="color: #aaffff; font-weight: bold;">If</span><br />
&nbsp; mz=<span style="color: #aaffff; font-weight: bold;">MouseZ</span><span style=" ">&#40;</span><span style=" ">&#41;</span><br />
&nbsp;<span style="color: #aaffff; font-weight: bold;">Else</span><br />
&nbsp; mb=<span style="color: #33ffdd;">0</span><br />
&nbsp;<span style="color: #aaffff; font-weight: bold;">End</span> <span style="color: #aaffff; font-weight: bold;">If</span><br />
<br />
&nbsp;odx#=<span style="color: #aaffff; font-weight: bold;">MouseX</span><span style=" ">&#40;</span><span style=" ">&#41;</span><br />
&nbsp;ody#=<span style="color: #aaffff; font-weight: bold;">MouseY</span><span style=" ">&#40;</span><span style=" ">&#41;</span><br />
<br />
&nbsp;<span style="color: #ffee00">;Обработка нажатий клавиш</span><br />
&nbsp;i=<span style="color: #aaffff; font-weight: bold;">GetKey</span><span style=" ">&#40;</span><span style=" ">&#41;</span><br />
&nbsp;<span style="color: #aaffff; font-weight: bold;">If</span> i&gt;=<span style="color: #33ffdd;">49</span> <span style="color: #aaffff; font-weight: bold;">And</span> i&lt;=<span style="color: #33ffdd;">52</span> <span style="color: #aaffff; font-weight: bold;">Then</span><br />
&nbsp; <span style="color: #ffee00">;Изменение типа фигуры (событие №4)</span><br />
&nbsp; et=i<span style="color: #33ffdd;">-48</span><br />
&nbsp; recreate<br />
&nbsp; <span style="color: #aaffff; font-weight: bold;">If</span> et=<span style="color: #33ffdd;">2</span> <span style="color: #aaffff; font-weight: bold;">Then</span> event=<span style="color: #33ffdd;">4</span><br />
&nbsp;<span style="color: #aaffff; font-weight: bold;">End</span> <span style="color: #aaffff; font-weight: bold;">If</span><br />
&nbsp;<span style="color: #aaffff; font-weight: bold;">If</span> i=<span style="color: #33ffdd;">48</span> <span style="color: #aaffff; font-weight: bold;">Then</span> <br />
&nbsp; <span style="color: #ffee00">;Изменение цвета фигуры (событие №5)</span><br />
&nbsp; cr=<span style="color: #aaffff; font-weight: bold;">Rand</span><span style=" ">&#40;</span><span style="color: #33ffdd;">0</span>,<span style="color: #33ffdd;">255</span><span style=" ">&#41;</span><br />
&nbsp; cg=<span style="color: #aaffff; font-weight: bold;">Rand</span><span style=" ">&#40;</span><span style="color: #33ffdd;">0</span>,<span style="color: #33ffdd;">255</span><span style=" ">&#41;</span><br />
&nbsp; cb=<span style="color: #aaffff; font-weight: bold;">Rand</span><span style=" ">&#40;</span><span style="color: #33ffdd;">0</span>,<span style="color: #33ffdd;">255</span><span style=" ">&#41;</span><br />
&nbsp; <span style="color: #aaffff; font-weight: bold;">EntityColor</span> m,cr,cg,cb<br />
&nbsp; event=<span style="color: #33ffdd;">5</span><br />
&nbsp;<span style="color: #aaffff; font-weight: bold;">End</span> <span style="color: #aaffff; font-weight: bold;">If</span><br />
<br />
&nbsp;<span style="color: #aaffff; font-weight: bold;">PositionEntity</span> m,ex#,ey#,<span style="color: #33ffdd;">0</span><br />
&nbsp;<span style="color: #aaffff; font-weight: bold;">RotateEntity</span> m,eyang#,exang#,<span style="color: #33ffdd;">0</span><br />
&nbsp;<span style="color: #aaffff; font-weight: bold;">ScaleEntity</span> m,esc#,esc#,esc#<br />
<br />
&nbsp;<span style="color: #ffee00">;Обработка команд</span><br />
&nbsp;<span style="color: #aaffff; font-weight: bold;">Select</span> cmd$<span style=" ">&#40;</span>cn,<span style="color: #33ffdd;">0</span><span style=" ">&#41;</span><br />
&nbsp; <span style="color: #aaffff; font-weight: bold;">Case</span> <span style="color: #00ff66;">&quot;TEXT&quot;</span> <br />
&nbsp; &nbsp;<span style="color: #ffee00">;Вывод текста (только при бездействии)</span><br />
&nbsp; &nbsp;<span style="color: #aaffff; font-weight: bold;">If</span> event=<span style="color: #33ffdd;">0</span> <span style="color: #aaffff; font-weight: bold;">Then</span><br />
&nbsp; &nbsp; txt$=cmd$<span style=" ">&#40;</span>cn,<span style="color: #33ffdd;">1</span><span style=" ">&#41;</span><br />
&nbsp; &nbsp; cn=cn<span style="color: #33ffdd;">+1</span><br />
&nbsp; &nbsp;<span style="color: #aaffff; font-weight: bold;">End</span> <span style="color: #aaffff; font-weight: bold;">If</span><br />
&nbsp; <span style="color: #aaffff; font-weight: bold;">Case</span> <span style="color: #00ff66;">&quot;WAITFOR&quot;</span><br />
&nbsp; &nbsp;<span style="color: #ffee00">;Ожидание события</span><br />
&nbsp; &nbsp;<span style="color: #aaffff; font-weight: bold;">If</span> event=cmd$<span style=" ">&#40;</span>cn,<span style="color: #33ffdd;">1</span><span style=" ">&#41;</span> <span style="color: #aaffff; font-weight: bold;">Then</span> cn=cn<span style="color: #33ffdd;">+1</span><br />
&nbsp; <span style="color: #aaffff; font-weight: bold;">Case</span> <span style="color: #00ff66;">&quot;WAITKEY&quot;</span><br />
&nbsp; &nbsp;<span style="color: #ffee00">;Ожидание нажатия клавиши пробела</span><br />
&nbsp; &nbsp;<span style="color: #aaffff; font-weight: bold;">If</span> i=<span style="color: #33ffdd;">32</span> <span style="color: #aaffff; font-weight: bold;">Then</span> cn=cn<span style="color: #33ffdd;">+1</span><br />
&nbsp;<span style="color: #aaffff; font-weight: bold;">End Select</span><br />
<br />
&nbsp;<span style="color: #aaffff; font-weight: bold;">RenderWorld</span><br />
&nbsp;<span style="color: #aaffff; font-weight: bold;">Text</span> <span style="color: #33ffdd;">0</span>,<span style="color: #33ffdd;">0</span>,txt$<br />
&nbsp;<span style="color: #aaffff; font-weight: bold;">Flip</span><br />
<span style="color: #aaffff; font-weight: bold;">Until</span> <span style="color: #aaffff; font-weight: bold;">KeyHit</span><span style=" ">&#40;</span><span style="color: #33ffdd;">1</span><span style=" ">&#41;</span><br />
<br />
<span style="color: #aaffff; font-weight: bold;">Function</span> recreate<span style=" ">&#40;</span><span style=" ">&#41;</span><br />
<span style="color: #ffee00">;Создание фигуры</span><br />
<span style="color: #aaffff; font-weight: bold;">If</span> m&lt;&gt;<span style="color: #33ffdd;">0</span> <span style="color: #aaffff; font-weight: bold;">Then</span> <span style="color: #aaffff; font-weight: bold;">FreeEntity</span> m<br />
<span style="color: #aaffff; font-weight: bold;">Select</span> et<br />
&nbsp;<span style="color: #aaffff; font-weight: bold;">Case</span> <span style="color: #33ffdd;">1</span>:m=<span style="color: #aaffff; font-weight: bold;">CreateCube</span><span style=" ">&#40;</span><span style=" ">&#41;</span><br />
&nbsp;<span style="color: #aaffff; font-weight: bold;">Case</span> <span style="color: #33ffdd;">2</span>:m=<span style="color: #aaffff; font-weight: bold;">CreateSphere</span><span style=" ">&#40;</span>det<span style=" ">&#41;</span><br />
&nbsp;<span style="color: #aaffff; font-weight: bold;">Case</span> <span style="color: #33ffdd;">3</span>:m=<span style="color: #aaffff; font-weight: bold;">CreateCylinder</span><span style=" ">&#40;</span>det<span style=" ">&#41;</span><br />
&nbsp;<span style="color: #aaffff; font-weight: bold;">Case</span> <span style="color: #33ffdd;">4</span>:m=<span style="color: #aaffff; font-weight: bold;">CreateCone</span><span style=" ">&#40;</span>det<span style=" ">&#41;</span><br />
<span style="color: #aaffff; font-weight: bold;">End Select</span><br />
<span style="color: #aaffff; font-weight: bold;">EntityColor</span> m,cr,cg,cb<br />
<span style="color: #aaffff; font-weight: bold;">End Function</span><br />
<br />
<span style="color: #aaffff; font-weight: bold;">Data</span> <span style="color: #00ff66;">&quot;TEXT&quot;</span>,<span style="color: #00ff66;">&quot;Это программа предназначена для просмотра трехмерных объектов. Нажмите пробел.&quot;</span><br />
<span style="color: #aaffff; font-weight: bold;">Data</span> <span style="color: #00ff66;">&quot;WAITKEY&quot;</span>,<span style="color: #00ff66;">&quot;&quot;</span><br />
<span style="color: #aaffff; font-weight: bold;">Data</span> <span style="color: #00ff66;">&quot;TEXT&quot;</span>,<span style="color: #00ff66;">&quot;Данный урок поможет вам освоить ее.&quot;</span><br />
<span style="color: #aaffff; font-weight: bold;">Data</span> <span style="color: #00ff66;">&quot;WAITKEY&quot;</span>,<span style="color: #00ff66;">&quot;&quot;</span><br />
<span style="color: #aaffff; font-weight: bold;">Data</span> <span style="color: #00ff66;">&quot;TEXT&quot;</span>,<span style="color: #00ff66;">&quot;Зажав левую кнопку мыши, вы можете перемещать объект. Попробуйте.&quot;</span><br />
<span style="color: #aaffff; font-weight: bold;">Data</span> <span style="color: #00ff66;">&quot;WAITFOR&quot;</span>,<span style="color: #00ff66;">&quot;1&quot;</span><br />
<span style="color: #aaffff; font-weight: bold;">Data</span> <span style="color: #00ff66;">&quot;TEXT&quot;</span>,<span style="color: #00ff66;">&quot;С помощью правой кнопки, можно вращать объект. Поверните объект.&quot;</span><br />
<span style="color: #aaffff; font-weight: bold;">Data</span> <span style="color: #00ff66;">&quot;WAITFOR&quot;</span>,<span style="color: #00ff66;">&quot;2&quot;</span><br />
<span style="color: #aaffff; font-weight: bold;">Data</span> <span style="color: #00ff66;">&quot;TEXT&quot;</span>,<span style="color: #00ff66;">&quot;Средняя кнопка - масштабирование объекта. Измените размер объекта.&quot;</span><br />
<span style="color: #aaffff; font-weight: bold;">Data</span> <span style="color: #00ff66;">&quot;WAITFOR&quot;</span>,<span style="color: #00ff66;">&quot;3&quot;</span><br />
<span style="color: #aaffff; font-weight: bold;">Data</span> <span style="color: #00ff66;">&quot;TEXT&quot;</span>,<span style="color: #00ff66;">&quot;Цифровые клавиши 1-4 - выбор объекта. Для продолжения, выберите сферу(2).&quot;</span><br />
<span style="color: #aaffff; font-weight: bold;">Data</span> <span style="color: #00ff66;">&quot;WAITFOR&quot;</span>,<span style="color: #00ff66;">&quot;4&quot;</span><br />
<span style="color: #aaffff; font-weight: bold;">Data</span> <span style="color: #00ff66;">&quot;TEXT&quot;</span>,<span style="color: #00ff66;">&quot;Вы можете изменять цвет объекта клавишей 0. Измените цвет для подолжения.&quot;</span><br />
<span style="color: #aaffff; font-weight: bold;">Data</span> <span style="color: #00ff66;">&quot;WAITFOR&quot;</span>,<span style="color: #00ff66;">&quot;5&quot;</span><br />
<span style="color: #aaffff; font-weight: bold;">Data</span> <span style="color: #00ff66;">&quot;TEXT&quot;</span>,<span style="color: #00ff66;">&quot;Смена детализации объекта - вращение колесика мыши.&quot;</span><br />
<span style="color: #aaffff; font-weight: bold;">Data</span> <span style="color: #00ff66;">&quot;WAITFOR&quot;</span>,<span style="color: #00ff66;">&quot;6&quot;</span><br />
<span style="color: #aaffff; font-weight: bold;">Data</span> <span style="color: #00ff66;">&quot;TEXT&quot;</span>,<span style="color: #00ff66;">&quot;Вот и все, урок окончен.&quot;</span><br />
</p>
<span style="color: #aaffff; font-weight: bold;">Data</span> <span style="color: #00ff66;">&quot;WAITKEY&quot;</span>,<span style="color: #00ff66;">&quot;&quot;</span></div>
<a name=".D0.91.D0.BE.D0.BB.D0.B5.D0.B5_.D1.84.D1.83.D0.BD.D0.BA.D1.86.D0.B8.D0.BE.D0.BD.D0.B0.D0.BB.D1.8C.D0.BD.D0.B0.D1.8F_.D1.81.D0.BA.D1.80.D0.B8.D0.BF.D1.82.D0.BE.D0.B2.D0.B0.D1.8F_.D1.81.D0.B8.D1.81.D1.82.D0.B5.D0.BC.D0.B0"></a><h2><span class="editsection">[<a href="http://blitzetcetera.org/index.php?title=%D0%A1%D0%BA%D1%80%D0%B8%D0%BF%D1%82%D1%8B&amp;action=edit&amp;section=3" title="Править секцию: Более функциональная скриптовая система">править</a>]</span> <span class="mw-headline">Более функциональная скриптовая система</span></h2>
<p>Нижеследующая программа имеет больше возможностей по сравнению с 1-ым листингом. Она базируется на функциях.
</p>
<ul><li>"%имя функции{параметр,номер}" - синтаксис функции
</li><li>"общий блок1первый блок2второй блок...9девятый блок" - синтаксис команды
</li><li>"[имя вызываемой функции{параметр,переменная1=значение1,2переменная2=значение2...}]" - функция в блоке
</li></ul>
<p>Каждая функция начинается с символа "%", может иметь несколько разных имен, разделенных запятой (удобно для подбора окончаний), параметр и номер (если он указан, то берется строка с этим номером, равным значению переменной; если переменная равна 0, то берется случайное число). За функцией следует одна или несколько команд. Команды содержат блоки разделенные цифрами - общий блок длится до 1-ой встреченной цифры и обозначает общее для всех блоков начало текста. После цифры 1 идет блок, который будет присоединен к общему, если параметр равен 1, после цифры 2 - блок, присоединяемый в случае, когда параметр равен 2 и т. д. В блоках могут встречаться вызовы других функций, взятые в квадратные скобки, значение параметра функции и (опционально) блоки задания переменных через точку с запятой. Пример функции:
</p>
<ul><li>Data "%имя{пол}"
</li><li>Data  "1[имя-м]2[имя-ж]"
</li></ul>
<p>В этом примере - команда, которую можно перевести, как "Если пол равен 1,то вызвать функцию "имя-м", если пол равен 2, вызвать функцию "имя-ж". Общий блок здесь равен пустой строке.
</p><p>Переменные задаются в начале строк DATA, после идет разделитель - пустая строка, затем - функции с командами. Завершает блок данных еще одна пустая строка. Имена переменных и функций могут содержать пробелы. Запрещенные символы - "%", "[", "]", "{", "}", "=", ";".
</p><p>Еще в программе есть функция для запроса команды из скрипт-функции с помощью мыши (с ее помощью запрашиваются пол, имя, фамилия и отчество). Сама программа выводит случайным образом набор из тестовых фраз - приветствий и просьб.
</p><p>Стоит отметить и режим отладки - в случае, если вы неправильно введете имя функции или переменной, программа остановится и укажет на ошибку (DebugLog). Также можно включить некоторые сообщения программы с помощью переменной "debug".
</p>
<div class="bb" style="font-family: monospace;background-color:#FFFFFF;border:1px dashed #CCCCCC;padding:10px;background-color:#225588;color:#FFFFFF;border:1px solid #003040;padding:10px;"><span style="color: #aaffff; font-weight: bold;">SeedRnd</span> <span style="color: #aaffff; font-weight: bold;">MilliSecs</span><span style=" ">&#40;</span><span style=" ">&#41;</span><br />
<p><br />
<span style="color: #aaffff; font-weight: bold;">Const</span> vfuncnames=<span style="color: #33ffdd;">1</span>,vchunks=<span style="color: #33ffdd;">2</span>,vprocessing=<span style="color: #33ffdd;">4</span>,vvars=<span style="color: #33ffdd;">8</span><br />
<span style="color: #aaffff; font-weight: bold;">Const</span> maxparam=<span style="color: #33ffdd;">2</span>,debug=<span style="color: #33ffdd;">0</span><span style="color: #ffee00">;vchunks+vprocessing;+vfuncnames+vchunks</span><br />
<br />
<span style="color: #ffee00">;Кусок команды</span><br />
<span style="color: #aaffff; font-weight: bold;">Type</span> chunk<br />
&nbsp;<span style="color: #aaffff; font-weight: bold;">Field</span> txt$,f.func,v.var,value,vfrom.var<br />
<span style="color: #aaffff; font-weight: bold;">End Type</span><br />
<br />
<span style="color: #ffee00">;Команда</span><br />
<span style="color: #aaffff; font-weight: bold;">Type</span> cmd<br />
&nbsp;<span style="color: #aaffff; font-weight: bold;">Field</span> chunk.chunk<span style=" ">&#91;</span><span style="color: #33ffdd;">9</span><span style=" ">&#93;</span>,chunkq<span style=" ">&#91;</span><span style="color: #33ffdd;">9</span><span style=" ">&#93;</span><br />
<span style="color: #aaffff; font-weight: bold;">End Type</span><br />
<br />
<span style="color: #ffee00">;Переменная</span><br />
<span style="color: #aaffff; font-weight: bold;">Type</span> var<br />
&nbsp;<span style="color: #aaffff; font-weight: bold;">Field</span> name$,value<br />
<span style="color: #aaffff; font-weight: bold;">End Type</span><br />
<br />
<span style="color: #ffee00">;Функция</span><br />
<span style="color: #aaffff; font-weight: bold;">Type</span> func<br />
&nbsp;<span style="color: #aaffff; font-weight: bold;">Field</span> firstcmd.cmd,cmdq,name$,param.var,snum.var<br />
<span style="color: #aaffff; font-weight: bold;">End Type</span><br />
<br />
<span style="color: #ffee00">;Создание переменных</span><br />
<span style="color: #aaffff; font-weight: bold;">Repeat</span><br />
&nbsp;<span style="color: #aaffff; font-weight: bold;">Read</span> name$<br />
&nbsp;<span style="color: #aaffff; font-weight: bold;">If</span> name$=<span style="color: #00ff66;">&quot;&quot;</span> <span style="color: #aaffff; font-weight: bold;">Then</span> <span style="color: #aaffff; font-weight: bold;">Exit</span><br />
&nbsp;addvar name$<br />
<span style="color: #aaffff; font-weight: bold;">Forever</span><br />
<br />
<span style="color: #ffee00">;Первый проход для функций (создает элементы)</span><br />
<span style="color: #aaffff; font-weight: bold;">Repeat</span><br />
&nbsp;<span style="color: #aaffff; font-weight: bold;">Read</span> m$<br />
&nbsp;<span style="color: #aaffff; font-weight: bold;">If</span> m$=<span style="color: #00ff66;">&quot;&quot;</span> <span style="color: #aaffff; font-weight: bold;">Then</span> <span style="color: #aaffff; font-weight: bold;">Exit</span><br />
&nbsp;<span style="color: #aaffff; font-weight: bold;">If</span> <span style="color: #aaffff; font-weight: bold;">Left</span>$<span style=" ">&#40;</span>m$,<span style="color: #33ffdd;">1</span><span style=" ">&#41;</span>=<span style="color: #00ff66;">&quot;%&quot;</span> <span style="color: #aaffff; font-weight: bold;">Then</span><br />
&nbsp; brc1=<span style="color: #aaffff; font-weight: bold;">Instr</span><span style=" ">&#40;</span>m$,<span style="color: #00ff66;">&quot;{&quot;</span><span style=" ">&#41;</span><br />
&nbsp; param.var=<span style="color: #aaffff; font-weight: bold;">Null</span><br />
&nbsp; snum.var=<span style="color: #aaffff; font-weight: bold;">Null</span><br />
&nbsp; <span style="color: #aaffff; font-weight: bold;">If</span> brc1=<span style="color: #33ffdd;">0</span> <span style="color: #aaffff; font-weight: bold;">Then</span><br />
&nbsp; &nbsp;fname$=<span style="color: #aaffff; font-weight: bold;">Mid</span>$<span style=" ">&#40;</span>m$,<span style="color: #33ffdd;">2</span><span style=" ">&#41;</span><br />
&nbsp; <span style="color: #aaffff; font-weight: bold;">Else</span><br />
&nbsp; &nbsp;fname$=fromto$<span style=" ">&#40;</span>m$,<span style="color: #33ffdd;">2</span>,brc1<span style="color: #33ffdd;">-1</span><span style=" ">&#41;</span><br />
&nbsp; &nbsp;comma=<span style="color: #aaffff; font-weight: bold;">Instr</span><span style=" ">&#40;</span>m$,<span style="color: #00ff66;">&quot;,&quot;</span>,brc1<span style=" ">&#41;</span><br />
&nbsp; &nbsp;brc2=<span style="color: #aaffff; font-weight: bold;">Instr</span><span style=" ">&#40;</span>m$,<span style="color: #00ff66;">&quot;}&quot;</span><span style=" ">&#41;</span><br />
&nbsp; &nbsp;<span style="color: #aaffff; font-weight: bold;">If</span> comma&gt;<span style="color: #33ffdd;">0</span> <span style="color: #aaffff; font-weight: bold;">And</span> brc2&gt;comma <span style="color: #aaffff; font-weight: bold;">Then</span><br />
&nbsp; &nbsp; vname$=fromto$<span style=" ">&#40;</span>m$,comma<span style="color: #33ffdd;">+1</span>,brc2<span style="color: #33ffdd;">-1</span><span style=" ">&#41;</span><br />
&nbsp; &nbsp; snum.var=findvar<span style=" ">&#40;</span>vname$<span style=" ">&#41;</span><br />
&nbsp; &nbsp;<span style="color: #aaffff; font-weight: bold;">End</span> <span style="color: #aaffff; font-weight: bold;">If</span><br />
&nbsp; &nbsp;<span style="color: #aaffff; font-weight: bold;">If</span> comma&gt;brc1<span style="color: #33ffdd;">+1</span> <span style="color: #aaffff; font-weight: bold;">Then</span><br />
&nbsp; &nbsp; vname$=fromto$<span style=" ">&#40;</span>m$,brc1<span style="color: #33ffdd;">+1</span>,comma<span style="color: #33ffdd;">-1</span><span style=" ">&#41;</span><br />
&nbsp; &nbsp; param.var=findvar<span style=" ">&#40;</span>vname$<span style=" ">&#41;</span><br />
&nbsp; &nbsp;<span style="color: #aaffff; font-weight: bold;">ElseIf</span> comma=<span style="color: #33ffdd;">0</span> <span style="color: #aaffff; font-weight: bold;">Then</span><br />
&nbsp; &nbsp; vname$=fromto$<span style=" ">&#40;</span>m$,brc1<span style="color: #33ffdd;">+1</span>,brc2<span style="color: #33ffdd;">-1</span><span style=" ">&#41;</span><br />
&nbsp; &nbsp; param.var=findvar<span style=" ">&#40;</span>vname$<span style=" ">&#41;</span><br />
&nbsp; &nbsp;<span style="color: #aaffff; font-weight: bold;">End</span> <span style="color: #aaffff; font-weight: bold;">If</span><br />
&nbsp; <span style="color: #aaffff; font-weight: bold;">End</span> <span style="color: #aaffff; font-weight: bold;">If</span><br />
&nbsp; f.func=addfunc<span style=" ">&#40;</span>fname$,param,snum<span style=" ">&#41;</span><br />
&nbsp;<span style="color: #aaffff; font-weight: bold;">End</span> <span style="color: #aaffff; font-weight: bold;">If</span><br />
<span style="color: #aaffff; font-weight: bold;">Forever</span><br />
<br />
<span style="color: #ffee00">;Второй проход для функций (создает наборы команд)</span><br />
<span style="color: #aaffff; font-weight: bold;">Restore</span> func<br />
f=<span style="color: #aaffff; font-weight: bold;">Null</span><br />
<span style="color: #aaffff; font-weight: bold;">Repeat</span><br />
&nbsp;<span style="color: #aaffff; font-weight: bold;">Read</span> m$<br />
&nbsp;<span style="color: #aaffff; font-weight: bold;">If</span> m$=<span style="color: #00ff66;">&quot;&quot;</span> <span style="color: #aaffff; font-weight: bold;">Then</span> <span style="color: #aaffff; font-weight: bold;">Exit</span><br />
&nbsp;<span style="color: #aaffff; font-weight: bold;">If</span> <span style="color: #aaffff; font-weight: bold;">Left</span>$<span style=" ">&#40;</span>m$,<span style="color: #33ffdd;">1</span><span style=" ">&#41;</span>=<span style="color: #00ff66;">&quot;%&quot;</span> <span style="color: #aaffff; font-weight: bold;">Then</span><br />
&nbsp; <span style="color: #aaffff; font-weight: bold;">If</span> f=<span style="color: #aaffff; font-weight: bold;">Null</span> <span style="color: #aaffff; font-weight: bold;">Then</span> f=<span style="color: #aaffff; font-weight: bold;">First</span> func <span style="color: #aaffff; font-weight: bold;">Else</span> f=<span style="color: #aaffff; font-weight: bold;">After</span> f<br />
&nbsp; <span style="color: #aaffff; font-weight: bold;">If</span> debug <span style="color: #aaffff; font-weight: bold;">And</span> vfuncnames <span style="color: #aaffff; font-weight: bold;">Then</span><br />
&nbsp; &nbsp;<span style="color: #aaffff; font-weight: bold;">If</span> f\param&lt;&gt;Null <span style="color: #aaffff; font-weight: bold;">Then</span> mm$=<span style="color: #00ff66;">&quot;(&quot;</span>+f\param\name$+<span style="color: #00ff66;">&quot;)&quot;</span> <span style="color: #aaffff; font-weight: bold;">Else</span> mm$=<span style="color: #00ff66;">&quot;&quot;</span><br />
&nbsp; &nbsp;<span style="color: #aaffff; font-weight: bold;">If</span> f\snum&lt;&gt;Null <span style="color: #aaffff; font-weight: bold;">Then</span> mm$=mm$+<span style="color: #00ff66;">&quot;{&quot;</span>+f\snum\name$+<span style="color: #00ff66;">&quot;}&quot;</span><br />
&nbsp; &nbsp;<span style="color: #aaffff; font-weight: bold;">DebugLog</span> <span style="color: #00ff66;">&quot;------------&quot;</span>+f\name$+mm$+<span style="color: #00ff66;">&quot;------------&quot;</span><br />
&nbsp; <span style="color: #aaffff; font-weight: bold;">End</span> <span style="color: #aaffff; font-weight: bold;">If</span><br />
&nbsp;<span style="color: #aaffff; font-weight: bold;">Else</span><br />
&nbsp; addcmd<span style=" ">&#40;</span>f,m$<span style=" ">&#41;</span><br />
&nbsp;<span style="color: #aaffff; font-weight: bold;">End</span> <span style="color: #aaffff; font-weight: bold;">If</span><br />
<span style="color: #aaffff; font-weight: bold;">Forever</span><br />
<br />
<span style="color: #aaffff; font-weight: bold;">Graphics</span> <span style="color: #33ffdd;">800</span>,<span style="color: #33ffdd;">600</span><br />
<span style="color: #aaffff; font-weight: bold;">SetFont</span> <span style="color: #aaffff; font-weight: bold;">LoadFont</span><span style=" ">&#40;</span><span style="color: #00ff66;">&quot;Arial Cyr&quot;</span>,<span style="color: #33ffdd;">14</span><span style=" ">&#41;</span><br />
<br />
<span style="color: #ffee00">;Запрос данных</span><br />
gender=ask<span style=" ">&#40;</span><span style="color: #00ff66;">&quot;ваш пол&quot;</span>,<span style="color: #00ff66;">&quot;выбор пола&quot;</span>,<span style="color: #33ffdd;">0</span><span style=" ">&#41;</span><br />
fam=ask<span style=" ">&#40;</span><span style="color: #00ff66;">&quot;ваша фамилия&quot;</span>,<span style="color: #00ff66;">&quot;фамилия&quot;</span>,gender<span style=" ">&#41;</span><br />
<span style="color: #aaffff; font-weight: bold;">If</span> gender=<span style="color: #33ffdd;">1</span> <span style="color: #aaffff; font-weight: bold;">Then</span> <br />
&nbsp;ask <span style="color: #00ff66;">&quot;ваше имя&quot;</span>,<span style="color: #00ff66;">&quot;имяотчество&quot;</span>,<span style="color: #33ffdd;">1</span><br />
<span style="color: #aaffff; font-weight: bold;">Else</span><br />
&nbsp;ask <span style="color: #00ff66;">&quot;ваше имя&quot;</span>,<span style="color: #00ff66;">&quot;имя (ж)&quot;</span>,<span style="color: #33ffdd;">1</span><br />
<span style="color: #aaffff; font-weight: bold;">End</span> <span style="color: #aaffff; font-weight: bold;">If</span><br />
ask <span style="color: #00ff66;">&quot;ваше отчество&quot;</span>,<span style="color: #00ff66;">&quot;имяотчество&quot;</span>,<span style="color: #33ffdd;">2</span>+<span style=" ">&#40;</span>gender=<span style="color: #33ffdd;">2</span><span style=" ">&#41;</span><br />
<br />
<span style="color: #aaffff; font-weight: bold;">Cls</span><br />
<span style="color: #aaffff; font-weight: bold;">If</span> debug <span style="color: #aaffff; font-weight: bold;">Then</span> <span style="color: #aaffff; font-weight: bold;">DebugLog</span> <span style="color: #00ff66;">&quot;----------------------------------------&quot;</span><br />
<span style="color: #aaffff; font-weight: bold;">Repeat</span> <br />
&nbsp;<span style="color: #aaffff; font-weight: bold;">Print</span> m$+phrase$<span style=" ">&#40;</span>findfunc<span style=" ">&#40;</span><span style="color: #00ff66;">&quot;обращение&quot;</span><span style=" ">&#41;</span><span style=" ">&#41;</span><br />
<span style="color: #aaffff; font-weight: bold;">Until</span> <span style="color: #aaffff; font-weight: bold;">WaitKey</span><span style=" ">&#40;</span><span style=" ">&#41;</span>=<span style="color: #33ffdd;">27</span><br />
<br />
<span style="color: #aaffff; font-weight: bold;">End</span><br />
<br />
<span style="color: #ffee00">;Переменные</span><br />
<span style="color: #aaffff; font-weight: bold;">Data</span> <span style="color: #00ff66;">&quot;падеж&quot;</span>,<span style="color: #00ff66;">&quot;тип&quot;</span>,<span style="color: #00ff66;">&quot;пол&quot;</span>,<span style="color: #00ff66;">&quot;номер&quot;</span><br />
<span style="color: #aaffff; font-weight: bold;">Data</span> <span style="color: #00ff66;">&quot;ваше имя&quot;</span>, <span style="color: #00ff66;">&quot;ваша фамилия&quot;</span>, <span style="color: #00ff66;">&quot;ваше отчество&quot;</span>, <span style="color: #00ff66;">&quot;ваш пол&quot;</span>,<span style="color: #00ff66;">&quot;&quot;</span><br />
<br />
.func<br />
<span style="color: #ffee00">;Функции с командами</span><br />
<span style="color: #aaffff; font-weight: bold;">Data</span> <span style="color: #00ff66;">&quot;%обращение&quot;</span><br />
<span style="color: #aaffff; font-weight: bold;">Data</span> &nbsp;<span style="color: #00ff66;">&quot;Здравствуй, [ву{падеж=1}].&quot;</span><br />
<span style="color: #aaffff; font-weight: bold;">Data</span> &nbsp;<span style="color: #00ff66;">&quot;Приветствую, [вф{падеж=1}].&quot;</span><br />
<span style="color: #aaffff; font-weight: bold;">Data</span> &nbsp;<span style="color: #00ff66;">&quot;Добрый день, [ви{падеж=1}] [во].&quot;</span><br />
<span style="color: #aaffff; font-weight: bold;">Data</span> &nbsp;<span style="color: #00ff66;">&quot;Привет, [ви{падеж=1}].&quot;</span><br />
<span style="color: #aaffff; font-weight: bold;">Data</span> &nbsp;<span style="color: #00ff66;">&quot;Как жизнь, [вп{падеж=1}]?&quot;</span><br />
<span style="color: #aaffff; font-weight: bold;">Data</span> &nbsp;<span style="color: #00ff66;">&quot;Кто из вас [вф{падеж=1}] [ви] [во]?&quot;</span><br />
<span style="color: #aaffff; font-weight: bold;">Data</span> &nbsp;<span style="color: #00ff66;">&quot;Нигде не могу найти [имя{падеж=4;номер=0}] [отчество].&quot;</span><br />
<span style="color: #aaffff; font-weight: bold;">Data</span> &nbsp;<span style="color: #00ff66;">&quot;[вп{падеж=1}], пойдем к [имя{падеж=3;номер=0}].&quot;</span><br />
<span style="color: #aaffff; font-weight: bold;">Data</span> &nbsp;<span style="color: #00ff66;">&quot;Мы с [вф{падеж=5}] сейчас придем.&quot;</span><br />
<span style="color: #aaffff; font-weight: bold;">Data</span> &nbsp;<span style="color: #00ff66;">&quot;Поговорим о [фамилия{падеж=6;номер=0}] [имя] [отчество]&quot;</span><br />
<br />
<span style="color: #aaffff; font-weight: bold;">Data</span> <span style="color: #00ff66;">&quot;%выбор пола&quot;</span><br />
<span style="color: #aaffff; font-weight: bold;">Data</span> &nbsp;<span style="color: #00ff66;">&quot;Мужской&quot;</span>,<span style="color: #00ff66;">&quot;Женский&quot;</span><br />
<br />
<span style="color: #aaffff; font-weight: bold;">Data</span> <span style="color: #00ff66;">&quot;%имя{пол}&quot;</span><br />
<span style="color: #aaffff; font-weight: bold;">Data</span> &nbsp;<span style="color: #00ff66;">&quot;1[имяотчество{1}]2[имя (ж)]&quot;</span><br />
<span style="color: #aaffff; font-weight: bold;">Data</span> <span style="color: #00ff66;">&quot;%отчество{пол}&quot;</span><br />
<span style="color: #aaffff; font-weight: bold;">Data</span> &nbsp;<span style="color: #00ff66;">&quot;1[имяотчество{2}]2[имяотчество{3}]&quot;</span><br />
<span style="color: #aaffff; font-weight: bold;">Data</span> <span style="color: #00ff66;">&quot;%уменьш. имя{пол}&quot;</span><br />
<span style="color: #aaffff; font-weight: bold;">Data</span> &nbsp;<span style="color: #00ff66;">&quot;1[уменьш. имя (м)]2[уменьш. имя (ж)]&quot;</span><br />
<span style="color: #aaffff; font-weight: bold;">Data</span> <span style="color: #00ff66;">&quot;%панибр. имя{пол}&quot;</span><br />
<span style="color: #aaffff; font-weight: bold;">Data</span> &nbsp;<span style="color: #00ff66;">&quot;1[панибр. имя (м)]2[панибр. имя (ж)]&quot;</span><br />
<br />
<span style="color: #aaffff; font-weight: bold;">Data</span> <span style="color: #00ff66;">&quot;%вф&quot;</span><br />
<span style="color: #aaffff; font-weight: bold;">Data</span> &nbsp;<span style="color: #00ff66;">&quot;[фамилия{ваш пол;номер=ваша фамилия}]&quot;</span><br />
<span style="color: #aaffff; font-weight: bold;">Data</span> <span style="color: #00ff66;">&quot;%ви&quot;</span><br />
<span style="color: #aaffff; font-weight: bold;">Data</span> &nbsp;<span style="color: #00ff66;">&quot;[имя{ваш пол;номер=ваше имя}]&quot;</span><br />
<span style="color: #aaffff; font-weight: bold;">Data</span> <span style="color: #00ff66;">&quot;%ву&quot;</span><br />
<span style="color: #aaffff; font-weight: bold;">Data</span> &nbsp;<span style="color: #00ff66;">&quot;[уменьш. имя{ваш пол;номер=ваше имя}]&quot;</span><br />
<span style="color: #aaffff; font-weight: bold;">Data</span> <span style="color: #00ff66;">&quot;%вп&quot;</span><br />
<span style="color: #aaffff; font-weight: bold;">Data</span> &nbsp;<span style="color: #00ff66;">&quot;[панибр. имя{ваш пол;номер=ваше имя}]&quot;</span><br />
<span style="color: #aaffff; font-weight: bold;">Data</span> <span style="color: #00ff66;">&quot;%во&quot;</span><br />
<span style="color: #aaffff; font-weight: bold;">Data</span> &nbsp;<span style="color: #00ff66;">&quot;[отчество{ваш пол;номер=ваше отчество}]&quot;</span><br />
<br />
<span style="color: #aaffff; font-weight: bold;">Data</span> <span style="color: #00ff66;">&quot;%имяотчество{тип,номер}&quot;</span><br />
<span style="color: #aaffff; font-weight: bold;">Data</span> &nbsp;<span style="color: #00ff66;">&quot;Алексе1[й]2евич[евич]3евн[евна]&quot;</span>,<span style="color: #00ff66;">&quot;Андре1[й]2евич[евич]3евн[евна]&quot;</span><br />
<span style="color: #aaffff; font-weight: bold;">Data</span> &nbsp;<span style="color: #00ff66;">&quot;Евдоким1[_]2ович[ович]3овн[овна]&quot;</span>,<span style="color: #00ff66;">&quot;Карл1[_]2ович[ович]3овн[овна]&quot;</span><br />
<span style="color: #aaffff; font-weight: bold;">Data</span> &nbsp;<span style="color: #00ff66;">&quot;Иван1[_]2ович[ович]3овн[овна]&quot;</span>,<span style="color: #00ff66;">&quot;Федор1[_]2ович[ович]3овн[овна]&quot;</span><br />
<span style="color: #aaffff; font-weight: bold;">Data</span> &nbsp;<span style="color: #00ff66;">&quot;Дав1ид[_]2ыдович[ович]3ыдовн[овна]&quot;</span>,<span style="color: #00ff66;">&quot;Тимофе1[й]2евич[евич]3евн[евна]&quot;</span><br />
<span style="color: #aaffff; font-weight: bold;">Data</span> &nbsp;<span style="color: #00ff66;">&quot;Харитон1[_]2ович[ович]3овн[овна]&quot;</span>,<span style="color: #00ff66;">&quot;Антон1[_]2ович[ович]3овн[овна]&quot;</span><br />
<span style="color: #aaffff; font-weight: bold;">Data</span> &nbsp;<span style="color: #00ff66;">&quot;Гаврил1[а]2ович[ович]3овн[овна]&quot;</span>,<span style="color: #00ff66;">&quot;Миха1ил[_]2йлович[ович]3йловн[овна]&quot;</span><br />
<span style="color: #aaffff; font-weight: bold;">Data</span> &nbsp;<span style="color: #00ff66;">&quot;Иль1[я]2ич[ич]3инич[ина]&quot;</span>,<span style="color: #00ff66;">&quot;Пав1[ел]2лович[ович]3ловн[овна]&quot;</span><br />
<span style="color: #aaffff; font-weight: bold;">Data</span> &nbsp;<span style="color: #00ff66;">&quot;Петр1[_]2ович[ович]3овн[овна]&quot;</span>,<span style="color: #00ff66;">&quot;Яков1[_]2левич[евич]3левн[евна]&quot;</span><br />
<span style="color: #aaffff; font-weight: bold;">Data</span> &nbsp;<span style="color: #00ff66;">&quot;Семен1[_]2ович[ович]3овн[овна]&quot;</span>,<span style="color: #00ff66;">&quot;Исаак1[_]2ович[ович]3овн[овна]&quot;</span><br />
<span style="color: #aaffff; font-weight: bold;">Data</span> &nbsp;<span style="color: #00ff66;">&quot;Марк1[_]2ович[ович]3овн[овна]&quot;</span>,<span style="color: #00ff66;">&quot;Игнат1[_]2ьевич[евич]3ьевн[евна]&quot;</span><br />
<br />
<span style="color: #aaffff; font-weight: bold;">Data</span> <span style="color: #00ff66;">&quot;%уменьш. имя (м){,номер}&quot;</span><br />
<span style="color: #aaffff; font-weight: bold;">Data</span> &nbsp;<span style="color: #00ff66;">&quot;Леш[а3]&quot;</span>,<span style="color: #00ff66;">&quot;Андрюш[а3]&quot;</span>,<span style="color: #00ff66;">&quot;Евдоким&quot;</span>,<span style="color: #00ff66;">&quot;Карлуш[а3]&quot;</span><br />
<span style="color: #aaffff; font-weight: bold;">Data</span> &nbsp;<span style="color: #00ff66;">&quot;Ван[я]&quot;</span>,<span style="color: #00ff66;">&quot;Фед[я]&quot;</span>,<span style="color: #00ff66;">&quot;Давид[_]&quot;</span>,<span style="color: #00ff66;">&quot;Тимош[а3]&quot;</span><br />
<span style="color: #aaffff; font-weight: bold;">Data</span> &nbsp;<span style="color: #00ff66;">&quot;Харитош[а3]&quot;</span>,<span style="color: #00ff66;">&quot;Антош[а3]&quot;</span>,<span style="color: #00ff66;">&quot;Гавр[я]&quot;</span>,<span style="color: #00ff66;">&quot;Миш[а3]&quot;</span><br />
<span style="color: #aaffff; font-weight: bold;">Data</span> &nbsp;<span style="color: #00ff66;">&quot;Илюш[а3]&quot;</span>,<span style="color: #00ff66;">&quot;Паш[а3]&quot;</span>,<span style="color: #00ff66;">&quot;Пет[я]&quot;</span>,<span style="color: #00ff66;">&quot;Яш[а3]&quot;</span><br />
<span style="color: #aaffff; font-weight: bold;">Data</span> &nbsp;<span style="color: #00ff66;">&quot;Сен[я]&quot;</span>,<span style="color: #00ff66;">&quot;Из[я]&quot;</span>,<span style="color: #00ff66;">&quot;Марк[_]&quot;</span>,<span style="color: #00ff66;">&quot;Игнат[_]&quot;</span><br />
<br />
<span style="color: #aaffff; font-weight: bold;">Data</span> <span style="color: #00ff66;">&quot;%панибр. имя (м){,номер}&quot;</span><br />
<span style="color: #aaffff; font-weight: bold;">Data</span> &nbsp;<span style="color: #00ff66;">&quot;Лех[а3]&quot;</span>,<span style="color: #00ff66;">&quot;Андрюх[а3]&quot;</span>,<span style="color: #00ff66;">&quot;Евдоким&quot;</span>,<span style="color: #00ff66;">&quot;Карлух[а3]&quot;</span><br />
<span style="color: #aaffff; font-weight: bold;">Data</span> &nbsp;<span style="color: #00ff66;">&quot;Вано&quot;</span>,<span style="color: #00ff66;">&quot;Фед[я]&quot;</span>,<span style="color: #00ff66;">&quot;Давид[_]&quot;</span>,<span style="color: #00ff66;">&quot;Тимох[а3]&quot;</span><br />
<span style="color: #aaffff; font-weight: bold;">Data</span> &nbsp;<span style="color: #00ff66;">&quot;Харитох[а3]&quot;</span>,<span style="color: #00ff66;">&quot;Антох[а3]&quot;</span>,<span style="color: #00ff66;">&quot;Гавр[я]&quot;</span>,<span style="color: #00ff66;">&quot;Мих[а3]&quot;</span><br />
<span style="color: #aaffff; font-weight: bold;">Data</span> &nbsp;<span style="color: #00ff66;">&quot;Илюх[а3]&quot;</span>,<span style="color: #00ff66;">&quot;Пах[а3]&quot;</span>,<span style="color: #00ff66;">&quot;Пет[я]&quot;</span>,<span style="color: #00ff66;">&quot;Яш[а3]&quot;</span><br />
<span style="color: #aaffff; font-weight: bold;">Data</span> &nbsp;<span style="color: #00ff66;">&quot;Сен[я]&quot;</span>,<span style="color: #00ff66;">&quot;Из[я]&quot;</span>,<span style="color: #00ff66;">&quot;Марк[_]&quot;</span>,<span style="color: #00ff66;">&quot;Игнат[_]&quot;</span><br />
<br />
<span style="color: #aaffff; font-weight: bold;">Data</span> <span style="color: #00ff66;">&quot;%имя (ж){,номер}&quot;</span><br />
<span style="color: #aaffff; font-weight: bold;">Data</span> &nbsp;<span style="color: #00ff66;">&quot;Ольг[а]&quot;</span>,<span style="color: #00ff66;">&quot;Анн[а2]&quot;</span>,<span style="color: #00ff66;">&quot;Серафим[а2]&quot;</span>,<span style="color: #00ff66;">&quot;Марин[а2]&quot;</span>,<span style="color: #00ff66;">&quot;Зинаид[а2]&quot;</span>,<span style="color: #00ff66;">&quot;Ид[а2]&quot;</span><br />
<br />
<span style="color: #aaffff; font-weight: bold;">Data</span> <span style="color: #00ff66;">&quot;%уменьш. имя (ж),панибр. имя (ж){,номер}&quot;</span><br />
<span style="color: #aaffff; font-weight: bold;">Data</span> &nbsp;<span style="color: #00ff66;">&quot;Ол[я]&quot;</span>,<span style="color: #00ff66;">&quot;Ан[я]&quot;</span>,<span style="color: #00ff66;">&quot;Фим[а2]&quot;</span>,<span style="color: #00ff66;">&quot;Марин[а2]&quot;</span>,<span style="color: #00ff66;">&quot;Зин[а2]&quot;</span>,<span style="color: #00ff66;">&quot;Ид[а2]&quot;</span><br />
<br />
<span style="color: #aaffff; font-weight: bold;">Data</span> <span style="color: #00ff66;">&quot;%фамилия{пол,номер}&quot;</span><br />
<span style="color: #aaffff; font-weight: bold;">Data</span> &nbsp;<span style="color: #00ff66;">&quot;Орлов1[ов]2[ова]&quot;</span>,<span style="color: #00ff66;">&quot;Крылов1[ов]2[ова]&quot;</span>,<span style="color: #00ff66;">&quot;Спиридонов1[ов]2[ова]&quot;</span><br />
<span style="color: #aaffff; font-weight: bold;">Data</span> &nbsp;<span style="color: #00ff66;">&quot;Михайлов1[ов]2[ова]&quot;</span>,<span style="color: #00ff66;">&quot;Круглов1[ов]2[ова]&quot;</span>,<span style="color: #00ff66;">&quot;Перехрестов1[ов]2[ова]&quot;</span><br />
<span style="color: #aaffff; font-weight: bold;">Data</span> &nbsp;<span style="color: #00ff66;">&quot;Петров1[ов]2[ова]&quot;</span>,<span style="color: #00ff66;">&quot;Камаров1[ов]2[ова]&quot;</span>,<span style="color: #00ff66;">&quot;Семенов1[ов]2[ова]&quot;</span><br />
<span style="color: #aaffff; font-weight: bold;">Data</span> &nbsp;<span style="color: #00ff66;">&quot;Кушаков1[ов]2[ова]&quot;</span>,<span style="color: #00ff66;">&quot;Петраков1[ов]2[ова]&quot;</span>,<span style="color: #00ff66;">&quot;Пушкин1[ин]2[ина]&quot;</span><br />
<span style="color: #aaffff; font-weight: bold;">Data</span> &nbsp;<span style="color: #00ff66;">&quot;Гогол1[ь]2ь&quot;</span>,<span style="color: #00ff66;">&quot;Калугин1[ин]2[ина]&quot;</span>,<span style="color: #00ff66;">&quot;Мясов1[ов]2[ова]&quot;</span>,<span style="color: #00ff66;">&quot;Макаров1[ов]2[ова]&quot;</span><br />
<span style="color: #aaffff; font-weight: bold;">Data</span> &nbsp;<span style="color: #00ff66;">&quot;Петерсен&quot;</span>,<span style="color: #00ff66;">&quot;Горбунов1[ов]2[ова]&quot;</span>,<span style="color: #00ff66;">&quot;Притыкин1[ин]2[ина]&quot;</span><br />
<span style="color: #aaffff; font-weight: bold;">Data</span> &nbsp;<span style="color: #00ff66;">&quot;Серпухов1[ов]2[ова]&quot;</span>,<span style="color: #00ff66;">&quot;Куров1[ов]2[ова]&quot;</span>,<span style="color: #00ff66;">&quot;Тикакеев1[ев]2[ева]&quot;</span><br />
<span style="color: #aaffff; font-weight: bold;">Data</span> &nbsp;<span style="color: #00ff66;">&quot;Коратыгин1[ин]2[ина]&quot;</span>,<span style="color: #00ff66;">&quot;Машкин1[ин]2[ина]&quot;</span>,<span style="color: #00ff66;">&quot;Кошкин1[ин]2[ина]&quot;</span><br />
<span style="color: #aaffff; font-weight: bold;">Data</span> &nbsp;<span style="color: #00ff66;">&quot;Марков1[ов]2[ова]&quot;</span>,<span style="color: #00ff66;">&quot;Окнов1[ов]2[ова]&quot;</span>,<span style="color: #00ff66;">&quot;Козлов1[ов]2[ова]&quot;</span><br />
<span style="color: #aaffff; font-weight: bold;">Data</span> &nbsp;<span style="color: #00ff66;">&quot;Стрючков1[ов]2[ова]&quot;</span>,<span style="color: #00ff66;">&quot;Мотыльков1[ов]2[ова]&quot;</span>,<span style="color: #00ff66;">&quot;Ковшегуб&quot;</span><br />
<span style="color: #aaffff; font-weight: bold;">Data</span> &nbsp;<span style="color: #00ff66;">&quot;Сусанин1[ин]2[ина]&quot;</span>,<span style="color: #00ff66;">&quot;Жуковск1[ий]2[ая]&quot;</span>,<span style="color: #00ff66;">&quot;Жуков1[ов]2[ова]&quot;</span><br />
<span style="color: #aaffff; font-weight: bold;">Data</span> &nbsp;<span style="color: #00ff66;">&quot;Захарьин1[ин]2[ина]&quot;</span>,<span style="color: #00ff66;">&quot;Петрушевск1[ий]2[ая]&quot;</span>,<span style="color: #00ff66;">&quot;Комаров1[ов]2[ова]&quot;</span><br />
<span style="color: #aaffff; font-weight: bold;">Data</span> &nbsp;<span style="color: #00ff66;">&quot;Зубов1[ов]2[ова]&quot;</span>,<span style="color: #00ff66;">&quot;Ромашкин1[ин]2[ина]&quot;</span>,<span style="color: #00ff66;">&quot;Фетелюшин1[ин]2[ина]&quot;</span><br />
<span style="color: #aaffff; font-weight: bold;">Data</span> &nbsp;<span style="color: #00ff66;">&quot;Комаров1[ов]2[ова]&quot;</span>,<span style="color: #00ff66;">&quot;Пакин1[ин]2[ина]&quot;</span>,<span style="color: #00ff66;">&quot;Ракукин1[ин]2[ина]&quot;</span><br />
<span style="color: #aaffff; font-weight: bold;">Data</span> &nbsp;<span style="color: #00ff66;">&quot;Немецк1[ий]2[ая]&quot;</span>,<span style="color: #00ff66;">&quot;Григорьев1[ев]2[ева]&quot;</span>,<span style="color: #00ff66;">&quot;Шашкин1[ин]2[ина]&quot;</span><br />
<span style="color: #aaffff; font-weight: bold;">Data</span> &nbsp;<span style="color: #00ff66;">&quot;Мышин1[ин]2[ина]&quot;</span>,<span style="color: #00ff66;">&quot;Коршунов1[ов]2[ова]&quot;</span>,<span style="color: #00ff66;">&quot;Кулыгин1[ин]2[ина]&quot;</span><br />
<span style="color: #aaffff; font-weight: bold;">Data</span> &nbsp;<span style="color: #00ff66;">&quot;Селезнев1[ев]2[ева]&quot;</span>,<span style="color: #00ff66;">&quot;Кузнецов1[ов]2[ова]&quot;</span><br />
<br />
<span style="color: #ffee00">;Окончания</span><br />
<span style="color: #aaffff; font-weight: bold;">Data</span> <span style="color: #00ff66;">&quot;%ов,ев{падеж}&quot;</span><br />
<span style="color: #aaffff; font-weight: bold;">Data</span> &nbsp;<span style="color: #00ff66;">&quot;2а3у4а5ым6е&quot;</span><br />
<span style="color: #aaffff; font-weight: bold;">Data</span> <span style="color: #00ff66;">&quot;%ович,евич{падеж}&quot;</span><br />
<span style="color: #aaffff; font-weight: bold;">Data</span> &nbsp;<span style="color: #00ff66;">&quot;2а3у4а5ем6е&quot;</span><br />
<span style="color: #aaffff; font-weight: bold;">Data</span> <span style="color: #00ff66;">&quot;%_,ен,им,уб,ан,ич{падеж}&quot;</span><br />
<span style="color: #aaffff; font-weight: bold;">Data</span> &nbsp;<span style="color: #00ff66;">&quot;2а3у4а5ом6е&quot;</span><br />
<span style="color: #aaffff; font-weight: bold;">Data</span> <span style="color: #00ff66;">&quot;%ин{падеж}&quot;</span><br />
<span style="color: #aaffff; font-weight: bold;">Data</span> &nbsp;<span style="color: #00ff66;">&quot;2а3у4а5ым6е&quot;</span><br />
<span style="color: #aaffff; font-weight: bold;">Data</span> <span style="color: #00ff66;">&quot;%ей{падеж}&quot;</span><br />
<span style="color: #aaffff; font-weight: bold;">Data</span> &nbsp;<span style="color: #00ff66;">&quot;1ей2ея3ею4ея5ем6ее&quot;</span><br />
<span style="color: #aaffff; font-weight: bold;">Data</span> <span style="color: #00ff66;">&quot;%ь{падеж}&quot;</span><br />
<span style="color: #aaffff; font-weight: bold;">Data</span> &nbsp;<span style="color: #00ff66;">&quot;1ь2я3ю4я5ем6е&quot;</span><br />
<span style="color: #aaffff; font-weight: bold;">Data</span> <span style="color: #00ff66;">&quot;%а{падеж}&quot;</span><br />
<span style="color: #aaffff; font-weight: bold;">Data</span> &nbsp;<span style="color: #00ff66;">&quot;1а2и3е4у5ой6е&quot;</span><br />
<span style="color: #aaffff; font-weight: bold;">Data</span> <span style="color: #00ff66;">&quot;%а2{падеж}&quot;</span><br />
<span style="color: #aaffff; font-weight: bold;">Data</span> &nbsp;<span style="color: #00ff66;">&quot;1а2ы3е4у5ой6е&quot;</span><br />
<span style="color: #aaffff; font-weight: bold;">Data</span> <span style="color: #00ff66;">&quot;%а3{падеж}&quot;</span><br />
<span style="color: #aaffff; font-weight: bold;">Data</span> &nbsp;<span style="color: #00ff66;">&quot;1а2и3е4у5ей6е&quot;</span><br />
<span style="color: #aaffff; font-weight: bold;">Data</span> <span style="color: #00ff66;">&quot;%я{падеж}&quot;</span><br />
<span style="color: #aaffff; font-weight: bold;">Data</span> &nbsp;<span style="color: #00ff66;">&quot;1я2и3е4ю5ей6е&quot;</span><br />
<span style="color: #aaffff; font-weight: bold;">Data</span> <span style="color: #00ff66;">&quot;%овна,евна{падеж}&quot;</span><br />
<span style="color: #aaffff; font-weight: bold;">Data</span> &nbsp;<span style="color: #00ff66;">&quot;1а2ы3е4у5ой6е&quot;</span><br />
<span style="color: #aaffff; font-weight: bold;">Data</span> <span style="color: #00ff66;">&quot;%ова,ева,ина{падеж}&quot;</span><br />
<span style="color: #aaffff; font-weight: bold;">Data</span> &nbsp;<span style="color: #00ff66;">&quot;1а2ой3ой4у5ой6ой&quot;</span><br />
<span style="color: #aaffff; font-weight: bold;">Data</span> <span style="color: #00ff66;">&quot;%ий{падеж}&quot;</span><br />
<span style="color: #aaffff; font-weight: bold;">Data</span> &nbsp;<span style="color: #00ff66;">&quot;1ий2ого3ому4ого5им6ом&quot;</span><br />
<span style="color: #aaffff; font-weight: bold;">Data</span> <span style="color: #00ff66;">&quot;%ая{падеж}&quot;</span><br />
<span style="color: #aaffff; font-weight: bold;">Data</span> &nbsp;<span style="color: #00ff66;">&quot;1ая2ой3ой4ую5ой6ой&quot;</span><br />
<span style="color: #aaffff; font-weight: bold;">Data</span> <span style="color: #00ff66;">&quot;%й{падеж}&quot;</span><br />
<span style="color: #aaffff; font-weight: bold;">Data</span> &nbsp;<span style="color: #00ff66;">&quot;1й2я3ю4я5ем6е&quot;</span><br />
<span style="color: #aaffff; font-weight: bold;">Data</span> <span style="color: #00ff66;">&quot;%ел{падеж}&quot;</span><br />
<span style="color: #aaffff; font-weight: bold;">Data</span> &nbsp;<span style="color: #00ff66;">&quot;1ел2ла3лу4ла5лом6ле&quot;</span><br />
<br />
<span style="color: #aaffff; font-weight: bold;">Data</span> <span style="color: #00ff66;">&quot;&quot;</span><br />
<br />
<span style="color: #ffee00">;Функция возвращает часть исходной строки с символа pfrom до pto</span><br />
<span style="color: #aaffff; font-weight: bold;">Function</span> fromto$<span style=" ">&#40;</span>v$,pfrom,pto<span style=" ">&#41;</span><br />
<span style="color: #aaffff; font-weight: bold;">Return</span> <span style="color: #aaffff; font-weight: bold;">Mid</span>$<span style=" ">&#40;</span>v$,pfrom,pto-pfrom<span style="color: #33ffdd;">+1</span><span style=" ">&#41;</span><br />
<span style="color: #aaffff; font-weight: bold;">End Function</span><br />
<br />
<span style="color: #ffee00">;Добавление новой переменной (имя)</span><br />
<span style="color: #aaffff; font-weight: bold;">Function</span> addvar.var<span style=" ">&#40;</span>name$<span style=" ">&#41;</span><br />
v.var=<span style="color: #aaffff; font-weight: bold;">New</span> var<br />
v\name$=name$<br />
v\value=<span style="color: #33ffdd;">1</span><br />
<span style="color: #aaffff; font-weight: bold;">Return</span> v<br />
<span style="color: #aaffff; font-weight: bold;">End Function</span><br />
<br />
<span style="color: #ffee00">;Добавление новой функции (имя,параметр,переменная для номера</span><br />
<span style="color: #aaffff; font-weight: bold;">Function</span> addfunc.func<span style=" ">&#40;</span>name$,param.var,snum.var<span style=" ">&#41;</span><br />
f.func=<span style="color: #aaffff; font-weight: bold;">New</span> func<br />
f\param=param<br />
f\snum=snum<br />
f\name$=<span style="color: #00ff66;">&quot;,&quot;</span>+name$+<span style="color: #00ff66;">&quot;,&quot;</span><br />
<span style="color: #aaffff; font-weight: bold;">If</span> debug <span style="color: #aaffff; font-weight: bold;">And</span> vfuncnames <span style="color: #aaffff; font-weight: bold;">Then</span> <span style="color: #aaffff; font-weight: bold;">DebugLog</span> <span style="color: #00ff66;">&quot;{&quot;</span>+name$+<span style="color: #00ff66;">&quot;}&quot;</span><br />
<span style="color: #aaffff; font-weight: bold;">Return</span> f<br />
<span style="color: #aaffff; font-weight: bold;">End Function</span><br />
<br />
<span style="color: #ffee00">;Добавление новой команды (функция,строка данных)</span><br />
<span style="color: #aaffff; font-weight: bold;">Function</span> addcmd.cmd<span style=" ">&#40;</span>f.func,m$<span style=" ">&#41;</span><br />
v.var=<span style="color: #aaffff; font-weight: bold;">Null</span><br />
vfrom.var=<span style="color: #aaffff; font-weight: bold;">Null</span><br />
f2.func=<span style="color: #aaffff; font-weight: bold;">Null</span><br />
c.cmd=<span style="color: #aaffff; font-weight: bold;">New</span> cmd<br />
<span style="color: #aaffff; font-weight: bold;">If</span> f\firstcmd=<span style="color: #aaffff; font-weight: bold;">Null</span> <span style="color: #aaffff; font-weight: bold;">Then</span> f\firstcmd=c<br />
m$=m$+<span style="color: #00ff66;">&quot;[&quot;</span><br />
<span style="color: #ffee00">;Парсер</span><br />
<span style="color: #aaffff; font-weight: bold;">For</span> n=<span style="color: #33ffdd;">1</span> <span style="color: #aaffff; font-weight: bold;">To</span> <span style="color: #aaffff; font-weight: bold;">Len</span><span style=" ">&#40;</span>m$<span style=" ">&#41;</span><br />
&nbsp;mm$=<span style="color: #aaffff; font-weight: bold;">Mid</span>$<span style=" ">&#40;</span>m$,n,<span style="color: #33ffdd;">1</span><span style=" ">&#41;</span><br />
&nbsp;<span style="color: #aaffff; font-weight: bold;">Select</span> mm$<br />
&nbsp; <span style="color: #aaffff; font-weight: bold;">Case</span> <span style="color: #00ff66;">&quot;[&quot;</span><br />
&nbsp; &nbsp;atcmd=<span style="color: #33ffdd;">1</span><br />
&nbsp; &nbsp;<span style="color: #aaffff; font-weight: bold;">If</span> txt$&lt;&gt;<span style="color: #00ff66;">&quot;&quot;</span> <span style="color: #aaffff; font-weight: bold;">Then</span> addchunk c,cn,<span style="color: #aaffff; font-weight: bold;">Null</span>,<span style="color: #aaffff; font-weight: bold;">Null</span>,<span style="color: #33ffdd;">0</span>,txt$,<span style="color: #aaffff; font-weight: bold;">Null</span><br />
&nbsp; &nbsp;txt$=<span style="color: #00ff66;">&quot;&quot;</span><br />
&nbsp; <span style="color: #aaffff; font-weight: bold;">Case</span> <span style="color: #00ff66;">&quot;]&quot;</span><br />
&nbsp; &nbsp;<span style="color: #aaffff; font-weight: bold;">If</span> f2=<span style="color: #aaffff; font-weight: bold;">Null</span> <span style="color: #aaffff; font-weight: bold;">Then</span> f2=findfunc<span style=" ">&#40;</span>txt$<span style=" ">&#41;</span><br />
&nbsp; &nbsp;addchunk c,cn,f2,<span style="color: #aaffff; font-weight: bold;">Null</span>,<span style="color: #33ffdd;">0</span>,<span style="color: #00ff66;">&quot;&quot;</span>,<span style="color: #aaffff; font-weight: bold;">Null</span><br />
&nbsp; &nbsp;atcmd=<span style="color: #33ffdd;">0</span><br />
&nbsp; &nbsp;f2=<span style="color: #aaffff; font-weight: bold;">Null</span><br />
&nbsp; &nbsp;txt$=<span style="color: #00ff66;">&quot;&quot;</span><br />
&nbsp; <span style="color: #aaffff; font-weight: bold;">Case</span> <span style="color: #00ff66;">&quot;{&quot;</span><br />
&nbsp; &nbsp;f2=findfunc<span style=" ">&#40;</span>txt$<span style=" ">&#41;</span><br />
&nbsp; &nbsp;v=f2\param<br />
&nbsp; &nbsp;txt$=<span style="color: #00ff66;">&quot;&quot;</span><br />
&nbsp; <span style="color: #aaffff; font-weight: bold;">Case</span> <span style="color: #00ff66;">&quot;=&quot;</span><br />
&nbsp; &nbsp;v=findvar<span style=" ">&#40;</span>txt$<span style=" ">&#41;</span><br />
&nbsp; &nbsp;txt$=<span style="color: #00ff66;">&quot;&quot;</span><br />
&nbsp; <span style="color: #aaffff; font-weight: bold;">Case</span> <span style="color: #00ff66;">&quot;}&quot;</span>,<span style="color: #00ff66;">&quot;;&quot;</span><br />
&nbsp; &nbsp;<span style="color: #aaffff; font-weight: bold;">If</span> <span style="color: #aaffff; font-weight: bold;">Instr</span><span style=" ">&#40;</span><span style="color: #00ff66;">&quot;0123456789&quot;</span>,<span style="color: #aaffff; font-weight: bold;">Left</span>$<span style=" ">&#40;</span>txt$,<span style="color: #33ffdd;">1</span><span style=" ">&#41;</span><span style=" ">&#41;</span> <span style="color: #aaffff; font-weight: bold;">Then</span><br />
&nbsp; &nbsp; addchunk c,cn,<span style="color: #aaffff; font-weight: bold;">Null</span>,v,txt$,<span style="color: #00ff66;">&quot;&quot;</span>,<span style="color: #aaffff; font-weight: bold;">Null</span><br />
&nbsp; &nbsp; <span style="color: #aaffff; font-weight: bold;">If</span> debug <span style="color: #aaffff; font-weight: bold;">And</span> vvars <span style="color: #aaffff; font-weight: bold;">Then</span> <span style="color: #aaffff; font-weight: bold;">DebugLog</span> f\name$+<span style="color: #00ff66;">&quot;(&quot;</span>+v\name$+<span style="color: #00ff66;">&quot;=&quot;</span>+txt$+<span style="color: #00ff66;">&quot;)&quot;</span><br />
&nbsp; &nbsp;<span style="color: #aaffff; font-weight: bold;">Else</span><br />
&nbsp; &nbsp; vfrom=findvar<span style=" ">&#40;</span>txt$<span style=" ">&#41;</span><br />
&nbsp; &nbsp; addchunk c,cn,<span style="color: #aaffff; font-weight: bold;">Null</span>,v,<span style="color: #33ffdd;">0</span>,<span style="color: #00ff66;">&quot;&quot;</span>,vfrom<br />
&nbsp; &nbsp; <span style="color: #aaffff; font-weight: bold;">If</span> debug <span style="color: #aaffff; font-weight: bold;">And</span> vvars <span style="color: #aaffff; font-weight: bold;">Then</span> <span style="color: #aaffff; font-weight: bold;">DebugLog</span> f\name$+<span style="color: #00ff66;">&quot;(&quot;</span>+v\name$+<span style="color: #00ff66;">&quot;=&quot;</span>+vfrom\name$+<span style="color: #00ff66;">&quot;)&quot;</span><br />
&nbsp; &nbsp; vfrom=<span style="color: #aaffff; font-weight: bold;">Null</span><br />
&nbsp; &nbsp;<span style="color: #aaffff; font-weight: bold;">End</span> <span style="color: #aaffff; font-weight: bold;">If</span><br />
&nbsp; &nbsp;txt$=<span style="color: #00ff66;">&quot;&quot;</span><br />
&nbsp; &nbsp;v=<span style="color: #aaffff; font-weight: bold;">Null</span><br />
&nbsp; <span style="color: #aaffff; font-weight: bold;">Default</span><br />
&nbsp; &nbsp;<span style="color: #aaffff; font-weight: bold;">If</span> <span style="color: #aaffff; font-weight: bold;">Asc</span><span style=" ">&#40;</span>mm$<span style=" ">&#41;</span>&gt;=<span style="color: #33ffdd;">49</span> <span style="color: #aaffff; font-weight: bold;">And</span> <span style="color: #aaffff; font-weight: bold;">Asc</span><span style=" ">&#40;</span>mm$<span style=" ">&#41;</span>&lt;=<span style="color: #33ffdd;">57</span> <span style="color: #aaffff; font-weight: bold;">And</span> atcmd=<span style="color: #33ffdd;">0</span> <span style="color: #aaffff; font-weight: bold;">Then</span><br />
&nbsp; &nbsp; <span style="color: #aaffff; font-weight: bold;">If</span> txt$&lt;&gt;<span style="color: #00ff66;">&quot;&quot;</span> <span style="color: #aaffff; font-weight: bold;">Then</span> addchunk c,cn,<span style="color: #aaffff; font-weight: bold;">Null</span>,<span style="color: #aaffff; font-weight: bold;">Null</span>,<span style="color: #33ffdd;">0</span>,txt$,<span style="color: #aaffff; font-weight: bold;">Null</span><br />
&nbsp; &nbsp; cn=mm$<br />
&nbsp; &nbsp; txt$=<span style="color: #00ff66;">&quot;&quot;</span><br />
&nbsp; &nbsp;<span style="color: #aaffff; font-weight: bold;">Else</span><br />
&nbsp; &nbsp; txt$=txt$+mm$<br />
&nbsp; &nbsp;<span style="color: #aaffff; font-weight: bold;">End</span> <span style="color: #aaffff; font-weight: bold;">If</span><br />
&nbsp;<span style="color: #aaffff; font-weight: bold;">End Select</span><br />
&nbsp;<br />
<span style="color: #aaffff; font-weight: bold;">Next</span><br />
f\cmdq=f\cmdq<span style="color: #33ffdd;">+1</span><br />
<span style="color: #aaffff; font-weight: bold;">Return</span> c<br />
<span style="color: #aaffff; font-weight: bold;">End Function</span><br />
<br />
<span style="color: #ffee00">;Добавление куска команды</span><br />
<span style="color: #aaffff; font-weight: bold;">Function</span> addchunk<span style=" ">&#40;</span>c.cmd,n,f.func,v.var,value,txt$,vfrom.var<span style=" ">&#41;</span><br />
ch.chunk=<span style="color: #aaffff; font-weight: bold;">New</span> chunk<br />
ch\f=f<br />
ch\v=v<br />
ch\value=value<br />
ch\txt$=txt$<br />
ch\vfrom=vfrom<br />
<span style="color: #aaffff; font-weight: bold;">If</span> c\chunk<span style=" ">&#91;</span>n<span style=" ">&#93;</span>=<span style="color: #aaffff; font-weight: bold;">Null</span> <span style="color: #aaffff; font-weight: bold;">Then</span> c\chunk<span style=" ">&#91;</span>n<span style=" ">&#93;</span>=ch<br />
c\chunkq<span style=" ">&#91;</span>n<span style=" ">&#93;</span>=c\chunkq<span style=" ">&#91;</span>n<span style=" ">&#93;</span><span style="color: #33ffdd;">+1</span><br />
<span style="color: #aaffff; font-weight: bold;">If</span> debug <span style="color: #aaffff; font-weight: bold;">And</span> vchunks <span style="color: #aaffff; font-weight: bold;">Then</span><br />
&nbsp;m$=n+<span style="color: #00ff66;">&quot;,&quot;</span>+c\chunkq<span style=" ">&#91;</span>n<span style=" ">&#93;</span>+<span style="color: #00ff66;">&quot;:&quot;</span><br />
&nbsp;<span style="color: #aaffff; font-weight: bold;">If</span> f&lt;&gt;Null <span style="color: #aaffff; font-weight: bold;">Then</span> m$=m$+<span style="color: #00ff66;">&quot;func &quot;</span>+ch\f\name$+<span style="color: #00ff66;">&quot;;&quot;</span><br />
&nbsp;<span style="color: #aaffff; font-weight: bold;">If</span> vfrom&lt;&gt;Null <span style="color: #aaffff; font-weight: bold;">Then</span><br />
&nbsp; m$=m$+<span style="color: #00ff66;">&quot;var &quot;</span>+ch\v\name$+<span style="color: #00ff66;">&quot;=&quot;</span>+ch\vfrom\name$+<span style="color: #00ff66;">&quot;; &quot;</span><br />
&nbsp;<span style="color: #aaffff; font-weight: bold;">ElseIf</span> v&lt;&gt;Null <span style="color: #aaffff; font-weight: bold;">Then</span><br />
&nbsp; m$=m$+<span style="color: #00ff66;">&quot;var &quot;</span>+ch\v\name$+<span style="color: #00ff66;">&quot;=&quot;</span>+ch\value+<span style="color: #00ff66;">&quot;; &quot;</span><br />
&nbsp;<span style="color: #aaffff; font-weight: bold;">End</span> <span style="color: #aaffff; font-weight: bold;">If</span><br />
&nbsp;<span style="color: #aaffff; font-weight: bold;">DebugLog</span> m$+<span style="color: #00ff66;">&quot;'&quot;</span>+txt$+<span style="color: #00ff66;">&quot;'&quot;</span><br />
<span style="color: #aaffff; font-weight: bold;">End</span> <span style="color: #aaffff; font-weight: bold;">If</span><br />
<span style="color: #aaffff; font-weight: bold;">End Function</span><br />
<br />
<span style="color: #ffee00">;Поиск функции по названию</span><br />
<span style="color: #aaffff; font-weight: bold;">Function</span> findfunc.func<span style=" ">&#40;</span>funcname$<span style=" ">&#41;</span><br />
funcname$=<span style="color: #00ff66;">&quot;,&quot;</span>+funcname$+<span style="color: #00ff66;">&quot;,&quot;</span><br />
<span style="color: #aaffff; font-weight: bold;">For</span> f.func=<span style="color: #aaffff; font-weight: bold;">Each</span> func<br />
&nbsp;<span style="color: #aaffff; font-weight: bold;">If</span> <span style="color: #aaffff; font-weight: bold;">Instr</span><span style=" ">&#40;</span>f\name$,funcname$<span style=" ">&#41;</span> <span style="color: #aaffff; font-weight: bold;">Then</span> <span style="color: #aaffff; font-weight: bold;">Return</span> f<br />
<span style="color: #aaffff; font-weight: bold;">Next</span><br />
<span style="color: #aaffff; font-weight: bold;">If</span> f=<span style="color: #aaffff; font-weight: bold;">Null</span> <span style="color: #aaffff; font-weight: bold;">Then</span> <span style="color: #aaffff; font-weight: bold;">DebugLog</span> <span style="color: #00ff66;">&quot;Function [&quot;</span>+funcname$+<span style="color: #00ff66;">&quot;] not found&quot;</span>:<span style="color: #aaffff; font-weight: bold;">Stop</span><br />
<span style="color: #aaffff; font-weight: bold;">End Function</span><br />
<br />
<span style="color: #ffee00">;Поиск переменной по названию</span><br />
<span style="color: #aaffff; font-weight: bold;">Function</span> findvar.var<span style=" ">&#40;</span>vname$<span style=" ">&#41;</span><br />
<span style="color: #ffee00">;DebugLog vname$</span><br />
<span style="color: #aaffff; font-weight: bold;">For</span> v.var=<span style="color: #aaffff; font-weight: bold;">Each</span> var<br />
&nbsp;<span style="color: #aaffff; font-weight: bold;">If</span> v\name$=vname$ <span style="color: #aaffff; font-weight: bold;">Then</span> <span style="color: #aaffff; font-weight: bold;">Return</span> v<br />
<span style="color: #aaffff; font-weight: bold;">Next</span><br />
<span style="color: #aaffff; font-weight: bold;">If</span> v=<span style="color: #aaffff; font-weight: bold;">Null</span> <span style="color: #aaffff; font-weight: bold;">Then</span> <span style="color: #aaffff; font-weight: bold;">DebugLog</span> <span style="color: #00ff66;">&quot;Variable {&quot;</span>+vname$+<span style="color: #00ff66;">&quot;} not found&quot;</span>:<span style="color: #aaffff; font-weight: bold;">Stop</span><br />
<span style="color: #aaffff; font-weight: bold;">End Function</span><br />
<br />
<span style="color: #ffee00">;Вывод фразы (функция, значение параметра, номер команды)</span><br />
<span style="color: #aaffff; font-weight: bold;">Function</span> phrase$<span style=" ">&#40;</span>f.func,pvalue=<span style="color: #33ffdd;">0</span>,num=<span style="color: #33ffdd;">0</span><span style=" ">&#41;</span><br />
<span style="color: #aaffff; font-weight: bold;">If</span> f\snum&lt;&gt;Null <span style="color: #aaffff; font-weight: bold;">And</span> num=<span style="color: #33ffdd;">0</span> <span style="color: #aaffff; font-weight: bold;">Then</span> num=f\snum\value<br />
<span style="color: #aaffff; font-weight: bold;">If</span> num=<span style="color: #33ffdd;">0</span> <span style="color: #aaffff; font-weight: bold;">Then</span> cn=<span style="color: #aaffff; font-weight: bold;">Rand</span><span style=" ">&#40;</span><span style="color: #33ffdd;">1</span>,f\cmdq<span style=" ">&#41;</span> <span style="color: #aaffff; font-weight: bold;">Else</span> cn=num<br />
<br />
cmd.cmd=f\Firstcmd<br />
<span style="color: #aaffff; font-weight: bold;">For</span> n=<span style="color: #33ffdd;">2</span> <span style="color: #aaffff; font-weight: bold;">To</span> cn<br />
&nbsp;cmd=<span style="color: #aaffff; font-weight: bold;">After</span> cmd<br />
<span style="color: #aaffff; font-weight: bold;">Next</span><br />
<br />
<span style="color: #aaffff; font-weight: bold;">If</span> f\param&lt;&gt;Null <span style="color: #aaffff; font-weight: bold;">And</span> pvalue&gt;<span style="color: #33ffdd;">0</span> <span style="color: #aaffff; font-weight: bold;">Then</span> f\param\value=pvalue<br />
<span style="color: #aaffff; font-weight: bold;">For</span> n=<span style="color: #33ffdd;">0</span> <span style="color: #aaffff; font-weight: bold;">To</span> <span style="color: #33ffdd;">1</span><br />
&nbsp;<span style="color: #aaffff; font-weight: bold;">If</span> f\param=<span style="color: #aaffff; font-weight: bold;">Null</span> <span style="color: #aaffff; font-weight: bold;">Then</span> chn=n <span style="color: #aaffff; font-weight: bold;">Else</span> chn=n*f\param\value<br />
&nbsp;ch.chunk=cmd\chunk<span style=" ">&#91;</span>chn<span style=" ">&#93;</span><br />
&nbsp;<span style="color: #aaffff; font-weight: bold;">If</span> debug <span style="color: #aaffff; font-weight: bold;">And</span> vprocessing <span style="color: #aaffff; font-weight: bold;">And</span> f\param&lt;&gt;Null <span style="color: #aaffff; font-weight: bold;">Then</span><br />
&nbsp; <span style="color: #aaffff; font-weight: bold;">DebugLog</span> f\name$+<span style="color: #00ff66;">&quot; param {&quot;</span>+f\param\name$+<span style="color: #00ff66;">&quot;=&quot;</span>+f\param\value+<span style="color: #00ff66;">&quot;}&quot;</span><br />
&nbsp;<span style="color: #aaffff; font-weight: bold;">End</span> <span style="color: #aaffff; font-weight: bold;">If</span><br />
&nbsp;<span style="color: #aaffff; font-weight: bold;">For</span> nn=<span style="color: #33ffdd;">1</span> <span style="color: #aaffff; font-weight: bold;">To</span> cmd\chunkq<span style=" ">&#91;</span>chn<span style=" ">&#93;</span><br />
&nbsp; <span style="color: #aaffff; font-weight: bold;">If</span> debug <span style="color: #aaffff; font-weight: bold;">And</span> vprocessing <span style="color: #aaffff; font-weight: bold;">Then</span><br />
&nbsp; &nbsp;m$=f\name$+<span style="color: #00ff66;">&quot;:&quot;</span>+chn+<span style="color: #00ff66;">&quot;(&quot;</span>+nn+<span style="color: #00ff66;">&quot; of &quot;</span>+cmd\chunkq<span style=" ">&#91;</span>chn<span style=" ">&#93;</span>+<span style="color: #00ff66;">&quot;):&quot;</span><br />
&nbsp; &nbsp;<span style="color: #aaffff; font-weight: bold;">If</span> ch\f&lt;&gt;Null <span style="color: #aaffff; font-weight: bold;">Then</span> m$=m$+<span style="color: #00ff66;">&quot;func &quot;</span>+ch\f\name$<br />
&nbsp; &nbsp;<span style="color: #aaffff; font-weight: bold;">If</span> ch\vfrom&lt;&gt;Null <span style="color: #aaffff; font-weight: bold;">Then</span><br />
&nbsp; &nbsp; m$=m$+<span style="color: #00ff66;">&quot;(&quot;</span>+ch\v\name$+<span style="color: #00ff66;">&quot;=&quot;</span>+ch\vfrom\name$+<span style="color: #00ff66;">&quot;)&quot;</span><br />
&nbsp; &nbsp;<span style="color: #aaffff; font-weight: bold;">ElseIf</span> ch\v&lt;&gt;Null<br />
&nbsp; &nbsp; m$=m$+<span style="color: #00ff66;">&quot;(&quot;</span>+ch\v\name$+<span style="color: #00ff66;">&quot;=&quot;</span>+ch\value+<span style="color: #00ff66;">&quot;)&quot;</span><br />
&nbsp; &nbsp;<span style="color: #aaffff; font-weight: bold;">End</span> <span style="color: #aaffff; font-weight: bold;">If</span><br />
&nbsp; &nbsp;<span style="color: #aaffff; font-weight: bold;">DebugLog</span> m$+<span style="color: #00ff66;">&quot;'&quot;</span>+txt$+<span style="color: #00ff66;">&quot;'&quot;</span><br />
&nbsp; <span style="color: #aaffff; font-weight: bold;">End</span> <span style="color: #aaffff; font-weight: bold;">If</span><br />
&nbsp; <span style="color: #aaffff; font-weight: bold;">If</span> ch\vfrom&lt;&gt;Null <span style="color: #aaffff; font-weight: bold;">Then</span><br />
&nbsp; &nbsp;ch\v\value=ch\vfrom\value<br />
&nbsp; <span style="color: #aaffff; font-weight: bold;">ElseIf</span> ch\v&lt;&gt;Null <span style="color: #aaffff; font-weight: bold;">Then</span><br />
&nbsp; &nbsp;ch\v\value=ch\value<br />
&nbsp; <span style="color: #aaffff; font-weight: bold;">End</span> <span style="color: #aaffff; font-weight: bold;">If</span><br />
&nbsp; <span style="color: #aaffff; font-weight: bold;">If</span> ch\f&lt;&gt;Null <span style="color: #aaffff; font-weight: bold;">Then</span> p$=p$+phrase$<span style=" ">&#40;</span>ch\f,<span style="color: #33ffdd;">0</span><span style=" ">&#41;</span><br />
&nbsp; p$=p$+ch\txt$<br />
&nbsp; ch=<span style="color: #aaffff; font-weight: bold;">After</span> ch<br />
&nbsp;<span style="color: #aaffff; font-weight: bold;">Next</span><br />
<span style="color: #aaffff; font-weight: bold;">Next</span><br />
<span style="color: #aaffff; font-weight: bold;">Return</span> p$<br />
<span style="color: #aaffff; font-weight: bold;">End Function</span><br />
<br />
<span style="color: #ffee00">;Установка значения переменной по названию</span><br />
<span style="color: #aaffff; font-weight: bold;">Function</span> setvar<span style=" ">&#40;</span>name$,value<span style=" ">&#41;</span><br />
v.var=findvar<span style=" ">&#40;</span>name$<span style=" ">&#41;</span><br />
v\value=value<br />
<span style="color: #aaffff; font-weight: bold;">End Function</span><br />
<br />
<span style="color: #ffee00">;Функция для теста падежей</span><br />
<span style="color: #aaffff; font-weight: bold;">Function</span> testpad<span style=" ">&#40;</span><span style=" ">&#41;</span><br />
f.func=<span style="color: #aaffff; font-weight: bold;">First</span> func<br />
c.cmd=<span style="color: #aaffff; font-weight: bold;">First</span> cmd<br />
pad.var=findvar<span style=" ">&#40;</span><span style="color: #00ff66;">&quot;падеж&quot;</span><span style=" ">&#41;</span><br />
<span style="color: #aaffff; font-weight: bold;">Repeat</span><br />
&nbsp;<span style="color: #aaffff; font-weight: bold;">For</span> n=<span style="color: #33ffdd;">1</span> <span style="color: #aaffff; font-weight: bold;">To</span> f\cmdq<br />
&nbsp; <span style="color: #aaffff; font-weight: bold;">Cls</span><br />
&nbsp; pad\value=<span style="color: #33ffdd;">1</span><br />
&nbsp; <span style="color: #aaffff; font-weight: bold;">Text</span> <span style="color: #33ffdd;">0</span>,<span style="color: #33ffdd;">0</span>,phrase$<span style=" ">&#40;</span>f,n<span style=" ">&#41;</span><br />
&nbsp; pad\value=<span style="color: #33ffdd;">2</span><br />
&nbsp; <span style="color: #aaffff; font-weight: bold;">Text</span> <span style="color: #33ffdd;">0</span>,<span style="color: #33ffdd;">14</span>,<span style="color: #00ff66;">&quot;Здесь нет &quot;</span>+phrase$<span style=" ">&#40;</span>f,n<span style=" ">&#41;</span><br />
&nbsp; pad\value=<span style="color: #33ffdd;">3</span><br />
&nbsp; <span style="color: #aaffff; font-weight: bold;">Text</span> <span style="color: #33ffdd;">0</span>,<span style="color: #33ffdd;">28</span>,<span style="color: #00ff66;">&quot;Пойти к &quot;</span>+phrase$<span style=" ">&#40;</span>f,n<span style=" ">&#41;</span><br />
&nbsp; pad\value=<span style="color: #33ffdd;">4</span><br />
&nbsp; <span style="color: #aaffff; font-weight: bold;">Text</span> <span style="color: #33ffdd;">0</span>,<span style="color: #33ffdd;">42</span>,<span style="color: #00ff66;">&quot;Посмотреть на &quot;</span>+phrase$<span style=" ">&#40;</span>f,n<span style=" ">&#41;</span><br />
&nbsp; pad\value=<span style="color: #33ffdd;">5</span><br />
&nbsp; <span style="color: #aaffff; font-weight: bold;">Text</span> <span style="color: #33ffdd;">0</span>,<span style="color: #33ffdd;">56</span>,<span style="color: #00ff66;">&quot;Стоять перед &quot;</span>+phrase$<span style=" ">&#40;</span>f,n<span style=" ">&#41;</span><br />
&nbsp; pad\value=<span style="color: #33ffdd;">6</span><br />
&nbsp; <span style="color: #aaffff; font-weight: bold;">Text</span> <span style="color: #33ffdd;">0</span>,<span style="color: #33ffdd;">70</span>,<span style="color: #00ff66;">&quot;Говорить о &quot;</span>+phrase$<span style=" ">&#40;</span>f,n<span style=" ">&#41;</span><br />
&nbsp; <span style="color: #aaffff; font-weight: bold;">WaitKey</span><br />
&nbsp;<span style="color: #aaffff; font-weight: bold;">Next</span><br />
&nbsp;f=<span style="color: #aaffff; font-weight: bold;">After</span> f<br />
<span style="color: #aaffff; font-weight: bold;">Until</span> f=<span style="color: #aaffff; font-weight: bold;">Null</span><br />
<span style="color: #aaffff; font-weight: bold;">End Function</span><br />
<br />
<span style="color: #ffee00">;Запрос номера команды (имя переменной, имя функции, значение параметра)</span><br />
<span style="color: #ffee00">; имя переменной - той, которая будет изменена</span><br />
<span style="color: #aaffff; font-weight: bold;">Function</span> ask<span style=" ">&#40;</span>vname$,fname$,pvalue<span style=" ">&#41;</span><br />
v.var=findvar<span style=" ">&#40;</span>vname$<span style=" ">&#41;</span><br />
f.func=findfunc<span style=" ">&#40;</span>fname$<span style=" ">&#41;</span><br />
<span style="color: #aaffff; font-weight: bold;">Cls</span><br />
<span style="color: #aaffff; font-weight: bold;">Text</span> <span style="color: #33ffdd;">0</span>,<span style="color: #33ffdd;">0</span>,fname$<br />
<span style="color: #aaffff; font-weight: bold;">For</span> n=<span style="color: #33ffdd;">1</span> <span style="color: #aaffff; font-weight: bold;">To</span> f\cmdq<br />
&nbsp;<span style="color: #aaffff; font-weight: bold;">Text</span> <span style="color: #33ffdd;">0</span>,<span style="color: #33ffdd;">10</span>*n,n+<span style="color: #00ff66;">&quot;) &quot;</span>+phrase$<span style=" ">&#40;</span>f,pvalue,n<span style=" ">&#41;</span><br />
<span style="color: #aaffff; font-weight: bold;">Next</span><br />
<span style="color: #aaffff; font-weight: bold;">Repeat</span><br />
&nbsp;<span style="color: #aaffff; font-weight: bold;">If</span> <span style="color: #aaffff; font-weight: bold;">MouseHit</span><span style=" ">&#40;</span><span style="color: #33ffdd;">1</span><span style=" ">&#41;</span> <span style="color: #aaffff; font-weight: bold;">Then</span> i=<span style="color: #aaffff; font-weight: bold;">Floor</span><span style=" ">&#40;</span><span style="color: #aaffff; font-weight: bold;">MouseY</span><span style=" ">&#40;</span><span style=" ">&#41;</span>/<span style="color: #33ffdd;">10</span><span style=" ">&#41;</span><br />
&nbsp;<span style="color: #aaffff; font-weight: bold;">If</span> i&gt;<span style="color: #33ffdd;">0</span> <span style="color: #aaffff; font-weight: bold;">And</span> i&lt;n <span style="color: #aaffff; font-weight: bold;">Then</span> <span style="color: #aaffff; font-weight: bold;">Exit</span><br />
<span style="color: #aaffff; font-weight: bold;">Forever</span><br />
v\value=i<br />
<span style="color: #aaffff; font-weight: bold;">Return</span> i<br />
</p>
<span style="color: #aaffff; font-weight: bold;">End Function</span></div>
<div align="right"><a href="http://blitzetcetera.org/images/0/03/Script.zip" class="internal" title="Script.zip">скачать архив с файлами к статье</a></div>
<hr />
<p>Автор: <a href="http://blitzetcetera.org/index.php/%D0%A3%D1%87%D0%B0%D1%81%D1%82%D0%BD%D0%B8%D0%BA:Matt_Merkulov" title="Участник:Matt Merkulov">Матвей Меркулов</a> (E-mail: MattMerk@mail.ru, ICQ: 392-274-050)
</p><!-- 
Pre-expand include size: 26635 bytes
Post-expand include size: 448 bytes
Template argument size: 17 bytes
Maximum: 2097152 bytes
-->

<!-- Saved in parser cache with key db1:pcache:idhash:634-0!1!0!!ru!2 and timestamp 20071110040801 -->
<div class="printfooter">
Получено с <a href="72q31bli.html">http://blitzetcetera.org/index.php/%D0%A1%D0%BA%D1%80%D0%B8%D0%BF%D1%82%D1%8B</a></div>
			<!-- end content -->			<div class="visualClear"></div>				</td>				<td class="rightside">				</td>			</tr>		</table>		</div>	</div>		</div>	
		<script type="text/javascript">if (window.runOnloadHook) runOnloadHook();</script>
</div></body>
<!-- Mirrored from localhost/index.php/%D0%A1%D0%BA%D1%80%D0%B8%D0%BF%D1%82%D1%8B by HTTrack Website Copier/3.x [XR&CO'2007], Sat, 10 Nov 2007 05:16:43 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8"><!-- /Added by HTTrack -->
</html>