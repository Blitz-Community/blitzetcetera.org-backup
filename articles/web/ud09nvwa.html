<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml" xml:lang="ru" lang="ru" dir="ltr">	
<!-- Mirrored from localhost/index.php/BlitzMax_%D0%B4%D0%BB%D1%8F_%D0%BD%D0%B0%D1%87%D0%B8%D0%BD%D0%B0%D1%8E%D1%89%D0%B8%D1%85 by HTTrack Website Copier/3.x [XR&CO'2007], Sat, 10 Nov 2007 05:14:30 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8"><!-- /Added by HTTrack -->
<head>		<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />				<meta name="keywords" content="BlitzMax для начинающих,MANIAK dobrii" />
		<link rel="shortcut icon" href="http://blitzetcetera.org/favicon.ico" />
		<link rel="search" type="application/opensearchdescription+xml" href="http://blitzetcetera.org/opensearch_desc.php" title="Blitz Et Cetera (Русский)" />
		<title>BlitzMax для начинающих — Blitz Et Cetera</title>		<style type="text/css" media="screen,projection">/*<![CDATA[*/ @import "bvih5rde.css?63"; /*]]>*/</style>		<link rel="stylesheet" type="text/css" media="print" href="gcxktlm6.css?63" />		<link rel="stylesheet" type="text/css" media="handheld" href="zumsslq_.css?63" />		<!--[if lt IE 5.5000]><style type="text/css">@import "/skins/OfflineNew/IE50Fixes.css?63";</style><![endif]-->		<!--[if IE 5.5000]><style type="text/css">@import "/skins/OfflineNew/IE55Fixes.css?63";</style><![endif]-->		<!--[if IE 6]><style type="text/css">@import "/skins/OfflineNew/IE60Fixes.css?63";</style><![endif]-->		<!--[if IE 7]><style type="text/css">@import "/skins/OfflineNew/IE70Fixes.css?63";</style><![endif]-->		<!--[if lt IE 7]><script type="text/javascript" src="/skins/common/IEFixes.js?63"></script>		<meta http-equiv="imagetoolbar" content="no" /><![endif]-->		<script type= "text/javascript">/*<![CDATA[*/
var skin = "OfflineNew";
var stylepath = "/skins";
var wgArticlePath = "/index.php/$1";
var wgScriptPath = "";
var wgServer = "http://blitzetcetera.org/";
var wgCanonicalNamespace = "";
var wgCanonicalSpecialPageName = false;
var wgNamespaceNumber = 0;
var wgPageName = "BlitzMax_для_начинающих";
var wgTitle = "BlitzMax для начинающих";
var wgAction = "view";
var wgArticleId = "142";
var wgIsArticle = true;
var wgUserName = null;
var wgUserGroups = null;
var wgUserLanguage = "ru";
var wgContentLanguage = "ru";
var wgBreakFrames = false;
var wgCurRevisionId = "3529";
/*]]>*/</script>
		<script type="text/javascript" src="2nq-6cel.js?63"><!-- wikibits js --></script>		<script type="text/javascript" src="http://blitzetcetera.org/index.php?title=-&amp;action=raw&amp;gen=js"><!-- site js --></script>		<style type="text/css">/*<![CDATA[*/
@import "http://blitzetcetera.org/index.php?title=MediaWiki:Common.css&amp;usemsgcache=yes&amp;action=raw&amp;ctype=text/css&amp;smaxage=18000";
@import "http://blitzetcetera.org/index.php?title=MediaWiki:OfflineNew.css&amp;usemsgcache=yes&amp;action=raw&amp;ctype=text/css&amp;smaxage=18000";
@import "http://blitzetcetera.org/index.php?title=-&amp;action=raw&amp;gen=css&amp;maxage=18000";
/*]]>*/</style>		<!-- Head Scripts -->	</head><body  class="mediawiki ns-0 ltr page-BlitzMax_для_начинающих">	<div id="globalWrapper">	<div id="logocontainer">		<table align="center">		  <tr>				<td id="blitzetclogo">				</td>			</tr>		</table>	</div>	<div id="magbar">	Журнал о программированнии на языках Blitz3D, BlitzMax, BlitzPlus	</div>		<div id="column-content">	<div id="content">		<a name="top" id="top"></a>				<div id="bodyContent">		<table cellspacing=0 cellpadding=0 width=100%>			<tr>			  <td class="leftside">				</td>				<td class="sheetbody">					<h1 class="sheet">BlitzMax для начинающих</h1>			<h3 id="siteSub">Материал из Blitz Et Cetera.</h3>			<div id="contentSub"></div>			<!-- start content -->			<a name=".D0.A7.D0.B0.D1.81.D1.82.D1.8C_1"></a><h2><span class="editsection">[<a href="http://blitzetcetera.org/index.php?title=BlitzMax_%D0%B4%D0%BB%D1%8F_%D0%BD%D0%B0%D1%87%D0%B8%D0%BD%D0%B0%D1%8E%D1%89%D0%B8%D1%85&amp;action=edit&amp;section=1" title="Править секцию: Часть 1">править</a>]</span> <span class="mw-headline">Часть 1</span></h2>
<p>Это простенький тьюториал по BlitzMax. Цель в том, чтобы нарисовать какой-нить текст на экране в графическом режиме. OK, давайте не будем терять время и сразу перейдем к установке графического режима.
</p>
<div class="bmx" style="font-family: monospace;background-color:#FFFFFF;border:1px dashed #CCCCCC;padding:10px;background-color:#01516B;color:#FFFFFF;border:1px solid #003040;padding:10px;">width=<span style="color: #FFFFFF;">640</span><br />
<p>height=<span style="color: #FFFFFF;">480</span><br />
depth=<span style="color: #FFFFFF;">16</span><br />
</p>
<span style="color: #ffff00; font-weight: bold;">Graphics</span> width,height,depth</div>
<p>Сперва определим переменные для хранения высоты, ширины, и глубины цвета - таким образом, мы сможем использовать их позже, если\когда нам понадобится знать параметры экрана.
</p><p>Затем мы используем комманду Graphics, чтобы установить графический режим и создать полноэкранное окно разрешением 640x480 и глубиной цвета в 16 бит, чтобы можно было рисовать в нем. Перед рисованием чего-либо на экране мы должны обязательно использовать команду Graphics. 
</p><p>Теперь, давайте напишем какой-нибудь текст на экране. В отличии от Blitz3D, мы используем растровые шрифты для отображения текста вместо простых шрифтов. Растровые шрифты лучше преобразуемых шрифтов, потому что они отображаются быстрее и с ними можно обращаться, как с обычными картинками, т.е. мы можем их блендить, крутить и т.д. 
</p>
<div class="bmx" style="font-family: monospace;background-color:#FFFFFF;border:1px dashed #CCCCCC;padding:10px;background-color:#01516B;color:#FFFFFF;border:1px solid #003040;padding:10px;">font=<span style="color: #ffff00; font-weight: bold;">LoadImageFont</span><span style=" ">&#40;</span><span style="color: #00FF66;">&quot;Arial.ttf&quot;</span>,<span style="color: #FFFFFF;">1</span><span style=" ">&#41;</span><br />
<span style="color: #ffff00; font-weight: bold;">SetImageFont</span> font</div>
<p>Первая строка загружает наш шрифт в память и возвращает указатель на адрес в памяти, который мы можем потом использовать для установки шрифта текущим, что мы и делаем во второй строке. 
</p><p>Теперь давайте начнем наш главный цикл. 
</p>
<div class="bmx" style="font-family: monospace;background-color:#FFFFFF;border:1px dashed #CCCCCC;padding:10px;background-color:#01516B;color:#FFFFFF;border:1px solid #003040;padding:10px;"><span style="color: #ffff00; font-weight: bold;">While</span> <span style="color: #ffff00; font-weight: bold;">Not</span> <span style="color: #ffff00; font-weight: bold;">KeyDown</span><span style=" ">&#40;</span>KEY_ESCAPE<span style=" ">&#41;</span></div>
<p>Это начало нашего главного цикла. Он просто проверяет, нажат ли Esc или нет - если нажат, то мы выйдем из цикла, а если нет, то код внутри цикла будет выполняться дальше. 
</p><p>Мы использовали KEY_ESCAPE в нашем цикле, но не определили его значение в начале. Дело тут в том, что есть такой модуль, содержащий константы со СканКодами (номерами клавиш), одной из таких констант является KEY_ESCAPE. 
</p><p>ОК, теперь давай нарисуем наш текст.  
</p>
<div class="bmx" style="font-family: monospace;background-color:#FFFFFF;border:1px dashed #CCCCCC;padding:10px;background-color:#01516B;color:#FFFFFF;border:1px solid #003040;padding:10px;"><span style="color: #ffff00; font-weight: bold;">DrawText</span> <span style="color: #00FF66;">&quot;Hello World&quot;</span>,<span style="color: #FFFFFF;">0</span>,<span style="color: #FFFFFF;">0</span></div>
<p>Этот код выведет текст "Hello World" в backbuffer(Задний Буфер) с координатами 0,0 используя текущий шрифт, который мы установили ранее. 
</p><p>0,0 в BlitzMax - это верхний левый угол экрана. Если мы хотим двигать текст вправо\влево, то нам нужно только изменить (больше - правее) переменную x (первое значение), а если вверх \ вниз, изменить (больше - ниже) переменную y (второе значение). Чтобы отобразить текст в нижнем правом углу, то мы можем выставить значения близкие к тем, которые мы использовали в комманде Graphics - 640 и 480. 
</p><p>BackBuffer (Задний Буфер) - это как бы спрятанный экран, который позволяет тебе рисовать что угодно, без показывания самого процесса рисования на экране во время вызова команды рисования. 
</p><p>Когда ты захочешь показать всё то, что ты нарисовал, то тебе понадобится "перевернуть" (Flip-нуть) BackBuffer, тогда он займет место FrontBuffer-а (картинка, которую мы видим). Это мы сейчас и сделаем. 
</p>
<div class="bmx" style="font-family: monospace;background-color:#FFFFFF;border:1px dashed #CCCCCC;padding:10px;background-color:#01516B;color:#FFFFFF;border:1px solid #003040;padding:10px;"><span style="color: #ffff00; font-weight: bold;">Flip</span></div>
<p>Это напишет наш текст на экране. Круто!.
</p><p>Итак, что будем делать теперь? Ну, самым лучшим, наверное, будет, если мы отчистим backbuffer. "Но",- спросишь ты, - "зачем?". Ну, таким образом мы сможем рисовать заново в следующем повторении цикла. Так действует движок большинства игр - рисует всё в BackBuffer, "flip-ает" его, затем очищает, чтобы можно было начинать рисовать следующий кадр.
</p>
<div class="bmx" style="font-family: monospace;background-color:#FFFFFF;border:1px dashed #CCCCCC;padding:10px;background-color:#01516B;color:#FFFFFF;border:1px solid #003040;padding:10px;"><span style="color: #ffff00; font-weight: bold;">Cls</span></div>
<p>Теперь наш backbuffer чист, и мы можем начать всё заново...
</p>
<div class="bmx" style="font-family: monospace;background-color:#FFFFFF;border:1px dashed #CCCCCC;padding:10px;background-color:#01516B;color:#FFFFFF;border:1px solid #003040;padding:10px;"><span style="color: #ffff00; font-weight: bold;">Wend</span></div>
<p>Это конец нашего главного цикла. У каждого цикла должны быть свое начало и конец, и когда BlitzMax достигнет конца, он начнет всё с начала.
</p><p>Это наша первая прога на BlitzMax! Она просто выводит надпись "Hello World" на экран. Вот весь код. 
</p>
<div class="bmx" style="font-family: monospace;background-color:#FFFFFF;border:1px dashed #CCCCCC;padding:10px;background-color:#01516B;color:#FFFFFF;border:1px solid #003040;padding:10px;">width=<span style="color: #FFFFFF;">640</span><br />
<p>height=<span style="color: #FFFFFF;">480</span><br />
depth=<span style="color: #FFFFFF;">16</span><br />
<span style="color: #ffff00; font-weight: bold;">Graphics</span> width,height,depth <br />
<br />
font=<span style="color: #ffff00; font-weight: bold;">LoadImageFont</span><span style=" ">&#40;</span><span style="color: #00FF66;">&quot;Arial.ttf&quot;</span>,<span style="color: #FFFFFF;">1</span><span style=" ">&#41;</span><br />
<span style="color: #ffff00; font-weight: bold;">SetImageFont</span> font<br />
<br />
<span style="color: #ffff00; font-weight: bold;">While</span> <span style="color: #ffff00; font-weight: bold;">Not</span> <span style="color: #ffff00; font-weight: bold;">KeyDown</span><span style=" ">&#40;</span>KEY_ESCAPE<span style=" ">&#41;</span><br />
<br />
&nbsp;<span style="color: #ffff00; font-weight: bold;">DrawText</span> <span style="color: #00FF66;">&quot;Hello World&quot;</span>,<span style="color: #FFFFFF;">0</span>,<span style="color: #FFFFFF;">0</span><br />
<br />
&nbsp;<span style="color: #ffff00; font-weight: bold;">Flip</span><br />
&nbsp;<span style="color: #ffff00; font-weight: bold;">Cls</span><br />
<br />
</p>
<span style="color: #ffff00; font-weight: bold;">Wend</span></div>
<p><br />
</p>
<a name=".D0.A7.D0.B0.D1.81.D1.82.D1.8C_2"></a><h2><span class="editsection">[<a href="http://blitzetcetera.org/index.php?title=BlitzMax_%D0%B4%D0%BB%D1%8F_%D0%BD%D0%B0%D1%87%D0%B8%D0%BD%D0%B0%D1%8E%D1%89%D0%B8%D1%85&amp;action=edit&amp;section=2" title="Править секцию: Часть 2">править</a>]</span> <span class="mw-headline">Часть 2</span></h2>
<p>На этот раз мы нарисуем лого BlitzMax на экране и будем его крутить. Как и раньше, мы начнем с установки графического режима. 
</p>
<div class="bmx" style="font-family: monospace;background-color:#FFFFFF;border:1px dashed #CCCCCC;padding:10px;background-color:#01516B;color:#FFFFFF;border:1px solid #003040;padding:10px;">width=<span style="color: #FFFFFF;">640</span><br />
<p>height=<span style="color: #FFFFFF;">480</span><br />
depth=<span style="color: #FFFFFF;">16</span><br />
</p>
<span style="color: #ffff00; font-weight: bold;">Graphics</span> width,height,depth</div>
<p>ОК, нам нужна какая-нибудь картинка. Лого BlitzMax, думаю, подойдет. Вот она в .png формате. 
</p>
<div class="center"><div class="floatnone"><span><a href="http://blitzetcetera.org/index.php/%D0%98%D0%B7%D0%BE%D0%B1%D1%80%D0%B0%D0%B6%D0%B5%D0%BD%D0%B8%D0%B5:BMax-Logo.png" class="image" title=""><img alt="" longdesc="http://blitzetcetera.org/index.php/%D0%98%D0%B7%D0%BE%D0%B1%D1%80%D0%B0%D0%B6%D0%B5%D0%BD%D0%B8%D0%B5:BMax-Logo.png" src="nd5o45q1.png" width="120" height="120" /></a></span></div></div>
<p>Мы положим нашу картинку в папку с исходником  и, затем, загрузим её, используя функцию LoadImage. 
</p>
<div class="bmx" style="font-family: monospace;background-color:#FFFFFF;border:1px dashed #CCCCCC;padding:10px;background-color:#01516B;color:#FFFFFF;border:1px solid #003040;padding:10px;">logo=<span style="color: #ffff00; font-weight: bold;">LoadImage</span><span style=" ">&#40;</span><span style="color: #00FF66;">&quot;BMax-Logo.png&quot;</span><span style=" ">&#41;</span></div>
<p>Функция LoadImage() загружает картинку и возвращает её адрес в памяти, который мы присвоили переменной logo. Теперь мы можем использовать эту переменную, чтобы нарисовать нашу картинку. После загрузки картинки мы начинаем наш главный цикл.
</p>
<div class="bmx" style="font-family: monospace;background-color:#FFFFFF;border:1px dashed #CCCCCC;padding:10px;background-color:#01516B;color:#FFFFFF;border:1px solid #003040;padding:10px;"><span style="color: #ffff00; font-weight: bold;">While</span> <span style="color: #ffff00; font-weight: bold;">Not</span> <span style="color: #ffff00; font-weight: bold;">KeyDown</span><span style=" ">&#40;</span>KEY_ESCAPE<span style=" ">&#41;</span></div>
<p>Итак, давай нарисуем нашу картинку на экране. Мы можем сделать это использованием функции DrawImage с данными переменной logo.  
</p>
<div class="bmx" style="font-family: monospace;background-color:#FFFFFF;border:1px dashed #CCCCCC;padding:10px;background-color:#01516B;color:#FFFFFF;border:1px solid #003040;padding:10px;"><span style="color: #ffff00; font-weight: bold;">DrawImage</span> logo,width/<span style="color: #FFFFFF;">2</span>,height/<span style="color: #FFFFFF;">2</span></div>
<p>Эти строки рисуют нашу картинку на backbuffer-е с координатами 320(width/2),240(height/2). Это как раз половина размера окна, которое мы создали командой Graphics; таким образом картинка будет нарисована в центре экрана. 
</p><p>Если бы! Знаешь, у картинок есть handle(так его лучше называть(не используя слово "пимпа":))), за который картинку можно таскать по экрану. Ты наверное ничего не понял, так вот: представь себе листок бумаги и канцелярскую кнопку, чтобы прилепить бумажку к стенке тебе нужно проткнуть бумажку и воткнуть кнопку в стенку. Так вот: в приведенном примере: кнопка - это handle, координаты handle: X - расстояние от левого края бумажки до места протыкания кнопкой, Y - расстояние от верхнего края бумажки до места протыкания кнопкой, ну и соответственно бумажка - это картинка. 
</p><p>В BlitzMax этот handle невидим, но всё же определяет, как картинки будут располагаться и вращаться. Когда нужно расположить картинку, то её handle ставится в требуемую позицию, ну а картинка, "привязанная" к нему двигается вместе с ним. Когда поворачивают картинку, то её поворачивают вокруг handle. 
</p><p>По умолчанию, handle картинки расположен в её верхнем левом углу. Но нам, конечно, этого не надо, нам надо, чтобы он был в центре. Это, однако, очень просто делается:
</p>
<div class="bmx" style="font-family: monospace;background-color:#FFFFFF;border:1px dashed #CCCCCC;padding:10px;background-color:#01516B;color:#FFFFFF;border:1px solid #003040;padding:10px;"><span style="color: #ffff00; font-weight: bold;">AutoMidHandle</span> <span style="color: #ffff00; font-weight: bold;">True</span></div>
<p>Если мы будем использовать эту команду перед загрузкой всех картинок, то после их загрузки в дальнейшем, их handle будет располагаться точно посередине. 
</p><p>Итак, у нас есть картинка с handle-ом посередине, так давай её покрутим. Крутить картинку (в реальном времени) в BlitzMax очень просто, нужно использовать функцию SetRotation.
</p>
<div class="bmx" style="font-family: monospace;background-color:#FFFFFF;border:1px dashed #CCCCCC;padding:10px;background-color:#01516B;color:#FFFFFF;border:1px solid #003040;padding:10px;"><span style="color: #ffff00; font-weight: bold;">SetRotation</span> ang</div>
<p>Вставь эту строку прямо перед строкой с DrawImage(). Она определяет угол поворота, на который будут поворачиваться все картинки при их рисовании. 
</p><p>Если мы хотим нарисовать две картинки с разным углом поворота, то нам придется использовать функцию SetRotation дважды перед каждым использованием DrawImage.  
</p><p>Не будем мудрить, и используем её всего один раз. Мы будем хранить значение угла в переменной ang, чтобы можно было потом его изменить.
</p>
<div class="bmx" style="font-family: monospace;background-color:#FFFFFF;border:1px dashed #CCCCCC;padding:10px;background-color:#01516B;color:#FFFFFF;border:1px solid #003040;padding:10px;">ang=ang<span style="color: #FFFFFF;">+1</span></div>
<p>Вставь эту строку в любое место главного цикла. Она увеличивает значение угла поворота, так, что при исполнении программы, картинка будет крутиться. Затем нужно flip-нуть буфер, очистить экран, и закончить главный цикл.
</p><p>Вот весь код, при его исполнении должно появиться крутящееся лого BlitzMax в центре экрана.
</p>
<div class="bmx" style="font-family: monospace;background-color:#FFFFFF;border:1px dashed #CCCCCC;padding:10px;background-color:#01516B;color:#FFFFFF;border:1px solid #003040;padding:10px;">width=<span style="color: #FFFFFF;">640</span><br />
<p>height=<span style="color: #FFFFFF;">480</span><br />
depth=<span style="color: #FFFFFF;">16</span><br />
<span style="color: #ffff00; font-weight: bold;">Graphics</span> width,height,depth<br />
<br />
<span style="color: #ffff00; font-weight: bold;">AutoMidHandle</span> <span style="color: #ffff00; font-weight: bold;">True</span><br />
<br />
logo=<span style="color: #ffff00; font-weight: bold;">LoadImage</span><span style=" ">&#40;</span><span style="color: #00FF66;">&quot;BMax-Logo.png&quot;</span><span style=" ">&#41;</span><br />
<br />
<span style="color: #ffff00; font-weight: bold;">While</span> <span style="color: #ffff00; font-weight: bold;">Not</span> <span style="color: #ffff00; font-weight: bold;">KeyDown</span><span style=" ">&#40;</span>KEY_ESCAPE<span style=" ">&#41;</span><br />
<br />
ang=ang<span style="color: #FFFFFF;">+1</span><br />
<span style="color: #ffff00; font-weight: bold;">SetRotation</span> ang<br />
<span style="color: #ffff00; font-weight: bold;">DrawImage</span> logo,width/<span style="color: #FFFFFF;">2</span>,height/<span style="color: #FFFFFF;">2</span><br />
<br />
<span style="color: #ffff00; font-weight: bold;">Flip</span><br />
<span style="color: #ffff00; font-weight: bold;">Cls</span><br />
<br />
</p>
<span style="color: #ffff00; font-weight: bold;">Wend</span></div>
<a name=".D0.A7.D0.B0.D1.81.D1.82.D1.8C_3"></a><h2><span class="editsection">[<a href="http://blitzetcetera.org/index.php?title=BlitzMax_%D0%B4%D0%BB%D1%8F_%D0%BD%D0%B0%D1%87%D0%B8%D0%BD%D0%B0%D1%8E%D1%89%D0%B8%D1%85&amp;action=edit&amp;section=3" title="Править секцию: Часть 3">править</a>]</span> <span class="mw-headline">Часть 3</span></h2>
<p>Теперь мы модифицируем исходник из второй части, заставив лого ездить по экрану и отскакивать от его краев, оставляя при этом красивейший шлейф.
</p>
<div class="center"><div class="floatnone"><span><a href="http://blitzetcetera.org/index.php/%D0%98%D0%B7%D0%BE%D0%B1%D1%80%D0%B0%D0%B6%D0%B5%D0%BD%D0%B8%D0%B5:BMax-Logo.png" class="image" title=""><img alt="" longdesc="http://blitzetcetera.org/index.php/%D0%98%D0%B7%D0%BE%D0%B1%D1%80%D0%B0%D0%B6%D0%B5%D0%BD%D0%B8%D0%B5:BMax-Logo.png" src="nd5o45q1.png" width="120" height="120" /></a></span></div></div>
<p>ОК, для начала нужно заставить лого отскакивать от краев экрана. Делается это очень просто. Сперва создаем две переменные для хранения текущего направления движения картинки по X и по Y - соответственно xmove и ymove, со значениями или +1 или -1. Для начала выставим обе равными +1. 
</p>
<div class="bmx" style="font-family: monospace;background-color:#FFFFFF;border:1px dashed #CCCCCC;padding:10px;background-color:#01516B;color:#FFFFFF;border:1px solid #003040;padding:10px;">xmove=<span style="color: #FFFFFF;">1</span><br />
ymove=<span style="color: #FFFFFF;">1</span></div>
<p>Вставь эти строки перед началом главного цикла. Теперь нам нужно ввести ещё две переменные для хранения текущих координат картинки - xpos и ypos. 
</p>
<div class="bmx" style="font-family: monospace;background-color:#FFFFFF;border:1px dashed #CCCCCC;padding:10px;background-color:#01516B;color:#FFFFFF;border:1px solid #003040;padding:10px;">xpos=xpos+xmove<br />
ypos=ypos+ymove</div>
<p>Вставь эти строки где угодно в главный цикл. Они будут добавлять текущие значения xmove и ymove к координатам xpos и ypos, так что за каждое исполнение цикла координаты картинки будут изменятся на 1 пиксель и по X и по Y.
</p><p>Нам также придется изменить параметры команды DrawImage, чтобы использовать значения переменных xpos и ypos для позиционирования картинки. 
</p>
<div class="bmx" style="font-family: monospace;background-color:#FFFFFF;border:1px dashed #CCCCCC;padding:10px;background-color:#01516B;color:#FFFFFF;border:1px solid #003040;padding:10px;"><span style="color: #ffff00; font-weight: bold;">DrawImage</span> logo,xpos,ypos</div>
<p>На данный момент у нас есть картинка (лого BlitzMax), появляющаяся в верхнем левом углу и, затем уезжающая вниз вправо за экран. Это не то что нам надо - картинка не отскакивает от экрана. 
</p><p>Так сделаем, как нам надо: будем проверять - не больше ли координаты картинки (xpos и ypos) чем размеры экрана, а если это так, то будем обращать значения xmove и ymove, так что картинка изменит направление движения и получится эффект отскакивания. 
</p>
<div class="bmx" style="font-family: monospace;background-color:#FFFFFF;border:1px dashed #CCCCCC;padding:10px;background-color:#01516B;color:#FFFFFF;border:1px solid #003040;padding:10px;"><span style="color: #ffff00; font-weight: bold;">If</span> xpos&gt;width-<span style=" ">&#40;</span><span style="color: #ffff00; font-weight: bold;">ImageWidth</span><span style=" ">&#40;</span>logo<span style=" ">&#41;</span>/<span style="color: #FFFFFF;">2</span><span style=" ">&#41;</span> <span style="color: #ffff00; font-weight: bold;">Then</span> xmove=<span style="color: #FFFFFF;">-1</span><br />
<p>&nbsp;<span style="color: #ffff00; font-weight: bold;">If</span> xpos&lt;<span style="color: #FFFFFF;">0</span>+<span style=" ">&#40;</span><span style="color: #ffff00; font-weight: bold;">ImageWidth</span><span style=" ">&#40;</span>logo<span style=" ">&#41;</span>/<span style="color: #FFFFFF;">2</span><span style=" ">&#41;</span> <span style="color: #ffff00; font-weight: bold;">Then</span> xmove=<span style="color: #FFFFFF;">1</span><br />
&nbsp;<span style="color: #ffff00; font-weight: bold;">If</span> ypos&gt;height-<span style=" ">&#40;</span><span style="color: #ffff00; font-weight: bold;">ImageHeight</span><span style=" ">&#40;</span>logo<span style=" ">&#41;</span>/<span style="color: #FFFFFF;">2</span><span style=" ">&#41;</span> <span style="color: #ffff00; font-weight: bold;">Then</span> ymove=<span style="color: #FFFFFF;">-1</span><br />
</p>
&nbsp;<span style="color: #ffff00; font-weight: bold;">If</span> ypos&lt;<span style="color: #FFFFFF;">0</span>+<span style=" ">&#40;</span><span style="color: #ffff00; font-weight: bold;">ImageWidth</span><span style=" ">&#40;</span>logo<span style=" ">&#41;</span>/<span style="color: #FFFFFF;">2</span><span style=" ">&#41;</span> <span style="color: #ffff00; font-weight: bold;">Then</span> ymove=<span style="color: #FFFFFF;">1</span></div>
<p>Вставь этот код куда-нибудь в главный цикл. Как видишь, первая строка проверяет, не больше ли xpos, чем ширина экрана, а если так, то ставит xmove равной -1. Вторая линия проверяет не меньше ли нуля xpos, а если так,то ставит xmove равной 1. Последние две линии делают тоже самое, но только с ymove. 
</p><p>При проверке на столкновение мы приняли во внимание ширину картинки, если этого не сделать, то мы будем видеть кусок картинки на краю экрана при отскакивании. Так как handle нашей картинки находится в центре, то мы вычитаем половину высоты/ширины при проверке на столкновением с низом / правым краем экрана и прибавляем половину ширины / высоты при сравнении с 0. 
</p><p>Итак, теперь наше лого ездит по экрану и отскакивает от его краев. Зашибись! Осталось только одно - забабахать эффект шлейфа. 
</p><p>Мы будем использовать блендинг (blending). Блендинг определяет как картинка будет нарисована на экране - при SOLIDBLEND, режимом по умолчанию, картинки будут рисоваться на экране полностью однотонными (такими как они есть в файле). Цвет фона (background) игнорируется. 
</p><p>Мы будем использовать режим LIGHTBLEND. При LIGHTBLEND картинка рисуется на экране, но цвет фона (background) не игнорируется. Вместо того для каждого пикселя картинки, цвет фона (background) прибавляется к цвету пикселя картинки. Следовательно если цвет фона (background-а) черный (нулевой цвет), то нарисованная картинка будет выглядеть светлее оригинала. 
</p><p>Наш фон черный, и на данный момент это не принесет никакого эффекта. Фрукт в том, чтобы закомментировать команду Cls и, следовательно, не очищать экран каждую итерацию (повторение) цикла. Когда же лого будет ездить по экрану, оно будет рисоваться поверх себя, и тогда, наконец, LIGHTBLEND принесет эффект. 
</p><p>Есть ещё одна вещь, которую следует сделать. Сейчас, значения цвета пикселей лого большие, настолько большие, что когда мы будем рисовать 3-тий слой картинок мы получим монотонную картинку(такую какая была файле). 
</p><p>Для улучшения эффекта мы сделаем картинку прозрачной, т.е. поставим прозрачность картинки равной 0.1(можно и другую), - это уменьшит значения цветов пикселей картинки и даст более красивый эффект. 
</p><p>Так давай внесем эти изменения в код.
</p><p>Сначала поменяем прозрачность картинки и установим режим блендинга (blending) командами SetAlpha и SetBlend. Как и SetRotation, эти команды определяют параметры (прозрачность, режим блендинга) всех картинок, и они остаются такими пока команды не используются вновь с новыми значениями. В нашем случае, нам следует использовать эти команды только один раз, вставь следующие строки перед началом главного цикла. 
</p>
<div class="bmx" style="font-family: monospace;background-color:#FFFFFF;border:1px dashed #CCCCCC;padding:10px;background-color:#01516B;color:#FFFFFF;border:1px solid #003040;padding:10px;"><span style="color: #ffff00; font-weight: bold;">SetAlpha</span> <span style="color: #FFFFFF;">0.1</span><br />
<span style="color: #ffff00; font-weight: bold;">SetBlend</span> LIGHTBLEND</div>
<p>И, наконец, закомментируй команду Cls. 
</p>
<div class="bmx" style="font-family: monospace;background-color:#FFFFFF;border:1px dashed #CCCCCC;padding:10px;background-color:#01516B;color:#FFFFFF;border:1px solid #003040;padding:10px;"><span style="color: #B1E7EB;">'Cls</span></div>
<p>В BlitzMax знак комментирования ' а не&nbsp;;. Вот и весь код:. 
</p>
<div class="bmx" style="font-family: monospace;background-color:#FFFFFF;border:1px dashed #CCCCCC;padding:10px;background-color:#01516B;color:#FFFFFF;border:1px solid #003040;padding:10px;">width=<span style="color: #FFFFFF;">640</span><br />
<p>height=<span style="color: #FFFFFF;">480</span><br />
depth=<span style="color: #FFFFFF;">16</span><br />
<span style="color: #ffff00; font-weight: bold;">Graphics</span> width,height,depth<br />
<br />
<span style="color: #ffff00; font-weight: bold;">AutoMidHandle</span> <span style="color: #ffff00; font-weight: bold;">True</span><br />
<br />
logo=<span style="color: #ffff00; font-weight: bold;">LoadImage</span><span style=" ">&#40;</span><span style="color: #00FF66;">&quot;BMax-Logo.png&quot;</span><span style=" ">&#41;</span><br />
<br />
xmove=<span style="color: #FFFFFF;">1</span><br />
ymove=<span style="color: #FFFFFF;">1</span><br />
<br />
<span style="color: #ffff00; font-weight: bold;">SetAlpha</span> <span style="color: #FFFFFF;">0.1</span><br />
<span style="color: #ffff00; font-weight: bold;">SetBlend</span> LIGHTBLEND<br />
<br />
<span style="color: #ffff00; font-weight: bold;">While</span> <span style="color: #ffff00; font-weight: bold;">Not</span> <span style="color: #ffff00; font-weight: bold;">KeyDown</span><span style=" ">&#40;</span>KEY_ESCAPE<span style=" ">&#41;</span><br />
<br />
&nbsp;ang=ang<span style="color: #FFFFFF;">+1</span><br />
&nbsp;<span style="color: #ffff00; font-weight: bold;">SetRotation</span> ang<br />
<br />
&nbsp;xpos=xpos+xmove<br />
&nbsp;ypos=ypos+ymove<br />
<br />
&nbsp;<span style="color: #ffff00; font-weight: bold;">If</span> xpos&gt;width-<span style=" ">&#40;</span><span style="color: #ffff00; font-weight: bold;">ImageWidth</span><span style=" ">&#40;</span>logo<span style=" ">&#41;</span>/<span style="color: #FFFFFF;">2</span><span style=" ">&#41;</span> <span style="color: #ffff00; font-weight: bold;">Then</span> xmove=<span style="color: #FFFFFF;">-1</span><br />
&nbsp;<span style="color: #ffff00; font-weight: bold;">If</span> xpos&lt;<span style="color: #FFFFFF;">0</span>+<span style=" ">&#40;</span><span style="color: #ffff00; font-weight: bold;">ImageWidth</span><span style=" ">&#40;</span>logo<span style=" ">&#41;</span>/<span style="color: #FFFFFF;">2</span><span style=" ">&#41;</span> <span style="color: #ffff00; font-weight: bold;">Then</span> xmove=<span style="color: #FFFFFF;">1</span><br />
&nbsp;<span style="color: #ffff00; font-weight: bold;">If</span> ypos&gt;height-<span style=" ">&#40;</span><span style="color: #ffff00; font-weight: bold;">ImageHeight</span><span style=" ">&#40;</span>logo<span style=" ">&#41;</span>/<span style="color: #FFFFFF;">2</span><span style=" ">&#41;</span> <span style="color: #ffff00; font-weight: bold;">Then</span> ymove=<span style="color: #FFFFFF;">-1</span><br />
&nbsp;<span style="color: #ffff00; font-weight: bold;">If</span> ypos&lt;<span style="color: #FFFFFF;">0</span>+<span style=" ">&#40;</span><span style="color: #ffff00; font-weight: bold;">ImageWidth</span><span style=" ">&#40;</span>logo<span style=" ">&#41;</span>/<span style="color: #FFFFFF;">2</span><span style=" ">&#41;</span> <span style="color: #ffff00; font-weight: bold;">Then</span> ymove=<span style="color: #FFFFFF;">1</span><br />
<br />
&nbsp;<span style="color: #ffff00; font-weight: bold;">DrawImage</span> logo,xpos,ypos<br />
<br />
&nbsp;<span style="color: #ffff00; font-weight: bold;">Flip</span><br />
&nbsp;<span style="color: #B1E7EB;">'Cls</span><br />
<br />
</p>
<span style="color: #ffff00; font-weight: bold;">Wend</span></div>
<p>Если всё сделал правильно, то должно появится что-то вроде этого: 
</p>
<div class="center"><div class="floatnone"><span><a href="http://blitzetcetera.org/index.php/%D0%98%D0%B7%D0%BE%D0%B1%D1%80%D0%B0%D0%B6%D0%B5%D0%BD%D0%B8%D0%B5:BMaxForBeginners.jpg" class="image" title=""><img alt="" longdesc="http://blitzetcetera.org/index.php/%D0%98%D0%B7%D0%BE%D0%B1%D1%80%D0%B0%D0%B6%D0%B5%D0%BD%D0%B8%D0%B5:BMaxForBeginners.jpg" src="tgpy9yyb.jpg" width="320" height="240" /></a></span></div></div>
<div align="right"><a href="http://blitzetcetera.org/images/3/37/BlitzMax_For_Beginners.zip" class="internal" title="BlitzMax For Beginners.zip">скачать архив с файлами к статье</a></div>
<hr />
<p>Автор: Mark Sibly<br />
Перевод: <a href="http://blitzetcetera.org/index.php/%D0%A3%D1%87%D0%B0%D1%81%D1%82%D0%BD%D0%B8%D0%BA:MANIAK_dobrii" title="Участник:MANIAK dobrii">MANIAK dobrii</a> (e-mail: MANIAK_dobrii@list.ru, сайт: <a href="http://www.maniak-dobrii.nm.ru/" class="external free" title="http://www.maniak-dobrii.nm.ru/" rel="nofollow">http://www.maniak-dobrii.nm.ru/</a>)
</p><!-- 
Pre-expand include size: 1721 bytes
Post-expand include size: 503 bytes
Template argument size: 33 bytes
Maximum: 2097152 bytes
-->

<!-- Saved in parser cache with key db1:pcache:idhash:142-0!1!0!!ru!2 and timestamp 20071110032218 -->
<div class="printfooter">
Получено с <a href="ud09nvwa.html">http://blitzetcetera.org/index.php/BlitzMax_%D0%B4%D0%BB%D1%8F_%D0%BD%D0%B0%D1%87%D0%B8%D0%BD%D0%B0%D1%8E%D1%89%D0%B8%D1%85</a></div>
			<!-- end content -->			<div class="visualClear"></div>				</td>				<td class="rightside">				</td>			</tr>		</table>		</div>	</div>		</div>	
		<script type="text/javascript">if (window.runOnloadHook) runOnloadHook();</script>
</div></body>
<!-- Mirrored from localhost/index.php/BlitzMax_%D0%B4%D0%BB%D1%8F_%D0%BD%D0%B0%D1%87%D0%B8%D0%BD%D0%B0%D1%8E%D1%89%D0%B8%D1%85 by HTTrack Website Copier/3.x [XR&CO'2007], Sat, 10 Nov 2007 05:14:31 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8"><!-- /Added by HTTrack -->
</html>