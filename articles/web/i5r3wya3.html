<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml" xml:lang="ru" lang="ru" dir="ltr">	
<!-- Mirrored from localhost/index.php/%D0%9A%D0%B0%D0%BA_%D1%81%D0%BE%D0%B7%D0%B4%D0%B0%D0%B2%D0%B0%D1%82%D1%8C_%D0%B8_%D0%BF%D1%80%D0%B0%D0%B2%D0%B8%D1%82%D1%8C_%D0%BC%D0%BE%D0%B4%D1%83%D0%BB%D0%B8 by HTTrack Website Copier/3.x [XR&CO'2007], Sat, 10 Nov 2007 05:16:50 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8"><!-- /Added by HTTrack -->
<head>		<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />				<meta name="keywords" content="Как создавать и править модули,MANIAK dobrii" />
		<link rel="shortcut icon" href="http://blitzetcetera.org/favicon.ico" />
		<link rel="search" type="application/opensearchdescription+xml" href="http://blitzetcetera.org/opensearch_desc.php" title="Blitz Et Cetera (Русский)" />
		<title>Как создавать и править модули — Blitz Et Cetera</title>		<style type="text/css" media="screen,projection">/*<![CDATA[*/ @import "bvih5rde.css?63"; /*]]>*/</style>		<link rel="stylesheet" type="text/css" media="print" href="gcxktlm6.css?63" />		<link rel="stylesheet" type="text/css" media="handheld" href="zumsslq_.css?63" />		<!--[if lt IE 5.5000]><style type="text/css">@import "/skins/OfflineNew/IE50Fixes.css?63";</style><![endif]-->		<!--[if IE 5.5000]><style type="text/css">@import "/skins/OfflineNew/IE55Fixes.css?63";</style><![endif]-->		<!--[if IE 6]><style type="text/css">@import "/skins/OfflineNew/IE60Fixes.css?63";</style><![endif]-->		<!--[if IE 7]><style type="text/css">@import "/skins/OfflineNew/IE70Fixes.css?63";</style><![endif]-->		<!--[if lt IE 7]><script type="text/javascript" src="/skins/common/IEFixes.js?63"></script>		<meta http-equiv="imagetoolbar" content="no" /><![endif]-->		<script type= "text/javascript">/*<![CDATA[*/
var skin = "OfflineNew";
var stylepath = "/skins";
var wgArticlePath = "/index.php/$1";
var wgScriptPath = "";
var wgServer = "http://blitzetcetera.org/";
var wgCanonicalNamespace = "";
var wgCanonicalSpecialPageName = false;
var wgNamespaceNumber = 0;
var wgPageName = "Как_создавать_и_править_модули";
var wgTitle = "Как создавать и править модули";
var wgAction = "view";
var wgArticleId = "619";
var wgIsArticle = true;
var wgUserName = null;
var wgUserGroups = null;
var wgUserLanguage = "ru";
var wgContentLanguage = "ru";
var wgBreakFrames = false;
var wgCurRevisionId = "3432";
/*]]>*/</script>
		<script type="text/javascript" src="2nq-6cel.js?63"><!-- wikibits js --></script>		<script type="text/javascript" src="http://blitzetcetera.org/index.php?title=-&amp;action=raw&amp;gen=js"><!-- site js --></script>		<style type="text/css">/*<![CDATA[*/
@import "http://blitzetcetera.org/index.php?title=MediaWiki:Common.css&amp;usemsgcache=yes&amp;action=raw&amp;ctype=text/css&amp;smaxage=18000";
@import "http://blitzetcetera.org/index.php?title=MediaWiki:OfflineNew.css&amp;usemsgcache=yes&amp;action=raw&amp;ctype=text/css&amp;smaxage=18000";
@import "http://blitzetcetera.org/index.php?title=-&amp;action=raw&amp;gen=css&amp;maxage=18000";
/*]]>*/</style>		<!-- Head Scripts -->	</head><body  class="mediawiki ns-0 ltr page-Как_создавать_и_править_модули">	<div id="globalWrapper">	<div id="logocontainer">		<table align="center">		  <tr>				<td id="blitzetclogo">				</td>			</tr>		</table>	</div>	<div id="magbar">	Журнал о программированнии на языках Blitz3D, BlitzMax, BlitzPlus	</div>		<div id="column-content">	<div id="content">		<a name="top" id="top"></a>				<div id="bodyContent">		<table cellspacing=0 cellpadding=0 width=100%>			<tr>			  <td class="leftside">				</td>				<td class="sheetbody">					<h1 class="sheet">Как создавать и править модули</h1>			<h3 id="siteSub">Материал из Blitz Et Cetera.</h3>			<div id="contentSub"></div>			<!-- start content -->			<p>Для начала нужно определиться, какой именно модуль ты собрался делать. Это либо это уже существующий модуль, написанный на C/C++/ObjC, либо интерфейс для DLL либо код BlitzMax.
</p>
<table id="toc" class="toc" summary="Содержание"><tr><td><div id="toctitle"><h2>Содержание</h2></div>
<ul>
<li class="toclevel-1"><a href="#Mingw"><span class="tocnumber">1</span> <span class="toctext">Mingw</span></a>
<ul>
<li class="toclevel-2"><a href="#.D0.94.D0.BB.D1.8F_Windows:"><span class="tocnumber">1.1</span> <span class="toctext">Для Windows:</span></a></li>
<li class="toclevel-2"><a href="#.D0.94.D0.BB.D1.8F_Mac_.D0.B8_Linux:"><span class="tocnumber">1.2</span> <span class="toctext">Для Mac и Linux:</span></a></li>
</ul>
</li>
<li class="toclevel-1"><a href="#.D0.97.D0.B0.D0.B1.D0.B0.D0.B1.D0.B0.D1.85.D0.B0.D0.B5.D0.BC_.D0.A1.D0.92.D0.9E.D0.99_.D0.BC.D0.BE.D0.B4.D1.83.D0.BB.D1.8C.21"><span class="tocnumber">2</span> <span class="toctext">Забабахаем СВОЙ модуль!</span></a></li>
<li class="toclevel-1"><a href="#.D0.98.D1.81.D0.BF.D0.BE.D0.BB.D1.8C.D0.B7.D0.BE.D0.B2.D0.B0.D0.BD.D0.B8.D0.B5_.D0.BD.D0.B5_bmx-.D0.BD.D1.8B.D1.85_.D1.84.D0.B0.D0.B9.D0.BB.D0.BE.D0.B2"><span class="tocnumber">3</span> <span class="toctext">Использование не bmx-ных файлов</span></a></li>
</ul>
</td></tr></table><script type="text/javascript"> if (window.showTocToggle) { var tocShowText = "показать"; var tocHideText = "убрать"; showTocToggle(); } </script>
<a name="Mingw"></a><h2><span class="editsection">[<a href="http://blitzetcetera.org/index.php?title=%D0%9A%D0%B0%D0%BA_%D1%81%D0%BE%D0%B7%D0%B4%D0%B0%D0%B2%D0%B0%D1%82%D1%8C_%D0%B8_%D0%BF%D1%80%D0%B0%D0%B2%D0%B8%D1%82%D1%8C_%D0%BC%D0%BE%D0%B4%D1%83%D0%BB%D0%B8&amp;action=edit&amp;section=1" title="Править секцию: Mingw">править</a>]</span> <span class="mw-headline">Mingw</span></h2>
<a name=".D0.94.D0.BB.D1.8F_Windows:"></a><h3><span class="editsection">[<a href="http://blitzetcetera.org/index.php?title=%D0%9A%D0%B0%D0%BA_%D1%81%D0%BE%D0%B7%D0%B4%D0%B0%D0%B2%D0%B0%D1%82%D1%8C_%D0%B8_%D0%BF%D1%80%D0%B0%D0%B2%D0%B8%D1%82%D1%8C_%D0%BC%D0%BE%D0%B4%D1%83%D0%BB%D0%B8&amp;action=edit&amp;section=2" title="Править секцию: Для Windows:">править</a>]</span> <span class="mw-headline">Для Windows:</span></h3>
<p>Чтобы компилировать модули нужен MinGW и прописанный путь в "Переменной среде". Для тех, кто не знает, переменные среды позволяют программам вызывать общие программы(как cmd.exe)  только ссылаясь на её  имя.
</p><p>MinGW позволяет компилировать не-BlitzMax-овский код в модули для BlitzMax, а также использовать DLL-ки после написания враппера/декларирования. Нужно скачать два файла этот и этот(Автор ссылался на это, но там какая-то байда). Создай пакпку с любым именем(например: C:\dev\MinGW) и разархивируй туда оба архива.  
</p><p>Теперь нужно прописать переменную среду.  Панель Управления&gt;Система(или правой кнопкой мыши на Мой Компьютер&gt;Свойства) жми закладку Дополнительно на ней внизу Переменные среды. Ищи переменную Path. Выбери её и жми Изменить. Проедь до конца строки, вставь точку с запятой(;) и пропиши папку bin(полный путь, например C:\dev\MinGW\bin ) из папки, куда ты разархивировал архивы.
</p>
<a name=".D0.94.D0.BB.D1.8F_Mac_.D0.B8_Linux:"></a><h3><span class="editsection">[<a href="http://blitzetcetera.org/index.php?title=%D0%9A%D0%B0%D0%BA_%D1%81%D0%BE%D0%B7%D0%B4%D0%B0%D0%B2%D0%B0%D1%82%D1%8C_%D0%B8_%D0%BF%D1%80%D0%B0%D0%B2%D0%B8%D1%82%D1%8C_%D0%BC%D0%BE%D0%B4%D1%83%D0%BB%D0%B8&amp;action=edit&amp;section=3" title="Править секцию: Для Mac и Linux:">править</a>]</span> <span class="mw-headline">Для Mac и Linux:</span></h3>
<p>Не знаю, но вроде там в дистрибутиве есть gcc (GNU Compiler Collection) - это то что надо BlitzMax-у для компиляции модулей, написанных на разных языках программирования.
</p>
<a name=".D0.97.D0.B0.D0.B1.D0.B0.D0.B1.D0.B0.D1.85.D0.B0.D0.B5.D0.BC_.D0.A1.D0.92.D0.9E.D0.99_.D0.BC.D0.BE.D0.B4.D1.83.D0.BB.D1.8C.21"></a><h2><span class="editsection">[<a href="http://blitzetcetera.org/index.php?title=%D0%9A%D0%B0%D0%BA_%D1%81%D0%BE%D0%B7%D0%B4%D0%B0%D0%B2%D0%B0%D1%82%D1%8C_%D0%B8_%D0%BF%D1%80%D0%B0%D0%B2%D0%B8%D1%82%D1%8C_%D0%BC%D0%BE%D0%B4%D1%83%D0%BB%D0%B8&amp;action=edit&amp;section=4" title="Править секцию: Забабахаем СВОЙ модуль!">править</a>]</span> <span class="mw-headline">Забабахаем СВОЙ модуль!</span></h2>
<p>Ок, начнем. Создай новый файл. Первой строкой идет:
</p>
<div class="bb" style="font-family: monospace;background-color:#FFFFFF;border:1px dashed #CCCCCC;padding:10px;background-color:#225588;color:#FFFFFF;border:1px solid #003040;padding:10px;">Strict</div>
<p>Теперь определяем имя модуля коммандой Module&nbsp;: 
</p>
<div class="bb" style="font-family: monospace;background-color:#FFFFFF;border:1px dashed #CCCCCC;padding:10px;background-color:#225588;color:#FFFFFF;border:1px solid #003040;padding:10px;">Strict<br />
<p><br />
</p>
Module Bot.FirstModule</div>
<p>Вторая строка определяет, что текущий файл - модуль, и его нельзя компилировать обычным способом. Затем опишем что это за модуль коммандой ModuleInfo&nbsp;: 
</p>
<div class="bb" style="font-family: monospace;background-color:#FFFFFF;border:1px dashed #CCCCCC;padding:10px;background-color:#225588;color:#FFFFFF;border:1px solid #003040;padding:10px;">Strict<br />
<p><br />
Module Bot.FirstModule<br />
<br />
ModuleInfo <span style="color: #00ff66;">&quot;Name: Мой первый модуль&quot;</span><br />
ModuleInfo <span style="color: #00ff66;">&quot;Description: Круто, не правдя ли?&quot;</span><br />
ModuleInfo <span style="color: #00ff66;">&quot;License: Public Domain&quot;</span><br />
ModuleInfo <span style="color: #00ff66;">&quot;Authors: Bot Builder и Ты&quot;</span><br />
</p>
ModuleInfo <span style="color: #00ff66;">&quot;CustomAttr: Увырлаг!&quot;</span></div>
<p>Теперь подключаем необходимые для работы нашего модули: 
</p>
<div class="bb" style="font-family: monospace;background-color:#FFFFFF;border:1px dashed #CCCCCC;padding:10px;background-color:#225588;color:#FFFFFF;border:1px solid #003040;padding:10px;">Strict<br />
<p><br />
Module Bot.FirstModule<br />
<br />
ModuleInfo <span style="color: #00ff66;">&quot;Name: Мой первый модуль&quot;</span><br />
ModuleInfo <span style="color: #00ff66;">&quot;Description: Круто, не правдя ли?&quot;</span><br />
ModuleInfo <span style="color: #00ff66;">&quot;License: Public Domain&quot;</span><br />
ModuleInfo <span style="color: #00ff66;">&quot;Authors: Bot Builder и Ты&quot;</span><br />
ModuleInfo <span style="color: #00ff66;">&quot;CustomAttr: Увырлаг!&quot;</span><br />
<br />
</p>
Import BRL.StandardIO 'Для работы <span style="color: #aaffff; font-weight: bold;">Print</span></div>
<p>Замечание: По настоящему ничего не подключается. Последняя строка гарантирует, что нужный модуль будет подключен к твоей программе. Другими словами - если ты подключишь свой модуль, то подключится и BRL.StandardIO.
</p><p>Для примера буду использовать наипростейшую функцию, а вообще, в модулях можно использовать всё, как и в обычных программах.
</p>
<div class="bb" style="font-family: monospace;background-color:#FFFFFF;border:1px dashed #CCCCCC;padding:10px;background-color:#225588;color:#FFFFFF;border:1px solid #003040;padding:10px;">Strict<br />
<p><br />
Module Bot.FirstModule<br />
<br />
ModuleInfo <span style="color: #00ff66;">&quot;Name: Мой первый модуль&quot;</span><br />
ModuleInfo <span style="color: #00ff66;">&quot;Description: Круто, не правдя ли?&quot;</span><br />
ModuleInfo <span style="color: #00ff66;">&quot;License: Public Domain&quot;</span><br />
ModuleInfo <span style="color: #00ff66;">&quot;Authors: Bot Builder и Ты&quot;</span><br />
ModuleInfo <span style="color: #00ff66;">&quot;CustomAttr: Увырлаг!&quot;</span><br />
<br />
Import BRL.StandardIO 'Для работы <span style="color: #aaffff; font-weight: bold;">Print</span><br />
<br />
<span style="color: #aaffff; font-weight: bold;">Function</span> SayHello<span style=" ">&#40;</span>Name$<span style=" ">&#41;</span><br />
&nbsp;<span style="color: #aaffff; font-weight: bold;">Print</span> <span style="color: #00ff66;">&quot;Hi &quot;</span>+Name$<br />
</p>
EndFunction</div>
<p>Демонстрация Private. Всё после Private не доступно снаружи модуля(т.е. из проги, подключающей его, или другого модуля):
</p>
<div class="bb" style="font-family: monospace;background-color:#FFFFFF;border:1px dashed #CCCCCC;padding:10px;background-color:#225588;color:#FFFFFF;border:1px solid #003040;padding:10px;">Strict<br />
<p><br />
Module Bot.FirstModule<br />
<br />
ModuleInfo <span style="color: #00ff66;">&quot;Name: Мой первый модуль&quot;</span><br />
ModuleInfo <span style="color: #00ff66;">&quot;Description: Круто, не правдя ли?&quot;</span><br />
ModuleInfo <span style="color: #00ff66;">&quot;License: Public Domain&quot;</span><br />
ModuleInfo <span style="color: #00ff66;">&quot;Authors: Bot Builder и Ты&quot;</span><br />
ModuleInfo <span style="color: #00ff66;">&quot;CustomAttr: Увырлаг!&quot;</span><br />
<br />
Import BRL.StandardIO 'Для работы <span style="color: #aaffff; font-weight: bold;">Print</span><br />
<br />
<span style="color: #aaffff; font-weight: bold;">Function</span> SayHello<span style=" ">&#40;</span>Name$<span style=" ">&#41;</span><br />
&nbsp;<span style="color: #aaffff; font-weight: bold;">Print</span> <span style="color: #00ff66;">&quot;Hi &quot;</span>+Name$<br />
EndFunction<br />
<br />
Private<br />
</p>
<span style="color: #aaffff; font-weight: bold;">Const</span> Greeting$=<span style="color: #00ff66;">&quot;Hi&quot;</span></div>
<p>Всё, пора сохранять файл. Открой папку, где у тебя установлен BlitzMax, открой папку mod. В mod создай папку bot.mod. В ней создай папку firstmodule.mod. Важно, чтобы имена папок и файлов были точно такими, как описано тут. Сохраняй свой модуль в эту папку под именем firstmodule.bmx. Пуск&gt;Выполнить или(Ctrl-Alt-Delete&gt;Файл&gt;Новая задача(выполнить...)) в строке ввода набери cmd. Вылезет родное (для некоторых) окно эмуляции доса, там пиши: CD C:\Program Files\ProgrammerProgs\BlitzMax\bin, или какой там у тебя путь и жми интэр. Далее пиши: bmk makemods -d bot.firstmodule для компиляции дебаг версии модуля, -r bot.firstmodule для компиляции релизной версии модуля или -a bot.firstmodule для полной компиляции модуляи опять жми интэр. Чтобы проверить что за байда получилась, создай новый файл и пиши в нем:
</p>
<div class="bb" style="font-family: monospace;background-color:#FFFFFF;border:1px dashed #CCCCCC;padding:10px;background-color:#225588;color:#FFFFFF;border:1px solid #003040;padding:10px;">SayHello<span style=" ">&#40;</span><span style="color: #00ff66;">&quot;Всем, Млин&quot;</span><span style=" ">&#41;</span></div>
<p>и запусти. Надеюсь напишется следующее:
</p><p>Hi Всем, Млин!!!
</p>
<a name=".D0.98.D1.81.D0.BF.D0.BE.D0.BB.D1.8C.D0.B7.D0.BE.D0.B2.D0.B0.D0.BD.D0.B8.D0.B5_.D0.BD.D0.B5_bmx-.D0.BD.D1.8B.D1.85_.D1.84.D0.B0.D0.B9.D0.BB.D0.BE.D0.B2"></a><h2><span class="editsection">[<a href="http://blitzetcetera.org/index.php?title=%D0%9A%D0%B0%D0%BA_%D1%81%D0%BE%D0%B7%D0%B4%D0%B0%D0%B2%D0%B0%D1%82%D1%8C_%D0%B8_%D0%BF%D1%80%D0%B0%D0%B2%D0%B8%D1%82%D1%8C_%D0%BC%D0%BE%D0%B4%D1%83%D0%BB%D0%B8&amp;action=edit&amp;section=5" title="Править секцию: Использование не bmx-ных файлов">править</a>]</span> <span class="mw-headline">Использование не bmx-ных файлов</span></h2>
<p>Делается так:
</p>
<div class="bb" style="font-family: monospace;background-color:#FFFFFF;border:1px dashed #CCCCCC;padding:10px;background-color:#225588;color:#FFFFFF;border:1px solid #003040;padding:10px;">Import <span style="color: #00ff66;">&quot;Файл.C&quot;</span><br />
<p><br />
Extern 'Добавь <span style="color: #00ff66;">&quot;win32&quot;</span> &nbsp;если функции из win32 dll<br />
&nbsp;<span style="color: #aaffff; font-weight: bold;">Function</span> МояФункцияКоторуюЯХочуИспользовать:ТипВозвращаемогоЗначения<span style=" ">&#40;</span>параметры:ихТипы<span style=" ">&#41;</span><br />
&nbsp;'И т.д.<br />
</p>
<span style="color: #aaffff; font-weight: bold;">End</span> Extern</div>
<p>От переводчика (я так декларирую АПИ-шные функции в обычных файлах):
</p>
<div class="bb" style="font-family: monospace;background-color:#FFFFFF;border:1px dashed #CCCCCC;padding:10px;background-color:#225588;color:#FFFFFF;border:1px solid #003040;padding:10px;">Extern <span style="color: #00ff66;">&quot;Win32&quot;</span><br />
<p>&nbsp;<span style="color: #aaffff; font-weight: bold;">Function</span> FindWindow:<span style="color: #aaffff; font-weight: bold;">Int</span><span style=" ">&#40;</span>ClassName$z,<span style="color: #aaffff; font-weight: bold;">apptitle</span>$z<span style=" ">&#41;</span> = <span style="color: #00ff66;">&quot;FindWindowA@8&quot;</span><br />
&nbsp;<span style="color: #aaffff; font-weight: bold;">Function</span> SetWindowLong:<span style="color: #aaffff; font-weight: bold;">Int</span><span style=" ">&#40;</span>hWnd%,nIndex%,dNewLong%<span style=" ">&#41;</span> = <span style="color: #00ff66;">&quot;SetWindowLongA@12&quot;</span><br />
&nbsp;<span style="color: #aaffff; font-weight: bold;">Function</span> GetWindowLong:<span style="color: #aaffff; font-weight: bold;">Int</span><span style=" ">&#40;</span>hWnd%,nIndex%<span style=" ">&#41;</span> = <span style="color: #00ff66;">&quot;GetWindowLongA@8&quot;</span><br />
</p>
<span style="color: #aaffff; font-weight: bold;">End</span> Extern</div>
<p>Тут $z - это специальная C-шная строка, А @x - размер буфера для параметров, если не знаешь какой он, то просто его не пиши (в Дебуге увидишь, какой надо).
</p><p>З.Ы. У переводчика работает, но подлежит проверке:)
</p>
<hr />
<p>Автор: Bot Builder<br />
Перевод: <a href="http://blitzetcetera.org/index.php/%D0%A3%D1%87%D0%B0%D1%81%D1%82%D0%BD%D0%B8%D0%BA:MANIAK_dobrii" title="Участник:MANIAK dobrii">MANIAK dobrii</a> (e-mail: MANIAK_dobrii@list.ru, сайт: <a href="http://www.maniak-dobrii.nm.ru/" class="external free" title="http://www.maniak-dobrii.nm.ru/" rel="nofollow">http://www.maniak-dobrii.nm.ru/</a>)
</p>
<!-- Saved in parser cache with key db1:pcache:idhash:619-0!1!0!!ru!2 and timestamp 20071110040934 -->
<div class="printfooter">
Получено с <a href="i5r3wya3.html">http://blitzetcetera.org/index.php/%D0%9A%D0%B0%D0%BA_%D1%81%D0%BE%D0%B7%D0%B4%D0%B0%D0%B2%D0%B0%D1%82%D1%8C_%D0%B8_%D0%BF%D1%80%D0%B0%D0%B2%D0%B8%D1%82%D1%8C_%D0%BC%D0%BE%D0%B4%D1%83%D0%BB%D0%B8</a></div>
			<!-- end content -->			<div class="visualClear"></div>				</td>				<td class="rightside">				</td>			</tr>		</table>		</div>	</div>		</div>	
		<script type="text/javascript">if (window.runOnloadHook) runOnloadHook();</script>
</div></body>
<!-- Mirrored from localhost/index.php/%D0%9A%D0%B0%D0%BA_%D1%81%D0%BE%D0%B7%D0%B4%D0%B0%D0%B2%D0%B0%D1%82%D1%8C_%D0%B8_%D0%BF%D1%80%D0%B0%D0%B2%D0%B8%D1%82%D1%8C_%D0%BC%D0%BE%D0%B4%D1%83%D0%BB%D0%B8 by HTTrack Website Copier/3.x [XR&CO'2007], Sat, 10 Nov 2007 05:16:50 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8"><!-- /Added by HTTrack -->
</html>