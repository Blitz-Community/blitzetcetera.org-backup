<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml" xml:lang="ru" lang="ru" dir="ltr">	
<!-- Mirrored from localhost/index.php/%D0%92%D0%B8%D1%80%D1%82%D1%83%D0%B0%D0%BB%D1%8C%D0%BD%D1%8B%D0%B9_%D1%85%D1%83%D0%B4%D0%BE%D0%B6%D0%BD%D0%B8%D0%BA:_%D1%81%D0%BE%D1%81%D0%B5%D0%B4%D0%BD%D0%B8%D0%B5_%D0%BF%D0%B8%D0%BA%D1%81%D0%B5%D0%BB%D1%8B by HTTrack Website Copier/3.x [XR&CO'2007], Sat, 10 Nov 2007 05:16:19 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8"><!-- /Added by HTTrack -->
<head>		<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />				<meta name="keywords" content="Виртуальный художник: соседние пикселы,Matt Merkulov" />
		<link rel="shortcut icon" href="http://blitzetcetera.org/favicon.ico" />
		<link rel="search" type="application/opensearchdescription+xml" href="http://blitzetcetera.org/opensearch_desc.php" title="Blitz Et Cetera (Русский)" />
		<title>Виртуальный художник: соседние пикселы — Blitz Et Cetera</title>		<style type="text/css" media="screen,projection">/*<![CDATA[*/ @import "bvih5rde.css?63"; /*]]>*/</style>		<link rel="stylesheet" type="text/css" media="print" href="gcxktlm6.css?63" />		<link rel="stylesheet" type="text/css" media="handheld" href="zumsslq_.css?63" />		<!--[if lt IE 5.5000]><style type="text/css">@import "/skins/OfflineNew/IE50Fixes.css?63";</style><![endif]-->		<!--[if IE 5.5000]><style type="text/css">@import "/skins/OfflineNew/IE55Fixes.css?63";</style><![endif]-->		<!--[if IE 6]><style type="text/css">@import "/skins/OfflineNew/IE60Fixes.css?63";</style><![endif]-->		<!--[if IE 7]><style type="text/css">@import "/skins/OfflineNew/IE70Fixes.css?63";</style><![endif]-->		<!--[if lt IE 7]><script type="text/javascript" src="/skins/common/IEFixes.js?63"></script>		<meta http-equiv="imagetoolbar" content="no" /><![endif]-->		<script type= "text/javascript">/*<![CDATA[*/
var skin = "OfflineNew";
var stylepath = "/skins";
var wgArticlePath = "/index.php/$1";
var wgScriptPath = "";
var wgServer = "http://blitzetcetera.org/";
var wgCanonicalNamespace = "";
var wgCanonicalSpecialPageName = false;
var wgNamespaceNumber = 0;
var wgPageName = "Виртуальный_художник:_соседние_пикселы";
var wgTitle = "Виртуальный художник: соседние пикселы";
var wgAction = "view";
var wgArticleId = "590";
var wgIsArticle = true;
var wgUserName = null;
var wgUserGroups = null;
var wgUserLanguage = "ru";
var wgContentLanguage = "ru";
var wgBreakFrames = false;
var wgCurRevisionId = "3589";
/*]]>*/</script>
		<script type="text/javascript" src="2nq-6cel.js?63"><!-- wikibits js --></script>		<script type="text/javascript" src="http://blitzetcetera.org/index.php?title=-&amp;action=raw&amp;gen=js"><!-- site js --></script>		<style type="text/css">/*<![CDATA[*/
@import "http://blitzetcetera.org/index.php?title=MediaWiki:Common.css&amp;usemsgcache=yes&amp;action=raw&amp;ctype=text/css&amp;smaxage=18000";
@import "http://blitzetcetera.org/index.php?title=MediaWiki:OfflineNew.css&amp;usemsgcache=yes&amp;action=raw&amp;ctype=text/css&amp;smaxage=18000";
@import "http://blitzetcetera.org/index.php?title=-&amp;action=raw&amp;gen=css&amp;maxage=18000";
/*]]>*/</style>		<!-- Head Scripts -->	</head><body  class="mediawiki ns-0 ltr page-Виртуальный_художник_соседние_пикселы">	<div id="globalWrapper">	<div id="logocontainer">		<table align="center">		  <tr>				<td id="blitzetclogo">				</td>			</tr>		</table>	</div>	<div id="magbar">	Журнал о программированнии на языках Blitz3D, BlitzMax, BlitzPlus	</div>		<div id="column-content">	<div id="content">		<a name="top" id="top"></a>				<div id="bodyContent">		<table cellspacing=0 cellpadding=0 width=100%>			<tr>			  <td class="leftside">				</td>				<td class="sheetbody">					<h1 class="sheet">Виртуальный художник: соседние пикселы</h1>			<h3 id="siteSub">Материал из Blitz Et Cetera.</h3>			<div id="contentSub"></div>			<!-- start content -->			<p>В этом выпуске будут рассматриваться изменения картинки, когда цвет пиксела зависит от того, какие пикселы расположены вокруг.
</p>
<div class="center"><div class="thumb tnone"><div class="thumbinner" style="width:182px;"><a href="http://blitzetcetera.org/index.php/%D0%98%D0%B7%D0%BE%D0%B1%D1%80%D0%B0%D0%B6%D0%B5%D0%BD%D0%B8%D0%B5:Painter3.jpg" class="internal" title=""><img alt="" longdesc="http://blitzetcetera.org/index.php/%D0%98%D0%B7%D0%BE%D0%B1%D1%80%D0%B0%D0%B6%D0%B5%D0%BD%D0%B8%D0%B5:Painter3.jpg" class="thumbimage" src="_g4ippz3.jpg" width="180" height="135" /></a>  <div class="thumbcaption"><div class="magnify" style="float:right"><a href="http://blitzetcetera.org/index.php/%D0%98%D0%B7%D0%BE%D0%B1%D1%80%D0%B0%D0%B6%D0%B5%D0%BD%D0%B8%D0%B5:Painter3.jpg" class="internal" title="Увеличить"><img src="gau13a4-.png" width="15" height="11" alt="" /></a></div></div></div></div></div>
<a name=".D0.9F.D1.80.D0.BE.D1.81.D1.82.D0.B5.D0.B9.D1.88.D0.B8.D0.B5_.D1.8D.D1.84.D1.84.D0.B5.D0.BA.D1.82.D1.8B"></a><h2><span class="editsection">[<a href="http://blitzetcetera.org/index.php?title=%D0%92%D0%B8%D1%80%D1%82%D1%83%D0%B0%D0%BB%D1%8C%D0%BD%D1%8B%D0%B9_%D1%85%D1%83%D0%B4%D0%BE%D0%B6%D0%BD%D0%B8%D0%BA:_%D1%81%D0%BE%D1%81%D0%B5%D0%B4%D0%BD%D0%B8%D0%B5_%D0%BF%D0%B8%D0%BA%D1%81%D0%B5%D0%BB%D1%8B&amp;action=edit&amp;section=1" title="Править секцию: Простейшие эффекты">править</a>]</span> <span class="mw-headline">Простейшие эффекты</span></h2>
<p>Сначала определим зону вокруг данного пиксела - пусть это будет квадрат ((x-wid)..(x+wid),(y-wid)..(y+wid)), где wid - ширина зоны. Рассматриваемый пиксел находится в центре. Эффект размытия достигается просто - находим среднее арифметическое (напомню, формула: (a<sub>1</sub> + a<sub>2</sub> + ... + a<sub>n-1</sub> + a<sub>n</sub>) / n) для каждого канала между всеми пикселами зоны. Эффект диффузии еще более прост - из зоны берется случайно выбранный пиксел. Рельефность достигается нахождением среднего арифметического яркости пикселов в левом верхнем квадранте зоны и сравниванием этого значения с яркостью данного.
</p>
<div class="bb" style="font-family: monospace;background-color:#FFFFFF;border:1px dashed #CCCCCC;padding:10px;background-color:#225588;color:#FFFFFF;border:1px solid #003040;padding:10px;"><span style="color: #ffee00">;Const wid=2,fx=1</span><br />
<p><span style="color: #ffee00">;Const wid=2,fx=2</span><br />
<span style="color: #aaffff; font-weight: bold;">Const</span> wid=<span style="color: #33ffdd;">2</span>,fx=<span style="color: #33ffdd;">3</span><br />
<br />
<span style="color: #aaffff; font-weight: bold;">Const</span> k1=<span style=" ">&#40;</span>wid*<span style="color: #33ffdd;">2</span><span style="color: #33ffdd;">+1</span><span style=" ">&#41;</span>^<span style="color: #33ffdd;">2</span>,k2=<span style=" ">&#40;</span>wid<span style="color: #33ffdd;">+1</span><span style=" ">&#41;</span>^<span style="color: #33ffdd;">2</span><span style="color: #33ffdd;">-1</span><br />
<br />
<span style="color: #aaffff; font-weight: bold;">Graphics</span> <span style="color: #33ffdd;">640</span>,<span style="color: #33ffdd;">480</span>,<span style="color: #33ffdd;">32</span><br />
<br />
i=<span style="color: #aaffff; font-weight: bold;">LoadImage</span><span style=" ">&#40;</span><span style="color: #00ff66;">&quot;Painter3.jpg&quot;</span><span style=" ">&#41;</span><br />
<span style="color: #aaffff; font-weight: bold;">DrawBlock</span> i,<span style="color: #33ffdd;">0</span>,<span style="color: #33ffdd;">0</span><br />
<br />
ib=<span style="color: #aaffff; font-weight: bold;">ImageBuffer</span><span style=" ">&#40;</span>i<span style=" ">&#41;</span><br />
<span style="color: #aaffff; font-weight: bold;">LockBuffer</span> ib<br />
<br />
<span style="color: #aaffff; font-weight: bold;">Color</span> <span style="color: #33ffdd;">0</span>,<span style="color: #33ffdd;">0</span>,<span style="color: #33ffdd;">0</span><br />
k3=<span style="color: #33ffdd;">1</span><br />
<span style="color: #aaffff; font-weight: bold;">For</span> n=<span style="color: #33ffdd;">0</span> <span style="color: #aaffff; font-weight: bold;">To</span> wid<span style="color: #33ffdd;">-1</span><br />
&nbsp;<span style="color: #aaffff; font-weight: bold;">Rect</span> n,n,<span style="color: #33ffdd;">640</span>-n*<span style="color: #33ffdd;">2</span>,<span style="color: #33ffdd;">480</span>-n*<span style="color: #33ffdd;">2</span>,<span style="color: #33ffdd;">0</span><br />
&nbsp;k3=k3+<span style=" ">&#40;</span>n<span style="color: #33ffdd;">+2</span><span style=" ">&#41;</span>*<span style=" ">&#40;</span>n<span style="color: #33ffdd;">+2</span><span style=" ">&#41;</span><br />
<span style="color: #aaffff; font-weight: bold;">Next</span><br />
<br />
<span style="color: #aaffff; font-weight: bold;">For</span> y=wid <span style="color: #aaffff; font-weight: bold;">To</span> <span style="color: #33ffdd;">479</span>-wid<br />
&nbsp;<span style="color: #aaffff; font-weight: bold;">For</span> x=wid <span style="color: #aaffff; font-weight: bold;">To</span> <span style="color: #33ffdd;">639</span>-wid<br />
&nbsp; r=<span style="color: #33ffdd;">0</span>:g=<span style="color: #33ffdd;">0</span>:b=<span style="color: #33ffdd;">0</span><br />
&nbsp; <span style="color: #aaffff; font-weight: bold;">Select</span> fx<br />
&nbsp; &nbsp;<span style="color: #aaffff; font-weight: bold;">Case</span> <span style="color: #33ffdd;">1</span><span style="color: #ffee00">;Размытие </span><br />
&nbsp; &nbsp; <span style="color: #aaffff; font-weight: bold;">For</span> xx=-wid <span style="color: #aaffff; font-weight: bold;">To</span> wid<br />
&nbsp; &nbsp; &nbsp;<span style="color: #aaffff; font-weight: bold;">For</span> yy=-wid <span style="color: #aaffff; font-weight: bold;">To</span> wid<br />
&nbsp; &nbsp; &nbsp; p=<span style="color: #aaffff; font-weight: bold;">ReadPixelFast</span><span style=" ">&#40;</span>x+xx,y+yy,ib<span style=" ">&#41;</span><br />
&nbsp; &nbsp; &nbsp; r=r+<span style=" ">&#40;</span><span style=" ">&#40;</span>p <span style="color: #aaffff; font-weight: bold;">Shr</span> <span style="color: #33ffdd;">16</span><span style=" ">&#41;</span> <span style="color: #aaffff; font-weight: bold;">And</span> <span style="color: #33ffdd;">255</span><span style=" ">&#41;</span><br />
&nbsp; &nbsp; &nbsp; g=g+<span style=" ">&#40;</span><span style=" ">&#40;</span>p <span style="color: #aaffff; font-weight: bold;">Shr</span> <span style="color: #33ffdd;">8</span><span style=" ">&#41;</span> <span style="color: #aaffff; font-weight: bold;">And</span> <span style="color: #33ffdd;">255</span><span style=" ">&#41;</span><br />
&nbsp; &nbsp; &nbsp; b=b+<span style=" ">&#40;</span>p <span style="color: #aaffff; font-weight: bold;">And</span> <span style="color: #33ffdd;">255</span><span style=" ">&#41;</span><br />
&nbsp; &nbsp; &nbsp;<span style="color: #aaffff; font-weight: bold;">Next</span><br />
&nbsp; &nbsp; <span style="color: #aaffff; font-weight: bold;">Next</span><br />
&nbsp; &nbsp; <span style="color: #aaffff; font-weight: bold;">WritePixel</span> x,y,<span style="color: #aaffff; font-weight: bold;">Int</span><span style=" ">&#40;</span>b/k1<span style=" ">&#41;</span>+<span style="color: #aaffff; font-weight: bold;">Int</span><span style=" ">&#40;</span>g/k1<span style=" ">&#41;</span> <span style="color: #aaffff; font-weight: bold;">Shl</span> <span style="color: #33ffdd;">8</span>+<span style="color: #aaffff; font-weight: bold;">Int</span><span style=" ">&#40;</span>r/k1<span style=" ">&#41;</span> <span style="color: #aaffff; font-weight: bold;">Shl</span> <span style="color: #33ffdd;">16</span><br />
&nbsp; &nbsp;<span style="color: #aaffff; font-weight: bold;">Case</span> <span style="color: #33ffdd;">2</span><span style="color: #ffee00">;Диффузия</span><br />
&nbsp; &nbsp; <span style="color: #aaffff; font-weight: bold;">WritePixel</span> x,y,<span style="color: #aaffff; font-weight: bold;">ReadPixelFast</span><span style=" ">&#40;</span>x+<span style="color: #aaffff; font-weight: bold;">Rand</span><span style=" ">&#40;</span>-wid,wid<span style=" ">&#41;</span>,y+<span style="color: #aaffff; font-weight: bold;">Rand</span><span style=" ">&#40;</span>-wid,wid<span style=" ">&#41;</span>,ib<span style=" ">&#41;</span><br />
&nbsp; &nbsp;<span style="color: #aaffff; font-weight: bold;">Case</span> <span style="color: #33ffdd;">3</span><span style="color: #ffee00">;Рельефность</span><br />
&nbsp; &nbsp; k=<span style="color: #33ffdd;">0</span><br />
&nbsp; &nbsp; <span style="color: #aaffff; font-weight: bold;">For</span> xx=-wid <span style="color: #aaffff; font-weight: bold;">To</span> <span style="color: #33ffdd;">0</span><br />
&nbsp; &nbsp; &nbsp;<span style="color: #aaffff; font-weight: bold;">For</span> yy=-wid <span style="color: #aaffff; font-weight: bold;">To</span> <span style="color: #33ffdd;">0</span><br />
&nbsp; &nbsp; &nbsp; p=<span style="color: #aaffff; font-weight: bold;">ReadPixelFast</span><span style=" ">&#40;</span>x+xx,y+yy,ib<span style=" ">&#41;</span><br />
&nbsp; &nbsp; &nbsp; r=<span style=" ">&#40;</span>p <span style="color: #aaffff; font-weight: bold;">Shr</span> <span style="color: #33ffdd;">16</span><span style=" ">&#41;</span> <span style="color: #aaffff; font-weight: bold;">And</span> <span style="color: #33ffdd;">255</span><br />
&nbsp; &nbsp; &nbsp; g=<span style=" ">&#40;</span>p <span style="color: #aaffff; font-weight: bold;">Shr</span> <span style="color: #33ffdd;">8</span><span style=" ">&#41;</span> <span style="color: #aaffff; font-weight: bold;">And</span> <span style="color: #33ffdd;">255</span><br />
&nbsp; &nbsp; &nbsp; b=p <span style="color: #aaffff; font-weight: bold;">And</span> <span style="color: #33ffdd;">255</span><br />
&nbsp; &nbsp; &nbsp; c=.<span style="color: #33ffdd;">35</span>*r+.<span style="color: #33ffdd;">45</span>*g+.<span style="color: #33ffdd;">2</span>*b<br />
&nbsp; &nbsp; &nbsp; <span style="color: #aaffff; font-weight: bold;">If</span> xx+yy=<span style="color: #33ffdd;">0</span> <span style="color: #aaffff; font-weight: bold;">Then</span> k=<span style=" ">&#40;</span>c-k/k2<span style="color: #33ffdd;">+255</span><span style=" ">&#41;</span> <span style="color: #aaffff; font-weight: bold;">Sar</span> <span style="color: #33ffdd;">1</span> <span style="color: #aaffff; font-weight: bold;">Else</span> k=k+c<br />
&nbsp; &nbsp; &nbsp;<span style="color: #aaffff; font-weight: bold;">Next</span><br />
&nbsp; &nbsp; <span style="color: #aaffff; font-weight: bold;">Next</span><br />
&nbsp; &nbsp; <span style="color: #aaffff; font-weight: bold;">If</span> k&lt;<span style="color: #33ffdd;">0</span> <span style="color: #aaffff; font-weight: bold;">Then</span> k=<span style="color: #33ffdd;">0</span><br />
&nbsp; &nbsp; <span style="color: #aaffff; font-weight: bold;">If</span> k&gt;<span style="color: #33ffdd;">255</span> <span style="color: #aaffff; font-weight: bold;">Then</span> k=<span style="color: #33ffdd;">255</span><br />
&nbsp; &nbsp; <span style="color: #aaffff; font-weight: bold;">WritePixel</span> x,y,k*<span style="color: #33ffdd;">65793</span><br />
&nbsp; <span style="color: #aaffff; font-weight: bold;">End Select</span><br />
&nbsp;<span style="color: #aaffff; font-weight: bold;">Next</span><br />
<span style="color: #aaffff; font-weight: bold;">Next</span><br />
</p>
<span style="color: #aaffff; font-weight: bold;">WaitKey</span></div>
<a name=".D0.90.D0.BB.D0.B3.D0.BE.D1.80.D0.B8.D1.82.D0.BC_.D0.B7.D0.B0.D0.BB.D0.B8.D0.B2.D0.BA.D0.B8"></a><h2><span class="editsection">[<a href="http://blitzetcetera.org/index.php?title=%D0%92%D0%B8%D1%80%D1%82%D1%83%D0%B0%D0%BB%D1%8C%D0%BD%D1%8B%D0%B9_%D1%85%D1%83%D0%B4%D0%BE%D0%B6%D0%BD%D0%B8%D0%BA:_%D1%81%D0%BE%D1%81%D0%B5%D0%B4%D0%BD%D0%B8%D0%B5_%D0%BF%D0%B8%D0%BA%D1%81%D0%B5%D0%BB%D1%8B&amp;action=edit&amp;section=2" title="Править секцию: Алгоритм заливки">править</a>]</span> <span class="mw-headline">Алгоритм заливки</span></h2>
<p>С заливкой области цветом, вы наверняка уже не раз сталкивались в редакторах или старых версиях Бейсика. Суть в том, чтобы залить область определенного цвета, которая ограничена пикселами другого цвета, данным цветом. Исходные данные - цвет заливки и начальный пиксел. Самый простой алгоритм реализации - взять цвет исходного пиксела и проверять, совпадает ли с ним цвет смежных пикселов. Если да, то закрашиваем их и проверяем пикселы, смежные с ними. Процесс происходит до тех пор, пока все пикселы не окажутся проверенными. При этом, можно воспользоваться типами для записи пикселов, подлежащих проверке. Оптимизировать алгоритм можно снизив количество проверок (простейший алгоритм проверяет каждый пиксел 4 раза).
</p><p>Еще один алгоритм - заполнение линиями. Принцип тот же, только проверяются и выявляются горизонтальные линии.
</p><p>Чтобы получить один интересный эффект, задачу можно усложнить: цвет заливки будет цветом исходного пиксела, а пикселы с цветом, мало отличающимся от исходного, будут также заливаться. Повторим этот процесс для каждого пиксела изображения. Придется использовать вспомогательный буфер для пометки уже залитых областей.
</p>
<div class="bb" style="font-family: monospace;background-color:#FFFFFF;border:1px dashed #CCCCCC;padding:10px;background-color:#225588;color:#FFFFFF;border:1px solid #003040;padding:10px;"><span style="color: #aaffff; font-weight: bold;">Type</span> paint<br />
<p>&nbsp;<span style="color: #aaffff; font-weight: bold;">Field</span> x,y,dir,move<br />
<span style="color: #aaffff; font-weight: bold;">End Type</span><br />
<br />
<span style="color: #aaffff; font-weight: bold;">Type</span> paint2<br />
&nbsp;<span style="color: #aaffff; font-weight: bold;">Field</span> x1,x2,y<br />
<span style="color: #aaffff; font-weight: bold;">End Type</span><br />
<br />
<span style="color: #aaffff; font-weight: bold;">Const</span> rad=<span style="color: #33ffdd;">48</span>^<span style="color: #33ffdd;">2</span><br />
<br />
<span style="color: #aaffff; font-weight: bold;">Graphics</span> <span style="color: #33ffdd;">640</span>,<span style="color: #33ffdd;">480</span><br />
<br />
<span style="color: #aaffff; font-weight: bold;">Global</span> ib,ib2,p,r,g,b<br />
<br />
i=<span style="color: #aaffff; font-weight: bold;">LoadImage</span><span style=" ">&#40;</span><span style="color: #00ff66;">&quot;Painter3.jpg&quot;</span><span style=" ">&#41;</span><br />
ib=<span style="color: #aaffff; font-weight: bold;">ImageBuffer</span><span style=" ">&#40;</span>i<span style=" ">&#41;</span><br />
<span style="color: #aaffff; font-weight: bold;">DrawBlock</span> i,<span style="color: #33ffdd;">0</span>,<span style="color: #33ffdd;">0</span><br />
<span style="color: #aaffff; font-weight: bold;">LockBuffer</span> ib<br />
<br />
i2=<span style="color: #aaffff; font-weight: bold;">CreateImage</span><span style=" ">&#40;</span><span style="color: #33ffdd;">640</span>,<span style="color: #33ffdd;">480</span><span style=" ">&#41;</span><br />
ib2=<span style="color: #aaffff; font-weight: bold;">ImageBuffer</span><span style=" ">&#40;</span>i2<span style=" ">&#41;</span><br />
<span style="color: #aaffff; font-weight: bold;">Global</span> zero=<span style="color: #aaffff; font-weight: bold;">ReadPixel</span><span style=" ">&#40;</span><span style="color: #33ffdd;">0</span>,<span style="color: #33ffdd;">0</span>,ib2<span style=" ">&#41;</span><br />
<span style="color: #aaffff; font-weight: bold;">LockBuffer</span> ib2<br />
<br />
<span style="color: #aaffff; font-weight: bold;">For</span> x=<span style="color: #33ffdd;">0</span> <span style="color: #aaffff; font-weight: bold;">To</span> <span style="color: #33ffdd;">639</span><br />
&nbsp;<span style="color: #aaffff; font-weight: bold;">For</span> y=<span style="color: #33ffdd;">0</span> <span style="color: #aaffff; font-weight: bold;">To</span> <span style="color: #33ffdd;">479</span><br />
&nbsp; p=<span style="color: #aaffff; font-weight: bold;">ReadPixelFast</span><span style=" ">&#40;</span>x,y,ib<span style=" ">&#41;</span><br />
&nbsp; r=<span style=" ">&#40;</span>p <span style="color: #aaffff; font-weight: bold;">Shr</span> <span style="color: #33ffdd;">16</span><span style=" ">&#41;</span> <span style="color: #aaffff; font-weight: bold;">And</span> <span style="color: #33ffdd;">255</span><br />
&nbsp; g=<span style=" ">&#40;</span>p <span style="color: #aaffff; font-weight: bold;">Shr</span> <span style="color: #33ffdd;">8</span><span style=" ">&#41;</span> <span style="color: #aaffff; font-weight: bold;">And</span> <span style="color: #33ffdd;">255</span><br />
&nbsp; b=p <span style="color: #aaffff; font-weight: bold;">And</span> <span style="color: #33ffdd;">255</span><br />
&nbsp; paint x,y<br />
&nbsp;<span style="color: #aaffff; font-weight: bold;">Next</span><br />
<span style="color: #aaffff; font-weight: bold;">Next</span><br />
<span style="color: #aaffff; font-weight: bold;">WaitKey</span><br />
<br />
<span style="color: #aaffff; font-weight: bold;">Function</span> checkpixel<span style=" ">&#40;</span>x,y<span style=" ">&#41;</span><br />
<span style="color: #aaffff; font-weight: bold;">If</span> x&lt;<span style="color: #33ffdd;">0</span> <span style="color: #aaffff; font-weight: bold;">Or</span> x&gt;=<span style="color: #33ffdd;">640</span> <span style="color: #aaffff; font-weight: bold;">Or</span> y&lt;<span style="color: #33ffdd;">0</span> <span style="color: #aaffff; font-weight: bold;">Or</span> y&gt;=<span style="color: #33ffdd;">480</span> <span style="color: #aaffff; font-weight: bold;">Then</span> <span style="color: #aaffff; font-weight: bold;">Return</span><br />
<span style="color: #aaffff; font-weight: bold;">If</span> <span style="color: #aaffff; font-weight: bold;">ReadPixelFast</span><span style=" ">&#40;</span>x,y,ib2<span style=" ">&#41;</span>&lt;&gt;zero <span style="color: #aaffff; font-weight: bold;">Then</span> <span style="color: #aaffff; font-weight: bold;">Return</span><br />
<span style="color: #ffee00">;Вычисление разницы цветов</span><br />
pp=<span style="color: #aaffff; font-weight: bold;">ReadPixelFast</span><span style=" ">&#40;</span>x,y,ib<span style=" ">&#41;</span><br />
r2=r-<span style=" ">&#40;</span><span style=" ">&#40;</span>pp <span style="color: #aaffff; font-weight: bold;">Shr</span> <span style="color: #33ffdd;">16</span><span style=" ">&#41;</span> <span style="color: #aaffff; font-weight: bold;">And</span> <span style="color: #33ffdd;">255</span><span style=" ">&#41;</span><br />
g2=g-<span style=" ">&#40;</span><span style=" ">&#40;</span>pp <span style="color: #aaffff; font-weight: bold;">Shr</span> <span style="color: #33ffdd;">8</span><span style=" ">&#41;</span> <span style="color: #aaffff; font-weight: bold;">And</span> <span style="color: #33ffdd;">255</span><span style=" ">&#41;</span><br />
b2=b-<span style=" ">&#40;</span>pp <span style="color: #aaffff; font-weight: bold;">And</span> <span style="color: #33ffdd;">255</span><span style=" ">&#41;</span><br />
rr=r2*r2+g2*g2+b2*b2<br />
<span style="color: #aaffff; font-weight: bold;">If</span> rr&gt;rad <span style="color: #aaffff; font-weight: bold;">Then</span> <span style="color: #aaffff; font-weight: bold;">Return</span><br />
p1.paint=<span style="color: #aaffff; font-weight: bold;">New</span> paint<br />
p1\x=x<br />
p1\y=y<br />
<span style="color: #aaffff; font-weight: bold;">WritePixel</span> x,y,p<br />
<span style="color: #ffee00">;Пометка пиксела во вспомогательном буфере, как проработанного</span><br />
<span style="color: #aaffff; font-weight: bold;">WritePixelFast</span> x,y,<span style="color: #33ffdd;">-1</span>,ib2<br />
<span style="color: #aaffff; font-weight: bold;">End Function</span><br />
<br />
<span style="color: #aaffff; font-weight: bold;">Function</span> paint<span style=" ">&#40;</span>x,y<span style=" ">&#41;</span><br />
checkpixel x,y<br />
<span style="color: #aaffff; font-weight: bold;">Repeat</span><br />
&nbsp;p1.paint=<span style="color: #aaffff; font-weight: bold;">First</span> paint<br />
&nbsp;<span style="color: #aaffff; font-weight: bold;">If</span> p1=<span style="color: #aaffff; font-weight: bold;">Null</span> <span style="color: #aaffff; font-weight: bold;">Then</span> <span style="color: #aaffff; font-weight: bold;">Exit</span><br />
&nbsp;x=p1\x<br />
&nbsp;y=p1\y<br />
&nbsp;<span style="color: #ffee00">;Проверка смежных пикселов</span><br />
&nbsp;checkpixel x<span style="color: #33ffdd;">+1</span>,y<br />
&nbsp;checkpixel x<span style="color: #33ffdd;">-1</span>,y<br />
&nbsp;checkpixel x,y<span style="color: #33ffdd;">-1</span><br />
&nbsp;checkpixel x,y<span style="color: #33ffdd;">+1</span><br />
&nbsp;<span style="color: #aaffff; font-weight: bold;">Delete</span> p1<br />
<span style="color: #aaffff; font-weight: bold;">Forever</span><br />
</p>
<span style="color: #aaffff; font-weight: bold;">End Function</span></div>
<div align="right"><a href="http://blitzetcetera.org/images/7/7c/Virtual_Painter_-_Adjacent_Pixels.zip" class="internal" title="Virtual Painter - Adjacent Pixels.zip">скачать архив с файлами к статье</a></div>
<hr />
<p>Автор: <a href="http://blitzetcetera.org/index.php/%D0%A3%D1%87%D0%B0%D1%81%D1%82%D0%BD%D0%B8%D0%BA:Matt_Merkulov" title="Участник:Matt Merkulov">Матвей Меркулов</a> (E-mail: MattMerk@mail.ru, ICQ: 392-274-050)
</p><!-- 
Pre-expand include size: 2972 bytes
Post-expand include size: 435 bytes
Template argument size: 44 bytes
Maximum: 2097152 bytes
-->

<!-- Saved in parser cache with key db1:pcache:idhash:590-0!1!0!!ru!2 and timestamp 20071110040214 -->
<div class="printfooter">
Получено с <a href="y6qhek8x.html">http://blitzetcetera.org/index.php/%D0%92%D0%B8%D1%80%D1%82%D1%83%D0%B0%D0%BB%D1%8C%D0%BD%D1%8B%D0%B9_%D1%85%D1%83%D0%B4%D0%BE%D0%B6%D0%BD%D0%B8%D0%BA:_%D1%81%D0%BE%D1%81%D0%B5%D0%B4%D0%BD%D0%B8%D0%B5_%D0%BF%D0%B8%D0%BA%D1%81%D0%B5%D0%BB%D1%8B</a></div>
			<!-- end content -->			<div class="visualClear"></div>				</td>				<td class="rightside">				</td>			</tr>		</table>		</div>	</div>		</div>	
		<script type="text/javascript">if (window.runOnloadHook) runOnloadHook();</script>
</div></body>
<!-- Mirrored from localhost/index.php/%D0%92%D0%B8%D1%80%D1%82%D1%83%D0%B0%D0%BB%D1%8C%D0%BD%D1%8B%D0%B9_%D1%85%D1%83%D0%B4%D0%BE%D0%B6%D0%BD%D0%B8%D0%BA:_%D1%81%D0%BE%D1%81%D0%B5%D0%B4%D0%BD%D0%B8%D0%B5_%D0%BF%D0%B8%D0%BA%D1%81%D0%B5%D0%BB%D1%8B by HTTrack Website Copier/3.x [XR&CO'2007], Sat, 10 Nov 2007 05:16:19 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8"><!-- /Added by HTTrack -->
</html>