<HTML>
<HEAD>
  <STYLE TYPE="text/css">
  <!--
    A:visited {text-decoration: none; color="#0055FF"; font-weight: bold}
    A:active {text-decoration: underline; color="#0055FF"; font-weight: bold}
    A:link {text-decoration: none; color="#0055FF"; font-weight: bold}
    A:hover {text-decoration: underline; color: #ACACD7; font-weight: bold}
  -->  
  </STYLE>
  <TITLE>Modeling tutorial - Присоединяем модель к скелету в Milkshape 3D</TITLE>
  <META NAME="Description" CONTENT="">
  <META NAME="Keywords" CONTENT="">
  <META HTTP-EQUIV="Content-type" CONTENT="text/html; Charset=Windows-1251">
  <META NAME="author" CONTENT="Stanislav Serov (yxo), E-Mail: neotropic@halflife.ru">
  <META NAME="copyright" CONTENT="R.M.C.">
</HEAD>
<BODY BGCOLOR="#4F4958"><FONT FACE="Arial">
<A NAME="up"></A>
<TABLE ALIGN="center" WIDTH="100%" CELLSPACING="0" CELLPADDING="4" BORDER="1" BORDERCOLOR="Silver" HEIGHT="100%">

<TD ALIGN="justify" VALIGN="top" BGCOLOR="Black" BORDERCOLOR="Silver">
<FONT SIZE="2" COLOR="White">
  <TABLE CELLSPACING="0" CELLPADDING="0" BORDER="1" WIDTH="100%" BORDERCOLOR="#BFD9DF">
  <TR><TD BGCOLOR="#BFD9DF" ALIGN="center"><FONT SIZE="2"><B>Russian Half-Life Modelling Center: Документация - Присоединяем модель к скелету в Milkshape 3D.</A></B></FONT></TD>
 </TR>
  </TABLE>
<BR>

<table width=100% border=0 align=center cellspacing=0 cellpadding=20>


<td width=100% ><p align="center"><font size="3" color="#ACACD7"><strong>КАК ПРИСОЕДИНИТЬ МОДЕЛЬ К СКЕЛЕТУ В MILKSHAPE</strong></font></p><font size="2" color="#ACACD7">
Так как в Half-Life вместо простой анимации вершин как в Quake1 и Quake2, применён принцип скелетной анимации, что значит что сама модель не изменяется, а двигаются только кости скелета которые управляют вершинами модели. Модель мы сделали теперь важно присоединить её к скелету. 
В Milkshape это делается весьма быстро, но намного неудобней чем в 3D MAX. <br>
Для начала нам нужен стандартный скелет, можете загрузить его из любой модели для дезматча или скачать файл с скелетом. <br>
Ок, теперь просто загрузите саму модель и импотрируйте в неё скелет.<br> 
Вы можете импортировать скелет из любого 'smd' файла модели для дезматча, или <a href="valve_skeleton.ms3d">скачать файл</a> 'ms3d' формата со скелетом.
Теперь жмите меню Файл, и выберите 'Merge': 
<p align="center"> <img src="file_merge.jpg"><p>
... и найдите 'valve_skeleton.ms3d', который вы загрузили. <br>
Если ничего не произошло, тоесть скелет не видно, тогда нажмите кнопку 'Joints', и удостоверитесь что опция 'Show Skeleton' включенна. 
<p align="center"> <img src="merged.jpg"><p>


<font size="3" color="#ACACD7"><strong>НАСТРОЙКА МОДЕЛИ НА СКЕЛЕТ
</strong></font></p>
Теперь мы очень хорошо видим что наша модель не совсем соответствует скелету, то есть руки модели находятся немного ниже, также ноги расставленны шире чем кости ног. Так что теперь нам обязательно нужно настроить модель под скелет, я сто раз повторял в текста о 3D MAX и здесь тоже повторю что если вы не будете модифицировать анимации модели, то есть модель будет двигатся как и обычная модель дезматча, то вам ни в коем случае нельзя модифицировать скелет. Вобщем если вы маштабируете любую кость скелета то вам обязательно нужно переделать все анимации модели. <br>
Так что теперь мы будем использовать инструмент перемещения 'Move', передвигая различные группы вершин так чтобы модель более менее была настроенна под скелет. 
<p align="center"> <img src="movetools.jpg"><p>
Первым делом жмём кнопку 'Select', далее выбраем 'Vertex'. 
<p align="center"> <img src="selectopt.jpg"><p>
Теперь щелкайте кнопку 'Move', и перемещаёте вершины туда куда вам нужно. Сначала я выберу целую модель и перемещю её немного вперед, так как она находится немного позади скелета, теперь можно передвигать вершины отдельных членов модели. 
<p align="center"> <img src="before.jpg"><p>
К примеру выделю вершины колена.
<p align="center"> <img src="after.jpg"><p>
Теперь перемещу их немного влево так чтобы колено модели было точно вокруг её кости. <br>
Повторяйте эту процедуру пока все вершины модели не будут более менее настроенны на скелет. <br><br>
<b>СОВЕТ:</b>Если вы включите опции 'Auto Tool', тогда программа автоматически будет переключатся в режим 'Select' из 'Move' или других режимов. <br><br>
<b>СОВЕТ:</b> Если вы хотите передвигать вершины только в одном направлении 'X', 'Y' или 'Z', то вам нужно в опциях инструмента 'Move'. <br>
Вот эти три кнопки и нам нужны : 
<p align="center"> <img src="xyz.jpg"><p>
Оключив любую кнопку из этих трёх вы ограничите передвижение по той оси которую вы оключили. 
<p align="center"> <img src="yzoff.jpg"><p>
<font size="3" color="#ACACD7"><strong>НАЗНАЧЕНИЕ ВЕРШИН К СКЕЛЕТУ</strong></font></p>
Ок, модель мы настроили более-менее нормально, теперь мы назначим вершины к их уместным костям. Делается это ну очень просто, но опятже повторюсь, не очень удобно. Убедитесь что опция 'Auto Tool' отключенна. 
<p align="center"> <img src="newopt.jpg"><p>
Теперь жмите 'Joints': 
<p align="center"> <img src="bonesroll.jpg"><p>
Здесь мы видим список всех костей в сцене. Но как узнать какая кость нам нужна. Вообще все кости названны вполне понятно, к примеру кость 'Bip01 Spine' в переводе на русский будет Бип01 позвонок. Вобщем названны они вполне удобно, и перепутать чтото довольно сложно. Ниже приведён рисунок которые показывает каждую кость и её название в скелете.
<p align="center"> <img src="boname.jpg"><p>
Хорошо, теперь нужно немного напрячь мозги, а точнее нам нужно точно понять какие вершины к каким костям лучше назначить так чтобы модель потом в игре выглядела красиво. <br>
Ок, всё решили, теперь выделяем нужные вершины далее выделяем нужныю кость и жмём кнопку 'Assign'. <br>
И всё. 
<p align="center"> <img src="bonexample.jpg"><p>
На рисунке вы видите как я выделил часть вершин правой ноги и присоединил 'Bip01 R Calf' кости.<br><br>
Теперь повторите эту процедуру пока все вершины не будут назначенны к их костям.<br><br>
<b>СОВЕТ:</b> Очень полезный инструмент 'Select Unassigned' выделяет все вершины которые не назначены на кости. <br>
<b>СОВЕТ:</b> Также кнопка 'Select Assigned' будет очень полезна, нажав на эту кнопку будут выделенны все вершины назначенные на выделенную кость. <br><br>
Как только вы полность удовлетворенны назначением вершин, жмите кнопку  File/Export и сохраните фашу модель как 'Half-Life SMD'. <br>
После сохранения файла, если не нужно модифицировать анимации, вы можете компилировать модель. 


</td>
</table>
</font>
<TABLE CELLSPACING="0" CELLPADDING="0" BORDER="1" WIDTH="100%" BORDERCOLOR="#BFD9DF">
  <TR>
  <TD WIDTH="100%" ALIGN="center"><FONT SIZE="2" COLOR="White"><A HREF="../../tut.shtml">Назад</A></FONT></TD></TR>
  </TABLE>

</DIV>

</FONT>
</TD>
</TR>
</TABLE>

</BODY>
</HTML>