<HTML>
<HEAD>
  <STYLE TYPE="text/css">
  <!--
    A:visited {text-decoration: none; color="#0055FF"; font-weight: bold}
    A:active {text-decoration: underline; color="#0055FF"; font-weight: bold}
    A:link {text-decoration: none; color="#0055FF"; font-weight: bold}
    A:hover {text-decoration: underline; color: #ACACD7; font-weight: bold}
  -->  
  </STYLE>
  <TITLE>Modeling tutorial - Создаём свой скелет в 3D MAX</TITLE>
  <META NAME="Description" CONTENT="">
  <META NAME="Keywords" CONTENT="">
  <META HTTP-EQUIV="Content-type" CONTENT="text/html; Charset=Windows-1251">
  <META NAME="author" CONTENT="Stanislav Serov (yxo), E-Mail: neotropic@halflife.ru">
  <META NAME="copyright" CONTENT="R.M.C.">
</HEAD>
<BODY BGCOLOR="#4F4958"><FONT FACE="Arial">
<A NAME="up"></A>
<TABLE ALIGN="center" WIDTH="100%" CELLSPACING="0" CELLPADDING="4" BORDER="1" BORDERCOLOR="Silver" HEIGHT="100%">


<TD ALIGN="justify" VALIGN="top" BGCOLOR="Black" BORDERCOLOR="Silver">
<FONT SIZE="2" COLOR="White">
  <TABLE CELLSPACING="0" CELLPADDING="0" BORDER="1" WIDTH="100%" BORDERCOLOR="#BFD9DF">
  <TR><TD BGCOLOR="#BFD9DF" ALIGN="center"><FONT SIZE="2"><B>Modeling tutorial - Cоздаём свой скелет.</A></B></FONT></TD>
 </TR>
  </TABLE>
<BR>
<table width=100% border=0 align=center cellspacing=0 cellpadding=20>
<td width=100% >
<p align="center"><font size="3" color="#ACACD7"><strong>РЕЖИМ ФИГУРЫ</strong></font></p><font size="2" color="#ACACD7">
Итак мы создали наш скелет или же взяли его из Player Models SDK (в тексте я буду обьяснять различные примеры на основе скелета гордона из SDK) теперь пора настроить его добавить новые кости и т. д. <br>
ВАЖНО: Если вам нужно добавить кости или модифицировать уже готовые, вы обязательно должны активизировать режим 'Figure mode' для скелета biped. <br>
Режим 'Figure mode' нужен только для модифицирования костей скелета, при дезактивированном режиме вы сможете анимировать скелет но уже формы его изменять не сможете.<br>
ОБРАТИТЕ ВНИМАНИЕ: Любые изменения, сделанные со скелетом в дезактивированном режиме 'Figure mode' будут сохранены, только если кнопка 'Animate' нажата. <br>

Чтобы активизировать 'Figure mode', выделите любую часть скелета biped, неважно какую, руку, ногу, голову, что угодно. Далее жмите на кнопку 'Motion' вы увидите панель средств  управления biped. Теперь щелкаем на кнопку 'Figure mode'. <br>
<p align=center><img src="figbut.jpg"></p>
Вроде несложно, поехали дальше. 
<p align="center"><font size="3"><strong>НАСТРОЙКА ДВУНОГОГО ЖИВОТНОГО</strong></font></p>
Во-первых давайте изменим структуру скелета. 
Прокрутите вниз панель средств управления biped до опции 'структура' 'structure' и щелкните на эту кнопку. 
<p align=center><img src="motion_struct.jpg"></p>
Появляться новая панель где вы сможете оредактировать структуру вашего скелета. 
<p align=center><img src="structure_roll.jpg"></p>
Следующее - краткое описание параметров и их использований. <br><br>
<b>ARMS:</b> Имеются ли руки у модели или нет. <br>
<b>NECK LINKS:</b> Значение от 1 до 5 устанавливает, сколько шейных позвонков будет у модели.<br>
<b>SPINE LINKS:</b> Значение от 1 до 5 устанавливает, сколько спинных позвонков будет у модели.<br>
<b>LEG LINKS:</b> Значение от 3 до 4 устанавливает форму ног как у человека или как у собаки или подобного ей животного.<br>
<b>TAIL LINKS:</b> Значение от 1 до 5 устанавливает количество хвостовых позвонков.<br>
<b>PONYTAIL 1 and 2 LINKS:</b> Этот параметр работает также как и TAIL LINKS только вместо хвоста у скелета появляются новые кости 
исходящие из головы. Этот параметр нужен если вы хотите сделать у модели чтото вроде "конского хвоста ".<br>
<b>FINGERS:</b> Значение от 0 до 5 устанавливает количество пальцев.<br>
<b>FINGER LINKS:</b> Значение от 1 до 3 и устанавливает количество долей в каждом пальце.<br>
<b>TOES:</b> Значение от 1 до 5, устанавливает количество пальцев ног.<br>
<b>TOE LINKS:</b> От 1 до 3 и подобно пальцам рук также указывает количество долей в каждом пальце ноги.<br>
<b>ANKLE ATTACH:</b> Смещение ступни в лодыжке. Значение - от 0.0 до 1.0.<br>
<b>HEIGHT:</b> Значение корректирует размеры скелета, центрируемого относительно Bip01. 
Как только вы настроили так как вам нужно ваш скелет, мы можем теперь корректировать общий размер и форму каждой части ... 
<p align="center"><font size="3"><strong>КОРРЕКТИРОВКА ФОРМЫ</font></strong></p>
Хорошо. Мы установили количество спинных позвонков, пальцев рук ног и хвостов. Теперь к примеру вы хотите чтобы руки скелета были большими и длинными, или чтобы голова была намного больше чем тело. Хорошо, давайте сделаем это.
Элементы скелета могут быть искажены в точности также как и любые примитивные обьекты. Для этого будем использовать инструмент линейный и нелинейный масштаб, 'Uniform Scale' и 'Non-Uniform Scale', незабудте что режим 'Figure mode' должен быть включён пока мы будем изменять форму скелета. <br><br>

СОВЕТ: Желательно при этом иметь уже готовую сетчатую оболочку модели, чтобы можно было сразу правильно настроить скелет.<br><br> 

Вы наверно уже заметили что элементы скелета вращаются передвигаются и масштабируются не так как большинство объектов в 3D MAX. Элементы скелета сохраняют их собственные локальные X, Y, Z координаты передвижения и твердо придерживаются их,  независимо от того в которой области просмотра вы их крутите, масштабируете или передвигаете. Сначала вам покажется это довольно необычно, но вы потом привыкнете.<br>

<p align="center"><font size="3"><strong>КОПИРОВАНИЕ ПОЗЫ</strong></font></p>
Теперь давайте попробуем изменить формы руки так как на картинке: 
<p align=center><img src="Biped_big_arm.jpg"></p>
Хорошо, но как сделать вторую руку такогоже размера как и первая рука? Это сделать ну очень просто с помощью кнопки 'Copy Posture'. Вы её найдёте с правой стороны на панеле 'Keyframing': 
<p align=center><img src="keyframing.jpg"></p>
Эта кнопка копирования позы, если вы выделите любые кости скелета, и нажмёте эту кнопку то масштаб и расположение выделенных костей будет сохраненно в буфере обмена, потом после некоторого изменения скелета можно нажать кнопку 'Paste Posture' для того чтобы кости вернулись в прежнее положение. Итак давайте попробуем сделать наш скелет симметричным.<br>
Выделяем все кости руки которые мы масштабировали, и жмём 'Copy Posture'.
<p align=center><img src="arm_select.jpg"></p>
Как только вы щёлкнули на кнопку копирования позы, внизу прямо под ней высветились еще две нужные нам кнопки: 
<p align=center><img src="paste_opposite.jpg"></p>
Итак давайте попробуем нажать 'Paste Posture' вставка позы, но перед этим покрутите руку в любом направлении и жмите кнопку,
вы заметите как рука выкрученная чёрти куда вернулась на прежнее место. Вставлять скопированную позу можно не только на тот 
скелет с которого копировалась поза но и на совсем другой.<br>
Ок, теперь давайте попробуем сделать наш скелет симметричным, для этого не обязательно копировать позу опять в буфер так как все данные находятся еще там, просто нажмите кнопку 'Paste Posture Opposite' загрузить позу с другой стороны, и вы увидите как противоположная рука стала совсем как та которую мы недавно масштабировали. 
<p align=center><img src="brother_lee_love.jpg"></p>
<p align="center"><font size="3"><strong>ДОБАВЛЕНИЕ КОСТЕЙ</strong></font></p>
Как вы уже заметили прибавить кости хвоста или "конскго хвостика" довольно легко в параметрах настройки структуры скелета Biped. Однако, нам этого мало и мы хотим к примеру добавить кости для рта, запасные ноги и еще парочку рук, для этого вы должны прибавить кости к существующей структуре.<br> 
Это можно сделать несколькими путями. Valve для этого использует стандартные MAX кости.<br>
Я не очень люблю работать с этими костями и поэтому обясню вам немного другой способ, который мне кажется более удобным. <br>
Итак давайте сначала изучим принцип работы с простыми MAX костями. Жмите кнопку 'System' справа и в появившейся панели жмите на кнопку кости 'Bones'. Обязательно снимите выделение с опции 'Create End Effector', иначе кости будут двигатся не так как вам нужно когда вы будете создавать анимации. <br><br>
<p align=center><img src="max_bones.jpg"></p>
Хорошо, теперь нажмите левую кнопку мыши на любом экранчике и неотпуская её передвинте мышь в любую сторону, вы заметите как
на экранчике появилась кость, теперь отпустите кнопку мыши и кость будет созданна. Нажмите снова кнопку мыши и другая кость будет созданна. Создание костей, процесс весьма не сложный.
<p align=center><img src="maxbones.jpg"></p>
Метод, который я вам покажу мне кажется более удобным и быстрым. Для этого нужно вместо костей создать простые 'Box' обьекты,
расположить их так как должны находится кости и связать вместе а потом привязать всё это к основному скелету. 
СОВЕТ:Если вы хотите создать несколько простых обьектов типа 'Box' одного и тогоже размера и формы, просто зажмите кнопку SHIFT и переместите ваш обьект инструментом 'Move' и вы увидите что вместо основного обьекта переместилась его копия. 
<p align=center><img src="prim_bones.jpg"></p>
Теперь нужно откорректировать центр для каждого обьекта-кости. Для этого будем выбирать каждый обьект поочерёдно и затем в меню 'Heirarchy', выберайте 'Affect Pivot Only'. 
<p align=center><img src="afpivon.jpg"></p>
Теперь вы можете свободно перемещать центр выбранного объекта инструментом перемещения 'Move'. <br>

Это всё нужно потому что все обьекты будут соединятся в цепочке образуя некую систему костей и вращатся они будут не относительно того места где одна кость присоеденена к другой а не каждая относительно своего центра. Вот поэтому вы должны переместить центр кождого нового обьекта в то место которое будет ближе всего к его родительской кости. 
<p align=center><img src="pivot_move.jpg"></p>
Хорошо, теперь нужно связать их, для этого будем использовать инструмент соединения. 
<p align=center><img src="linkbtn.jpg"></p>

Щелкните на эту кнопку, и затем выберите самую далекую кость которую мы создали. Например в хвосте, это будет кость на самом его конце и она будет дочерней к другим костям.<br>
Объяснение: В ряде связанных костей или объектов, должна иметься корневая кость - родительская. Эта кость воздействует на все другие. Следующая кость, присоединённая к ней будет дочерней. Дочерняя кость будет влиять на другие кости присоединённые к ней, но совершенно не будет влиять на родительскую.<br> 
К примеру в скелете Biped родительской костью является Bip01, дочерним к ней являются кости таза, к ним дочерними являются кости нос и позвоночника, к ним дочерними являются кости рук, головы и т. д.<br>
Рисунок поможет вам разобратся. 
<p align=center><img src="heirarchy.jpg"></p>

И так мы выбираем самую крайнюю кость в цепочке которую мы создали. Далее зажимаем левую клавишу мыши и перетаскиваем курсор мыши от дочерней кости к её родительской, как только указатель попал на родительскую кость он поменяет свой значёк.
Отпустите кнопку мыши, всё кости присоеденены друг к другу. <br>
Повторите это по цепочке, пока все кости не будут соеденены друг с другом и родительская кость не будет присоеденена к скелету Biped. 
Чтобы проверить правильно ли вы всё сделали попробуйте покрутить кости и вы увидите есть ли ошибки или нет.<br>
ОБРАТИТЕ ВНИМАНИЕ: Если вы используете стандартные MAX кости, то вам не нужно их связывать друг с другом. Однако вы должны привязать начальную кость в цепочке к скелету Biped, в нужной точке. Например, если вы создавали кости хвоста, то привязывать кость нужно к тазу. <br>
<p align="center"><font size="3"><strong>
ПУСТЫЕ ОБЬЕКТЫ</strong></font></p>
Как вы заметили любой скелет Biped имеет на концах палцев рук, ног, в верхней части головы, маленькие синие кубики.
Они называются пустые обьекты 'Dummies'.
<p align=center><img src="dummies.jpg"></p>
Пустые обьекты указывают программе конец цепочки костей. Когда вы применяете модификатор телосложения 'Physique' к модели, провод телосложения (тонкие жёлтые линни) простирается по каждой цепочке кости и останавливается в той кости где находится
пустой обьект.<br> 
Для чего это нужно вам знать не обязательно, но когда вы добавляете новые кости, к примеру хвост, вы обязательно должны на конце всей цепочки костей поставить пустой обьект.<br>
Для того чтобы создать пустой обьект жмём на 'Helpers' и далее на 'Creation'.
<p align=center><img src="helpers.jpg"></p>
Щелкаем на кнопку 'Dummy' и затем создадим путой обьект как можно ближе к той кости куда нам его нужно приделать.Теперь свяжите его с нужной костью, и всё. <br><br>
Хорошо, теперь когда создан новый скелет, добавленны кости, можно присоединить к нему саму модель и создать анимации модели.

</td>
</table>
</font>
</DIV>
<TABLE CELLSPACING="0" CELLPADDING="0" BORDER="1" WIDTH="100%" BORDERCOLOR="#BFD9DF">
  <TR>
  <TD WIDTH="100%" ALIGN="center"><FONT SIZE="2" COLOR="White"><A HREF="index.shtml">Назад</A></FONT></TD></TR>
  </TABLE>
</FONT>
</TD>
</TR>
</TABLE>

</BODY>
</HTML>