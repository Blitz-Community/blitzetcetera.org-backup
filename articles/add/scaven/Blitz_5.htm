<html><head><link rel=stylesheet href="scaven.css" Type=Text/css><meta http-equiv=Content-Type content="text/html; charset=windows-1251"><title> Blitz3D Туториал</title></head><body id=t1><div id=t2><table id=t3> <tr id=t22> <td id=t23> <p id=t8><span id=t7>5. 2Д в 3Д</span></p> <p id=t8><span id=t9>&nbsp;</span></p> <p id=t8><span id=t9>Итак, как я уже говорил, нам не с чем сравнивать положение нашего объекта, поэтому он так странно двигается.</span></p> <p id=t8><span id=t9>Для этой главы нам понадобятся: код из прошлого урока, и текстура. Что такое текстура? Для тех кто не знает попробую объяснить: </span></p> <p id=t8><span id=t9>&nbsp;</span></p> <p id=t8><span id=t9>Текстура – это картинка в любом формате (самые популярные это .</span><span id=t9>jpg</span><span id=t9>, .</span><span id=t9>bmp</span><span id=t9>, .</span><span id=t9>tga</span><span id=t9>, .</span><span id=t9>pcx</span><span id=t9>, .</span><span id=t9>png</span><span id=t9> </span><span id=t9>и.т.д.), которой мы закрашиваем какой-нить объект. Если объект большой, а текстура – нет, то она накладывается как бы повторяющимися квадратами. Вы наверняка видели в каких нибудь трёхмерных играх повторяющуюся траву, скалы – где-то это видно сразу, где-то сильно скрыто. Когда создаётся объект, он создаётся белым, а когда мы его текстурируем – то получается покрываем его картинкой – текстурой. Ну, будем надеяться, что кто этого не знал – примерно понял. В общем возьмите любую картинку из перечисленных форматов, и поместите её в ту же папку, где у вас сохранён этот код программы.</span></p> <p id=t8><span id=t9>&nbsp;</span></p> <p id=t8><span id=t9>Сделаем мы так: создадим плоскость, которая будет находиться на одном месте, и относительно неё будет хорошо видно, что наш кубик всё таки движется.</span></p> <p id=t8><span id=t9>&nbsp;</span></p> <table id=t24> <tr id=t46> <td id=t47> <p id=t48><span id=t31>pln</span><span id=t30>=</span><span id=t28>CreatePlane</span><span id=t30>()</span><span id=t33></span></p> </td> </tr> </table> <p id=t8><span id=t9>&nbsp;</span></p> <p id=t8><span id=t9>Эта команда, также как и остальные команды создаёт объект, на этот раз плоскость (</span><span id=t9>Plane</span><span id=t9>). Что это такое? Ну, плоскость – это и есть плоскость. Она плоская и бесконечная. Да, один момент – плоскость видна только с одной стороны – с другой она невидимая (как и спрайт, кстати)!</span></p> <p id=t8><span id=t9>&nbsp;</span></p> <p id=t8><span id=t9>Поставьте эту команду перед циклом, после создания куба, и если вы запустите программу… лучше не надо! </span><span id=t10><span id=t11>J</span></span><span id=t9> Перейдём-ка мы сразу дальше!</span></p> <p id=t8><span id=t9>&nbsp;</span></p> <p id=t8><span id=t9>После создания плоскости загрузим текстуру из файла:</span></p> <p id=t8><span id=t9>&nbsp;</span></p> <table id=t24> <tr id=t46> <td id=t47> <p id=t48><span id=t31>tex</span><span id=t30>=</span><span id=t28>LoadTexture</span><span id=t30>(</span><span id=t52>&quot;Picture.bmp&quot;</span><span id=t30>)</span><span id=t33></span></p> </td> </tr> </table> <p id=t8><span id=t9>&nbsp;</span></p> <p id=t8><span id=t9>Эта команда загружает текстуру из файла </span><span id=t9>Picture</span><span id=t9>.</span><span id=t9>bmp</span><span id=t9> (это у меня так картинка называлась, а вы измените имя файла в кавычках на своё (кавычки нужно оставить), кстати, там можно писать полный путь к файлу, например “</span><span id=t9>C</span><span id=t9>:\</span><span id=t9>Games</span><span id=t9>\</span><span id=t9>MyGame</span><span id=t9>\</span><span id=t9>MyPic</span><span id=t9>.</span><span id=t9>jpg</span><span id=t9>” или “.\</span><span id=t9>Data</span><span id=t9>\</span><span id=t9>Pics</span><span id=t9>\</span><span id=t9>Texture</span><span id=t9>.</span><span id=t9>jpg</span><span id=t9>”)</span></p> <p id=t8><span id=t9>&nbsp;</span></p> <p id=t8><span id=t9>Так, плоскость есть, текстура есть – осталось только затекстурировать эту плоскость:</span></p> <p id=t8><span id=t9>&nbsp;</span></p> <table id=t24> <tr id=t46> <td id=t47> <p id=t48><span id=t28>EntityTexture</span><span id=t31> pln</span><span id=t30>,</span><span id=t31>tex</span><span id=t33></span></p> </td> </tr> </table> <p id=t8><span id=t9>&nbsp;</span></p> <p id=t8><span id=t9>Синтакс: </span><b><span id=t43>EntityTexture</span><span id=t43> объект, текстура </span></b><span id=t9>– эта команда элементарно покрывает заданный объект заданной текстурой </span><span id=t10><span id=t11>J</span></span><span id=t9>.</span></p> <p id=t8><span id=t9>Да, и ещё одно – эта текстура наверняка будет смотреться мелко, поэтому я советую вставить такую команду после загрузки текстуры:</span></p> <p id=t8><span id=t9>&nbsp;</span></p> <table id=t24> <tr id=t46> <td id=t47> <p id=t48><span id=t28>ScaleTexture</span><span id=t31> </span><span id=t31>tex</span><span id=t30>,</span><span id=t29>10</span><span id=t30>,</span><span id=t29>10</span><span id=t33></span></p> </td> </tr> </table> <p id=t8><span id=t9>&nbsp;</span></p> <p id=t8><span id=t9>Она просто расширяет данную текстуру в10 раз по ширине и в 10 раз по высоте.</span></p> <p id=t8><span id=t9>Вот, вроде, и всё готово! Теперь у нас внизу есть плоскость, а куб как бы ездит по ней!</span></p> <p id=t8><span id=t9>Весь код:</span></p> <p id=t8><span id=t9>&nbsp;</span></p> <table id=t24> <tr id=t46> <td id=t47> <p id=t27><span id=t28>Graphics</span><span id=t28>3</span><span id=t28>D</span><span id=t28> </span><span id=t29>640</span><span id=t30>,</span><span id=t29>480</span><span id=t30>,</span><span id=t29>16</span><span id=t30>,</span><span id=t29>1</span></p> <p id=t27><span id=t28>SetBuffer BackBuffer</span><span id=t30>()</span></p> <p id=t27><span id=t30>&nbsp;</span></p> <p id=t27><span id=t31>cam</span><span id=t30>=</span><span id=t28>CreateCamera</span><span id=t30>()</span></p> <p id=t27><span id=t28>PositionEntity </span><span id=t31>cam</span><span id=t30>,</span><span id=t29>0</span><span id=t30>,</span><span id=t29>5</span><span id=t30>,-</span><span id=t29>10</span></p> <p id=t27><span id=t29>&nbsp;</span></p> <p id=t27><span id=t31>lit</span><span id=t30>=</span><span id=t28>CreateLight</span><span id=t30>()</span></p> <p id=t27><span id=t30>&nbsp;</span></p> <p id=t27><span id=t31>cub</span><span id=t30>=</span><span id=t28>CreateCube</span><span id=t30>()</span></p> <p id=t27><span id=t28>ScaleEntity</span><span id=t31> cub</span><span id=t30>,</span><span id=t29>1</span><span id=t30>,.</span><span id=t29>5</span><span id=t30>,</span><span id=t29>2</span><span id=t30></span></p> <p id=t27><span id=t30>&nbsp;</span></p> <p id=t27><span id=t31>pln</span><span id=t30>=</span><span id=t28>CreatePlane</span><span id=t30>()</span></p> <p id=t27><span id=t31>tex</span><span id=t30>=</span><span id=t28>LoadTexture</span><span id=t30>(</span><span id=t52>&quot;Picture.bmp&quot;</span><span id=t30>)</span></p> <p id=t27><span id=t28>ScaleTexture</span><span id=t31> tex</span><span id=t30>,</span><span id=t29>30</span><span id=t30>,</span><span id=t29>30</span><span id=t30></span></p> <p id=t27><span id=t28>EntityTexture</span><span id=t31> pln</span><span id=t30>,</span><span id=t31>tex</span></p> <p id=t27><span id=t30>&nbsp;</span></p> <p id=t27><span id=t28>Repeat</span></p> <p id=t27><span id=t28>&nbsp;</span></p> <p id=t27><span id=t28><span id=t15> </span>If KeyDown</span><span id=t30>(</span><span id=t29>200</span><span id=t30>) </span><span id=t28>MoveEntity </span><span id=t31>cub</span><span id=t30>,</span><span id=t29>0</span><span id=t30>,</span><span id=t29>0</span><span id=t30>,.</span><span id=t29>1</span></p> <p id=t27><span id=t29><span id=t15> </span></span><span id=t28>If KeyDown</span><span id=t30>(</span><span id=t29>208</span><span id=t30>) </span><span id=t28>MoveEntity </span><span id=t31>cub</span><span id=t30>,</span><span id=t29>0</span><span id=t30>,</span><span id=t29>0</span><span id=t30>,-.</span><span id=t29>1</span></p> <p id=t27><span id=t29><span id=t15> </span></span><span id=t28>If KeyDown</span><span id=t30>(</span><span id=t29>203</span><span id=t30>) </span><span id=t28>TurnEntity </span><span id=t31>cub</span><span id=t30>,</span><span id=t29>0</span><span id=t30>,</span><span id=t29>1</span><span id=t30>,</span><span id=t29>0</span></p> <p id=t27><span id=t29><span id=t15> </span></span><span id=t28>If KeyDown</span><span id=t30>(</span><span id=t29>205</span><span id=t30>) </span><span id=t28>TurnEntity </span><span id=t31>cub</span><span id=t30>,</span><span id=t29>0</span><span id=t30>,-</span><span id=t29>1</span><span id=t30>,</span><span id=t29>0</span></p> <p id=t27><span id=t29>&nbsp;</span></p> <p id=t27><span id=t29><span id=t15> </span></span><span id=t28>PointEntity</span><span id=t31> cam</span><span id=t30>,</span><span id=t31>cub</span><span id=t30></span></p> <p id=t27><span id=t29>&nbsp;</span></p> <p id=t27><span id=t29><span id=t15> </span></span><span id=t28>UpdateWorld</span></p> <p id=t27><span id=t28><span id=t15> </span>RenderWorld</span></p> <p id=t27><span id=t28>&nbsp;</span></p> <p id=t27><span id=t28><span id=t15> </span>Flip</span></p> <p id=t27><span id=t28>&nbsp;</span></p> <p id=t27><span id=t28>Until KeyHit</span><span id=t30>(</span><span id=t29>1</span><span id=t30>)</span></p> <p id=t27><span id=t30>&nbsp;</span></p> <p id=t48><span id=t28>End</span><span id=t33></span></p> </td> </tr> </table> <p id=t8><span id=t9>&nbsp;</span></p> <p id=t8><span id=t9>…а теперь попробуйте сами затекстурировать куб!</span></p> <p id=t8><span id=t9>&nbsp;</span></p> <p id=t8>&nbsp;<span id=t9></span></p> </td> <td id=t37> <p id=t8><span id=t9><span id=t15> </span></span><b><span id=t16>Оглавление:</span></b></p> <p id=t8><span id=t9>&nbsp;</span></p> <p id=t17><span id=t18>0.<span id=t19>&nbsp; </span></span><span id=t18><a href="Blitz_0.htm">Введение</a></span></p> <p id=t17><span id=t18>1.<span id=t19>&nbsp; </span></span><span id=t18><a href="Blitz_1.htm">В начале была Тьма</a></span></p> <p id=t17><span id=t18>2.<span id=t19>&nbsp; </span></span><span id=t18><a href="Blitz_2.htm">Есть ли жизнь в <span id=t20>DirectX</span></a></span></p> <p id=t17><span id=t18>3.<span id=t19>&nbsp; </span></span><span id=t18><a href="Blitz_3.htm">Свобода и Власть 3Д (0)</a></span></p> <p id=t17><span id=t18>4.<span id=t19>&nbsp; </span></span><span id=t18><a href="Blitz_4.htm">Свобода и Власть 3Д (1)</a></span></p> <p id=t17><span id=t18>5.<span id=t19>&nbsp; </span></span><span id=t18><a href="Blitz_5.htm">2Д в 3Д</a></span></p> <p id=t17><span id=t18>6.<span id=t19>&nbsp; </span></span><span id=t18><a href="Blitz_6.htm">Трёхмерный курсор</a></span></p> <p id=t17><span id=t18>7.<span id=t19>&nbsp; </span></span><span id=t18><a href="Blitz_7.htm">Родительская зависимость или Привязки</a></span></p> <p id=t17><span id=t18>8.<span id=t19>&nbsp; </span></span><span id=t18><a href="Blitz_8.htm">Фишки с привязками</a></span></p> <p id=t17><span id=t18>9.<span id=t19>&nbsp; </span></span><span id=t18><a href="Blitz_9.htm">Коллизион Детекшн или как устроен мир…</a></span></p> <p id=t21><span id=t18>10.<span id=t19>&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span id=t18><a href="Blitz_10.htm">Первая 3Д игра. Часть 0 – основы движка</a></span></p> <p id=t21><span id=t18>11.<span id=t19>&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span id=t18><a href="Blitz_11.htm">Первая 3Д игра. Часть 1 – разработка движка</a></span></p> <p id=t21><span id=t18>12.<span id=t19>&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span id=t18><a href="Blitz_12.htm">Первая 3Д игра. Часть 2 – устранение багов</a></span></p> <p id=t21><span id=t18>13.<span id=t19>&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span id=t18><a href="Blitz_13.htm">Первая 3Д игра. Часть 3 – внешний вид</a></span></p> <p id=t21><span id=t18>14.<span id=t19>&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span id=t18><a href="Blitz_14.htm">Первая 3Д игра. Часть 4 – от массива к спискам</a></span></p> <p id=t21><span id=t18>15.<span id=t19>&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span id=t18><a href="Blitz_15.htm">Первая 3Д игра. Часть 5 – оптимизация кода</a></span></p> <p id=t21><span id=t18>16.<span id=t19>&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span id=t18><a href="Blitz_16.htm">Первая 3Д игра. Часть 6 – завершение</a></span></p> <p id=t21><span id=t18>17.<span id=t19>&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span id=t18><a href="Blitz_17.htm">Выведение</a></span></p> <p id=t8><span id=t18>&nbsp;</span></p> <p id=t6><span id=t18>&nbsp;</span></p> <p id=t8>&nbsp;<span id=t18></span></p> </td> </tr></table><p id=t6>&nbsp;</p></div></body></html>