<html><head><link rel=stylesheet href="scaven.css" Type=Text/css><meta http-equiv=Content-Type content="text/html; charset=windows-1251"><title>Blitz3D Туториал</title></head><body id=t1><div id=t2><table id=t3> <tr id=t22> <td id=t23> <p id=t51>4. Свобода и Власть 3Д (1)</p> <p id=t8><span id=t9>&nbsp;</span></p> <p id=t8><span id=t9>Круто, конечно, перемещаться стрейфом, но это не всегда то, что нам нужно.</span></p> <p id=t8><span id=t9>&nbsp;</span></p> <p id=t8><span id=t9>В этот раз кое-что переделаем – две последние строчки проверки нажатия клавиш немного изменим. Теперь, когда мы будем нажимать кнопки ВЛЕВО и ВПРАВО он будет поворачиваться влево и вправо (для тех, кто не понял - раньше он перемещался влево и вправо </span><span id=t10><span id=t11>J</span></span><span id=t9>). </span></p> <p id=t8><span id=t9>&nbsp;</span></p> <p id=t8><span id=t9>Итак</span><span id=t9>, </span><span id=t9>строчки</span><span id=t9>:</span></p> <p id=t8><span id=t9>&nbsp;</span></p> <table id=t24> <tr id=t46> <td id=t47> <p id=t27><span id=t28>If</span><span id=t31> </span><span id=t28>KeyDown</span><span id=t30>(</span><span id=t29>203</span><span id=t30>) </span><span id=t28>MoveEntity</span><span id=t31> cub</span><span id=t30>,-.</span><span id=t29>1</span><span id=t30>,</span><span id=t29>0</span><span id=t30>,</span><span id=t29>0</span><span id=t30></span></p> <p id=t48><span id=t28>If</span><span id=t31> </span><span id=t28>KeyDown</span><span id=t30>(</span><span id=t29>205</span><span id=t30>) </span><span id=t28>MoveEntity</span><span id=t31> cub</span><span id=t30>,.</span><span id=t29>1</span><span id=t30>,</span><span id=t29>0</span><span id=t30>,</span><span id=t29>0</span><span id=t33></span></p> </td> </tr> </table> <p id=t8><span id=t9>&nbsp;</span></p> <p id=t8><span id=t9>Нужно заменить на:</span></p> <p id=t8><span id=t9>&nbsp;</span></p> <table id=t24> <tr id=t46> <td id=t47> <p id=t27><span id=t28>If KeyDown</span><span id=t30>(</span><span id=t29>203</span><span id=t30>) </span><span id=t28>TurnEntity </span><span id=t31>cub</span><span id=t30>,</span><span id=t29>0</span><span id=t30>,</span><span id=t29>1</span><span id=t30>,</span><span id=t29>0</span></p> <p id=t48><span id=t28>If KeyDown</span><span id=t30>(</span><span id=t29>205</span><span id=t30>) </span><span id=t28>TurnEntity </span><span id=t31>cub</span><span id=t30>,</span><span id=t29>0</span><span id=t30>,-</span><span id=t29>1</span><span id=t30>,</span><span id=t29>0</span><span id=t33></span></p> </td> </tr> </table> <p id=t8><span id=t9>&nbsp;</span></p> <p id=t8><span id=t9>Вот у нас уже что-то вроде автогонок вырисовывается (точнее кубогонок </span><span id=t10><span id=t11>J</span></span><span id=t9>). Так, команду </span><span id=t43>TurnEntity</span><span id=t9> вы уже знаете, но обратите внимание, что если мы хотим, чтобы наш объект вертелся именно влево-вправо, мы поворачиваем его по оси </span><span id=t9>Y</span><span id=t9>.</span></p> <p id=t8><span id=t9>Чтобы немного было понятнее, где у него передняя часть, а где боковые, я предлагаю его немного трансформировать!</span></p> <p id=t8><span id=t9>&nbsp;</span></p> <table id=t24> <tr id=t46> <td id=t47> <p id=t48><span id=t28>ScaleEntity</span><span id=t31> </span><span id=t31>cub</span><span id=t30>,</span><span id=t29>1</span><span id=t30>,.</span><span id=t29>5</span><span id=t30>,</span><span id=t29>2</span><span id=t33></span></p> </td> </tr> </table> <p id=t8><span id=t9>&nbsp;</span></p> <p id=t8><span id=t9>Эту команду нужно вставить после команды создания куба (смотрите не вставьте её в цикл </span><span id=t10><span id=t11>J</span></span><span id=t9>). </span></p> <p id=t8><span id=t9>Синтакс: </span><b><span id=t43>ScaleEntity</span><span id=t43> </span><span id=t43>объект, трансформация по </span></b><b><span id=t43>X</span><span id=t43>, по </span></b><b><span id=t43>Y</span><span id=t43>, по </span></b><b><span id=t43>Z</span></b><span id=t9>. То есть в примере мы оставляем такой же размер<span id=t15>  </span>по </span><span id=t9>X</span><span id=t9> (ширину) (1 значит, что мы оставляем тот же размер), трансформируем размер по </span><span id=t9>Y</span><span id=t9> (высоту) до 0.5 от его размера (то есть просто уменьшаем в 2 раза) – получается как бы сплющиваем его сверху, и в два раза увеличиваем размер по </span><span id=t9>Z</span><span id=t9> (длину) – то есть растягиваем его в длину. Получился такой… кирпич…</span></p> <p id=t8><span id=t9>Вот ездит этот кирпич, ездит, да заезжает за экран, так что мы перестаём его видеть. А как бы сделать так, чтобы не терять его из виду? Здесь нам поможет такая замечательная команда </span><b><span id=t43>PointEntity</span><span id=t43> объект1, объект2</span></b><span id=t9> – эта команда просто поворачивает объект1 в сторону объекта2. То есть если мы хотим, чтобы наша камера всегда следила за нашим кубиком, нам просто нужно вставить эту команду в цикл!</span></p> <p id=t8><span id=t9>Вот как это делается:</span></p> <p id=t8><span id=t9>&nbsp;</span></p> <table id=t24> <tr id=t46> <td id=t47> <p id=t48><span id=t28>PointEntity</span><span id=t31> cam</span><span id=t30>,</span><span id=t31>cub</span><span id=t33></span></p> </td> </tr> </table> <p id=t8><span id=t9>&nbsp;</span></p> <p id=t8><span id=t9>Эту команду можно вставить в любое место в цикле, но, чтобы у нас было всё по порядку, поставим её после команд проверяющих нажатия клавиш.</span></p> <p id=t8><span id=t9>Вот полный код:</span></p> <p id=t8><span id=t9>&nbsp;</span></p> <table id=t24> <tr id=t46> <td id=t47> <p id=t27><span id=t28>Graphics3D </span><span id=t29>640</span><span id=t30>,</span><span id=t29>480</span><span id=t30>,</span><span id=t29>16</span><span id=t30>,</span><span id=t29>1</span></p> <p id=t27><span id=t28>SetBuffer BackBuffer</span><span id=t30>()</span></p> <p id=t27><span id=t30>&nbsp;</span></p> <p id=t27><span id=t31>cam</span><span id=t30>=</span><span id=t28>CreateCamera</span><span id=t30>()</span></p> <p id=t27><span id=t28>PositionEntity </span><span id=t31>cam</span><span id=t30>,</span><span id=t29>0</span><span id=t30>,</span><span id=t29>5</span><span id=t30>,-</span><span id=t29>10</span></p> <p id=t27><span id=t29>&nbsp;</span></p> <p id=t27><span id=t31>lit</span><span id=t30>=</span><span id=t28>CreateLight</span><span id=t30>()</span></p> <p id=t27><span id=t30>&nbsp;</span></p> <p id=t27><span id=t31>cub</span><span id=t30>=</span><span id=t28>CreateCube</span><span id=t30>()</span></p> <p id=t27><span id=t28>ScaleEntity</span><span id=t31> cub</span><span id=t30>,</span><span id=t29>1</span><span id=t30>,.</span><span id=t29>5</span><span id=t30>,</span><span id=t29>2</span><span id=t30></span></p> <p id=t27><span id=t30>&nbsp;</span></p> <p id=t27><span id=t28>Repeat</span></p> <p id=t27><span id=t28>&nbsp;</span></p> <p id=t27><span id=t28><span id=t15> </span>If KeyDown</span><span id=t30>(</span><span id=t29>200</span><span id=t30>) </span><span id=t28>MoveEntity </span><span id=t31>cub</span><span id=t30>,</span><span id=t29>0</span><span id=t30>,</span><span id=t29>0</span><span id=t30>,.</span><span id=t29>1</span></p> <p id=t27><span id=t29><span id=t15> </span></span><span id=t28>If KeyDown</span><span id=t30>(</span><span id=t29>208</span><span id=t30>) </span><span id=t28>MoveEntity </span><span id=t31>cub</span><span id=t30>,</span><span id=t29>0</span><span id=t30>,</span><span id=t29>0</span><span id=t30>,-.</span><span id=t29>1</span></p> <p id=t27><span id=t29><span id=t15> </span></span><span id=t28>If KeyDown</span><span id=t30>(</span><span id=t29>203</span><span id=t30>) </span><span id=t28>TurnEntity </span><span id=t31>cub</span><span id=t30>,</span><span id=t29>0</span><span id=t30>,</span><span id=t29>1</span><span id=t30>,</span><span id=t29>0</span></p> <p id=t27><span id=t29><span id=t15> </span></span><span id=t28>If KeyDown</span><span id=t30>(</span><span id=t29>205</span><span id=t30>) </span><span id=t28>TurnEntity </span><span id=t31>cub</span><span id=t30>,</span><span id=t29>0</span><span id=t30>,-</span><span id=t29>1</span><span id=t30>,</span><span id=t29>0</span></p> <p id=t27><span id=t29>&nbsp;</span></p> <p id=t27><span id=t29><span id=t15> </span></span><span id=t28>PointEntity</span><span id=t31> cam</span><span id=t30>,</span><span id=t31>cub</span><span id=t30></span></p> <p id=t27><span id=t29>&nbsp;</span></p> <p id=t27><span id=t29><span id=t15> </span></span><span id=t28>UpdateWorld</span></p> <p id=t27><span id=t28><span id=t15> </span>RenderWorld</span></p> <p id=t27><span id=t28>&nbsp;</span></p> <p id=t27><span id=t28><span id=t15> </span>Flip</span></p> <p id=t27><span id=t28>&nbsp;</span></p> <p id=t27><span id=t28>Until KeyHit</span><span id=t30>(</span><span id=t29>1</span><span id=t30>)</span></p> <p id=t27><span id=t30>&nbsp;</span></p> <p id=t48><span id=t28>End</span><span id=t33></span></p> </td> </tr> </table> <p id=t8><span id=t9>&nbsp;</span></p> <p id=t8><span id=t9>Опять же столько всего, только в 18 строчках!</span></p> <p id=t8><span id=t9>&nbsp;</span></p> <p id=t8><span id=t9>Если запустить программу, то видно, что камера как бы следит за кубиком, хотя это плохо понятно – такое чувство, как будто он ездит сам как хочет. Всё это потому, что у нас нет ничего, с чем мы могли бы сравнивать его положение.</span></p> <p id=t8><span id=t9>&nbsp;</span></p> <p id=t8>&nbsp;<span id=t9></span></p> </td> <td id=t37> <p id=t8><span id=t9><span id=t15> </span></span><b><span id=t16>Оглавление:</span></b></p> <p id=t8><span id=t9>&nbsp;</span></p> <p id=t17><span id=t18>0.<span id=t19>&nbsp; </span></span><span id=t18><a href="Blitz_0.htm">Введение</a></span></p> <p id=t17><span id=t18>1.<span id=t19>&nbsp; </span></span><span id=t18><a href="Blitz_1.htm">В начале была Тьма</a></span></p> <p id=t17><span id=t18>2.<span id=t19>&nbsp; </span></span><span id=t18><a href="Blitz_2.htm">Есть ли жизнь в <span id=t20>DirectX</span></a></span></p> <p id=t17><span id=t18>3.<span id=t19>&nbsp; </span></span><span id=t18><a href="Blitz_3.htm">Свобода и Власть 3Д (0)</a></span></p> <p id=t17><span id=t18>4.<span id=t19>&nbsp; </span></span><span id=t18><a href="Blitz_4.htm">Свобода и Власть 3Д (1)</a></span></p> <p id=t17><span id=t18>5.<span id=t19>&nbsp; </span></span><span id=t18><a href="Blitz_5.htm">2Д в 3Д</a></span></p> <p id=t17><span id=t18>6.<span id=t19>&nbsp; </span></span><span id=t18><a href="Blitz_6.htm">Трёхмерный курсор</a></span></p> <p id=t17><span id=t18>7.<span id=t19>&nbsp; </span></span><span id=t18><a href="Blitz_7.htm">Родительская зависимость или Привязки</a></span></p> <p id=t17><span id=t18>8.<span id=t19>&nbsp; </span></span><span id=t18><a href="Blitz_8.htm">Фишки с привязками</a></span></p> <p id=t17><span id=t18>9.<span id=t19>&nbsp; </span></span><span id=t18><a href="Blitz_9.htm">Коллизион Детекшн или как устроен мир…</a></span></p> <p id=t21><span id=t18>10.<span id=t19>&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span id=t18><a href="Blitz_10.htm">Первая 3Д игра. Часть 0 – основы движка</a></span></p> <p id=t21><span id=t18>11.<span id=t19>&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span id=t18><a href="Blitz_11.htm">Первая 3Д игра. Часть 1 – разработка движка</a></span></p> <p id=t21><span id=t18>12.<span id=t19>&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span id=t18><a href="Blitz_12.htm">Первая 3Д игра. Часть 2 – устранение багов</a></span></p> <p id=t21><span id=t18>13.<span id=t19>&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span id=t18><a href="Blitz_13.htm">Первая 3Д игра. Часть 3 – внешний вид</a></span></p> <p id=t21><span id=t18>14.<span id=t19>&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span id=t18><a href="Blitz_14.htm">Первая 3Д игра. Часть 4 – от массива к спискам</a></span></p> <p id=t21><span id=t18>15.<span id=t19>&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span id=t18><a href="Blitz_15.htm">Первая 3Д игра. Часть 5 – оптимизация кода</a></span></p> <p id=t21><span id=t18>16.<span id=t19>&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span id=t18><a href="Blitz_16.htm">Первая 3Д игра. Часть 6 – завершение</a></span></p> <p id=t21><span id=t18>17.<span id=t19>&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span id=t18><a href="Blitz_17.htm">Выведение</a></span></p> <p id=t8><span id=t18>&nbsp;</span></p> <p id=t6><span id=t18>&nbsp;</span></p> <p id=t8>&nbsp;<span id=t18></span></p> </td> </tr></table><p id=t6>&nbsp;</p></div></body></html>