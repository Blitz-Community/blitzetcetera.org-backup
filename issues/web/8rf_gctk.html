<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml" xml:lang="ru" lang="ru" dir="ltr">	
<!-- Mirrored from localhost/index.php/%D0%92%D1%8B%D0%BF%D1%83%D1%81%D0%BA_%E2%84%961_-_%D1%8F%D0%BD%D0%B2%D0%B0%D1%80%D1%8C_2005 by HTTrack Website Copier/3.x [XR&CO'2007], Mon, 12 Nov 2007 11:20:36 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8"><!-- /Added by HTTrack -->
<head>		<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />				<meta name="keywords" content="Выпуск №1 - январь 2005,MANIAK dobrii,Matt Merkulov,Tolking" />
		<link rel="shortcut icon" href="http://blitzetcetera.org/favicon.ico" />
		<link rel="search" type="application/opensearchdescription+xml" href="http://blitzetcetera.org/opensearch_desc.php" title="Blitz Et Cetera (Русский)" />
		<title>Выпуск №1 - январь 2005 — Blitz Et Cetera</title>		<style type="text/css" media="screen,projection">/*<![CDATA[*/ @import "bvih5rde.css?63"; /*]]>*/</style>		<link rel="stylesheet" type="text/css" media="print" href="gcxktlm6.css?63" />		<link rel="stylesheet" type="text/css" media="handheld" href="zumsslq_.css?63" />		<!--[if lt IE 5.5000]><style type="text/css">@import "/skins/OfflineNew/IE50Fixes.css?63";</style><![endif]-->		<!--[if IE 5.5000]><style type="text/css">@import "/skins/OfflineNew/IE55Fixes.css?63";</style><![endif]-->		<!--[if IE 6]><style type="text/css">@import "/skins/OfflineNew/IE60Fixes.css?63";</style><![endif]-->		<!--[if IE 7]><style type="text/css">@import "/skins/OfflineNew/IE70Fixes.css?63";</style><![endif]-->		<!--[if lt IE 7]><script type="text/javascript" src="/skins/common/IEFixes.js?63"></script>		<meta http-equiv="imagetoolbar" content="no" /><![endif]-->		<script type= "text/javascript">/*<![CDATA[*/
var skin = "OfflineNew";
var stylepath = "/skins";
var wgArticlePath = "/index.php/$1";
var wgScriptPath = "";
var wgServer = "http://blitzetcetera.org/";
var wgCanonicalNamespace = "";
var wgCanonicalSpecialPageName = false;
var wgNamespaceNumber = 0;
var wgPageName = "Выпуск_№1_-_январь_2005";
var wgTitle = "Выпуск №1 - январь 2005";
var wgAction = "view";
var wgArticleId = "137";
var wgIsArticle = true;
var wgUserName = null;
var wgUserGroups = null;
var wgUserLanguage = "ru";
var wgContentLanguage = "ru";
var wgBreakFrames = false;
var wgCurRevisionId = "3637";
/*]]>*/</script>
		<script type="text/javascript" src="2nq-6cel.js?63"><!-- wikibits js --></script>		<script type="text/javascript" src="http://blitzetcetera.org/index.php?title=-&amp;action=raw&amp;gen=js"><!-- site js --></script>		<style type="text/css">/*<![CDATA[*/
@import "http://blitzetcetera.org/index.php?title=MediaWiki:Common.css&amp;usemsgcache=yes&amp;action=raw&amp;ctype=text/css&amp;smaxage=18000";
@import "http://blitzetcetera.org/index.php?title=MediaWiki:OfflineNew.css&amp;usemsgcache=yes&amp;action=raw&amp;ctype=text/css&amp;smaxage=18000";
@import "http://blitzetcetera.org/index.php?title=-&amp;action=raw&amp;gen=css&amp;maxage=18000";
/*]]>*/</style>		<!-- Head Scripts -->	</head><body  class="mediawiki ns-0 ltr page-Выпуск_№1_-_январь_2005">	<div id="globalWrapper">	<div id="logocontainer">		<table align="center">		  <tr>				<td id="blitzetclogo">				</td>			</tr>		</table>	</div>	<div id="magbar">	Журнал о программированнии на языках Blitz3D, BlitzMax, BlitzPlus	</div>		<div id="column-content">	<div id="content">		<a name="top" id="top"></a>				<div id="bodyContent">		<table cellspacing=0 cellpadding=0 width=100%>			<tr>			  <td class="leftside">				</td>				<td class="sheetbody">					<h1 class="sheet">Выпуск №1 - январь 2005</h1>			<h3 id="siteSub">Материал из Blitz Et Cetera.</h3>			<div id="contentSub"></div>			<!-- start content -->			<a name="Contents"></a><h2><span class="editsection">[<a href="http://blitzetcetera.org/index.php?title=%D0%92%D1%8B%D0%BF%D1%83%D1%81%D0%BA_%E2%84%961_-_%D1%8F%D0%BD%D0%B2%D0%B0%D1%80%D1%8C_2005&amp;action=edit&amp;section=1" title="Править секцию: Contents">править</a>]</span> <span class="mw-headline">Contents</span></h2>
<ul><li>Вступление
<ul><li><a href="#Предисловие редактора (выпуск 1)">Предисловие редактора (выпуск 1)</a>
</li><li><a href="#Почта (выпуск 1)">Почта (выпуск 1)</a>
</li><li><a href="#Новости (выпуск 1)">Новости (выпуск 1)</a>
</li></ul>
</li><li>Обзор
<ul><li><a href="#Обзор Blitz-ZX-римейков">Обзор Blitz-ZX-римейков</a> - <a href="http://blitzetcetera.org/index.php/%D0%A3%D1%87%D0%B0%D1%81%D1%82%D0%BD%D0%B8%D0%BA:Matt_Merkulov" title="Участник:Matt Merkulov">Матвей Меркулов</a> 
</li></ul>
</li><li>Новичкам
<ul><li><a href="#BlitzMax для начинающих">BlitzMax для начинающих</a> - Mark Sibly, перевел <a href="http://blitzetcetera.org/index.php/%D0%A3%D1%87%D0%B0%D1%81%D1%82%D0%BD%D0%B8%D0%BA:MANIAK_dobrii" title="Участник:MANIAK dobrii">MANIAK dobrii</a> 
</li></ul>
</li><li>Тонкости кодинга
<ul><li><a href="#Связанные списки в Blitz3D">Связанные списки в Blitz3D</a> - Артур Остапенко 
</li><li><a href="#Использование формул логики">Использование формул логики</a> - <a href="http://blitzetcetera.org/index.php/%D0%A3%D1%87%D0%B0%D1%81%D1%82%D0%BD%D0%B8%D0%BA:Matt_Merkulov" title="Участник:Matt Merkulov">Матвей Меркулов</a> 
</li><li><a href="#Банк, как динамический массив">Банк, как динамический массив</a> - <a href="http://blitzetcetera.org/index.php/%D0%A3%D1%87%D0%B0%D1%81%D1%82%D0%BD%D0%B8%D0%BA:Matt_Merkulov" title="Участник:Matt Merkulov">Матвей Меркулов</a> 
</li></ul>
</li><li>Разработки
<ul><li><a href="#Игра «Жизнь»">Игра «Жизнь»</a> - <a href="http://blitzetcetera.org/index.php/%D0%A3%D1%87%D0%B0%D1%81%D1%82%D0%BD%D0%B8%D0%BA:Matt_Merkulov" title="Участник:Matt Merkulov">Матвей Меркулов</a> 
</li><li><a href="#Виртуальный художник: цвет">Виртуальный художник: цвет</a> - <a href="http://blitzetcetera.org/index.php/%D0%A3%D1%87%D0%B0%D1%81%D1%82%D0%BD%D0%B8%D0%BA:Matt_Merkulov" title="Участник:Matt Merkulov">Матвей Меркулов</a> 
</li></ul>
</li><li>Свободный полет
<ul><li><a href="#Курс молодого бойца, часть 1: первичный инструктаж">Курс молодого бойца, часть 1: первичный инструктаж</a> - <a href="http://blitzetcetera.org/index.php/%D0%A3%D1%87%D0%B0%D1%81%D1%82%D0%BD%D0%B8%D0%BA:Tolking" title="Участник:Tolking">Роман Прядко</a> 
</li><li><a href="#Фазы создания видеоигр">Фазы создания видеоигр</a> - Barmathur 
</li><li><a href="#Искусственный интеллект">Искусственный интеллект</a> - Barmathur 
</li></ul>
</li><li>В заключение
<ul><li><a href="#В следующем выпуске (выпуск 1)">В следующем выпуске (выпуск 1)</a>
</li></ul>
</li></ul>
<p></td><td class="rightside"><table cellspacing=0 cellpadding=0><tr><td class="rightheader"></td></tr></table></td></tr><tr colspan="3" height="40"><td>&nbsp;</td></tr><tr><td class="leftside"><table cellspacing=0 cellpadding=0><tr><td class="leftheader"></td></tr></table></td><td class="sheetbody"><a name="Предисловие редактора (выпуск 1)"></a><h1><span class="editsection">[<a href="http://blitzetcetera.org/index.php?title=Обсуждение:Предисловие редактора (выпуск 1)&amp;action=edit">обсудить</a>] [<a href="http://blitzetcetera.org/index.php?title=Предисловие редактора (выпуск 1)&amp;action=edit">править</a>]</span><span class="mw-headline">Предисловие редактора (выпуск 1)</span></h1>
<p>Привет всем читателям первого выпуска электронного журнала Blitz Et Cetera, посвященного языку программирования Blitz и всему, что с ним связано. Язык Blitz включает в себя уже четыре языка: устаревший BlitzBasic, Blitz3D - язык, предназначенный для разработки трехмерных игр, BlitzPlus, ориентированный на разработку Windows-приложений и BlitzMax, новая версия языка с обилием новых возможностей. Blitz основан на знаменитом языке BASIC, который уже находился на стадии вымирания под напором снобизма программистов на C и Assembler, но благодаря Blitz и появившемуся немногим ранее языку DarkBasic, снова занял прочные позиции и теперь набирает обороты: день ото дня сообщество программистов на BASIC растет. Но почему программисты на Basic держатся за него и никак не хотят переходить на другие языки? Все потому, что язык очень прост в освоении и реализации идей программиста. А теперь, с мощью Blitz, еще и можно писать программы, ни в чем не уступающие профессиональным, и даже неплохо заработать на этом!
</p>
</p><p>Blitz очень молодой язык, поэтому пока еще в Интернете не так много сайтов, посвященных ему. Как-то мне захотелось почитать какой-нибудь журнал по Blitz, я решил поискать англоязычных журналов в Сети и был удивлен, не найдя ничего. Тогда я подумал: "Почему бы не сделать журнал самому?", тем более, что я с удовольствием читал многочисленные журналы по QB (DOS-овский, основанный на BASIC язык, разработанный Microsoft в 1988г., на котором я программировал 8 лет). Идея показалась оригинальной, и мне захотелось попробовать себя в качестве редактора. Пока я это все обдумывал, наткнулся на недавно появившийся журнал <a href="http://www.petesqbsite.com/sections/express/express.shtml|" class="external text" title="http://www.petesqbsite.com/sections/express/express.shtml|" rel="nofollow">"QB Express"</a>, из которого почерпнул много идей по структуре журнала. Мое желание сделать журнал подогревала еще мысль о том, что я смогу систематизировать и опубликовать свои эксперименты.
</p><p>Я быстро нашел подходящее название. Et cetera в переводе с латыни означает "и так далее", так что по-русски название журнала звучит как "Блиц и так далее". То есть, язык Blitz является основой журнала, но, отталкиваясь от него, темы могут быть самыми разнообразными. К примеру, Blitz напрямую связан с разработкой компьютерных игр, а эта более широкая тема, в свою очередь, имеет отношение к большому диапазону дисциплин, в т. ч. и далеких от программирования, например психология и философия.
</p><p>Анонс журнала состоялся на форуме сайта <a href="http://www.blitzgames.vov.ru|blitzgames.vov.ru/" class="external autonumber" title="http://www.blitzgames.vov.ru|blitzgames.vov.ru" rel="nofollow">[1]</a>. Я очень рад тому, что моя идея получила поддержку от участников форума и вызвала ажиотаж. Я очень благодарен Роману Прядко, Артуру Остапенко, MANIAK_dobrii и barmathur, которые приняли участие в создании этого выпуска, и Святославу, который внес предложения по журналу. Первый выпуск и 5 соавторов - это отличное начало. Надеюсь, что это не предел и в следующих выпусках будет больше авторов и больше статей.
</p><p>Этот дебютный выпуск разбит на четыре раздела. "Основа" включает в себя статьи, напрямую связанные с самим журналом, это диалог с читателем и новости. В разделе "Обзор" - одна обзорная статья по сделанным на Blitz улучшенным версиям старых игр. Самый большой раздел - "Программирование", посвящен, собственно, программам на Blitz, алгоритмам и всевозможным приемам программирования. А в разделе "Свободный полет" - статьи на свободную тему.
</p><p>Еще одна неплохая добавка к журналу - приложение. Это учебники по Blitz, выходящие за рамки статьи и программы. Приложение к первому выпуску содержит HTML-версию моей дипломной работы (я публиковал ее ранее и многие, наверняка с ней знакомы), которая превратилась в учебник, а также программу BlitzPlus Turmit - реализацию простого языка программирования для "закрашивателя клеток". Жаль, но многое пришлось урезать (например, новости проектов) - время поджимает. Переносим на следующий выпуск...
</p><p>Журнал открыт для любых мнений и любых тем. Любой материал, присланный Вами, будет опубликован. Немного энтузиазма и МОЙ журнал станет НАШИМ журналом.
</p>
<div align="right">
<p>Матвей Меркулов
</p>
</div>
<p>P. S. Для запуска программы, выделите ее в журнале, затем выберите "Копировать" в меню "Правка" Вашего браузера. Переключитесь на Blitz, создайте новую программу и выберите пункт "Paste" в меню "Edit". А для правильного показа русских букв, измените в файле "cfg\blitzide.prefs" параметр "font_editor" с "Blitz 12" на "Courier 12".
</td><td class="rightside"><table cellspacing=0 cellpadding=0><tr><td class="rightheader"></td></tr></table></td></tr><tr colspan="3" height="40"><td>&nbsp;</td></tr><tr><td class="leftside"><table cellspacing=0 cellpadding=0><tr><td class="leftheader"></td></tr></table></td><td class="sheetbody"><a name="Почта (выпуск 1)"></a><h1><span class="editsection">[<a href="http://blitzetcetera.org/index.php?title=Обсуждение:Почта (выпуск 1)&amp;action=edit">обсудить</a>] [<a href="http://blitzetcetera.org/index.php?title=Почта (выпуск 1)&amp;action=edit">править</a>]</span><span class="mw-headline">Почта (выпуск 1)</span></h1>
</p>
<a name=".D0.9F.D0.B8.D1.81.D1.8C.D0.BC.D0.BE_.D0.BE.D1.82_.D0.A1.D0.B2.D1.8F.D1.82.D0.BE.D1.81.D0.BB.D0.B0.D0.B2.D0.B0"></a><h2><span class="editsection">[<a href="http://blitzetcetera.org/index.php?title=%D0%9F%D0%BE%D1%87%D1%82%D0%B0_%28%D0%B2%D1%8B%D0%BF%D1%83%D1%81%D0%BA_1%29&amp;action=edit&amp;section=1" title="Почта (выпуск 1)">править</a>]</span> <span class="mw-headline">Письмо от Святослава</span></h2>
<p>Ну так вот
</p>
<ol><li>Хотелось бы, чтобы журнал был в формате PDF с красивым дизайном и т.д но одному это сделать сложно, можно привлечь ребят с форума для работы над дизайном журнала.
</li><li>Хотелось бы видеть разделы не только про Blitz но и про другие языки например колонка С++, инфу для нее можно взять из электронных книг, кто-то выкладывал хороший список на форуме. Также хотелось бы видеть раздел, посвященный 3ds max или другому 3D-редактору.
</li><li>И вот еще: надо бы сделать подписку на журнал что бы он приходил на е-майл
</li><li>Если нужна помощь, обращайся, есть кое-какие задумки.
</li></ol>
<p>Старший научный сотрудник НИИ Алкоголизма
</p>
<hr />
<p>Спасибо за предложения!
</p><p>PDF сделать, в принципе, не проблема, но только, как приложение к HTML-версии журнала. Прежде всего, нужно чтобы журнал был ON-LINE, в т.ч. и для того, чтобы поисковые системы могли его проиндексировать. А разные дизайны - это здорово, я тоже об этом думал. В частности, у меня есть идея менять "скины" журнала с помощью изменения css. То есть, структура журнала будет неизменной, а вот изображения для рамок, цвет, шрифты каждого из полей можно будет варьировать. Единственная проблема: я не знаю, как сделать так, чтобы при нажатии на ссылку, к документу подключался другой css-файл. Так что если есть предложения по дизайну - пиши.
</p>
<ol><li>Дело в том, что сам я теперь программирую только на Blitz и не могу поделиться опытом в программировании, скажем, на C++ Builder или VB, на которых тоже писал программы - я не открыл ничего нового. Но если есть желающие написать статьи или цикл статей по другим языкам - без проблем. Все будет опубликовано. Да и сам я планирую немного отойти от главного направления и написать несколько статей по WEB-дизайну (хотя, тоже с применением Blitz). Что же касается раздела о 3D-редакторов, тут придется брать статьи из других источников (а если найдутся люди, которые захотят вести этот раздел - будет великолепно).
</li><li>А вот подписка - это, несомненно, необходимая вещь. Я думаю, в Интернете есть сайты, предоставляющие услуги автоматической рассылки (если не будет возможности сделать ее вручную).
</li><li>Есть задумки - присылай всё!
</li></ol>
<p>С уважением,<br />
&nbsp;Матвей Меркулов
</p>
<a name=".D0.9F.D0.B8.D1.81.D1.8C.D0.BC.D0.BE_.D0.BE.D1.82_barmathur"></a><h2><span class="editsection">[<a href="http://blitzetcetera.org/index.php?title=%D0%9F%D0%BE%D1%87%D1%82%D0%B0_%28%D0%B2%D1%8B%D0%BF%D1%83%D1%81%D0%BA_1%29&amp;action=edit&amp;section=2" title="Почта (выпуск 1)">править</a>]</span> <span class="mw-headline">Письмо от barmathur</span></h2>
<p>Надеюсь, эта идея с журналом найдет поддержку Честно скажу - это очень здорово что есть такие люди которые готовы делать такие ХОРОШИЕ вещи. Только желание уже заслуживает уважения. В дальнейшем обязательно буду содействовать
</p>
<p align="right">
VOLONTER
</p>
<hr />
<p>Thanks, I'll do my best.&nbsp;:)
</p><p>С уважением,<br />
<p>&nbsp;Матвей Меркулов
</p>
</td><td class="rightside"><table cellspacing=0 cellpadding=0><tr><td class="rightheader"></td></tr></table></td></tr><tr colspan="3" height="40"><td>&nbsp;</td></tr><tr><td class="leftside"><table cellspacing=0 cellpadding=0><tr><td class="leftheader"></td></tr></table></td><td class="sheetbody"><a name="Новости (выпуск 1)"></a><h1><span class="editsection">[<a href="http://blitzetcetera.org/index.php?title=Обсуждение:Новости (выпуск 1)&amp;action=edit">обсудить</a>] [<a href="http://blitzetcetera.org/index.php?title=Новости (выпуск 1)&amp;action=edit">править</a>]</span><span class="mw-headline">Новости (выпуск 1)</span></h1>
</p>
<a name="Blitz"></a><h2><span class="editsection">[<a href="http://blitzetcetera.org/index.php?title=%D0%9D%D0%BE%D0%B2%D0%BE%D1%81%D1%82%D0%B8_%28%D0%B2%D1%8B%D0%BF%D1%83%D1%81%D0%BA_1%29&amp;action=edit&amp;section=1" title="Новости (выпуск 1)">править</a>]</span> <span class="mw-headline">Blitz</span></h2>
<a name=".D0.92.D1.8B.D1.88.D0.BB.D0.B0_.D0.BF.D0.B5.D1.80.D0.B2.D0.B0.D1.8F_.D0.B2.D0.B5.D1.80.D1.81.D0.B8.D1.8F_BlitzMax_.D0.B4.D0.BB.D1.8F_PC"></a><h3><span class="editsection">[<a href="http://blitzetcetera.org/index.php?title=%D0%9D%D0%BE%D0%B2%D0%BE%D1%81%D1%82%D0%B8_%28%D0%B2%D1%8B%D0%BF%D1%83%D1%81%D0%BA_1%29&amp;action=edit&amp;section=2" title="Новости (выпуск 1)">править</a>]</span> <span class="mw-headline">Вышла первая версия BlitzMax для PC</span></h3>
<p>Этого события долго ждали многие. BlitzMax - это очередной гигантский шаг семейства Blitz вперед. Спросите, почему? Все дело в том, что BlitzMax был написан "с нуля", автор смог устранить многие недостатки старой системы (откомпилированная программа теперь будет включать не все функции, как раньше, а только те, что используются программой, скорость исполнения заметно увеличилась), сделать язык объектно-ориентированным, добавив много новых возможностей (в частности, встроенная поддержка OpenGL, наличие дополнительных числовых форматов (байт, двухбайтовое целое, длинное целое, двойной точности с плавающей точкой) и подержка внешних языков (типа C и Assembler, упаковка данных в exe-файл, поддержка Mac и Linux). Может быть, по-настоящему пока его смогут оценить только программисты, знающие тонкости C, но факт остается фактом: Бейсик неумолимо движется вперед, перенимая у других языков все, что может ему пригодиться, оставаясь по-прежнему удобным и дружественным программисту.
</td><td class="rightside"><table cellspacing=0 cellpadding=0><tr><td class="rightheader"></td></tr></table></td></tr><tr colspan="3" height="40"><td>&nbsp;</td></tr><tr><td class="leftside"><table cellspacing=0 cellpadding=0><tr><td class="leftheader"></td></tr></table></td><td class="sheetbody"><a name="Обзор Blitz-ZX-римейков"></a><h1><span class="editsection">[<a href="http://blitzetcetera.org/index.php?title=Обсуждение:Обзор Blitz-ZX-римейков&amp;action=edit">обсудить</a>] [<a href="http://blitzetcetera.org/index.php?title=Обзор Blitz-ZX-римейков&amp;action=edit">править</a>]</span><span class="mw-headline">Обзор Blitz-ZX-римейков</span></h1>
</p>
<a name=".D0.92.D0.B2.D0.B5.D0.B4.D0.B5.D0.BD.D0.B8.D0.B5"></a><h2><span class="editsection">[<a href="http://blitzetcetera.org/index.php?title=%D0%9E%D0%B1%D0%B7%D0%BE%D1%80_Blitz-ZX-%D1%80%D0%B8%D0%BC%D0%B5%D0%B9%D0%BA%D0%BE%D0%B2&amp;action=edit&amp;section=1" title="Обзор Blitz-ZX-римейков">править</a>]</span> <span class="mw-headline">Введение</span></h2>
<p>Компьютер ZX-Spectrum широко известен в нашей стране, как первый всем доступный бытовой компьютер. Благодаря альтруизму Сэра Синклера, многие получили возможность приобрести или собрать своими руками этот комп. Он подключался к телевизору, считывал данные при помощи обычного магнитофона, имел разрешение 256х192 пикселов и оригинальную систему расцветки, где каждое знакоместо, размером 8х8 пикселов могло включать в себя 2 цвета из 8. Это была разумная экономия (экранная память занимала не 48К, а 6912 байт) для компьютера с 48К оперативной памяти (потом появились версии с 128К, 256К). Ну и, конечно, многие стали писать игры для такого популярного компьютера. Причем, это было поистине время расцвета компьютерных игр: так как разработчик был ограничен в ресурсах, то он дополнял бедность графики и звука, "обертки" игры, сбалансированной и захватывающей играбельностью и оригинальностью концепции - "начинкой". Опытный программист вполне мог сделать качественную игру в одиночку и в краткие сроки, что обеспечивало цельность ее идеи. Я далеко не первый это замечаю, но сейчас, к сожалению, времена изменились: в погоне за реалистичной графикой, над которой работают целые коллективы программистов и художников, забывают про идею и копируют, копируют, используя пережеванные много раз проверенные на рынке концепции. Сюжет тоже зачастую банален от начала и до конца. Может быть, это делают в угоду публике, которая хочет "зрелищ", но не думать, а может быть желание поменьше думать свойственно самим разработчикам. Такая ситуация меня удручает. Можно по пальцам пересчитать игры, выпущенные за последние пять лет, в которых было хоть что-то более-менее оригинальное. И не я один вспоминаю о старых добрых спектрумовских временах, многие даже переделывают старые шедевры под новые мультимедийные стандарты. В этой статье будут рассмотрены римейки ZX-игр (пожалуй, их больше, чем всех римейков игр с других платформ, вместе взятых), сделанные на Blitz. Некоторые архивы содержат исходники, в которых можно найти много интересного.
</p>
<a name="Anarchy"></a><h2><span class="editsection">[<a href="http://blitzetcetera.org/index.php?title=%D0%9E%D0%B1%D0%B7%D0%BE%D1%80_Blitz-ZX-%D1%80%D0%B8%D0%BC%D0%B5%D0%B9%D0%BA%D0%BE%D0%B2&amp;action=edit&amp;section=2" title="Обзор Blitz-ZX-римейков">править</a>]</span> <span class="mw-headline">Anarchy</span></h2>
<div class="center"><div class="floatnone"><span><a href="http://blitzetcetera.org/index.php/%D0%98%D0%B7%D0%BE%D0%B1%D1%80%D0%B0%D0%B6%D0%B5%D0%BD%D0%B8%D0%B5:Remake01.jpg" class="image" title=""><img alt="" longdesc="http://blitzetcetera.org/index.php/%D0%98%D0%B7%D0%BE%D0%B1%D1%80%D0%B0%D0%B6%D0%B5%D0%BD%D0%B8%D0%B5:Remake01.jpg" src="8e_xgy7h.jpg" width="320" height="240" /></a></span></div></div>
<p>Игра про танк, который должен расстрелять все квадраты определенного цвета и попасть с помощью антигравитационного луча, появляющегося после, на следующий уровень. Судя по скриншоту, игру полностью перевели в трехмерный режим, заменив двуцветные спектрумовские спрайты на убогие и также немногоцветные трехмерные модели. Оригинал сам по себе не пользовался особой популярностью, думаю римейку уготована та же участь.
</p>
<a name="Chuckie_Egg"></a><h2><span class="editsection">[<a href="http://blitzetcetera.org/index.php?title=%D0%9E%D0%B1%D0%B7%D0%BE%D1%80_Blitz-ZX-%D1%80%D0%B8%D0%BC%D0%B5%D0%B9%D0%BA%D0%BE%D0%B2&amp;action=edit&amp;section=3" title="Обзор Blitz-ZX-римейков">править</a>]</span> <span class="mw-headline">Chuckie Egg</span></h2>
<p>Только я увидел название этой игры в списке, сразу же стал качать. Сначала я подумал, что это вторая часть. Очень хорошо помню, как в 1993 году я играл в нее на стареньком 48K Spectrum, тогда меня увлек ее огромный мир-лабиринт с сотнями экранов, в каждом из которых была масса препятствий, предметов и врагов. Потом я с не меньшим удовольствием играл в нее на эмуляторе. Однако, когда я запустив римейк, меня постигло разочарование: это был римейк первой части. А первая часть этой игры не идет ни в какое сравнение со второй - это простенький лабиринт из платформ и лестниц, по которым бегают враги, все умещается на одном экране, на более высоких уровнях появляются дополнительные препятствия. Суть игры в том, чтобы, уворачиваясь от страусов, собрать на уровне все яйца. Автор римейка не взял ничего из оригинала кроме концепции. Римейк сделан качественно: хорошая графика, анимация, музыка, но, однообразие игры быстро надоедает.
</p>
<a name="Cybernoid"></a><h2><span class="editsection">[<a href="http://blitzetcetera.org/index.php?title=%D0%9E%D0%B1%D0%B7%D0%BE%D1%80_Blitz-ZX-%D1%80%D0%B8%D0%BC%D0%B5%D0%B9%D0%BA%D0%BE%D0%B2&amp;action=edit&amp;section=4" title="Обзор Blitz-ZX-римейков">править</a>]</span> <span class="mw-headline">Cybernoid</span></h2>
<div class="center"><div class="floatnone"><span><a href="http://blitzetcetera.org/index.php/%D0%98%D0%B7%D0%BE%D0%B1%D1%80%D0%B0%D0%B6%D0%B5%D0%BD%D0%B8%D0%B5:Remake03.jpg" class="image" title=""><img alt="" longdesc="http://blitzetcetera.org/index.php/%D0%98%D0%B7%D0%BE%D0%B1%D1%80%D0%B0%D0%B6%D0%B5%D0%BD%D0%B8%D0%B5:Remake03.jpg" src="gqtd_3c7-2.jpg" width="320" height="240" /></a></span></div></div>
<p>Качественно выполненная перерисовка графики оригинала этой игры создает гораздо более глубокую атмосферу подземелья, наполненного кибернетическими системами, борющимися против Вас. Но мрачность темных сводов быстро рассеют вспышки взрывов, а тишину нарушат пронзительные звуки энергетических зарядов. Великолепный римейк.
</p>
<a name="Dan_Dare_.22Can_Care.22"></a><h2><span class="editsection">[<a href="http://blitzetcetera.org/index.php?title=%D0%9E%D0%B1%D0%B7%D0%BE%D1%80_Blitz-ZX-%D1%80%D0%B8%D0%BC%D0%B5%D0%B9%D0%BA%D0%BE%D0%B2&amp;action=edit&amp;section=5" title="Обзор Blitz-ZX-римейков">править</a>]</span> <span class="mw-headline">Dan Dare "Can Care"</span></h2>
<div class="center"><div class="floatnone"><span><a href="http://blitzetcetera.org/index.php/%D0%98%D0%B7%D0%BE%D0%B1%D1%80%D0%B0%D0%B6%D0%B5%D0%BD%D0%B8%D0%B5:Remake04.gif" class="image" title=""><img alt="" longdesc="http://blitzetcetera.org/index.php/%D0%98%D0%B7%D0%BE%D0%B1%D1%80%D0%B0%D0%B6%D0%B5%D0%BD%D0%B8%D0%B5:Remake04.gif" src="bo70gkwy.gif" width="320" height="240" /></a></span></div></div>
<p>Пилот-военный штурмует вражескую базу, а помогает ему в этом его друг-инопланетянин. Довольно оригинальная игра и неплохой римейк, графика хорошо перерисована с оригинала.
</p>
<a name="Dizzy"></a><h2><span class="editsection">[<a href="http://blitzetcetera.org/index.php?title=%D0%9E%D0%B1%D0%B7%D0%BE%D1%80_Blitz-ZX-%D1%80%D0%B8%D0%BC%D0%B5%D0%B9%D0%BA%D0%BE%D0%B2&amp;action=edit&amp;section=6" title="Обзор Blitz-ZX-римейков">править</a>]</span> <span class="mw-headline">Dizzy</span></h2>
<div class="center"><div class="floatnone"><span><a href="http://blitzetcetera.org/index.php/%D0%98%D0%B7%D0%BE%D0%B1%D1%80%D0%B0%D0%B6%D0%B5%D0%BD%D0%B8%D0%B5:Remake05.jpg" class="image" title=""><img alt="" longdesc="http://blitzetcetera.org/index.php/%D0%98%D0%B7%D0%BE%D0%B1%D1%80%D0%B0%D0%B6%D0%B5%D0%BD%D0%B8%D0%B5:Remake05.jpg" src="4kg0bl_j-2.jpg" width="320" height="240" /></a></span></div></div>
<p>Ну, это - классика. Эта игра положила начало целому жанру под названием "аркадная адвентюра" (аркада со сбором и применением предметов). Сюжет довольно оригинальный - главный герой, представитель "желткового народа" (яиц с глазами, руками и ногами), должен с помощью ловкости и смекалки победить злого волшебника. Авторы игры, впоследствии, выпустили 5 продолжений к ней, а затем за дело взялись другие разработчики, в том числе и из России. Сейчас, игр этого жанра на Спектруме сотни. А этот римейк - просто конфетка. Отличная, перерисованная с оригинала, графика, надежный движок, скроллинг вместо перемещения по экранам, ремиксированная с оригинала музыка - в результате игра стала гораздо более привлекательной для избалованной красивыми картинками и мелодиями игровой публики, но ничуть не потеряла при этом в играбельности, заставлявшей людей пятнадцать лет назад сутками сидеть у компьютера, смотря в 8-цветный монитор, ломая голову над очередной загадкой.
</p>
<a name="Fred"></a><h2><span class="editsection">[<a href="http://blitzetcetera.org/index.php?title=%D0%9E%D0%B1%D0%B7%D0%BE%D1%80_Blitz-ZX-%D1%80%D0%B8%D0%BC%D0%B5%D0%B9%D0%BA%D0%BE%D0%B2&amp;action=edit&amp;section=7" title="Обзор Blitz-ZX-римейков">править</a>]</span> <span class="mw-headline">Fred</span></h2>
<div class="center"><div class="floatnone"><span><a href="http://blitzetcetera.org/index.php/%D0%98%D0%B7%D0%BE%D0%B1%D1%80%D0%B0%D0%B6%D0%B5%D0%BD%D0%B8%D0%B5:Remake06.jpg" class="image" title=""><img alt="" longdesc="http://blitzetcetera.org/index.php/%D0%98%D0%B7%D0%BE%D0%B1%D1%80%D0%B0%D0%B6%D0%B5%D0%BD%D0%B8%D0%B5:Remake06.jpg" src="xnus4669.jpg" width="320" height="240" /></a></span></div></div>
<p>Отлично сделанный римейк, опять же, целью автора было полное сохранение самой концепции игры в неприкосновенности, путем улучшения качества графики, музыки и звуков. Цель Фреда - выйти из лабиринта, собирая предметы и избегая монстров.
</p>
<a name="Frogger"></a><h2><span class="editsection">[<a href="http://blitzetcetera.org/index.php?title=%D0%9E%D0%B1%D0%B7%D0%BE%D1%80_Blitz-ZX-%D1%80%D0%B8%D0%BC%D0%B5%D0%B9%D0%BA%D0%BE%D0%B2&amp;action=edit&amp;section=8" title="Обзор Blitz-ZX-римейков">править</a>]</span> <span class="mw-headline">Frogger</span></h2>
<div class="center"><div class="floatnone"><span><a href="http://blitzetcetera.org/index.php/%D0%98%D0%B7%D0%BE%D0%B1%D1%80%D0%B0%D0%B6%D0%B5%D0%BD%D0%B8%D0%B5:Remake07.jpg" class="image" title=""><img alt="" longdesc="http://blitzetcetera.org/index.php/%D0%98%D0%B7%D0%BE%D0%B1%D1%80%D0%B0%D0%B6%D0%B5%D0%BD%D0%B8%D0%B5:Remake07.jpg" src="reu-5svk.jpg" width="320" height="240" /></a></span></div></div>
<p>Простая аркада - лягушонку нужно перейти через дорогу, не попав под колеса автомобиля, перебраться через реку и съесть муху. Неплохая мультяшная графика, веселая музыка, простая концепция - залог играбельности этого забавного римейка.
</p>
<a name="Impossaball"></a><h2><span class="editsection">[<a href="http://blitzetcetera.org/index.php?title=%D0%9E%D0%B1%D0%B7%D0%BE%D1%80_Blitz-ZX-%D1%80%D0%B8%D0%BC%D0%B5%D0%B9%D0%BA%D0%BE%D0%B2&amp;action=edit&amp;section=9" title="Обзор Blitz-ZX-римейков">править</a>]</span> <span class="mw-headline">Impossaball</span></h2>
<div class="center"><div class="floatnone"><span><a href="http://blitzetcetera.org/index.php/%D0%98%D0%B7%D0%BE%D0%B1%D1%80%D0%B0%D0%B6%D0%B5%D0%BD%D0%B8%D0%B5:Remake08.jpg" class="image" title=""><img alt="" longdesc="http://blitzetcetera.org/index.php/%D0%98%D0%B7%D0%BE%D0%B1%D1%80%D0%B0%D0%B6%D0%B5%D0%BD%D0%B8%D0%B5:Remake08.jpg" src="srs3wz8_.jpg" width="320" height="240" /></a></span></div></div>
<p>Трехмерная абстрактная аркада, текстуры отсутствуют, простейшие модели, но движок сделан неплохо, да и играбельность тоже ничего.
</p>
<a name="Jumping_Jack"></a><h2><span class="editsection">[<a href="http://blitzetcetera.org/index.php?title=%D0%9E%D0%B1%D0%B7%D0%BE%D1%80_Blitz-ZX-%D1%80%D0%B8%D0%BC%D0%B5%D0%B9%D0%BA%D0%BE%D0%B2&amp;action=edit&amp;section=10" title="Обзор Blitz-ZX-римейков">править</a>]</span> <span class="mw-headline">Jumping Jack</span></h2>
<div class="center"><div class="floatnone"><span><a href="http://blitzetcetera.org/index.php/%D0%98%D0%B7%D0%BE%D0%B1%D1%80%D0%B0%D0%B6%D0%B5%D0%BD%D0%B8%D0%B5:Remake09.jpg" class="image" title=""><img alt="" longdesc="http://blitzetcetera.org/index.php/%D0%98%D0%B7%D0%BE%D0%B1%D1%80%D0%B0%D0%B6%D0%B5%D0%BD%D0%B8%D0%B5:Remake09.jpg" src="g8p36dwr.jpg" width="320" height="240" /></a></span></div></div>
<p>Довольно простецкая игра, смысл которой заключается в том, чтобы добраться до верха экрана, прыгая в перемещающиеся проемы и уклоняясь от встречи с монстрами. Римейк не особо отличается от оригинала, да и сама концепция игры, IMHO, никуда не годится. Дендивский вариант куда интереснее.
</p>
<a name="Krakout"></a><h2><span class="editsection">[<a href="http://blitzetcetera.org/index.php?title=%D0%9E%D0%B1%D0%B7%D0%BE%D1%80_Blitz-ZX-%D1%80%D0%B8%D0%BC%D0%B5%D0%B9%D0%BA%D0%BE%D0%B2&amp;action=edit&amp;section=11" title="Обзор Blitz-ZX-римейков">править</a>]</span> <span class="mw-headline">Krakout</span></h2>
<div class="center"><div class="floatnone"><span><a href="http://blitzetcetera.org/index.php/%D0%98%D0%B7%D0%BE%D0%B1%D1%80%D0%B0%D0%B6%D0%B5%D0%BD%D0%B8%D0%B5:Remake10.jpg" class="image" title=""><img alt="" longdesc="http://blitzetcetera.org/index.php/%D0%98%D0%B7%D0%BE%D0%B1%D1%80%D0%B0%D0%B6%D0%B5%D0%BD%D0%B8%D0%B5:Remake10.jpg" src="h9zvxkxg.jpg" width="320" height="240" /></a></span></div></div>
<p>Игра похожа на арканоид, но присутствуют некоторые забавные отличия. Римейк изобилует графическими изображениями большого размера, поэтому даже демо-версия много весит. А сама игра вполне ничего, да вот только коммерческий продукт.
</p>
<a name="Manic_Miner"></a><h2><span class="editsection">[<a href="http://blitzetcetera.org/index.php?title=%D0%9E%D0%B1%D0%B7%D0%BE%D1%80_Blitz-ZX-%D1%80%D0%B8%D0%BC%D0%B5%D0%B9%D0%BA%D0%BE%D0%B2&amp;action=edit&amp;section=12" title="Обзор Blitz-ZX-римейков">править</a>]</span> <span class="mw-headline">Manic Miner</span></h2>
<div class="center"><div class="floatnone"><span><a href="http://blitzetcetera.org/index.php/%D0%98%D0%B7%D0%BE%D0%B1%D1%80%D0%B0%D0%B6%D0%B5%D0%BD%D0%B8%D0%B5:Remake11.jpg" class="image" title=""><img alt="" longdesc="http://blitzetcetera.org/index.php/%D0%98%D0%B7%D0%BE%D0%B1%D1%80%D0%B0%D0%B6%D0%B5%D0%BD%D0%B8%D0%B5:Remake11.jpg" src="l3rsckue-2.jpg" width="184" height="240" /></a></span></div></div>
<p>Игра разбита на одноэкранные уровни, где цель - собрать все предметы, совершая рискованные прыжки и уворачиваясь от патрулирующих врагов. Графика неплохо перерисована, а музыка неплохо ремиксована.
</p>
<a name="The_Birds_And_The_Bees"></a><h2><span class="editsection">[<a href="http://blitzetcetera.org/index.php?title=%D0%9E%D0%B1%D0%B7%D0%BE%D1%80_Blitz-ZX-%D1%80%D0%B8%D0%BC%D0%B5%D0%B9%D0%BA%D0%BE%D0%B2&amp;action=edit&amp;section=13" title="Обзор Blitz-ZX-римейков">править</a>]</span> <span class="mw-headline">The Birds And The Bees</span></h2>
<div class="center"><div class="floatnone"><span><a href="http://blitzetcetera.org/index.php/%D0%98%D0%B7%D0%BE%D0%B1%D1%80%D0%B0%D0%B6%D0%B5%D0%BD%D0%B8%D0%B5:Remake02.jpg" class="image" title=""><img alt="" longdesc="http://blitzetcetera.org/index.php/%D0%98%D0%B7%D0%BE%D0%B1%D1%80%D0%B0%D0%B6%D0%B5%D0%BD%D0%B8%D0%B5:Remake02.jpg" src="e8zywxtw-2.jpg" width="320" height="240" /></a></span></div></div>
<p>Пчела отправляется в свой опасный путь за нектаром. Нужно собрать определенное количество нектара, пытаясь избежать столкновения с птицами, гусеницами, хищными растениями и другими враждебными организмами, и вернуться в улей. Графика римейка сделана в мультипликационном стиле, кое-где есть отрендеренная трехмерщина, да и врагов разработчики сделали поумнее. Музыка частью переработана, частью заменена.
</p>
<a name="Virus"></a><h2><span class="editsection">[<a href="http://blitzetcetera.org/index.php?title=%D0%9E%D0%B1%D0%B7%D0%BE%D1%80_Blitz-ZX-%D1%80%D0%B8%D0%BC%D0%B5%D0%B9%D0%BA%D0%BE%D0%B2&amp;action=edit&amp;section=14" title="Обзор Blitz-ZX-римейков">править</a>]</span> <span class="mw-headline">Virus</span></h2>
<div class="center"><div class="floatnone"><span><a href="http://blitzetcetera.org/index.php/%D0%98%D0%B7%D0%BE%D0%B1%D1%80%D0%B0%D0%B6%D0%B5%D0%BD%D0%B8%D0%B5:Remake12.jpg" class="image" title=""><img alt="" longdesc="http://blitzetcetera.org/index.php/%D0%98%D0%B7%D0%BE%D0%B1%D1%80%D0%B0%D0%B6%D0%B5%D0%BD%D0%B8%D0%B5:Remake12.jpg" src="m2vwb-db.jpg" width="320" height="240" /></a></span></div></div>
<p>Одна из самых красивых по графике трехмерных игр на Спектруме теперь перенесена на PC. Вы управляете шаттлом, который может поворачиваться во все стороны, ускоряться с помощью реактивного двигателя, стрелять из пулемета и пускать ракеты. Взлетая со своей базы, Вы отправляетесь на битву с вражескими кораблями, которых довольно много и они предпочитают нападать толпой. Трехмерные модели весьма просты и даже не оттекстурированы, но радует глаз обилие спецэффектов: масса осколков, прыгающих по сглаженной поверхности планеты, реактивные выхлопы, отлично сделанные тени. Играть интересно.
</p>
<hr />
<p>Большая часть этих игр находится на сайте <a href="http://www.blitzcoders.com/" class="external text" title="http://www.blitzcoders.com" rel="nofollow">BlitzCoders</a>. А вот сайты, посященные римейкам игр:
</p>
<ul><li><a href="http://www.retrospec.sgn.net/" class="external text" title="http://www.retrospec.sgn.net" rel="nofollow">RetroSpec</a>
</li><li><a href="http://www.retroremakes.com/" class="external text" title="http://www.retroremakes.com" rel="nofollow">Retro Remakes</a>
</li><li><a href="http://www.remakes.org/" class="external text" title="http://www.remakes.org" rel="nofollow">Remakes</a>
</li></ul>
<hr />
<p>Автор: <a href="http://blitzetcetera.org/index.php/%D0%A3%D1%87%D0%B0%D1%81%D1%82%D0%BD%D0%B8%D0%BA:Matt_Merkulov" title="Участник:Matt Merkulov">Матвей Меркулов</a> (E-mail: MattMerk@mail.ru, ICQ: 392-274-050)
</td><td class="rightside"><table cellspacing=0 cellpadding=0><tr><td class="rightheader"></td></tr></table></td></tr><tr colspan="3" height="40"><td>&nbsp;</td></tr><tr><td class="leftside"><table cellspacing=0 cellpadding=0><tr><td class="leftheader"></td></tr></table></td><td class="sheetbody"><a name="BlitzMax для начинающих"></a><h1><span class="editsection">[<a href="http://blitzetcetera.org/index.php?title=Обсуждение:BlitzMax для начинающих&amp;action=edit">обсудить</a>] [<a href="http://blitzetcetera.org/index.php?title=BlitzMax для начинающих&amp;action=edit">править</a>]</span><span class="mw-headline">BlitzMax для начинающих</span></h1>
</p>
<a name=".D0.A7.D0.B0.D1.81.D1.82.D1.8C_1"></a><h2><span class="editsection">[<a href="http://blitzetcetera.org/index.php?title=BlitzMax_%D0%B4%D0%BB%D1%8F_%D0%BD%D0%B0%D1%87%D0%B8%D0%BD%D0%B0%D1%8E%D1%89%D0%B8%D1%85&amp;action=edit&amp;section=1" title="BlitzMax для начинающих">править</a>]</span> <span class="mw-headline">Часть 1</span></h2>
<p>Это простенький тьюториал по BlitzMax. Цель в том, чтобы нарисовать какой-нить текст на экране в графическом режиме. OK, давайте не будем терять время и сразу перейдем к установке графического режима.
</p>
<div class="bmx" style="font-family: monospace;background-color:#FFFFFF;border:1px dashed #CCCCCC;padding:10px;background-color:#01516B;color:#FFFFFF;border:1px solid #003040;padding:10px;">width=<span style="color: #FFFFFF;">640</span><br />
<p>height=<span style="color: #FFFFFF;">480</span><br />
depth=<span style="color: #FFFFFF;">16</span><br />
</p>
<span style="color: #ffff00; font-weight: bold;">Graphics</span> width,height,depth</div>
<p>Сперва определим переменные для хранения высоты, ширины, и глубины цвета - таким образом, мы сможем использовать их позже, если\когда нам понадобится знать параметры экрана.
</p><p>Затем мы используем комманду Graphics, чтобы установить графический режим и создать полноэкранное окно разрешением 640x480 и глубиной цвета в 16 бит, чтобы можно было рисовать в нем. Перед рисованием чего-либо на экране мы должны обязательно использовать команду Graphics. 
</p><p>Теперь, давайте напишем какой-нибудь текст на экране. В отличии от Blitz3D, мы используем растровые шрифты для отображения текста вместо простых шрифтов. Растровые шрифты лучше преобразуемых шрифтов, потому что они отображаются быстрее и с ними можно обращаться, как с обычными картинками, т.е. мы можем их блендить, крутить и т.д. 
</p>
<div class="bmx" style="font-family: monospace;background-color:#FFFFFF;border:1px dashed #CCCCCC;padding:10px;background-color:#01516B;color:#FFFFFF;border:1px solid #003040;padding:10px;">font=<span style="color: #ffff00; font-weight: bold;">LoadImageFont</span><span style=" ">&#40;</span><span style="color: #00FF66;">&quot;Arial.ttf&quot;</span>,<span style="color: #FFFFFF;">1</span><span style=" ">&#41;</span><br />
<span style="color: #ffff00; font-weight: bold;">SetImageFont</span> font</div>
<p>Первая строка загружает наш шрифт в память и возвращает указатель на адрес в памяти, который мы можем потом использовать для установки шрифта текущим, что мы и делаем во второй строке. 
</p><p>Теперь давайте начнем наш главный цикл. 
</p>
<div class="bmx" style="font-family: monospace;background-color:#FFFFFF;border:1px dashed #CCCCCC;padding:10px;background-color:#01516B;color:#FFFFFF;border:1px solid #003040;padding:10px;"><span style="color: #ffff00; font-weight: bold;">While</span> <span style="color: #ffff00; font-weight: bold;">Not</span> <span style="color: #ffff00; font-weight: bold;">KeyDown</span><span style=" ">&#40;</span>KEY_ESCAPE<span style=" ">&#41;</span></div>
<p>Это начало нашего главного цикла. Он просто проверяет, нажат ли Esc или нет - если нажат, то мы выйдем из цикла, а если нет, то код внутри цикла будет выполняться дальше. 
</p><p>Мы использовали KEY_ESCAPE в нашем цикле, но не определили его значение в начале. Дело тут в том, что есть такой модуль, содержащий константы со СканКодами (номерами клавиш), одной из таких констант является KEY_ESCAPE. 
</p><p>ОК, теперь давай нарисуем наш текст.  
</p>
<div class="bmx" style="font-family: monospace;background-color:#FFFFFF;border:1px dashed #CCCCCC;padding:10px;background-color:#01516B;color:#FFFFFF;border:1px solid #003040;padding:10px;"><span style="color: #ffff00; font-weight: bold;">DrawText</span> <span style="color: #00FF66;">&quot;Hello World&quot;</span>,<span style="color: #FFFFFF;">0</span>,<span style="color: #FFFFFF;">0</span></div>
<p>Этот код выведет текст "Hello World" в backbuffer(Задний Буфер) с координатами 0,0 используя текущий шрифт, который мы установили ранее. 
</p><p>0,0 в BlitzMax - это верхний левый угол экрана. Если мы хотим двигать текст вправо\влево, то нам нужно только изменить (больше - правее) переменную x (первое значение), а если вверх \ вниз, изменить (больше - ниже) переменную y (второе значение). Чтобы отобразить текст в нижнем правом углу, то мы можем выставить значения близкие к тем, которые мы использовали в комманде Graphics - 640 и 480. 
</p><p>BackBuffer (Задний Буфер) - это как бы спрятанный экран, который позволяет тебе рисовать что угодно, без показывания самого процесса рисования на экране во время вызова команды рисования. 
</p><p>Когда ты захочешь показать всё то, что ты нарисовал, то тебе понадобится "перевернуть" (Flip-нуть) BackBuffer, тогда он займет место FrontBuffer-а (картинка, которую мы видим). Это мы сейчас и сделаем. 
</p>
<div class="bmx" style="font-family: monospace;background-color:#FFFFFF;border:1px dashed #CCCCCC;padding:10px;background-color:#01516B;color:#FFFFFF;border:1px solid #003040;padding:10px;"><span style="color: #ffff00; font-weight: bold;">Flip</span></div>
<p>Это напишет наш текст на экране. Круто!.
</p><p>Итак, что будем делать теперь? Ну, самым лучшим, наверное, будет, если мы отчистим backbuffer. "Но",- спросишь ты, - "зачем?". Ну, таким образом мы сможем рисовать заново в следующем повторении цикла. Так действует движок большинства игр - рисует всё в BackBuffer, "flip-ает" его, затем очищает, чтобы можно было начинать рисовать следующий кадр.
</p>
<div class="bmx" style="font-family: monospace;background-color:#FFFFFF;border:1px dashed #CCCCCC;padding:10px;background-color:#01516B;color:#FFFFFF;border:1px solid #003040;padding:10px;"><span style="color: #ffff00; font-weight: bold;">Cls</span></div>
<p>Теперь наш backbuffer чист, и мы можем начать всё заново...
</p>
<div class="bmx" style="font-family: monospace;background-color:#FFFFFF;border:1px dashed #CCCCCC;padding:10px;background-color:#01516B;color:#FFFFFF;border:1px solid #003040;padding:10px;"><span style="color: #ffff00; font-weight: bold;">Wend</span></div>
<p>Это конец нашего главного цикла. У каждого цикла должны быть свое начало и конец, и когда BlitzMax достигнет конца, он начнет всё с начала.
</p><p>Это наша первая прога на BlitzMax! Она просто выводит надпись "Hello World" на экран. Вот весь код. 
</p>
<div class="bmx" style="font-family: monospace;background-color:#FFFFFF;border:1px dashed #CCCCCC;padding:10px;background-color:#01516B;color:#FFFFFF;border:1px solid #003040;padding:10px;">width=<span style="color: #FFFFFF;">640</span><br />
<p>height=<span style="color: #FFFFFF;">480</span><br />
depth=<span style="color: #FFFFFF;">16</span><br />
<span style="color: #ffff00; font-weight: bold;">Graphics</span> width,height,depth <br />
<br />
font=<span style="color: #ffff00; font-weight: bold;">LoadImageFont</span><span style=" ">&#40;</span><span style="color: #00FF66;">&quot;Arial.ttf&quot;</span>,<span style="color: #FFFFFF;">1</span><span style=" ">&#41;</span><br />
<span style="color: #ffff00; font-weight: bold;">SetImageFont</span> font<br />
<br />
<span style="color: #ffff00; font-weight: bold;">While</span> <span style="color: #ffff00; font-weight: bold;">Not</span> <span style="color: #ffff00; font-weight: bold;">KeyDown</span><span style=" ">&#40;</span>KEY_ESCAPE<span style=" ">&#41;</span><br />
<br />
&nbsp;<span style="color: #ffff00; font-weight: bold;">DrawText</span> <span style="color: #00FF66;">&quot;Hello World&quot;</span>,<span style="color: #FFFFFF;">0</span>,<span style="color: #FFFFFF;">0</span><br />
<br />
&nbsp;<span style="color: #ffff00; font-weight: bold;">Flip</span><br />
&nbsp;<span style="color: #ffff00; font-weight: bold;">Cls</span><br />
<br />
</p>
<span style="color: #ffff00; font-weight: bold;">Wend</span></div>
<p><br />
</p>
<a name=".D0.A7.D0.B0.D1.81.D1.82.D1.8C_2"></a><h2><span class="editsection">[<a href="http://blitzetcetera.org/index.php?title=BlitzMax_%D0%B4%D0%BB%D1%8F_%D0%BD%D0%B0%D1%87%D0%B8%D0%BD%D0%B0%D1%8E%D1%89%D0%B8%D1%85&amp;action=edit&amp;section=2" title="BlitzMax для начинающих">править</a>]</span> <span class="mw-headline">Часть 2</span></h2>
<p>На этот раз мы нарисуем лого BlitzMax на экране и будем его крутить. Как и раньше, мы начнем с установки графического режима. 
</p>
<div class="bmx" style="font-family: monospace;background-color:#FFFFFF;border:1px dashed #CCCCCC;padding:10px;background-color:#01516B;color:#FFFFFF;border:1px solid #003040;padding:10px;">width=<span style="color: #FFFFFF;">640</span><br />
<p>height=<span style="color: #FFFFFF;">480</span><br />
depth=<span style="color: #FFFFFF;">16</span><br />
</p>
<span style="color: #ffff00; font-weight: bold;">Graphics</span> width,height,depth</div>
<p>ОК, нам нужна какая-нибудь картинка. Лого BlitzMax, думаю, подойдет. Вот она в .png формате. 
</p>
<div class="center"><div class="floatnone"><span><a href="http://blitzetcetera.org/index.php/%D0%98%D0%B7%D0%BE%D0%B1%D1%80%D0%B0%D0%B6%D0%B5%D0%BD%D0%B8%D0%B5:BMax-Logo.png" class="image" title=""><img alt="" longdesc="http://blitzetcetera.org/index.php/%D0%98%D0%B7%D0%BE%D0%B1%D1%80%D0%B0%D0%B6%D0%B5%D0%BD%D0%B8%D0%B5:BMax-Logo.png" src="nd5o45q1.png" width="120" height="120" /></a></span></div></div>
<p>Мы положим нашу картинку в папку с исходником  и, затем, загрузим её, используя функцию LoadImage. 
</p>
<div class="bmx" style="font-family: monospace;background-color:#FFFFFF;border:1px dashed #CCCCCC;padding:10px;background-color:#01516B;color:#FFFFFF;border:1px solid #003040;padding:10px;">logo=<span style="color: #ffff00; font-weight: bold;">LoadImage</span><span style=" ">&#40;</span><span style="color: #00FF66;">&quot;BMax-Logo.png&quot;</span><span style=" ">&#41;</span></div>
<p>Функция LoadImage() загружает картинку и возвращает её адрес в памяти, который мы присвоили переменной logo. Теперь мы можем использовать эту переменную, чтобы нарисовать нашу картинку. После загрузки картинки мы начинаем наш главный цикл.
</p>
<div class="bmx" style="font-family: monospace;background-color:#FFFFFF;border:1px dashed #CCCCCC;padding:10px;background-color:#01516B;color:#FFFFFF;border:1px solid #003040;padding:10px;"><span style="color: #ffff00; font-weight: bold;">While</span> <span style="color: #ffff00; font-weight: bold;">Not</span> <span style="color: #ffff00; font-weight: bold;">KeyDown</span><span style=" ">&#40;</span>KEY_ESCAPE<span style=" ">&#41;</span></div>
<p>Итак, давай нарисуем нашу картинку на экране. Мы можем сделать это использованием функции DrawImage с данными переменной logo.  
</p>
<div class="bmx" style="font-family: monospace;background-color:#FFFFFF;border:1px dashed #CCCCCC;padding:10px;background-color:#01516B;color:#FFFFFF;border:1px solid #003040;padding:10px;"><span style="color: #ffff00; font-weight: bold;">DrawImage</span> logo,width/<span style="color: #FFFFFF;">2</span>,height/<span style="color: #FFFFFF;">2</span></div>
<p>Эти строки рисуют нашу картинку на backbuffer-е с координатами 320(width/2),240(height/2). Это как раз половина размера окна, которое мы создали командой Graphics; таким образом картинка будет нарисована в центре экрана. 
</p><p>Если бы! Знаешь, у картинок есть handle(так его лучше называть(не используя слово "пимпа":))), за который картинку можно таскать по экрану. Ты наверное ничего не понял, так вот: представь себе листок бумаги и канцелярскую кнопку, чтобы прилепить бумажку к стенке тебе нужно проткнуть бумажку и воткнуть кнопку в стенку. Так вот: в приведенном примере: кнопка - это handle, координаты handle: X - расстояние от левого края бумажки до места протыкания кнопкой, Y - расстояние от верхнего края бумажки до места протыкания кнопкой, ну и соответственно бумажка - это картинка. 
</p><p>В BlitzMax этот handle невидим, но всё же определяет, как картинки будут располагаться и вращаться. Когда нужно расположить картинку, то её handle ставится в требуемую позицию, ну а картинка, "привязанная" к нему двигается вместе с ним. Когда поворачивают картинку, то её поворачивают вокруг handle. 
</p><p>По умолчанию, handle картинки расположен в её верхнем левом углу. Но нам, конечно, этого не надо, нам надо, чтобы он был в центре. Это, однако, очень просто делается:
</p>
<div class="bmx" style="font-family: monospace;background-color:#FFFFFF;border:1px dashed #CCCCCC;padding:10px;background-color:#01516B;color:#FFFFFF;border:1px solid #003040;padding:10px;"><span style="color: #ffff00; font-weight: bold;">AutoMidHandle</span> <span style="color: #ffff00; font-weight: bold;">True</span></div>
<p>Если мы будем использовать эту команду перед загрузкой всех картинок, то после их загрузки в дальнейшем, их handle будет располагаться точно посередине. 
</p><p>Итак, у нас есть картинка с handle-ом посередине, так давай её покрутим. Крутить картинку (в реальном времени) в BlitzMax очень просто, нужно использовать функцию SetRotation.
</p>
<div class="bmx" style="font-family: monospace;background-color:#FFFFFF;border:1px dashed #CCCCCC;padding:10px;background-color:#01516B;color:#FFFFFF;border:1px solid #003040;padding:10px;"><span style="color: #ffff00; font-weight: bold;">SetRotation</span> ang</div>
<p>Вставь эту строку прямо перед строкой с DrawImage(). Она определяет угол поворота, на который будут поворачиваться все картинки при их рисовании. 
</p><p>Если мы хотим нарисовать две картинки с разным углом поворота, то нам придется использовать функцию SetRotation дважды перед каждым использованием DrawImage.  
</p><p>Не будем мудрить, и используем её всего один раз. Мы будем хранить значение угла в переменной ang, чтобы можно было потом его изменить.
</p>
<div class="bmx" style="font-family: monospace;background-color:#FFFFFF;border:1px dashed #CCCCCC;padding:10px;background-color:#01516B;color:#FFFFFF;border:1px solid #003040;padding:10px;">ang=ang<span style="color: #FFFFFF;">+1</span></div>
<p>Вставь эту строку в любое место главного цикла. Она увеличивает значение угла поворота, так, что при исполнении программы, картинка будет крутиться. Затем нужно flip-нуть буфер, очистить экран, и закончить главный цикл.
</p><p>Вот весь код, при его исполнении должно появиться крутящееся лого BlitzMax в центре экрана.
</p>
<div class="bmx" style="font-family: monospace;background-color:#FFFFFF;border:1px dashed #CCCCCC;padding:10px;background-color:#01516B;color:#FFFFFF;border:1px solid #003040;padding:10px;">width=<span style="color: #FFFFFF;">640</span><br />
<p>height=<span style="color: #FFFFFF;">480</span><br />
depth=<span style="color: #FFFFFF;">16</span><br />
<span style="color: #ffff00; font-weight: bold;">Graphics</span> width,height,depth<br />
<br />
<span style="color: #ffff00; font-weight: bold;">AutoMidHandle</span> <span style="color: #ffff00; font-weight: bold;">True</span><br />
<br />
logo=<span style="color: #ffff00; font-weight: bold;">LoadImage</span><span style=" ">&#40;</span><span style="color: #00FF66;">&quot;BMax-Logo.png&quot;</span><span style=" ">&#41;</span><br />
<br />
<span style="color: #ffff00; font-weight: bold;">While</span> <span style="color: #ffff00; font-weight: bold;">Not</span> <span style="color: #ffff00; font-weight: bold;">KeyDown</span><span style=" ">&#40;</span>KEY_ESCAPE<span style=" ">&#41;</span><br />
<br />
ang=ang<span style="color: #FFFFFF;">+1</span><br />
<span style="color: #ffff00; font-weight: bold;">SetRotation</span> ang<br />
<span style="color: #ffff00; font-weight: bold;">DrawImage</span> logo,width/<span style="color: #FFFFFF;">2</span>,height/<span style="color: #FFFFFF;">2</span><br />
<br />
<span style="color: #ffff00; font-weight: bold;">Flip</span><br />
<span style="color: #ffff00; font-weight: bold;">Cls</span><br />
<br />
</p>
<span style="color: #ffff00; font-weight: bold;">Wend</span></div>
<a name=".D0.A7.D0.B0.D1.81.D1.82.D1.8C_3"></a><h2><span class="editsection">[<a href="http://blitzetcetera.org/index.php?title=BlitzMax_%D0%B4%D0%BB%D1%8F_%D0%BD%D0%B0%D1%87%D0%B8%D0%BD%D0%B0%D1%8E%D1%89%D0%B8%D1%85&amp;action=edit&amp;section=3" title="BlitzMax для начинающих">править</a>]</span> <span class="mw-headline">Часть 3</span></h2>
<p>Теперь мы модифицируем исходник из второй части, заставив лого ездить по экрану и отскакивать от его краев, оставляя при этом красивейший шлейф.
</p>
<div class="center"><div class="floatnone"><span><a href="http://blitzetcetera.org/index.php/%D0%98%D0%B7%D0%BE%D0%B1%D1%80%D0%B0%D0%B6%D0%B5%D0%BD%D0%B8%D0%B5:BMax-Logo.png" class="image" title=""><img alt="" longdesc="http://blitzetcetera.org/index.php/%D0%98%D0%B7%D0%BE%D0%B1%D1%80%D0%B0%D0%B6%D0%B5%D0%BD%D0%B8%D0%B5:BMax-Logo.png" src="nd5o45q1.png" width="120" height="120" /></a></span></div></div>
<p>ОК, для начала нужно заставить лого отскакивать от краев экрана. Делается это очень просто. Сперва создаем две переменные для хранения текущего направления движения картинки по X и по Y - соответственно xmove и ymove, со значениями или +1 или -1. Для начала выставим обе равными +1. 
</p>
<div class="bmx" style="font-family: monospace;background-color:#FFFFFF;border:1px dashed #CCCCCC;padding:10px;background-color:#01516B;color:#FFFFFF;border:1px solid #003040;padding:10px;">xmove=<span style="color: #FFFFFF;">1</span><br />
ymove=<span style="color: #FFFFFF;">1</span></div>
<p>Вставь эти строки перед началом главного цикла. Теперь нам нужно ввести ещё две переменные для хранения текущих координат картинки - xpos и ypos. 
</p>
<div class="bmx" style="font-family: monospace;background-color:#FFFFFF;border:1px dashed #CCCCCC;padding:10px;background-color:#01516B;color:#FFFFFF;border:1px solid #003040;padding:10px;">xpos=xpos+xmove<br />
ypos=ypos+ymove</div>
<p>Вставь эти строки где угодно в главный цикл. Они будут добавлять текущие значения xmove и ymove к координатам xpos и ypos, так что за каждое исполнение цикла координаты картинки будут изменятся на 1 пиксель и по X и по Y.
</p><p>Нам также придется изменить параметры команды DrawImage, чтобы использовать значения переменных xpos и ypos для позиционирования картинки. 
</p>
<div class="bmx" style="font-family: monospace;background-color:#FFFFFF;border:1px dashed #CCCCCC;padding:10px;background-color:#01516B;color:#FFFFFF;border:1px solid #003040;padding:10px;"><span style="color: #ffff00; font-weight: bold;">DrawImage</span> logo,xpos,ypos</div>
<p>На данный момент у нас есть картинка (лого BlitzMax), появляющаяся в верхнем левом углу и, затем уезжающая вниз вправо за экран. Это не то что нам надо - картинка не отскакивает от экрана. 
</p><p>Так сделаем, как нам надо: будем проверять - не больше ли координаты картинки (xpos и ypos) чем размеры экрана, а если это так, то будем обращать значения xmove и ymove, так что картинка изменит направление движения и получится эффект отскакивания. 
</p>
<div class="bmx" style="font-family: monospace;background-color:#FFFFFF;border:1px dashed #CCCCCC;padding:10px;background-color:#01516B;color:#FFFFFF;border:1px solid #003040;padding:10px;"><span style="color: #ffff00; font-weight: bold;">If</span> xpos&gt;width-<span style=" ">&#40;</span><span style="color: #ffff00; font-weight: bold;">ImageWidth</span><span style=" ">&#40;</span>logo<span style=" ">&#41;</span>/<span style="color: #FFFFFF;">2</span><span style=" ">&#41;</span> <span style="color: #ffff00; font-weight: bold;">Then</span> xmove=<span style="color: #FFFFFF;">-1</span><br />
<p>&nbsp;<span style="color: #ffff00; font-weight: bold;">If</span> xpos&lt;<span style="color: #FFFFFF;">0</span>+<span style=" ">&#40;</span><span style="color: #ffff00; font-weight: bold;">ImageWidth</span><span style=" ">&#40;</span>logo<span style=" ">&#41;</span>/<span style="color: #FFFFFF;">2</span><span style=" ">&#41;</span> <span style="color: #ffff00; font-weight: bold;">Then</span> xmove=<span style="color: #FFFFFF;">1</span><br />
&nbsp;<span style="color: #ffff00; font-weight: bold;">If</span> ypos&gt;height-<span style=" ">&#40;</span><span style="color: #ffff00; font-weight: bold;">ImageHeight</span><span style=" ">&#40;</span>logo<span style=" ">&#41;</span>/<span style="color: #FFFFFF;">2</span><span style=" ">&#41;</span> <span style="color: #ffff00; font-weight: bold;">Then</span> ymove=<span style="color: #FFFFFF;">-1</span><br />
</p>
&nbsp;<span style="color: #ffff00; font-weight: bold;">If</span> ypos&lt;<span style="color: #FFFFFF;">0</span>+<span style=" ">&#40;</span><span style="color: #ffff00; font-weight: bold;">ImageWidth</span><span style=" ">&#40;</span>logo<span style=" ">&#41;</span>/<span style="color: #FFFFFF;">2</span><span style=" ">&#41;</span> <span style="color: #ffff00; font-weight: bold;">Then</span> ymove=<span style="color: #FFFFFF;">1</span></div>
<p>Вставь этот код куда-нибудь в главный цикл. Как видишь, первая строка проверяет, не больше ли xpos, чем ширина экрана, а если так, то ставит xmove равной -1. Вторая линия проверяет не меньше ли нуля xpos, а если так,то ставит xmove равной 1. Последние две линии делают тоже самое, но только с ymove. 
</p><p>При проверке на столкновение мы приняли во внимание ширину картинки, если этого не сделать, то мы будем видеть кусок картинки на краю экрана при отскакивании. Так как handle нашей картинки находится в центре, то мы вычитаем половину высоты/ширины при проверке на столкновением с низом / правым краем экрана и прибавляем половину ширины / высоты при сравнении с 0. 
</p><p>Итак, теперь наше лого ездит по экрану и отскакивает от его краев. Зашибись! Осталось только одно - забабахать эффект шлейфа. 
</p><p>Мы будем использовать блендинг (blending). Блендинг определяет как картинка будет нарисована на экране - при SOLIDBLEND, режимом по умолчанию, картинки будут рисоваться на экране полностью однотонными (такими как они есть в файле). Цвет фона (background) игнорируется. 
</p><p>Мы будем использовать режим LIGHTBLEND. При LIGHTBLEND картинка рисуется на экране, но цвет фона (background) не игнорируется. Вместо того для каждого пикселя картинки, цвет фона (background) прибавляется к цвету пикселя картинки. Следовательно если цвет фона (background-а) черный (нулевой цвет), то нарисованная картинка будет выглядеть светлее оригинала. 
</p><p>Наш фон черный, и на данный момент это не принесет никакого эффекта. Фрукт в том, чтобы закомментировать команду Cls и, следовательно, не очищать экран каждую итерацию (повторение) цикла. Когда же лого будет ездить по экрану, оно будет рисоваться поверх себя, и тогда, наконец, LIGHTBLEND принесет эффект. 
</p><p>Есть ещё одна вещь, которую следует сделать. Сейчас, значения цвета пикселей лого большие, настолько большие, что когда мы будем рисовать 3-тий слой картинок мы получим монотонную картинку(такую какая была файле). 
</p><p>Для улучшения эффекта мы сделаем картинку прозрачной, т.е. поставим прозрачность картинки равной 0.1(можно и другую), - это уменьшит значения цветов пикселей картинки и даст более красивый эффект. 
</p><p>Так давай внесем эти изменения в код.
</p><p>Сначала поменяем прозрачность картинки и установим режим блендинга (blending) командами SetAlpha и SetBlend. Как и SetRotation, эти команды определяют параметры (прозрачность, режим блендинга) всех картинок, и они остаются такими пока команды не используются вновь с новыми значениями. В нашем случае, нам следует использовать эти команды только один раз, вставь следующие строки перед началом главного цикла. 
</p>
<div class="bmx" style="font-family: monospace;background-color:#FFFFFF;border:1px dashed #CCCCCC;padding:10px;background-color:#01516B;color:#FFFFFF;border:1px solid #003040;padding:10px;"><span style="color: #ffff00; font-weight: bold;">SetAlpha</span> <span style="color: #FFFFFF;">0.1</span><br />
<span style="color: #ffff00; font-weight: bold;">SetBlend</span> LIGHTBLEND</div>
<p>И, наконец, закомментируй команду Cls. 
</p>
<div class="bmx" style="font-family: monospace;background-color:#FFFFFF;border:1px dashed #CCCCCC;padding:10px;background-color:#01516B;color:#FFFFFF;border:1px solid #003040;padding:10px;"><span style="color: #B1E7EB;">'Cls</span></div>
<p>В BlitzMax знак комментирования ' а не&nbsp;;. Вот и весь код:. 
</p>
<div class="bmx" style="font-family: monospace;background-color:#FFFFFF;border:1px dashed #CCCCCC;padding:10px;background-color:#01516B;color:#FFFFFF;border:1px solid #003040;padding:10px;">width=<span style="color: #FFFFFF;">640</span><br />
<p>height=<span style="color: #FFFFFF;">480</span><br />
depth=<span style="color: #FFFFFF;">16</span><br />
<span style="color: #ffff00; font-weight: bold;">Graphics</span> width,height,depth<br />
<br />
<span style="color: #ffff00; font-weight: bold;">AutoMidHandle</span> <span style="color: #ffff00; font-weight: bold;">True</span><br />
<br />
logo=<span style="color: #ffff00; font-weight: bold;">LoadImage</span><span style=" ">&#40;</span><span style="color: #00FF66;">&quot;BMax-Logo.png&quot;</span><span style=" ">&#41;</span><br />
<br />
xmove=<span style="color: #FFFFFF;">1</span><br />
ymove=<span style="color: #FFFFFF;">1</span><br />
<br />
<span style="color: #ffff00; font-weight: bold;">SetAlpha</span> <span style="color: #FFFFFF;">0.1</span><br />
<span style="color: #ffff00; font-weight: bold;">SetBlend</span> LIGHTBLEND<br />
<br />
<span style="color: #ffff00; font-weight: bold;">While</span> <span style="color: #ffff00; font-weight: bold;">Not</span> <span style="color: #ffff00; font-weight: bold;">KeyDown</span><span style=" ">&#40;</span>KEY_ESCAPE<span style=" ">&#41;</span><br />
<br />
&nbsp;ang=ang<span style="color: #FFFFFF;">+1</span><br />
&nbsp;<span style="color: #ffff00; font-weight: bold;">SetRotation</span> ang<br />
<br />
&nbsp;xpos=xpos+xmove<br />
&nbsp;ypos=ypos+ymove<br />
<br />
&nbsp;<span style="color: #ffff00; font-weight: bold;">If</span> xpos&gt;width-<span style=" ">&#40;</span><span style="color: #ffff00; font-weight: bold;">ImageWidth</span><span style=" ">&#40;</span>logo<span style=" ">&#41;</span>/<span style="color: #FFFFFF;">2</span><span style=" ">&#41;</span> <span style="color: #ffff00; font-weight: bold;">Then</span> xmove=<span style="color: #FFFFFF;">-1</span><br />
&nbsp;<span style="color: #ffff00; font-weight: bold;">If</span> xpos&lt;<span style="color: #FFFFFF;">0</span>+<span style=" ">&#40;</span><span style="color: #ffff00; font-weight: bold;">ImageWidth</span><span style=" ">&#40;</span>logo<span style=" ">&#41;</span>/<span style="color: #FFFFFF;">2</span><span style=" ">&#41;</span> <span style="color: #ffff00; font-weight: bold;">Then</span> xmove=<span style="color: #FFFFFF;">1</span><br />
&nbsp;<span style="color: #ffff00; font-weight: bold;">If</span> ypos&gt;height-<span style=" ">&#40;</span><span style="color: #ffff00; font-weight: bold;">ImageHeight</span><span style=" ">&#40;</span>logo<span style=" ">&#41;</span>/<span style="color: #FFFFFF;">2</span><span style=" ">&#41;</span> <span style="color: #ffff00; font-weight: bold;">Then</span> ymove=<span style="color: #FFFFFF;">-1</span><br />
&nbsp;<span style="color: #ffff00; font-weight: bold;">If</span> ypos&lt;<span style="color: #FFFFFF;">0</span>+<span style=" ">&#40;</span><span style="color: #ffff00; font-weight: bold;">ImageWidth</span><span style=" ">&#40;</span>logo<span style=" ">&#41;</span>/<span style="color: #FFFFFF;">2</span><span style=" ">&#41;</span> <span style="color: #ffff00; font-weight: bold;">Then</span> ymove=<span style="color: #FFFFFF;">1</span><br />
<br />
&nbsp;<span style="color: #ffff00; font-weight: bold;">DrawImage</span> logo,xpos,ypos<br />
<br />
&nbsp;<span style="color: #ffff00; font-weight: bold;">Flip</span><br />
&nbsp;<span style="color: #B1E7EB;">'Cls</span><br />
<br />
</p>
<span style="color: #ffff00; font-weight: bold;">Wend</span></div>
<p>Если всё сделал правильно, то должно появится что-то вроде этого: 
</p>
<div class="center"><div class="floatnone"><span><a href="http://blitzetcetera.org/index.php/%D0%98%D0%B7%D0%BE%D0%B1%D1%80%D0%B0%D0%B6%D0%B5%D0%BD%D0%B8%D0%B5:BMaxForBeginners.jpg" class="image" title=""><img alt="" longdesc="http://blitzetcetera.org/index.php/%D0%98%D0%B7%D0%BE%D0%B1%D1%80%D0%B0%D0%B6%D0%B5%D0%BD%D0%B8%D0%B5:BMaxForBeginners.jpg" src="tgpy9yyb.jpg" width="320" height="240" /></a></span></div></div>
<div align="right"><a href="http://blitzetcetera.org/images/3/37/BlitzMax_For_Beginners.zip" class="internal" title="BlitzMax For Beginners.zip">скачать архив с файлами к статье</a></div>
<hr />
<p>Автор: Mark Sibly<br />
Перевод: <a href="http://blitzetcetera.org/index.php/%D0%A3%D1%87%D0%B0%D1%81%D1%82%D0%BD%D0%B8%D0%BA:MANIAK_dobrii" title="Участник:MANIAK dobrii">MANIAK dobrii</a> (e-mail: MANIAK_dobrii@list.ru, сайт: <a href="http://www.maniak-dobrii.nm.ru/" class="external free" title="http://www.maniak-dobrii.nm.ru/" rel="nofollow">http://www.maniak-dobrii.nm.ru/</a>)
</td><td class="rightside"><table cellspacing=0 cellpadding=0><tr><td class="rightheader"></td></tr></table></td></tr><tr colspan="3" height="40"><td>&nbsp;</td></tr><tr><td class="leftside"><table cellspacing=0 cellpadding=0><tr><td class="leftheader"></td></tr></table></td><td class="sheetbody"><a name="Связанные списки в Blitz3D"></a><h1><span class="editsection">[<a href="http://blitzetcetera.org/index.php?title=Обсуждение:Связанные списки в Blitz3D&amp;action=edit">обсудить</a>] [<a href="http://blitzetcetera.org/index.php?title=Связанные списки в Blitz3D&amp;action=edit">править</a>]</span><span class="mw-headline">Связанные списки в Blitz3D</span></h1>
</p>
<a name=".D0.92.D0.B2.D0.B5.D0.B4.D0.B5.D0.BD.D0.B8.D0.B5_2"></a><h2><span class="editsection">[<a href="http://blitzetcetera.org/index.php?title=%D0%A1%D0%B2%D1%8F%D0%B7%D0%B0%D0%BD%D0%BD%D1%8B%D0%B5_%D1%81%D0%BF%D0%B8%D1%81%D0%BA%D0%B8_%D0%B2_Blitz3D&amp;action=edit&amp;section=1" title="Связанные списки в Blitz3D">править</a>]</span> <span class="mw-headline">Введение</span></h2>
<p>Первое что встает на пути новичков, судя по вопросам на форумах, это типы. Итак, для начала, что же это такое? Представьте себе базу данных, где каждая запись представляет собой несколько полей (имя, фамилия итд). Создать шаблон записи можно так:
</p>
<div class="bb" style="font-family: monospace;background-color:#FFFFFF;border:1px dashed #CCCCCC;padding:10px;background-color:#225588;color:#FFFFFF;border:1px solid #003040;padding:10px;"><span style="color: #aaffff; font-weight: bold;">Type</span> TestType<br />
<p>&nbsp;<span style="color: #aaffff; font-weight: bold;">Field</span> name$<br />
&nbsp;<span style="color: #aaffff; font-weight: bold;">Field</span> age<br />
</p>
<span style="color: #aaffff; font-weight: bold;">End Type</span></div>
<p>Что бы создать запись и присвоить переменной адрес этой записи, делаем так:
</p>
<div class="bb" style="font-family: monospace;background-color:#FFFFFF;border:1px dashed #CCCCCC;padding:10px;background-color:#225588;color:#FFFFFF;border:1px solid #003040;padding:10px;">Test.TestType=<span style="color: #aaffff; font-weight: bold;">New</span> TestType</div>
<p>Запись помещается в конец связанного списка. Для каждого типа создается свой список. Теперь мы можем заполнять поля записи 
</p>
<div class="bb" style="font-family: monospace;background-color:#FFFFFF;border:1px dashed #CCCCCC;padding:10px;background-color:#225588;color:#FFFFFF;border:1px solid #003040;padding:10px;">Test\name$=<span style="color: #00ff66;">&quot;Артур&quot;</span><br />
Test\Age=<span style="color: #33ffdd;">20</span></div>
<p>Итд. Для чего мы можем использовать типы? Представьте, что вы делаете систему частиц. Для каждой частицы необходимо указать скорость движения, координаты, текстуру итд. Ну, тут без типов не обойтись.
</p>
<a name=".D0.9C.D0.B0.D1.81.D1.81.D0.B8.D0.B2.D1.8B_.D0.B2_.D1.82.D0.B8.D0.BF.D0.B0.D1.85"></a><h2><span class="editsection">[<a href="http://blitzetcetera.org/index.php?title=%D0%A1%D0%B2%D1%8F%D0%B7%D0%B0%D0%BD%D0%BD%D1%8B%D0%B5_%D1%81%D0%BF%D0%B8%D1%81%D0%BA%D0%B8_%D0%B2_Blitz3D&amp;action=edit&amp;section=2" title="Связанные списки в Blitz3D">править</a>]</span> <span class="mw-headline">Массивы в типах</span></h2>
<p>Для того чтоб хранить векторы в типе удобно использовать специальный массив. Он не динамический и одномерный. От обычного массива отличается квадратными скобками. Например -  Vector[3]. Пример использования:
</p>
<div class="bb" style="font-family: monospace;background-color:#FFFFFF;border:1px dashed #CCCCCC;padding:10px;background-color:#225588;color:#FFFFFF;border:1px solid #003040;padding:10px;"><span style="color: #aaffff; font-weight: bold;">Type</span> Player<br />
<p>&nbsp;<span style="color: #aaffff; font-weight: bold;">Field</span> X%<span style=" ">&#91;</span><span style="color: #33ffdd;">10</span><span style=" ">&#93;</span>,Y%<span style=" ">&#91;</span><span style="color: #33ffdd;">10</span><span style=" ">&#93;</span><br />
&nbsp;<span style="color: #aaffff; font-weight: bold;">Field</span> Bullet%<span style=" ">&#91;</span><span style="color: #33ffdd;">5</span><span style=" ">&#93;</span><br />
<span style="color: #aaffff; font-weight: bold;">End Type</span><br />
<br />
p.Player=<span style="color: #aaffff; font-weight: bold;">New</span> Player<br />
p\x<span style=" ">&#91;</span><span style="color: #33ffdd;">1</span><span style=" ">&#93;</span>=<span style="color: #33ffdd;">320</span><br />
p\y<span style=" ">&#91;</span><span style="color: #33ffdd;">1</span><span style=" ">&#93;</span>=<span style="color: #33ffdd;">240</span><br />
</p>
p\bullet<span style=" ">&#91;</span><span style="color: #33ffdd;">4</span><span style=" ">&#93;</span>=<span style="color: #33ffdd;">32</span></div>
<p>Массив типов создается точно так же как и обычный, естественно он также является частью связанного списка. Пример:
</p>
<div class="bb" style="font-family: monospace;background-color:#FFFFFF;border:1px dashed #CCCCCC;padding:10px;background-color:#225588;color:#FFFFFF;border:1px solid #003040;padding:10px;"><span style="color: #aaffff; font-weight: bold;">Type</span> Player<br />
<p>&nbsp;<span style="color: #aaffff; font-weight: bold;">Field</span> Number%<br />
<span style="color: #aaffff; font-weight: bold;">End Type</span><br />
<br />
<span style="color: #aaffff; font-weight: bold;">Dim</span> GoodPlayer.Player<span style=" ">&#40;</span><span style="color: #33ffdd;">50</span><span style=" ">&#41;</span><br />
<span style="color: #aaffff; font-weight: bold;">Dim</span> BadPlayer.Player<span style=" ">&#40;</span><span style="color: #33ffdd;">100</span><span style=" ">&#41;</span><br />
<br />
<span style="color: #aaffff; font-weight: bold;">For</span> i=<span style="color: #33ffdd;">0</span> <span style="color: #aaffff; font-weight: bold;">To</span> <span style="color: #33ffdd;">50</span><br />
&nbsp;GoodPlayer<span style=" ">&#40;</span>i<span style=" ">&#41;</span>=<span style="color: #aaffff; font-weight: bold;">New</span> Player<br />
&nbsp;GoodPlayer<span style=" ">&#40;</span>i<span style=" ">&#41;</span>\number=i<br />
<span style="color: #aaffff; font-weight: bold;">Next</span><br />
<br />
<span style="color: #aaffff; font-weight: bold;">For</span> i=<span style="color: #33ffdd;">0</span> <span style="color: #aaffff; font-weight: bold;">To</span> <span style="color: #33ffdd;">100</span><br />
&nbsp;BadPlayer<span style=" ">&#40;</span>i<span style=" ">&#41;</span>=<span style="color: #aaffff; font-weight: bold;">New</span> Player<br />
&nbsp;BadPlayer<span style=" ">&#40;</span>i<span style=" ">&#41;</span>\number=i<br />
</p>
<span style="color: #aaffff; font-weight: bold;">Next</span></div>
<a name=".D0.A2.D0.B8.D0.BF.D1.8B_.D0.B2.D0.BD.D1.83.D1.82.D1.80.D0.B8_.D1.82.D0.B8.D0.BF.D0.BE.D0.B2"></a><h2><span class="editsection">[<a href="http://blitzetcetera.org/index.php?title=%D0%A1%D0%B2%D1%8F%D0%B7%D0%B0%D0%BD%D0%BD%D1%8B%D0%B5_%D1%81%D0%BF%D0%B8%D1%81%D0%BA%D0%B8_%D0%B2_Blitz3D&amp;action=edit&amp;section=3" title="Связанные списки в Blitz3D">править</a>]</span> <span class="mw-headline">Типы внутри типов</span></h2>
<p>Зачастую вам нужно будет создавать поля в новом типе какого-нибудь другого типа. Вот небольшой пример для иллюстрации:
</p>
<div class="bb" style="font-family: monospace;background-color:#FFFFFF;border:1px dashed #CCCCCC;padding:10px;background-color:#225588;color:#FFFFFF;border:1px solid #003040;padding:10px;"><span style="color: #aaffff; font-weight: bold;">Type</span> Parent <br />
<p>&nbsp;<span style="color: #aaffff; font-weight: bold;">Field</span> Name$ <br />
&nbsp;<span style="color: #aaffff; font-weight: bold;">Field</span> kid.child <br />
&nbsp;<span style="color: #aaffff; font-weight: bold;">Field</span> spouse.parent <br />
<span style="color: #aaffff; font-weight: bold;">End Type</span> <br />
&nbsp;<br />
<span style="color: #aaffff; font-weight: bold;">Type</span> Child <br />
&nbsp;<span style="color: #aaffff; font-weight: bold;">Field</span> Name$ <br />
&nbsp;<span style="color: #aaffff; font-weight: bold;">Field</span> mom.parent,dad.parent <br />
<span style="color: #aaffff; font-weight: bold;">End Type</span> <br />
&nbsp;<br />
papa.parent=<span style="color: #aaffff; font-weight: bold;">New</span> parent <br />
mama.parent=<span style="color: #aaffff; font-weight: bold;">New</span> parent <br />
lamer.child=<span style="color: #aaffff; font-weight: bold;">New</span> child <br />
&nbsp;<br />
papa\name=<span style="color: #00ff66;">&quot;papa&quot;</span> <br />
papa\spouse.parent=mama.parent <br />
papa\kid.child=lamer.child <br />
&nbsp;<br />
mama\name=<span style="color: #00ff66;">&quot;mama&quot;</span> <br />
mama\spouse.parent=papa.parent <br />
mama\kid.child=lamer.child <br />
&nbsp;<br />
lamer\name=<span style="color: #00ff66;">&quot;lamer&quot;</span> <br />
lamer\mom.parent=mama.parent <br />
lamer\dad.parent=papa.parent <br />
&nbsp;<br />
<span style="color: #aaffff; font-weight: bold;">For</span> c.child=<span style="color: #aaffff; font-weight: bold;">Each</span> child <br />
&nbsp;<span style="color: #aaffff; font-weight: bold;">DebugLog</span> c\name+<span style="color: #00ff66;">&quot;'s dad is &quot;</span>+c\dad\name <br />
&nbsp;<span style="color: #aaffff; font-weight: bold;">DebugLog</span> c\name+<span style="color: #00ff66;">&quot;'s mom is &quot;</span>+c\mom\name <br />
<span style="color: #aaffff; font-weight: bold;">Next</span> <br />
<span style="color: #aaffff; font-weight: bold;">For</span> p.parent=<span style="color: #aaffff; font-weight: bold;">Each</span> parent <br />
&nbsp;<span style="color: #aaffff; font-weight: bold;">DebugLog</span> p\name+<span style="color: #00ff66;">&quot; is married to &quot;</span>+p\spouse\name+<span style="color: #00ff66;">&quot; (&quot;</span>+p\kid\name+<span style="color: #00ff66;">&quot; is there child)&quot;</span> <br />
</p>
<span style="color: #aaffff; font-weight: bold;">Next</span></div>
<p>Теперь смотрите в дебуге: Все должно быть предельно понятно за исключением слова  Each. С его помощью мы пробегаем по всему связанному списку записей одного типа. Так же существуют команды Last, First, After и Before. Т.е. если вы хотите получить первую запись из списка вам необходимо сделать так: 
</p>
<div class="bb" style="font-family: monospace;background-color:#FFFFFF;border:1px dashed #CCCCCC;padding:10px;background-color:#225588;color:#FFFFFF;border:1px solid #003040;padding:10px;">FirstParentRecord.parent = <span style="color: #aaffff; font-weight: bold;">First</span> parent</div>
<p>Следующую запись:
</p>
<div class="bb" style="font-family: monospace;background-color:#FFFFFF;border:1px dashed #CCCCCC;padding:10px;background-color:#225588;color:#FFFFFF;border:1px solid #003040;padding:10px;">SecondParentRecord=<span style="color: #aaffff; font-weight: bold;">After</span><span style=" ">&#40;</span>FirstParentRecord<span style=" ">&#41;</span></div>
<p>Итд, думаю с этим все понятно... Ах да, чуть не забыл про команду Insert:
</p>
<div class="bb" style="font-family: monospace;background-color:#FFFFFF;border:1px dashed #CCCCCC;padding:10px;background-color:#225588;color:#FFFFFF;border:1px solid #003040;padding:10px;"><span style="color: #aaffff; font-weight: bold;">Insert</span> SecondParentRecord <span style="color: #aaffff; font-weight: bold;">Before</span> <span style="color: #aaffff; font-weight: bold;">First</span> parent</div>
<p>Перемещает нашу вторую запись в начало списка. Все просто. Для удаления записи используйте Delete SecondParentRecord, а для очистки всего списка Delete Each parent.
</p>
<a name=".D0.9A.D0.BE.D0.BC.D0.B0.D0.BD.D0.B4.D1.8B_Object.28.29_.D0.B8_Handle.28.29"></a><h2><span class="editsection">[<a href="http://blitzetcetera.org/index.php?title=%D0%A1%D0%B2%D1%8F%D0%B7%D0%B0%D0%BD%D0%BD%D1%8B%D0%B5_%D1%81%D0%BF%D0%B8%D1%81%D0%BA%D0%B8_%D0%B2_Blitz3D&amp;action=edit&amp;section=4" title="Связанные списки в Blitz3D">править</a>]</span> <span class="mw-headline">Команды Object() и Handle()</span></h2>
<p>Команды эти не документированы, но всем давно известны, и широко используются.
</p>
<div class="bb" style="font-family: monospace;background-color:#FFFFFF;border:1px dashed #CCCCCC;padding:10px;background-color:#225588;color:#FFFFFF;border:1px solid #003040;padding:10px;">Handle<span style=" ">&#40;</span><span style="color: #aaffff; font-weight: bold;">Type</span>.something<span style=" ">&#41;</span></div>
<p>Возвращает адрес в памяти указанного типа 
</p>
<div class="bb" style="font-family: monospace;background-color:#FFFFFF;border:1px dashed #CCCCCC;padding:10px;background-color:#225588;color:#FFFFFF;border:1px solid #003040;padding:10px;">Object.Something<span style=" ">&#40;</span>Handle%<span style=" ">&#41;</span></div>
<p>Возвращает тип по указанному адресу в памяти. Если тип не существует, то вы получите ошибку при попытке обратиться к нему. Пример:
</p>
<div class="bb" style="font-family: monospace;background-color:#FFFFFF;border:1px dashed #CCCCCC;padding:10px;background-color:#225588;color:#FFFFFF;border:1px solid #003040;padding:10px;"><span style="color: #aaffff; font-weight: bold;">Type</span> Player<br />
<p>&nbsp;<span style="color: #aaffff; font-weight: bold;">Field</span> X%,Y%<br />
<span style="color: #aaffff; font-weight: bold;">End Type</span><br />
p1.player=<span style="color: #aaffff; font-weight: bold;">New</span> player<br />
&nbsp;p1\x=<span style="color: #33ffdd;">128</span><br />
&nbsp;p1\y=<span style="color: #33ffdd;">64</span><br />
p2.player=<span style="color: #aaffff; font-weight: bold;">New</span> player<br />
&nbsp;p1\x=<span style="color: #33ffdd;">256</span><br />
&nbsp;p1\y=<span style="color: #33ffdd;">128</span><br />
<br />
address1%=Handle<span style=" ">&#40;</span>p1.player<span style=" ">&#41;</span><br />
address2%=Handle<span style=" ">&#40;</span>p2.player<span style=" ">&#41;</span><br />
copy1.player=Object.Player<span style=" ">&#40;</span>address1<span style=" ">&#41;</span><br />
copy2.player=Object.Player<span style=" ">&#40;</span>address2<span style=" ">&#41;</span><br />
</p>
<span style="color: #aaffff; font-weight: bold;">Delete</span> copy1<span style="color: #ffee00">; удаляется оригинал, так как это просто указатель</span></div>
<p>Что первое приходит в голову при виде этих команд? Конечно же быстрый доступ к отдельным записям, читайте игровым объектам. 
</p>
<div class="bb" style="font-family: monospace;background-color:#FFFFFF;border:1px dashed #CCCCCC;padding:10px;background-color:#225588;color:#FFFFFF;border:1px solid #003040;padding:10px;"><span style="color: #aaffff; font-weight: bold;">Graphics3D</span> <span style="color: #33ffdd;">640</span>,<span style="color: #33ffdd;">480</span>,<span style="color: #33ffdd;">0</span>,<span style="color: #33ffdd;">2</span><br />
<p><span style="color: #aaffff; font-weight: bold;">Type</span> info<br />
&nbsp;<span style="color: #aaffff; font-weight: bold;">Field</span> name$,a,b,c,stuff,mass#,physics,etc<br />
<span style="color: #aaffff; font-weight: bold;">End Type</span><br />
<span style="color: #ffee00">;Создаем шарик </span><br />
a.info=<span style="color: #aaffff; font-weight: bold;">New</span> info<br />
a\name$=<span style="color: #00ff66;">&quot;bowling ball&quot;</span><br />
a\mass#=<span style="color: #33ffdd;">0.9</span><br />
ball=<span style="color: #aaffff; font-weight: bold;">CreateSphere</span><span style=" ">&#40;</span><span style=" ">&#41;</span><br />
<span style="color: #aaffff; font-weight: bold;">NameEntity</span> ball,Handle<span style=" ">&#40;</span>a<span style=" ">&#41;</span> <span style="color: #ffee00">; Записываем адрес в имя объекта </span><br />
<span style="color: #ffee00">;Теперь, когда вы к примеру получили объект используя &nbsp;LinePicks, коллизии итд </span><br />
ent = <span style="color: #aaffff; font-weight: bold;">EntityCollided</span><span style=" ">&#40;</span>bat,collisiontype_ball<span style=" ">&#41;</span><br />
<span style="color: #aaffff; font-weight: bold;">If</span> ent<br />
&nbsp;a.info = Object.info<span style=" ">&#40;</span><span style="color: #aaffff; font-weight: bold;">EntityName</span><span style=" ">&#40;</span>ent<span style=" ">&#41;</span><span style=" ">&#41;</span> <span style="color: #ffee00">; получаем нужный нам тип </span><br />
&nbsp;<span style="color: #aaffff; font-weight: bold;">Print</span> a\name$ <span style="color: #ffee00">; и читаем все параметры J </span><br />
&nbsp;<span style="color: #aaffff; font-weight: bold;">Print</span> a\mass#<br />
</p>
<span style="color: #aaffff; font-weight: bold;">End</span> <span style="color: #aaffff; font-weight: bold;">If</span></div>
<p>Таким образом, мы избавляемся от перебора всех записей в поисках нужной через Each.
</p>
<a name=".D0.A1.D0.BE.D0.B7.D0.B4.D0.B0.D0.BD.D0.B8.D0.B5_.D1.81.D0.B2.D0.BE.D0.B8.D1.85_.D1.81.D0.BE.D0.B1.D1.81.D1.82.D0.B2.D0.B5.D0.BD.D0.BD.D1.8B.D1.85_.D1.81.D0.B2.D1.8F.D0.B7.D0.B0.D0.BD.D0.BD.D1.8B.D1.85_.D1.81.D0.BF.D0.B8.D1.81.D0.BA.D0.BE.D0.B2"></a><h2><span class="editsection">[<a href="http://blitzetcetera.org/index.php?title=%D0%A1%D0%B2%D1%8F%D0%B7%D0%B0%D0%BD%D0%BD%D1%8B%D0%B5_%D1%81%D0%BF%D0%B8%D1%81%D0%BA%D0%B8_%D0%B2_Blitz3D&amp;action=edit&amp;section=5" title="Связанные списки в Blitz3D">править</a>]</span> <span class="mw-headline">Создание своих собственных связанных списков</span></h2>
<p>Итак мы наконец подошли к связанным спискам! При создании записей они, как я уже упоминал, помещаются в список. А что если нам нужно несколько списков? Скажем у нас есть куча юнитов. Некоторые из них активны, некоторые нет: Можно задать поле Active и смотреть активный обьект или нет, если активный то обновлять, но в таком случае нам придется перебирать все время всех юнитов. А можно создать отдельный список и помещать туда только тех юнитов которые в данный момент активны и работать уже с этим списком. Для этого скачайте этот <a href="http://blitzetcetera.org/index.php?title=%D0%A1%D0%BB%D1%83%D0%B6%D0%B5%D0%B1%D0%BD%D0%B0%D1%8F:Upload&amp;wpDestFile=BList.bb" class="new" title="BList.bb">файл</a>. Заинклудим его в проект и можем использовать списки:
</p>
<div class="bb" style="font-family: monospace;background-color:#FFFFFF;border:1px dashed #CCCCCC;padding:10px;background-color:#225588;color:#FFFFFF;border:1px solid #003040;padding:10px;"><span style="color: #aaffff; font-weight: bold;">Type</span> Ball<br />
<p><span style="color: #aaffff; font-weight: bold;">Field</span> id<br />
<span style="color: #aaffff; font-weight: bold;">End Type</span><br />
list.BList = <span style="color: #aaffff; font-weight: bold;">New</span> BList<br />
<br />
b.Ball = <span style="color: #aaffff; font-weight: bold;">New</span> Ball<br />
AddFront<span style=" ">&#40;</span>list,Handle<span style=" ">&#40;</span>b<span style=" ">&#41;</span><span style=" ">&#41;</span><br />
ptr% = FirstItem<span style=" ">&#40;</span>list<span style=" ">&#41;</span><br />
</p>
b = Object.Ball<span style=" ">&#40;</span>ptr<span style=" ">&#41;</span></div>
<p>Чуть короче: 
</p>
<div class="bb" style="font-family: monospace;background-color:#FFFFFF;border:1px dashed #CCCCCC;padding:10px;background-color:#225588;color:#FFFFFF;border:1px solid #003040;padding:10px;"><span style="color: #aaffff; font-weight: bold;">Type</span> Ball<br />
<p><span style="color: #aaffff; font-weight: bold;">Field</span> id<br />
<span style="color: #aaffff; font-weight: bold;">End Type</span><br />
list.BList = <span style="color: #aaffff; font-weight: bold;">New</span> BList<br />
<br />
AddFront<span style=" ">&#40;</span>list,Handle<span style=" ">&#40;</span><span style="color: #aaffff; font-weight: bold;">New</span> Ball<span style=" ">&#41;</span><span style=" ">&#41;</span><br />
</p>
b.Ball = Object.Ball<span style=" ">&#40;</span>FirstItem<span style=" ">&#40;</span>list<span style=" ">&#41;</span><span style=" ">&#41;</span></div>
<p>Полный список команд для работы со списком:
</p>
<div class="bb" style="font-family: monospace;background-color:#FFFFFF;border:1px dashed #CCCCCC;padding:10px;background-color:#225588;color:#FFFFFF;border:1px solid #003040;padding:10px;">userTypePtr% = AddFront%<span style=" ">&#40;</span> list.Blist, userTypePtr% <span style=" ">&#41;</span><br />
<p>userTypePtr% = AddBack%<span style=" ">&#40;</span> list.Blist, userTypePtr% <span style=" ">&#41;</span><br />
trueFalse% = ResetList%<span style=" ">&#40;</span> list.BList <span style=" ">&#41;</span><br />
userTypePtr% = NextItem%<span style=" ">&#40;</span> list.BList <span style=" ">&#41;</span><br />
userTypePtr% = FirstItem%<span style=" ">&#40;</span> list.BList <span style=" ">&#41;</span><br />
userTypePtr% = LastItem%<span style=" ">&#40;</span> list.BList <span style=" ">&#41;</span><br />
userTypePtr% = CurrentItem%<span style=" ">&#40;</span> list.BList <span style=" ">&#41;</span><br />
userTypePtr% = MoveItem%<span style=" ">&#40;</span> fromList.BList, toList.BList <span style=" ">&#41;</span><br />
userTypePtr% = KillItem%<span style=" ">&#40;</span> list.BList, node.BNode <span style=" ">&#41;</span><br />
node.BNode = CurrentNode.BNode<span style=" ">&#40;</span> list.Blist <span style=" ">&#41;</span><br />
</p>
totalItems% = TotalItems%<span style=" ">&#40;</span> list.BList <span style=" ">&#41;</span></div>
<p>Небольшой пример:
</p>
<div class="bb" style="font-family: monospace;background-color:#FFFFFF;border:1px dashed #CCCCCC;padding:10px;background-color:#225588;color:#FFFFFF;border:1px solid #003040;padding:10px;"><span style="color: #aaffff; font-weight: bold;">Include</span> <span style="color: #00ff66;">&quot;BList.bb&quot;</span> <br />
<p><span style="color: #aaffff; font-weight: bold;">Type</span> Ball <br />
&nbsp;<span style="color: #aaffff; font-weight: bold;">Field</span> id <br />
&nbsp;<span style="color: #aaffff; font-weight: bold;">Field</span> x# <br />
&nbsp;<span style="color: #aaffff; font-weight: bold;">Field</span> y# <br />
<span style="color: #aaffff; font-weight: bold;">End Type</span> <br />
&nbsp;<br />
<span style="color: #ffee00">; создаем 2 списка </span><br />
list1.BList = <span style="color: #aaffff; font-weight: bold;">New</span> BList <br />
list2.BList = <span style="color: #aaffff; font-weight: bold;">New</span> BList <br />
&nbsp;<br />
<span style="color: #ffee00">;Создаем 6 объектов в первом списке </span><br />
<span style="color: #aaffff; font-weight: bold;">For</span> i = <span style="color: #33ffdd;">0</span> <span style="color: #aaffff; font-weight: bold;">To</span> <span style="color: #33ffdd;">5</span> <br />
&nbsp;b.Ball = Object.Ball<span style=" ">&#40;</span>AddFront<span style=" ">&#40;</span>list1,Handle<span style=" ">&#40;</span><span style="color: #aaffff; font-weight: bold;">New</span> Ball<span style=" ">&#41;</span><span style=" ">&#41;</span><span style=" ">&#41;</span> <br />
&nbsp;b\id = i <br />
<span style="color: #aaffff; font-weight: bold;">Next</span> <br />
&nbsp;<br />
<span style="color: #aaffff; font-weight: bold;">Print</span> <span style="color: #00ff66;">&quot;Список 1:&quot;</span>&nbsp;: printlist<span style=" ">&#40;</span>list1<span style=" ">&#41;</span> <br />
&nbsp;<br />
<span style="color: #ffee00">;Обрабатываем первый список </span><br />
ResetList<span style=" ">&#40;</span>list1<span style=" ">&#41;</span> <br />
<span style="color: #aaffff; font-weight: bold;">While</span> NextItem<span style=" ">&#40;</span>list1<span style=" ">&#41;</span> <br />
&nbsp;b.Ball = Object.Ball<span style=" ">&#40;</span>CurrentItem<span style=" ">&#40;</span>list1<span style=" ">&#41;</span><span style=" ">&#41;</span> <br />
&nbsp;<span style="color: #ffee00">;Перемещаем четвертую запись во второй список </span><br />
&nbsp;<span style="color: #aaffff; font-weight: bold;">If</span> b\id = <span style="color: #33ffdd;">4</span> <span style="color: #aaffff; font-weight: bold;">Then</span> MoveItem<span style=" ">&#40;</span>list1,list2<span style=" ">&#41;</span> <br />
&nbsp;<span style="color: #ffee00">; удаляем 3-ю запись, только позже, после обработки списка </span><br />
&nbsp;<span style="color: #aaffff; font-weight: bold;">If</span> b\id = <span style="color: #33ffdd;">3</span> <span style="color: #aaffff; font-weight: bold;">Then</span> tmp.BNode = CurrentNode<span style=" ">&#40;</span>list1<span style=" ">&#41;</span> <br />
&nbsp;<span style="color: #ffee00">; удаляем вторую запись </span><br />
&nbsp;<span style="color: #aaffff; font-weight: bold;">If</span> b\id = <span style="color: #33ffdd;">2</span> <span style="color: #aaffff; font-weight: bold;">Then</span> <span style="color: #aaffff; font-weight: bold;">Delete</span> Object.Ball<span style=" ">&#40;</span>KillItem<span style=" ">&#40;</span>list1,<span style="color: #aaffff; font-weight: bold;">Null</span><span style=" ">&#41;</span><span style=" ">&#41;</span> <br />
<span style="color: #aaffff; font-weight: bold;">Wend</span> <br />
<span style="color: #aaffff; font-weight: bold;">Delete</span> Object.Ball<span style=" ">&#40;</span>KillItem<span style=" ">&#40;</span>list1,tmp<span style=" ">&#41;</span><span style=" ">&#41;</span> <br />
&nbsp;<br />
<span style="color: #aaffff; font-weight: bold;">Print</span> <span style="color: #00ff66;">&quot;Список 1: (удалены - 2,3, перемещена- 4)&quot;</span>&nbsp;: printlist<span style=" ">&#40;</span>list1<span style=" ">&#41;</span> <br />
<span style="color: #aaffff; font-weight: bold;">Print</span> <span style="color: #00ff66;">&quot;Список 2:&quot;</span>&nbsp;: printlist<span style=" ">&#40;</span>list2<span style=" ">&#41;</span> <br />
&nbsp;<br />
<span style="color: #ffee00">;очищаем весь первый список </span><br />
<span style="color: #aaffff; font-weight: bold;">While</span> FirstItem<span style=" ">&#40;</span>list1<span style=" ">&#41;</span> <br />
&nbsp;<span style="color: #aaffff; font-weight: bold;">Delete</span> Object.Ball<span style=" ">&#40;</span>KillItem<span style=" ">&#40;</span>list1,<span style="color: #aaffff; font-weight: bold;">Null</span><span style=" ">&#41;</span><span style=" ">&#41;</span> <br />
<span style="color: #aaffff; font-weight: bold;">Wend</span> <br />
<span style="color: #aaffff; font-weight: bold;">Print</span> <span style="color: #00ff66;">&quot;Список 1:&quot;</span>&nbsp;: printlist<span style=" ">&#40;</span>list1<span style=" ">&#41;</span> <br />
&nbsp;<br />
<span style="color: #aaffff; font-weight: bold;">WaitKey</span> <br />
&nbsp;<br />
<span style="color: #aaffff; font-weight: bold;">Function</span> printlist<span style=" ">&#40;</span>list.BList<span style=" ">&#41;</span> <br />
&nbsp;ResetList<span style=" ">&#40;</span>list<span style=" ">&#41;</span> <br />
&nbsp;<span style="color: #aaffff; font-weight: bold;">While</span> NextItem<span style=" ">&#40;</span>list<span style=" ">&#41;</span> <br />
&nbsp; b.Ball = Object.Ball<span style=" ">&#40;</span>CurrentItem<span style=" ">&#40;</span>list<span style=" ">&#41;</span><span style=" ">&#41;</span> <br />
&nbsp; <span style="color: #aaffff; font-weight: bold;">Print</span> b\id <br />
&nbsp;<span style="color: #aaffff; font-weight: bold;">Wend</span> <br />
</p>
<span style="color: #aaffff; font-weight: bold;">End Function</span></div>
<p>Ну вот и все.  Удачи!
</p>
<div align="right"><a href="http://blitzetcetera.org/images/0/04/Lists.zip" class="internal" title="Lists.zip">скачать архив с файлами к статье</a></div>
<hr />
<p>Автор: Остапенко "@rtur" Артур (e-mail: vd_arthur@mail.ru, ICQ: 143476320)
</td><td class="rightside"><table cellspacing=0 cellpadding=0><tr><td class="rightheader"></td></tr></table></td></tr><tr colspan="3" height="40"><td>&nbsp;</td></tr><tr><td class="leftside"><table cellspacing=0 cellpadding=0><tr><td class="leftheader"></td></tr></table></td><td class="sheetbody"><a name="Использование формул логики"></a><h1><span class="editsection">[<a href="http://blitzetcetera.org/index.php?title=Обсуждение:Использование формул логики&amp;action=edit">обсудить</a>] [<a href="http://blitzetcetera.org/index.php?title=Использование формул логики&amp;action=edit">править</a>]</span><span class="mw-headline">Использование формул логики</span></h1>
</p>
<a name=".D0.92.D0.B2.D0.B5.D0.B4.D0.B5.D0.BD.D0.B8.D0.B5_3"></a><h2><span class="editsection">[<a href="http://blitzetcetera.org/index.php?title=%D0%98%D1%81%D0%BF%D0%BE%D0%BB%D1%8C%D0%B7%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D0%B5_%D1%84%D0%BE%D1%80%D0%BC%D1%83%D0%BB_%D0%BB%D0%BE%D0%B3%D0%B8%D0%BA%D0%B8&amp;action=edit&amp;section=1" title="Использование формул логики">править</a>]</span> <span class="mw-headline">Введение</span></h2>
<p>В этой статье речь пойдет о применении формул логики для оптимизации программ, а также упаковки данных. Формулы логики оперируют только с целыми числами, числа с плавающей точкой округляются.
</p><p>Сначала - о двоичном исчислением, для тех кто с ним не знаком. В обычной, десятичной системе счисления, которую мы используем, для записи чисел используются десять знаков - 0123456789. Любое число можно разложить на разряды следующим образом: a * 10<sup>n</sup> + b * 10<sup>n-1</sup> + ... + x * 10<sup>2</sup> + y * 10 + z. Например: 956 = 9 * 10<sup>2</sup> + 5 * 10<sup>1</sup> + 6 * 10<sup>0</sup>. Число 10 называется ОСНОВАНИЕМ системы. Двоичная система счисления имеет основание 2, то есть любое чило может быть представлено так: a * 2<sup>n</sup> + b * 2<sup>n-1</sup> + ... + x * 2<sup>2</sup> + y * 2 + z, например: 1011 = 1*2<sup>3</sup> + 0 * 2<sup>2</sup> + 1 * 2<sup>1</sup> + 1 * 2<sup>0</sup>. Легко посчитать, что в десятичной системе счисления это число равно 8 + 2 + 1 = 11. Для записи чисел в двоичной системе счисления используются два знака - 0 и 1.
</p><p>Классические формулы логики оперируют переменными только с двумя значениями - ИСТИНА (1) и ЛОЖЬ (0):
</p>
<table align="center" border="2">
<tr>
<td>  A
</td><td>  B
</td><td> NOT A
</td><td> A AND B
</td><td> A OR B
</td><td> A XOR B
</td></tr>
<tr align="center">
<td> 0
</td><td> 0
</td><td> 1
</td><td> 0
</td><td> 0
</td><td> 0
</td></tr>
<tr align="center">
<td> 0
</td><td> 1
</td><td> 1
</td><td> 0
</td><td> 1
</td><td> 1
</td></tr>
<tr align="center">
<td> 1
</td><td> 0
</td><td> 0
</td><td> 0
</td><td> 1
</td><td> 1
</td></tr>
<tr align="center">
<td> 1
</td><td> 1
</td><td> 0
</td><td> 1
</td><td> 1
</td><td> 0
</td></tr></table>
<p>Логические операции над числами (которые имеют 32 бита) можно представить, так:
</p><p><br />
</p>
<table align="center" border="1">
<tr>
<td> A)
</td><td>   0...01010110
</td><td>   0...01010110
</td><td>   0...01010110
</td></tr>
<tr>
<td> B)
</td><td>   0...00100111
</td><td>   0...00100111
</td><td>   0...00100111
</td></tr>
<tr>
<td>
</td><td>   <hr />
</td><td>   <hr />
</td><td>   <hr />
</td></tr>
<tr>
<td>
</td><td>   0...00000110
</td><td>   0...01110111
</td><td>   0...01110001
</td></tr>
<tr align="center">
<td>
</td><td> A AND B
</td><td> A OR B
</td><td> A XOR B
</td></tr></table>
<p><br />
Как Вы видите, операция производится над битами, находящимися в одинаковых столбцах, а результат записывается  в новое число в бит того же столбца. Операция NOT действует иным образом: результат равен 1, если число (а не бит) равно 0, если же число отлично от 0, то результат равен 0. Для представления числа в двоичном виде в Blitz существует функция BIN$. Например, BIN$(51) дает строку "000000000000000000000000000000110011". Преобразовывать числа из двоичной системы в десятичную поможет идентификатор % (%110011=51).
</p>
<a name=".D0.A3.D0.BC.D0.BD.D0.BE.D0.B6.D0.B5.D0.BD.D0.B8.D0.B5_.D0.B8_.D0.B4.D0.B5.D0.BB.D0.B5.D0.BD.D0.B8.D0.B5"></a><h2><span class="editsection">[<a href="http://blitzetcetera.org/index.php?title=%D0%98%D1%81%D0%BF%D0%BE%D0%BB%D1%8C%D0%B7%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D0%B5_%D1%84%D0%BE%D1%80%D0%BC%D1%83%D0%BB_%D0%BB%D0%BE%D0%B3%D0%B8%D0%BA%D0%B8&amp;action=edit&amp;section=2" title="Использование формул логики">править</a>]</span> <span class="mw-headline">Умножение и деление</span></h2>
<p>Команды "a SHL n" и "a SHR n" осуществляют побитовый сдвиг в числе a на n бит. SHR - вправо, SHL - влево. Скажем, 43(101011) SHR 1 = 21(10101), 5(101) SHL 3 = 40(101000). Как видите, SHR уничтожает значения крайних битов, а SHL дополняет число нулями. Нижеследующие эквиваленты очень полезны, т. к. логические операции гораздо быстрее арифметических, пытайтесь по возможности максимально широко использовать логические.
</p>
<ul><li>a * 2<sup>n</sup> = a SHL n
</li><li>FLOOR(a / 2<sup>n</sup>) = a SHR n
</li></ul>
<a name=".D0.97.D0.B0.D1.86.D0.B8.D0.BA.D0.BB.D0.B8.D0.B2.D0.B0.D0.BD.D0.B8.D0.B5"></a><h2><span class="editsection">[<a href="http://blitzetcetera.org/index.php?title=%D0%98%D1%81%D0%BF%D0%BE%D0%BB%D1%8C%D0%B7%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D0%B5_%D1%84%D0%BE%D1%80%D0%BC%D1%83%D0%BB_%D0%BB%D0%BE%D0%B3%D0%B8%D0%BA%D0%B8&amp;action=edit&amp;section=3" title="Использование формул логики">править</a>]</span> <span class="mw-headline">Зацикливание</span></h2>
<p>Очень часто в программе требуется "зациклить" какую-нибудь переменную. Например, игрок с координатами (X, Y) находится на карте NxN клеток, где каждая клетка имеет координаты (0...n-1, 0...n-1). Он может перемещаться вверх / вниз / вправо / влево, соответвственно меняются координаты (Y = Y - 1 / Y = Y + 1 / X = X + 1 / X = X - 1). Необходимо сделать так, чтобы при выходе за пределы карты, он появлялся с другой стороны, то есть, если координата X равна 0, а игрок делает шаг влево, то она становится равной не -1, а n-1 (противоположный край карты). Все бы ничего, да на карте есть локация с сапогами-скороходами, позволяющими перемещаться в любую сторону на случайное расстояние, которое может быть в несколько раз больше n. Соответственно, надо учитывать, что игрок может "промотать" за один ход несколько кругов по карте, в том числе и уменьшая координату. Самый простой (и самый медленный) способ выглядит так:
</p>
<div class="bb" style="font-family: monospace;background-color:#FFFFFF;border:1px dashed #CCCCCC;padding:10px;background-color:#225588;color:#FFFFFF;border:1px solid #003040;padding:10px;"><span style="color: #ffee00">;Функция уменьшает или увеличивает переменную на n, пока она не окажется в</span><br />
<p><span style="color: #ffee00">;пределах (0...n - 1)</span><br />
<span style="color: #aaffff; font-weight: bold;">Function</span> LoopNum<span style=" ">&#40;</span>x, n<span style=" ">&#41;</span><br />
<span style="color: #aaffff; font-weight: bold;">Repeat</span><br />
&nbsp;<span style="color: #aaffff; font-weight: bold;">If</span> v &lt; n <span style="color: #aaffff; font-weight: bold;">Then</span><br />
&nbsp; v = v + n<br />
&nbsp;<span style="color: #aaffff; font-weight: bold;">ElseIf</span> v &gt;= n <span style="color: #aaffff; font-weight: bold;">Then</span><br />
&nbsp; v = v - n<br />
&nbsp;<span style="color: #aaffff; font-weight: bold;">Else</span><br />
&nbsp; <span style="color: #aaffff; font-weight: bold;">Return</span> v<br />
&nbsp;<span style="color: #aaffff; font-weight: bold;">End</span> <span style="color: #aaffff; font-weight: bold;">If</span><br />
<span style="color: #aaffff; font-weight: bold;">Forever</span><br />
</p>
<span style="color: #aaffff; font-weight: bold;">End Function</span></div>
<p>Хорошо, если это только один игрок, а если это подконтрольные компьютеру существа, которых тысячи? Еще пара способов, более скоростных:
</p>
<div class="bb" style="font-family: monospace;background-color:#FFFFFF;border:1px dashed #CCCCCC;padding:10px;background-color:#225588;color:#FFFFFF;border:1px solid #003040;padding:10px;"><span style="color: #ffee00">;Этот способ использует остаток от деления на n. Число &quot;5&quot; означает максимальное</span><br />
<p><span style="color: #ffee00">;количество кругов, которое переменная может &quot;промотать&quot; назад.</span><br />
x = <span style=" ">&#40;</span>x + n * <span style="color: #33ffdd;">5</span><span style=" ">&#41;</span> <span style="color: #aaffff; font-weight: bold;">Mod</span> n<br />
<span style="color: #ffee00">;Более аккуратный способ - вычитание излишка / прибавление недостатка</span><br />
</p>
x = x - <span style="color: #aaffff; font-weight: bold;">Floor</span><span style=" ">&#40;</span>x / n<span style=" ">&#41;</span> * n</div>
<p>Но самый быстрый способ можно применить, если n = 2<sup>m</sup> (m &gt;= 1), тогда:
</p>
<div class="bb" style="font-family: monospace;background-color:#FFFFFF;border:1px dashed #CCCCCC;padding:10px;background-color:#225588;color:#FFFFFF;border:1px solid #003040;padding:10px;">x = x <span style="color: #aaffff; font-weight: bold;">And</span> <span style=" ">&#40;</span>n<span style="color: #33ffdd;">-1</span><span style=" ">&#41;</span></div>
<p>Вот и все! Но давайте разберемся, как это работает. Число 2<sup>m</sup> в двоичной системе счисления выглядит так: 1000...0, где нулей ровно m. А если от него отнять единицу, то получим число 1111...1, в котором будет m единиц. Операция AND отсекает ненужные биты, образующиеся при выходе переменной за рамки (0...n - 1). Например, n AND (n - 1) = 0, а -1(11111...11111 - 32 единицы) AND (n - 1) = n - 1, что, собственно, и требовалось.
</p>
<a name=".D0.A3.D0.BF.D0.B0.D0.BA.D0.BE.D0.B2.D0.BA.D0.B0_.D0.B4.D0.B0.D0.BD.D0.BD.D1.8B.D1.85"></a><h2><span class="editsection">[<a href="http://blitzetcetera.org/index.php?title=%D0%98%D1%81%D0%BF%D0%BE%D0%BB%D1%8C%D0%B7%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D0%B5_%D1%84%D0%BE%D1%80%D0%BC%D1%83%D0%BB_%D0%BB%D0%BE%D0%B3%D0%B8%D0%BA%D0%B8&amp;action=edit&amp;section=4" title="Использование формул логики">править</a>]</span> <span class="mw-headline">Упаковка данных</span></h2>
<p>А вот проблема, возникающая при работе с большими картами во многих типах программ: приходится к каждой клетке большой карты привязывать несколько параметров. Ну, например, создается мега-аркада с огромной картой, 1000 на 1000 клеток. Каждая клетка содержит следующую информацию: номер тайла (изображения клетки) (0-999), проходимость (0 - да, 1 - нет), 2 дополнительных изображения (следы крови, сажа) в диапазоне от 0 до 59, уровень заполненности водой (0-15), предмет (0-11). Если идти стандартным путем, то для хранения всей этой информации понадобится 6 массивов, и вся карта будет занимать 28MB. Может показаться, что трата памяти сейчас практически не проблема, но если карта представляет огромный мир и в несколько десятков раз больше? Сколько будут занимать и загружаться сохраненные игры? Есть способ свести данные в один массив, то есть уменьшить их объем в 7 раз в данном случае. Для начала, попробуем определить, сколько бит занимает каждая из составляющих:
</p>
<ul><li>Номер тайла: 10 бит (2<sup>9</sup>(512) &lt; 1000 &lt; 2<sup>10</sup>(1024))
</li><li>Проходимость: 1 бит
</li><li>Дополнительные изображения: 2 х 6 бит (2<sup>5</sup>(32) &lt; 60 &lt; 2<sup>6</sup>(64))
</li><li>Уровень воды: 4 бит (16=2<sup>4</sup>)
</li><li>Предмет: 4 бит (2<sup>3</sup>(8) &lt; 12 &lt; 2<sup>4</sup>(16))
</li><li>Итого: 31 бит &gt; 32 бит
</li></ul>
<p>Теперь разобъем биты переменной на части:
</p>
<table align="center" border="2">
<tr>
<td align="right"> Данные:
</td><td>
</td><td> Тайл
</td><td> Пр.
</td><td> Доп. из. 1
</td><td> Доп. из. 2
</td><td> Вода
</td><td> Предмет
</td></tr>
<tr align="center">
<td align="right"> Число:
</td><td> 0
</td><td> 0000000000
</td><td> 0
</td><td> 000000
</td><td> 000000
</td><td> 0000
</td><td> 0000
</td></tr>
<tr align="center">
<td align="right"> Положение:
</td><td> 31
</td><td> 21-30
</td><td> 20
</td><td> 14-19
</td><td> 9-13
</td><td> 4-8
</td><td> 0-3
</td></tr></table>
<p>Теперь можно работать с массивом:
</p>
<div class="bb" style="font-family: monospace;background-color:#FFFFFF;border:1px dashed #CCCCCC;padding:10px;background-color:#225588;color:#FFFFFF;border:1px solid #003040;padding:10px;"><span style="color: #ffee00">;Если все составляющие известны, то формируется массив следующим образом: </span><br />
<p><span style="color: #ffee00">; каждая переменная сдвигается на свою позицию, и все они складываются </span><br />
map<span style=" ">&#40;</span>x,y<span style=" ">&#41;</span>=tile <span style="color: #aaffff; font-weight: bold;">Shl</span> <span style="color: #33ffdd;">21</span>+movethru <span style="color: #aaffff; font-weight: bold;">Shl</span> <span style="color: #33ffdd;">20</span>+i1 <span style="color: #aaffff; font-weight: bold;">Shl</span> <span style="color: #33ffdd;">14</span>+i2 <span style="color: #aaffff; font-weight: bold;">Shl</span> <span style="color: #33ffdd;">9</span>+water <span style="color: #aaffff; font-weight: bold;">Shl</span> <span style="color: #33ffdd;">4</span>+obj<br />
<span style="color: #ffee00">;Для замены одной из составляющих, нужно сначала обнулить ее в массиве </span><br />
<span style="color: #ffee00">;(обратите внимание, что в двоичном числе нули стоят на позициях, занимаемых </span><br />
<span style="color: #ffee00">; переменной), а затем добавить, предварительно сдвинув: </span><br />
map<span style=" ">&#40;</span>x,y<span style=" ">&#41;</span>=map<span style=" ">&#40;</span>x,y<span style=" ">&#41;</span> <span style="color: #aaffff; font-weight: bold;">And</span> %<span style="color: #33ffdd;">01111111111100001111111111111111</span>+i1 <span style="color: #aaffff; font-weight: bold;">Shl</span> <span style="color: #33ffdd;">14</span><br />
<span style="color: #ffee00">;Чтение переменной проще: сначала сдвигаем число назад, чтобы она оказалась </span><br />
<span style="color: #ffee00">; справа, а затем отсекаем левую часть (количество единиц в двоичном числе </span><br />
<span style="color: #ffee00">; равно количеству бит, занимаемых переменной): </span><br />
i2=map<span style=" ">&#40;</span>x,y<span style=" ">&#41;</span> <span style="color: #aaffff; font-weight: bold;">Shr</span> <span style="color: #33ffdd;">14</span> <span style="color: #aaffff; font-weight: bold;">And</span> %<span style="color: #33ffdd;">1111</span><br />
<span style="color: #ffee00">;А вот так можно легко поменять значение флага (однобитной переменной) на </span><br />
<span style="color: #ffee00">; противоположное (если использовать команду OR, то флаг будет включен): </span><br />
map<span style=" ">&#40;</span>x,y<span style=" ">&#41;</span>=map<span style=" ">&#40;</span>x,y<span style=" ">&#41;</span> <span style="color: #aaffff; font-weight: bold;">Xor</span> %<span style="color: #33ffdd;">00000000000100000000000000000000</span><br />
</p>
<span style="color: #ffee00">;Двоичные числа можно сразу преобразовывать в десятичные</span></div>
<p>В программе реализации игры "Жизнь" такая упаковка данных еще и ускоряет работу.
</p>
<a name=".D0.A3.D0.BF.D1.80.D0.BE.D1.89.D0.B5.D0.BD.D0.B8.D0.B5_.D1.84.D0.BE.D1.80.D0.BC.D1.83.D0.BB"></a><h2><span class="editsection">[<a href="http://blitzetcetera.org/index.php?title=%D0%98%D1%81%D0%BF%D0%BE%D0%BB%D1%8C%D0%B7%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D0%B5_%D1%84%D0%BE%D1%80%D0%BC%D1%83%D0%BB_%D0%BB%D0%BE%D0%B3%D0%B8%D0%BA%D0%B8&amp;action=edit&amp;section=5" title="Использование формул логики">править</a>]</span> <span class="mw-headline">Упрощение формул</span></h2>
<p>Вот, например одна из часто возникающих задач: переменная A принимает определенные значения (1, 3, 9, 10, 15), переменная B, в зависимости от того, какое значение приняла первая, должна принять значение из другого набора (2, 6, 3, 5, 11). К примеру, если A=1, то B=2, если A=3, то B=6. Самый простой и наглядный способ - это использовать оператор SELECT:
</p>
<div class="bb" style="font-family: monospace;background-color:#FFFFFF;border:1px dashed #CCCCCC;padding:10px;background-color:#225588;color:#FFFFFF;border:1px solid #003040;padding:10px;"><span style="color: #aaffff; font-weight: bold;">Select</span> A<br />
<p>&nbsp;<span style="color: #aaffff; font-weight: bold;">Case</span> <span style="color: #33ffdd;">1</span>: B=<span style="color: #33ffdd;">2</span><br />
&nbsp;<span style="color: #aaffff; font-weight: bold;">Case</span> <span style="color: #33ffdd;">3</span>: B=<span style="color: #33ffdd;">6</span><br />
&nbsp;<span style="color: #aaffff; font-weight: bold;">Case</span> <span style="color: #33ffdd;">9</span>: B=<span style="color: #33ffdd;">3</span><br />
&nbsp;<span style="color: #aaffff; font-weight: bold;">Case</span> <span style="color: #33ffdd;">10</span>: B=<span style="color: #33ffdd;">5</span><br />
&nbsp;<span style="color: #aaffff; font-weight: bold;">Case</span> <span style="color: #33ffdd;">15</span>: B=<span style="color: #33ffdd;">11</span><br />
</p>
<span style="color: #aaffff; font-weight: bold;">End Select</span></div>
<p>Еще один способ - более медленный и менее наглядный, но компактен и позволяет присваивать значения строковым переменным:
</p>
<div class="bb" style="font-family: monospace;background-color:#FFFFFF;border:1px dashed #CCCCCC;padding:10px;background-color:#225588;color:#FFFFFF;border:1px solid #003040;padding:10px;">B=<span style="color: #aaffff; font-weight: bold;">MID</span>$<span style=" ">&#40;</span><span style="color: #00ff66;">&quot; 02..06.......0305........11&quot;</span>,A*<span style="color: #33ffdd;">2</span>,<span style="color: #33ffdd;">2</span><span style=" ">&#41;</span></div>
<p>Способ, использующий логические выражения, нагляден и компактен, но уступает первым двум по скорости:
</p>
<div class="bb" style="font-family: monospace;background-color:#FFFFFF;border:1px dashed #CCCCCC;padding:10px;background-color:#225588;color:#FFFFFF;border:1px solid #003040;padding:10px;">B=<span style=" ">&#40;</span>A=<span style="color: #33ffdd;">1</span><span style=" ">&#41;</span>*<span style="color: #33ffdd;">2</span>+<span style=" ">&#40;</span>A=<span style="color: #33ffdd;">3</span><span style=" ">&#41;</span>*<span style="color: #33ffdd;">9</span>+<span style=" ">&#40;</span>A=<span style="color: #33ffdd;">9</span><span style=" ">&#41;</span>*<span style="color: #33ffdd;">3</span>+<span style=" ">&#40;</span>A=<span style="color: #33ffdd;">10</span><span style=" ">&#41;</span>*<span style="color: #33ffdd;">5</span>+<span style=" ">&#40;</span>A=<span style="color: #33ffdd;">15</span><span style=" ">&#41;</span>*<span style="color: #33ffdd;">11</span></div>
<hr />
<p>Автор: <a href="http://blitzetcetera.org/index.php/%D0%A3%D1%87%D0%B0%D1%81%D1%82%D0%BD%D0%B8%D0%BA:Matt_Merkulov" title="Участник:Matt Merkulov">Матвей Меркулов</a> (E-mail: MattMerk@mail.ru, ICQ: 392-274-050)
</td><td class="rightside"><table cellspacing=0 cellpadding=0><tr><td class="rightheader"></td></tr></table></td></tr><tr colspan="3" height="40"><td>&nbsp;</td></tr><tr><td class="leftside"><table cellspacing=0 cellpadding=0><tr><td class="leftheader"></td></tr></table></td><td class="sheetbody"><a name="Банк, как динамический массив"></a><h1><span class="editsection">[<a href="http://blitzetcetera.org/index.php?title=Обсуждение:Банк, как динамический массив&amp;action=edit">обсудить</a>] [<a href="http://blitzetcetera.org/index.php?title=Банк, как динамический массив&amp;action=edit">править</a>]</span><span class="mw-headline">Банк, как динамический массив</span></h1>
<p>Представим ситуацию, когда необходимо создать массив, где периодически появляются новые объекты и исчезают старые. Это, конечно, можно легко сделать с помощью типов, но рассмотрим вариант, когда максимум объектов определен и их порядок не имеет значения. В этом случае можно ускорить работу программы за счет использования банка вместо типов. Пусть длина одной записи равна константе reclen. Введем переменную-указатель, обозначающую последний элемент записи, изначально она равна -reclen, т.к. в банке нет элементов. При занесении нового элемента, указатель увеличивается на reclen и в этот адрес заносится новая запись. При удалении элемента, на место удаляемой записи копируются данные последней записи в банке и указатель уменьшается на reclen. Для примера, рассмотрим программу, имитирующую снегопад:
</p>
</p>
<div class="bb" style="font-family: monospace;background-color:#FFFFFF;border:1px dashed #CCCCCC;padding:10px;background-color:#225588;color:#FFFFFF;border:1px solid #003040;padding:10px;"><span style="color: #ffee00">;Maxrec - максимальное количество записей, reclen - длина записи в байтах (в</span><br />
<p><span style="color: #ffee00">; данном примере запись содержит координаты: x(int), y(float), приращения:</span><br />
<span style="color: #ffee00">; dx(Float), dy(Float), цвет с(byte) - 17 байт)</span><br />
<span style="color: #aaffff; font-weight: bold;">Const</span> maxrec=<span style="color: #33ffdd;">120000</span>, reclen=<span style="color: #33ffdd;">17</span><br />
<span style="color: #ffee00">;Создаем банк</span><br />
bnk=<span style="color: #aaffff; font-weight: bold;">CreateBank</span><span style=" ">&#40;</span>maxrec*reclen<span style=" ">&#41;</span><br />
<span style="color: #ffee00">;Адрес последнего элемента в банке</span><br />
addr=-reclen<br />
<br />
<span style="color: #aaffff; font-weight: bold;">Graphics</span> <span style="color: #33ffdd;">800</span>,<span style="color: #33ffdd;">600</span>,<span style="color: #33ffdd;">32</span><br />
<br />
<span style="color: #ffee00">;Массив для хранения значений цветов (градаций серого)</span><br />
<span style="color: #aaffff; font-weight: bold;">Dim</span> col<span style=" ">&#40;</span><span style="color: #33ffdd;">255</span><span style=" ">&#41;</span><br />
<span style="color: #aaffff; font-weight: bold;">For</span> n=<span style="color: #33ffdd;">0</span> <span style="color: #aaffff; font-weight: bold;">To</span> <span style="color: #33ffdd;">255</span><br />
&nbsp;col<span style=" ">&#40;</span>n<span style=" ">&#41;</span>=n*<span style="color: #33ffdd;">65793</span><br />
<span style="color: #aaffff; font-weight: bold;">Next</span><br />
<br />
<span style="color: #aaffff; font-weight: bold;">SetBuffer</span> <span style="color: #aaffff; font-weight: bold;">BackBuffer</span><span style=" ">&#40;</span><span style=" ">&#41;</span><br />
<span style="color: #aaffff; font-weight: bold;">Repeat</span><br />
&nbsp;<span style="color: #ffee00">;Добавляем 400 снежинок</span><br />
&nbsp;<span style="color: #aaffff; font-weight: bold;">For</span> n=<span style="color: #33ffdd;">1</span> <span style="color: #aaffff; font-weight: bold;">To</span> <span style="color: #33ffdd;">400</span><br />
&nbsp; addr=addr+reclen<br />
&nbsp; <span style="color: #aaffff; font-weight: bold;">PokeFloat</span> bnk,addr,<span style="color: #aaffff; font-weight: bold;">Rand</span><span style=" ">&#40;</span><span style="color: #33ffdd;">800</span><span style=" ">&#41;</span><span style="color: #ffee00">;координата x</span><br />
&nbsp; <span style="color: #aaffff; font-weight: bold;">PokeFloat</span> bnk,addr<span style="color: #33ffdd;">+4</span>,<span style="color: #33ffdd;">0</span><span style="color: #ffee00">;координата y</span><br />
&nbsp; <span style="color: #aaffff; font-weight: bold;">PokeFloat</span> bnk,addr<span style="color: #33ffdd;">+8</span>,<span style="color: #aaffff; font-weight: bold;">Rnd</span><span style=" ">&#40;</span><span style="color: #33ffdd;">-1</span>,<span style="color: #33ffdd;">1</span><span style=" ">&#41;</span><span style="color: #ffee00">;приращение по x</span><br />
&nbsp; <span style="color: #aaffff; font-weight: bold;">PokeFloat</span> bnk,addr<span style="color: #33ffdd;">+12</span>,<span style="color: #aaffff; font-weight: bold;">Rnd</span><span style=" ">&#40;</span><span style="color: #33ffdd;">2</span>,<span style="color: #33ffdd;">10</span><span style=" ">&#41;</span><span style="color: #ffee00">;приращение по y</span><br />
&nbsp; <span style="color: #aaffff; font-weight: bold;">PokeByte</span> bnk,addr<span style="color: #33ffdd;">+16</span>,<span style="color: #aaffff; font-weight: bold;">Rnd</span><span style=" ">&#40;</span><span style="color: #33ffdd;">64</span>,<span style="color: #33ffdd;">255</span><span style=" ">&#41;</span><span style="color: #ffee00">;номер цвета</span><br />
&nbsp;<span style="color: #aaffff; font-weight: bold;">Next</span><br />
<br />
&nbsp;<span style="color: #aaffff; font-weight: bold;">Cls</span><br />
&nbsp;<span style="color: #aaffff; font-weight: bold;">LockBuffer</span> <span style="color: #aaffff; font-weight: bold;">BackBuffer</span><span style=" ">&#40;</span><span style=" ">&#41;</span><br />
<br />
&nbsp;<span style="color: #ffee00">;Цикл по всем снежинкам в банке</span><br />
&nbsp;n=<span style="color: #33ffdd;">0</span><br />
&nbsp;<span style="color: #aaffff; font-weight: bold;">While</span> n&lt;=addr<br />
&nbsp; <span style="color: #ffee00">;Добавляем приращения к координатам</span><br />
&nbsp; x#=<span style="color: #aaffff; font-weight: bold;">PeekFloat</span><span style=" ">&#40;</span>bnk,n<span style=" ">&#41;</span>+<span style="color: #aaffff; font-weight: bold;">PeekFloat</span><span style=" ">&#40;</span>bnk,n<span style="color: #33ffdd;">+8</span><span style=" ">&#41;</span><br />
&nbsp; y#=<span style="color: #aaffff; font-weight: bold;">PeekFloat</span><span style=" ">&#40;</span>bnk,n<span style="color: #33ffdd;">+4</span><span style=" ">&#41;</span>+<span style="color: #aaffff; font-weight: bold;">PeekFloat</span><span style=" ">&#40;</span>bnk,n<span style="color: #33ffdd;">+12</span><span style=" ">&#41;</span><br />
&nbsp; <span style="color: #aaffff; font-weight: bold;">If</span> x&lt;<span style="color: #33ffdd;">0</span> <span style="color: #aaffff; font-weight: bold;">Or</span> x&gt;<span style="color: #33ffdd;">799</span> <span style="color: #aaffff; font-weight: bold;">Or</span> y#&gt;<span style="color: #33ffdd;">599</span> <span style="color: #aaffff; font-weight: bold;">Then</span><br />
&nbsp; &nbsp;<span style="color: #ffee00">;Если снежинка вышла за край экрана - удаляем ее из банка</span><br />
&nbsp; &nbsp;<span style="color: #aaffff; font-weight: bold;">CopyBank</span> bnk,addr,bnk,n,reclen<br />
&nbsp; &nbsp;addr=addr-reclen<br />
&nbsp; &nbsp;<span style="color: #ffee00">;Так как на ее место стала последняя, то адрес не увеличивается </span><br />
&nbsp; <span style="color: #aaffff; font-weight: bold;">Else</span><br />
&nbsp; &nbsp;<span style="color: #ffee00">;Иначе - отображаем на экране и обновляем координаты</span><br />
&nbsp; &nbsp;<span style="color: #aaffff; font-weight: bold;">WritePixelFast</span> x#,y#,col<span style=" ">&#40;</span><span style="color: #aaffff; font-weight: bold;">PeekByte</span><span style=" ">&#40;</span>bnk,n<span style="color: #33ffdd;">+12</span><span style=" ">&#41;</span><span style=" ">&#41;</span><br />
&nbsp; &nbsp;<span style="color: #aaffff; font-weight: bold;">PokeFloat</span> bnk,n,x#<br />
&nbsp; &nbsp;<span style="color: #aaffff; font-weight: bold;">PokeFloat</span> bnk,n<span style="color: #33ffdd;">+4</span>,y#<br />
&nbsp; &nbsp;<span style="color: #ffee00">;Переходим к следующей снежинке</span><br />
&nbsp; &nbsp;n=n+reclen<br />
&nbsp; <span style="color: #aaffff; font-weight: bold;">End</span> <span style="color: #aaffff; font-weight: bold;">If</span><br />
&nbsp;<span style="color: #aaffff; font-weight: bold;">Wend</span><br />
<br />
&nbsp;<span style="color: #aaffff; font-weight: bold;">UnlockBuffer</span> <span style="color: #aaffff; font-weight: bold;">BackBuffer</span><span style=" ">&#40;</span><span style=" ">&#41;</span><br />
&nbsp;<span style="color: #aaffff; font-weight: bold;">Flip</span><br />
<br />
</p>
<span style="color: #aaffff; font-weight: bold;">Until</span> <span style="color: #aaffff; font-weight: bold;">KeyHit</span><span style=" ">&#40;</span><span style="color: #33ffdd;">1</span><span style=" ">&#41;</span></div>
<p><br />
</p>
<div align="right"><a href="http://blitzetcetera.org/images/0/0c/BankAsDynamicArray.bb" class="internal" title="BankAsDynamicArray.bb">скачать исходный код</a></div>
<hr />
<p>Автор: <a href="http://blitzetcetera.org/index.php/%D0%A3%D1%87%D0%B0%D1%81%D1%82%D0%BD%D0%B8%D0%BA:Matt_Merkulov" title="Участник:Matt Merkulov">Матвей Меркулов</a> (E-mail: MattMerk@mail.ru, ICQ: 392-274-050)
</td><td class="rightside"><table cellspacing=0 cellpadding=0><tr><td class="rightheader"></td></tr></table></td></tr><tr colspan="3" height="40"><td>&nbsp;</td></tr><tr><td class="leftside"><table cellspacing=0 cellpadding=0><tr><td class="leftheader"></td></tr></table></td><td class="sheetbody"><a name="Игра «Жизнь»"></a><h1><span class="editsection">[<a href="http://blitzetcetera.org/index.php?title=Обсуждение:Игра «Жизнь»&amp;action=edit">обсудить</a>] [<a href="http://blitzetcetera.org/index.php?title=Игра «Жизнь»&amp;action=edit">править</a>]</span><span class="mw-headline">Игра «Жизнь»</span></h1>
</p>
<a name=".D0.98.D1.81.D1.82.D0.BE.D1.80.D0.B8.D1.8F_.D0.B8.D0.B3.D1.80.D1.8B"></a><h2><span class="editsection">[<a href="http://blitzetcetera.org/index.php?title=%D0%98%D0%B3%D1%80%D0%B0_%C2%AB%D0%96%D0%B8%D0%B7%D0%BD%D1%8C%C2%BB&amp;action=edit&amp;section=1" title="Игра «Жизнь»">править</a>]</span> <span class="mw-headline">История игры</span></h2>
<div class="floatleft"><span><a href="http://blitzetcetera.org/index.php/%D0%98%D0%B7%D0%BE%D0%B1%D1%80%D0%B0%D0%B6%D0%B5%D0%BD%D0%B8%D0%B5:Life1-01.jpg" class="image" title="Фото Дж. Х. Конуэя&quot;"><img alt="Фото Дж. Х. Конуэя&quot;" longdesc="http://blitzetcetera.org/index.php/%D0%98%D0%B7%D0%BE%D0%B1%D1%80%D0%B0%D0%B6%D0%B5%D0%BD%D0%B8%D0%B5:Life1-01.jpg" src="0-o1bb4p.jpg" width="285" height="326" /></a></span></div>
<p>Большая часть работ Джона Хортона Конуэя относится к области чистой математики, где он сделал несколько важных открытий. Но помимо серьезных исследований, Конуэй увлечен занимательной математикой. В этой области ему принадлежит немало работ, однако публикует он свои результаты чрезвычайно редко. В сентябрьском номере Scientific American за 1966 год была помещена статья Конуэя о "Стеганом одеяле миссис Перкинс", посвященная задачам о разрезании квадрата, а в июле 1967 года на страницах того же журнала появилась топологическая игра "Спрут", которую придумали Конуэй и М. С. Паттерсон. А в 1970 году он придумал увлекательную игру, которую назвал "Жизнь" и которая в одночасье принесла ему мировую известность. Он показал игру своему другу Мартину Гарднеру, который широко известен в России, как автор цикла великолепных книг по занимательной математике, и тот опубликовал ее все в том же Scientific American. Для игры "Жизнь" Вам не понадобится партнер - в нее можно играть одному. Возникающие в процессе игры ситуации очень похожи на реальные процессы, происходящие при зарождении, развитии и гибели колонии живых организмов в природе. Основная идея состоит в том, чтобы, начав с какого-нибудь простого расположения фишек (организмов), расставленных по одной клетке, проследить за эволюцией под действием "генетических законов" Конуэя, которые управляют рождением, гибелью и выживанием клеток. Конуэй тщательно подбирал свои правила и долго проверял их на практике, добиваясь, чтобы они удовлетворяли, по возможности, трем условиям:
</p>
<ul><li>Не должно быть ни одной начальной конфигурации, для которой существовало бы простое доказательство неограниченного роста популяции.
</li><li>В то же время, должны существовать такие начальные конфигурации, которые заведомо обладают возможностью беспредельно развиваться.
</li><li>Должны существовать простые начальные конфигурации, которые в течение значительного промежутка времени растут, претерпевают разнообразные изменения и заканчивают свою эволюцию одним из следующих трех способов: полностью исчезают, переходят в устойчивую конфигурацию и перестают изменяться вообще или же, наконец, выходят на колебательный режим, то есть бесконечный цикл превращений с определенным периодом.
</li></ul>
<p>Короче говоря, правила должны быть такими, чтобы поведение популяции было непредсказуемым.
</p>
<a name=".D0.9F.D1.80.D0.B0.D0.B2.D0.B8.D0.BB.D0.B0"></a><h2><span class="editsection">[<a href="http://blitzetcetera.org/index.php?title=%D0%98%D0%B3%D1%80%D0%B0_%C2%AB%D0%96%D0%B8%D0%B7%D0%BD%D1%8C%C2%BB&amp;action=edit&amp;section=2" title="Игра «Жизнь»">править</a>]</span> <span class="mw-headline">Правила</span></h2>
<p>Развитие организма происходит на поле с квадратными ячейками (бесконечном в идеале) наподобие листа тетради в клетку. Каждая ячейка может быть либо пуста, либо заполнена. Изначально дан организм, представляющий собой группу заполненных ячеек, называемых клетками. Каждую ячейку окружают 8 соседних ячеек, имеющих с данной ячейкой общую сторону или вершину. Клетки, расположенные в ячейках, соседних с данной называют соседями этой ячейки.
</p><p>Поколение состоит из трех этапов:
</p>
<ul><li>Если у клетки меньше двух или больше трех соседей, то она помечается, как обреченная на гибель.
</li><li>Если у пустой ячейки ровно три соседа, то она помечается, как рождающая.
</li><li>Все помеченные обреченные клетки гибнут (исчезают с поля), а помеченные пустые ячейки заполняются, рождая клетки.
</li></ul>
<p><br />
Цикл поколений продолжается до достижения одного из событий, описанных выше. Вот пример развития некоторых простейших конфигураций:
</p>
<div class="center"><div class="floatnone"><span><a href="http://blitzetcetera.org/index.php/%D0%98%D0%B7%D0%BE%D0%B1%D1%80%D0%B0%D0%B6%D0%B5%D0%BD%D0%B8%D0%B5:Life1-02.gif" class="image" title=""><img alt="" longdesc="http://blitzetcetera.org/index.php/%D0%98%D0%B7%D0%BE%D0%B1%D1%80%D0%B0%D0%B6%D0%B5%D0%BD%D0%B8%D0%B5:Life1-02.gif" src="y-m5ls84.gif" width="673" height="481" /></a></span></div></div>
<a name=".D0.A3.D1.81.D1.82.D0.BE.D0.B9.D1.87.D0.B8.D0.B2.D1.8B.D0.B5_.D0.BA.D0.BE.D0.BD.D1.84.D0.B8.D0.B3.D1.83.D1.80.D0.B0.D1.86.D0.B8.D0.B8"></a><h2><span class="editsection">[<a href="http://blitzetcetera.org/index.php?title=%D0%98%D0%B3%D1%80%D0%B0_%C2%AB%D0%96%D0%B8%D0%B7%D0%BD%D1%8C%C2%BB&amp;action=edit&amp;section=3" title="Игра «Жизнь»">править</a>]</span> <span class="mw-headline">Устойчивые конфигурации</span></h2>
<p>В конце развития организма часто остаются целые ворохи простейших устойчивых конфигураций. Это конфигурации ,в которых не рождаются и не погибают клетки.
</p>
<div class="center"><div class="floatnone"><span><a href="http://blitzetcetera.org/index.php/%D0%98%D0%B7%D0%BE%D0%B1%D1%80%D0%B0%D0%B6%D0%B5%D0%BD%D0%B8%D0%B5:Life1-03.gif" class="image" title=""><img alt="" longdesc="http://blitzetcetera.org/index.php/%D0%98%D0%B7%D0%BE%D0%B1%D1%80%D0%B0%D0%B6%D0%B5%D0%BD%D0%B8%D0%B5:Life1-03.gif" src="_413qe_3.gif" width="559" height="63" /></a></span></div></div>
<a name=".D0.A1.D0.B0.D0.BC.D0.BE.D0.B2.D0.BE.D1.81.D0.BF.D1.80.D0.BE.D0.B8.D0.B7.D0.B2.D0.BE.D0.B4.D1.8F.D1.89.D0.B8.D0.B5.D1.81.D1.8F_.D0.BA.D0.BE.D0.BD.D1.84.D0.B8.D0.B3.D1.83.D1.80.D0.B0.D1.86.D0.B8.D0.B8"></a><h2><span class="editsection">[<a href="http://blitzetcetera.org/index.php?title=%D0%98%D0%B3%D1%80%D0%B0_%C2%AB%D0%96%D0%B8%D0%B7%D0%BD%D1%8C%C2%BB&amp;action=edit&amp;section=4" title="Игра «Жизнь»">править</a>]</span> <span class="mw-headline">Самовоспроизводящиеся конфигурации</span></h2>
<p>Самовоспроизводящиеся конфигурации - конфигурации, которые через некоторое количество поколений (период) переходят в одну и ту же конфигурацию. Самовоспроизводящиеся конфигурации с периодом 2, как мигалка называют флип - флопами.
</p>
<div class="center"><div class="floatnone"><span><a href="http://blitzetcetera.org/index.php/%D0%98%D0%B7%D0%BE%D0%B1%D1%80%D0%B0%D0%B6%D0%B5%D0%BD%D0%B8%D0%B5:Life1-04.gif" class="image" title=""><img alt="" longdesc="http://blitzetcetera.org/index.php/%D0%98%D0%B7%D0%BE%D0%B1%D1%80%D0%B0%D0%B6%D0%B5%D0%BD%D0%B8%D0%B5:Life1-04.gif" src="mirwxlxy.gif" width="583" height="111" /></a></span></div></div>
<a name=".D0.9F.D0.B5.D1.80.D0.B5.D0.BC.D0.B5.D1.89.D0.B0.D1.8E.D1.89.D0.B8.D0.B5.D1.81.D1.8F_.D0.BA.D0.BE.D0.BD.D1.84.D0.B8.D0.B3.D1.83.D1.80.D0.B0.D1.86.D0.B8.D0.B8"></a><h2><span class="editsection">[<a href="http://blitzetcetera.org/index.php?title=%D0%98%D0%B3%D1%80%D0%B0_%C2%AB%D0%96%D0%B8%D0%B7%D0%BD%D1%8C%C2%BB&amp;action=edit&amp;section=5" title="Игра «Жизнь»">править</a>]</span> <span class="mw-headline">Перемещающиеся конфигурации</span></h2>
<p>Это самовоспроизводящиеся конфигурации, которые за свой период смещаются. Принято говорить, что конфигурация перемещается с 1/t скорости света, где t - период (т.к. максимальная скорость перемещения (скорость шахматного короля) это 1 ячейка по горизонтали / вертикали / диагонали за поколение).
</p>
<div class="center"><div class="floatnone"><span><a href="http://blitzetcetera.org/index.php/%D0%98%D0%B7%D0%BE%D0%B1%D1%80%D0%B0%D0%B6%D0%B5%D0%BD%D0%B8%D0%B5:Life1-05.gif" class="image" title=""><img alt="" longdesc="http://blitzetcetera.org/index.php/%D0%98%D0%B7%D0%BE%D0%B1%D1%80%D0%B0%D0%B6%D0%B5%D0%BD%D0%B8%D0%B5:Life1-05.gif" src="dfngi9qa.gif" width="463" height="31" /></a></span></div></div>
<p>Более длинным космическим кораблям необходим эскорт из кораблей меньшего размера, иначе на их пути будут возникать различные мелкие фигуры.
</p>
<a name=".D0.9D.D0.B5.D0.BE.D0.B3.D1.80.D0.B0.D0.BD.D0.B8.D1.87.D0.B5.D0.BD.D0.BD.D0.BE_.D1.80.D0.B0.D1.81.D1.82.D1.83.D1.89.D0.B8.D0.B5_.D0.BA.D0.BE.D0.BD.D1.84.D0.B8.D0.B3.D1.83.D1.80.D0.B0.D1.86.D0.B8.D0.B8"></a><h2><span class="editsection">[<a href="http://blitzetcetera.org/index.php?title=%D0%98%D0%B3%D1%80%D0%B0_%C2%AB%D0%96%D0%B8%D0%B7%D0%BD%D1%8C%C2%BB&amp;action=edit&amp;section=6" title="Игра «Жизнь»">править</a>]</span> <span class="mw-headline">Неограниченно растущие конфигурации</span></h2>
<p>Это конфигурации, количество клеток которых неограниченно возрастает в перспективе. Они могут периодически генерировать перемещающиеся конфигурации, как конфигурация "планерное ружье", которая выпускает за 30 поколений один планер. Конфигурации типа "паровоз" перемещаются по полю, оставляя за собой пульсирующий след. Этот след может стабилизироваться, тогда паровоз будет периодически генерировать стабильные конфигурации.
</p>
<div class="center"><div class="floatnone"><span><a href="http://blitzetcetera.org/index.php/%D0%98%D0%B7%D0%BE%D0%B1%D1%80%D0%B0%D0%B6%D0%B5%D0%BD%D0%B8%D0%B5:Life1-06.gif" class="image" title=""><img alt="" longdesc="http://blitzetcetera.org/index.php/%D0%98%D0%B7%D0%BE%D0%B1%D1%80%D0%B0%D0%B6%D0%B5%D0%BD%D0%B8%D0%B5:Life1-06.gif" src="reu-5svk.gif" width="310" height="200" /></a></span></div></div>
<a name=".D0.94.D0.BE.D0.BB.D0.B3.D0.BE.D0.B6.D0.B8.D0.B2.D1.83.D1.89.D0.B8.D0.B5_.D0.BA.D0.BE.D0.BD.D1.84.D0.B8.D0.B3.D1.83.D1.80.D0.B0.D1.86.D0.B8.D0.B8"></a><h2><span class="editsection">[<a href="http://blitzetcetera.org/index.php?title=%D0%98%D0%B3%D1%80%D0%B0_%C2%AB%D0%96%D0%B8%D0%B7%D0%BD%D1%8C%C2%BB&amp;action=edit&amp;section=7" title="Игра «Жизнь»">править</a>]</span> <span class="mw-headline">Долгоживущие конфигурации</span></h2>
<p>Конфигурации, относящиеся к долгожителям, размножаются на протяжении более ста
поколений, при этом они имеют довольно маленький размер вначале.
</p>
<div class="center"><div class="floatnone"><span><a href="http://blitzetcetera.org/index.php/%D0%98%D0%B7%D0%BE%D0%B1%D1%80%D0%B0%D0%B6%D0%B5%D0%BD%D0%B8%D0%B5:Life1-07.gif" class="image" title=""><img alt="" longdesc="http://blitzetcetera.org/index.php/%D0%98%D0%B7%D0%BE%D0%B1%D1%80%D0%B0%D0%B6%D0%B5%D0%BD%D0%B8%D0%B5:Life1-07.gif" src="h-vtyz8h.gif" width="567" height="95" /></a></span></div></div>
<a name=".D0.90.D0.B3.D0.B0.D1.80.D1.8B"></a><h2><span class="editsection">[<a href="http://blitzetcetera.org/index.php?title=%D0%98%D0%B3%D1%80%D0%B0_%C2%AB%D0%96%D0%B8%D0%B7%D0%BD%D1%8C%C2%BB&amp;action=edit&amp;section=8" title="Игра «Жизнь»">править</a>]</span> <span class="mw-headline">Агары</span></h2>
<p>Агары - это устойчивые однородные области. Эти структуры выглядят непоколебимы-
ми, но стоит лишь правильно поставить внутрь клетку и через несколько поколений
весь агар превратится в пульсирующую массу.
</p>
<div class="center"><div class="floatnone"><span><a href="http://blitzetcetera.org/index.php/%D0%98%D0%B7%D0%BE%D0%B1%D1%80%D0%B0%D0%B6%D0%B5%D0%BD%D0%B8%D0%B5:Life1-08.gif" class="image" title=""><img alt="" longdesc="http://blitzetcetera.org/index.php/%D0%98%D0%B7%D0%BE%D0%B1%D1%80%D0%B0%D0%B6%D0%B5%D0%BD%D0%B8%D0%B5:Life1-08.gif" src="bwzmd-d_-3.gif" width="223" height="63" /></a></span></div></div>
<a name=".D0.A4.D0.B8.D1.82.D0.B8.D0.BB.D0.B8"></a><h2><span class="editsection">[<a href="http://blitzetcetera.org/index.php?title=%D0%98%D0%B3%D1%80%D0%B0_%C2%AB%D0%96%D0%B8%D0%B7%D0%BD%D1%8C%C2%BB&amp;action=edit&amp;section=9" title="Игра «Жизнь»">править</a>]</span> <span class="mw-headline">Фитили</span></h2>
<p>Фитилями называют длинные диагональные линии из клеток. Если создать простой фитиль, то он будет постепенно "гореть", лишаясь за поколение по одной клетке с каждого конца, пока не "выгорит" полностью. "Горение" можно исключить "завязав узел". Если на конце фитиля расположить какую-л конфигурацию, то он может гореть, выделяя исчезающий "дым" или оставляя за собой след из устойчивых конфигураций или вообще оставляя пульсирующую "кашу". Также фитилями можно условно назвать другие продолговатые конфигурации, устойчивые в своем теле.
</p>
<div class="center"><div class="floatnone"><span><a href="http://blitzetcetera.org/index.php/%D0%98%D0%B7%D0%BE%D0%B1%D1%80%D0%B0%D0%B6%D0%B5%D0%BD%D0%B8%D0%B5:Life1-09.gif" class="image" title=""><img alt="" longdesc="http://blitzetcetera.org/index.php/%D0%98%D0%B7%D0%BE%D0%B1%D1%80%D0%B0%D0%B6%D0%B5%D0%BD%D0%B8%D0%B5:Life1-09.gif" src="rkq-qed7.gif" width="631" height="167" /></a></span></div></div>
<a name=".D0.90.D0.BB.D0.B3.D0.BE.D1.80.D0.B8.D1.82.D0.BC.D1.8B"></a><h2><span class="editsection">[<a href="http://blitzetcetera.org/index.php?title=%D0%98%D0%B3%D1%80%D0%B0_%C2%AB%D0%96%D0%B8%D0%B7%D0%BD%D1%8C%C2%BB&amp;action=edit&amp;section=10" title="Игра «Жизнь»">править</a>]</span> <span class="mw-headline">Алгоритмы</span></h2>
<p>Рассмотрим алгоритмы "Жизни" на ограниченном поле.
</p><p>Самый простой алгоритм реализации "Жизни" на экране компьютера - сканировать все поле, на котором происходит развитие организма. При этом, у каждой ячейки подсчитывается количество соседей. В следующее поколение переходят выжившие клетки (имеющие 2-х или 3-х соседей) и новорожденные (ячейки с ровно 3-мя соседями). Изменения записываются в экранный буфер, а информация считывается с экрана. Затем содержимое буфера копируется на экран и цикл повторяется.
<p>Существенный недостаток этого алгоритма - низкая скорость.
</p>
</p><p>Этот алгоритм можно усовершенствовать (и существенно увеличить скорость) за счет обработки только тех ячеек, которые являются соседними с клетками (т.к только на них может произойти рождение)  и самих клеток. Для этого понадобится массив для координат таких ячеек, которые я назвал "интересными", такой же массив для клеток и банк атрибутов для каждой ячейки поля. При обработке клетки, к атрибутам соседних ячеек в банке атрибутов прибавляется по единице (если там раньше был 0, то координаты этой ячейки заносятся в массив "интересных" ячеек). После такой обработки, в банке атрибутов будет содержаться информация о количестве соседей каждой ячейки. Теперь все "интересные" ячейки проверяются на возможность рождения, а клетки - вымирания. Далее, банк и массив ячеек очищаются.
</p><p>Здесь будет рассмотрен более усовершенствованный алгоритм. Поле будет иметь размеры 2<sup>n</sup> x 2<sup>n</sup>. Каждая ячейка будет представлена не двумя координатами, а адресом = X + Y * 2<sup>n</sup>, где X, Y - ее координаты на поле. Создается один массив для "интересных" ячеек и клеток, который будет представлен банком, где каждая ячейка (ее адрес) будет занимать 4 байта (Int) и будет организован так, как было предложено в предыдущей статье. Банк атрибутов, где каждая ячейка будет занимать 1 байт, будет хранить не только количество соседей (4 бит - 0..8), но и заполненность ячейки (1 бит - 0, 1), а также атрибут смены  (1 бит - 0, 1) и атрибут занесенности в список - см. ниже. При рождении клетки (заполнении пустой ячейки), ее адрес вместе с адресами всех соседними ячеек заносятся в банк "интересных" ячеек (если они уже не внесены - атрибут  занесенности в таком случае равен 1), атрибуты соседних ячеек увеличиваются на 1, а клетки - на 16 (или OR 16) - заполненность. Также, атрибут внесенности в список изменяется на 1. На экране клетка отображается белым пикселом. При смерти клетки (очищении заполненной ячейки), наоборот - атрибуты соседних клеток уменьшаются на 1, клетки - на 16 и все эти ячейки удаляются из банка, если атрибут стал равным 0. При этом, пиксел ячейки закрашивается черным.
<p>В цикле поколения сначала все ячейки проверяются на смену состояния заполненности. То есть, пустые ячейки, имеющие 3 соседа (атрибут = 3) становятся заполненными, а заполненные, имеющие 0, 1, 4, 5, 6, 7, 8 соседей (атрибуты 16, 17, 20, 21, 22, 23, 24) - пустыми. В таком случае, у них становится равным единице атрибут смены (OR 32). Затем снова проверяются все ячейки, но на этот раз - на атрибут смены. Если он присутствует, то клетка и соседние ячейки соотв. образом обрабатываются и атрибут снимается. Далее, все повторяется.
Эти усовершеснтвования ускоряют работу за счет общей оптимизации и того, что на обработку устойчивых конфигураций уходит минимум проверок и изменений.
Еще некоторые особенности: поле зациклено (использование адресации вместо координат, где адрес подвергается зацикливанию с помощью команды "AND" (см. статья про формулы логики), приводит к тому, что клетка, вышедшая за границу поля, появляется с другой стороны), "сменяемые" атрибуты для увеличения скорости занесены в массив (элементы, имеющие соотв. индексы равны единице, остальные - нулю), также создан массив для адресов соседних ячеек, относительно данной (приращения).
</p>
</p>
<a name=".D0.9F.D1.80.D0.BE.D0.B3.D1.80.D0.B0.D0.BC.D0.BC.D0.B0"></a><h2><span class="editsection">[<a href="http://blitzetcetera.org/index.php?title=%D0%98%D0%B3%D1%80%D0%B0_%C2%AB%D0%96%D0%B8%D0%B7%D0%BD%D1%8C%C2%BB&amp;action=edit&amp;section=11" title="Игра «Жизнь»">править</a>]</span> <span class="mw-headline">Программа</span></h2>
<p>На экран выводится эволюция прямоугольника, случайно заполненного клетками:
</p>
<div class="bb" style="font-family: monospace;background-color:#FFFFFF;border:1px dashed #CCCCCC;padding:10px;background-color:#225588;color:#FFFFFF;border:1px solid #003040;padding:10px;"><span style="color: #aaffff; font-weight: bold;">SeedRnd</span> <span style="color: #aaffff; font-weight: bold;">MilliSecs</span><span style=" ">&#40;</span><span style=" ">&#41;</span><br />
<p><br />
<span style="color: #ffee00">;Задаваемые константы: xres,yres - разрешение экрана, xrect, yrect -</span><br />
<span style="color: #ffee00">; - размеры прямоугольника, заполняемого клетками в случайном порядке,</span><br />
<span style="color: #ffee00">; cell - плотность клеток внутри этого прямоугольника(%), fsiz - параметр,</span><br />
<span style="color: #ffee00">; влияющий на размер поля. Размер - (2^fsiz)x(2^fsiz)</span><br />
<br />
<span style="color: #aaffff; font-weight: bold;">Const</span> xres=<span style="color: #33ffdd;">800</span>,yres=<span style="color: #33ffdd;">600</span>,xrect=<span style="color: #33ffdd;">600</span>,yrect=<span style="color: #33ffdd;">400</span>,cell=<span style="color: #33ffdd;">30</span>,fsiz=<span style="color: #33ffdd;">10</span><br />
<br />
<span style="color: #ffee00">;Вычисляемые константы: fsiz0 - ширина поля, fsiz1 - граница индекса</span><br />
<span style="color: #ffee00">; координаты (X,Y=0..fsiz1), fsiz2 - размер буфера под поле (fsiz0*fsiz),</span><br />
<span style="color: #ffee00">; fsiz3 - граница адреса ячейки в буфере (X+Y*fsiz0=0..fsiz3),</span><br />
<span style="color: #ffee00">; xc,yc - сдвиг экрана по отношению к полю (если показывается часть поля),</span><br />
<span style="color: #ffee00">; x1,y1,x2,y2 - координаты углов заполняемого клетками прямоугольника</span><br />
<br />
<span style="color: #aaffff; font-weight: bold;">Const</span> fsiz0=<span style="color: #33ffdd;">1</span> <span style="color: #aaffff; font-weight: bold;">Shl</span> fsiz,fsiz1=fsiz0<span style="color: #33ffdd;">-1</span>,fsiz2=<span style=" ">&#40;</span>fsiz0 <span style="color: #aaffff; font-weight: bold;">Shl</span> fsiz<span style=" ">&#41;</span>,fsiz3=fsiz2<span style="color: #33ffdd;">-1</span><br />
<span style="color: #aaffff; font-weight: bold;">Const</span> xc=<span style=" ">&#40;</span>fsiz0-xres<span style=" ">&#41;</span> <span style="color: #aaffff; font-weight: bold;">Shr</span> <span style="color: #33ffdd;">1</span>,yc=<span style=" ">&#40;</span>fsiz0-yres<span style=" ">&#41;</span> <span style="color: #aaffff; font-weight: bold;">Shr</span> <span style="color: #33ffdd;">1</span><br />
<span style="color: #aaffff; font-weight: bold;">Const</span> x1=<span style=" ">&#40;</span>xres-xrect<span style=" ">&#41;</span> <span style="color: #aaffff; font-weight: bold;">Shr</span> <span style="color: #33ffdd;">1</span>,x2=<span style=" ">&#40;</span><span style=" ">&#40;</span>xres+xrect<span style=" ">&#41;</span> <span style="color: #aaffff; font-weight: bold;">Shr</span> <span style="color: #33ffdd;">1</span><span style=" ">&#41;</span><span style="color: #33ffdd;">-1</span><br />
<span style="color: #aaffff; font-weight: bold;">Const</span> y1=<span style=" ">&#40;</span>yres-yrect<span style=" ">&#41;</span> <span style="color: #aaffff; font-weight: bold;">Shr</span> <span style="color: #33ffdd;">1</span>,y2=<span style=" ">&#40;</span><span style=" ">&#40;</span>yres+yrect<span style=" ">&#41;</span> <span style="color: #aaffff; font-weight: bold;">Shr</span> <span style="color: #33ffdd;">1</span><span style=" ">&#41;</span><span style="color: #33ffdd;">-1</span><br />
<br />
<span style="color: #ffee00">;Переменные, используемые как в программе, так и в процедуре.</span><br />
<span style="color: #aaffff; font-weight: bold;">Global</span> ib, bnk, dbnk, dend<br />
<br />
<span style="color: #aaffff; font-weight: bold;">Graphics</span> xres,yres,<span style="color: #33ffdd;">32</span><br />
<br />
<span style="color: #ffee00">;Скрытый экранный буфер</span><br />
buf=<span style="color: #aaffff; font-weight: bold;">CreateImage</span><span style=" ">&#40;</span>xres,yres<span style=" ">&#41;</span><br />
ib=<span style="color: #aaffff; font-weight: bold;">ImageBuffer</span><span style=" ">&#40;</span>buf<span style=" ">&#41;</span><br />
<span style="color: #aaffff; font-weight: bold;">LockBuffer</span> ib<br />
<br />
<span style="color: #ffee00">;Банк под атрибуты ячеек</span><br />
bnk=<span style="color: #aaffff; font-weight: bold;">CreateBank</span><span style=" ">&#40;</span>fsiz2<span style=" ">&#41;</span><br />
<span style="color: #ffee00">;Банк под координаты клеток</span><br />
dbnk=<span style="color: #aaffff; font-weight: bold;">CreateBank</span><span style=" ">&#40;</span>fsiz2 <span style="color: #aaffff; font-weight: bold;">Shl</span> <span style="color: #33ffdd;">2</span><span style=" ">&#41;</span><br />
<br />
<span style="color: #ffee00">;Заполнение массива сдвига адреса ячейки для определения соседей</span><br />
<span style="color: #aaffff; font-weight: bold;">Dim</span> neig<span style=" ">&#40;</span><span style="color: #33ffdd;">8</span><span style=" ">&#41;</span><br />
k=-fsiz0<span style="color: #33ffdd;">-1</span><br />
<span style="color: #aaffff; font-weight: bold;">For</span> n=<span style="color: #33ffdd;">0</span> <span style="color: #aaffff; font-weight: bold;">To</span> <span style="color: #33ffdd;">7</span><br />
&nbsp;<span style="color: #aaffff; font-weight: bold;">If</span> n=<span style="color: #33ffdd;">3</span> <span style="color: #aaffff; font-weight: bold;">Then</span> k=<span style="color: #33ffdd;">-1</span><br />
&nbsp;<span style="color: #aaffff; font-weight: bold;">If</span> n=<span style="color: #33ffdd;">5</span> <span style="color: #aaffff; font-weight: bold;">Then</span> k=fsiz0<span style="color: #33ffdd;">-1</span><br />
&nbsp;neig<span style=" ">&#40;</span>n<span style=" ">&#41;</span>=k<br />
&nbsp;k=k<span style="color: #33ffdd;">+1</span>+<span style=" ">&#40;</span>n=<span style="color: #33ffdd;">3</span><span style=" ">&#41;</span><br />
<span style="color: #aaffff; font-weight: bold;">Next</span><br />
<br />
<span style="color: #ffee00">;Заполнение массива правил</span><br />
<span style="color: #aaffff; font-weight: bold;">Dim</span> change<span style=" ">&#40;</span><span style="color: #33ffdd;">24</span><span style=" ">&#41;</span><br />
change<span style=" ">&#40;</span><span style="color: #33ffdd;">3</span><span style=" ">&#41;</span>=<span style="color: #33ffdd;">1</span><br />
<span style="color: #aaffff; font-weight: bold;">For</span> n=<span style="color: #33ffdd;">16</span> <span style="color: #aaffff; font-weight: bold;">To</span> <span style="color: #33ffdd;">24</span><br />
&nbsp;<span style="color: #aaffff; font-weight: bold;">If</span> n&lt;&gt;<span style="color: #33ffdd;">18</span> <span style="color: #aaffff; font-weight: bold;">And</span> n&lt;&gt;<span style="color: #33ffdd;">19</span> <span style="color: #aaffff; font-weight: bold;">Then</span> change<span style=" ">&#40;</span>n<span style=" ">&#41;</span>=<span style="color: #33ffdd;">1</span><br />
<span style="color: #aaffff; font-weight: bold;">Next</span><br />
<br />
<span style="color: #ffee00">;Граница банка под &quot;интересные&quot; ячейки</span><br />
dend=<span style="color: #33ffdd;">-4</span><br />
<span style="color: #ffee00">;Заполнение клетками прямоугольника</span><br />
<span style="color: #aaffff; font-weight: bold;">For</span> x=x1 <span style="color: #aaffff; font-weight: bold;">To</span> x2<br />
&nbsp;<span style="color: #aaffff; font-weight: bold;">For</span> y=y1 <span style="color: #aaffff; font-weight: bold;">To</span> y2<br />
&nbsp; <span style="color: #ffee00">;Случайный выбор: поставить ли клетку в данном месте?</span><br />
&nbsp; <span style="color: #aaffff; font-weight: bold;">If</span> <span style="color: #aaffff; font-weight: bold;">Rand</span><span style=" ">&#40;</span><span style="color: #33ffdd;">0</span>,<span style="color: #33ffdd;">99</span><span style=" ">&#41;</span>&lt;cell <span style="color: #aaffff; font-weight: bold;">Then</span> putcell x,y<br />
&nbsp;<span style="color: #aaffff; font-weight: bold;">Next</span><br />
<span style="color: #aaffff; font-weight: bold;">Next</span><br />
<br />
<span style="color: #aaffff; font-weight: bold;">Repeat</span><br />
<br />
&nbsp;<span style="color: #ffee00">;Отображение буфера на экран</span><br />
&nbsp;<span style="color: #aaffff; font-weight: bold;">UnlockBuffer</span> ib<br />
&nbsp;<span style="color: #aaffff; font-weight: bold;">DrawBlock</span> buf,<span style="color: #33ffdd;">0</span>,<span style="color: #33ffdd;">0</span><br />
<br />
&nbsp;<span style="color: #ffee00">;Подсчет количества поколений в секунду, вывод их и кол-во &quot;интересных&quot;</span><br />
&nbsp;<span style="color: #ffee00">; ячеек на экран </span><br />
&nbsp;<span style="color: #aaffff; font-weight: bold;">Color</span> <span style="color: #33ffdd;">0</span>,<span style="color: #33ffdd;">0</span>,<span style="color: #33ffdd;">0</span><br />
&nbsp;<span style="color: #aaffff; font-weight: bold;">Rect</span> <span style="color: #33ffdd;">0</span>,<span style="color: #33ffdd;">0</span>,<span style="color: #33ffdd;">50</span>,<span style="color: #33ffdd;">10</span><br />
&nbsp;<span style="color: #aaffff; font-weight: bold;">Color</span> <span style="color: #33ffdd;">255</span>,<span style="color: #33ffdd;">255</span>,<span style="color: #33ffdd;">255</span><br />
&nbsp;<span style="color: #aaffff; font-weight: bold;">Text</span> <span style="color: #33ffdd;">0</span>,<span style="color: #33ffdd;">0</span>,<span style="color: #33ffdd;">1000.0</span>/<span style=" ">&#40;</span><span style="color: #aaffff; font-weight: bold;">MilliSecs</span><span style=" ">&#40;</span><span style=" ">&#41;</span>-fps<span style=" ">&#41;</span><br />
&nbsp;<span style="color: #aaffff; font-weight: bold;">Text</span> <span style="color: #33ffdd;">0</span>,<span style="color: #33ffdd;">8</span>,dend <span style="color: #aaffff; font-weight: bold;">Shr</span> <span style="color: #33ffdd;">2</span><br />
&nbsp;fps=<span style="color: #aaffff; font-weight: bold;">MilliSecs</span><span style=" ">&#40;</span><span style=" ">&#41;</span><br />
<br />
&nbsp;<span style="color: #aaffff; font-weight: bold;">LockBuffer</span> ib<br />
<br />
&nbsp;<span style="color: #ffee00">;Цикл по всем &quot;интересным&quot; ячейкам</span><br />
&nbsp;n=<span style="color: #33ffdd;">0</span><br />
&nbsp;<span style="color: #aaffff; font-weight: bold;">While</span> n&lt;=dend<br />
&nbsp; <span style="color: #ffee00">;Определение адреса ячейки и ее атрибутов</span><br />
&nbsp; pos=<span style="color: #aaffff; font-weight: bold;">PeekInt</span><span style=" ">&#40;</span>dbnk,n<span style=" ">&#41;</span><br />
&nbsp; k=<span style="color: #aaffff; font-weight: bold;">PeekByte</span><span style=" ">&#40;</span>bnk,pos<span style=" ">&#41;</span><br />
&nbsp; <span style="color: #ffee00">;Если она подвержена изменением (должна заполниться или очиститься) -</span><br />
&nbsp; <span style="color: #ffee00">; включается атрибут изменения</span><br />
&nbsp; <span style="color: #aaffff; font-weight: bold;">If</span> change<span style=" ">&#40;</span>k <span style="color: #aaffff; font-weight: bold;">And</span> <span style="color: #33ffdd;">31</span><span style=" ">&#41;</span> <span style="color: #aaffff; font-weight: bold;">Then</span> <span style="color: #aaffff; font-weight: bold;">PokeByte</span> bnk,pos,k <span style="color: #aaffff; font-weight: bold;">Or</span> <span style="color: #33ffdd;">32</span><br />
&nbsp; <span style="color: #ffee00">;Если пустая ячейка имеет 0 соседей - она удаляется из списка</span><br />
&nbsp; <span style="color: #ffee00">; и очищается от атрибута занесенности</span><br />
&nbsp; <span style="color: #aaffff; font-weight: bold;">If</span> <span style=" ">&#40;</span>k <span style="color: #aaffff; font-weight: bold;">And</span> <span style="color: #33ffdd;">31</span><span style=" ">&#41;</span>=<span style="color: #33ffdd;">0</span> <span style="color: #aaffff; font-weight: bold;">Then</span><br />
&nbsp; &nbsp;<span style="color: #aaffff; font-weight: bold;">PokeInt</span> dbnk,n,<span style="color: #aaffff; font-weight: bold;">PeekInt</span><span style=" ">&#40;</span>dbnk,dend<span style=" ">&#41;</span><br />
&nbsp; &nbsp;<span style="color: #aaffff; font-weight: bold;">PokeByte</span> bnk,pos,<span style="color: #33ffdd;">0</span><br />
&nbsp; &nbsp;dend=dend<span style="color: #33ffdd;">-4</span><br />
&nbsp; <span style="color: #aaffff; font-weight: bold;">Else</span><br />
&nbsp; &nbsp;n=n<span style="color: #33ffdd;">+4</span><br />
&nbsp; <span style="color: #aaffff; font-weight: bold;">End</span> <span style="color: #aaffff; font-weight: bold;">If</span><br />
&nbsp;<span style="color: #aaffff; font-weight: bold;">Wend</span><br />
<br />
&nbsp;n=<span style="color: #33ffdd;">0</span><br />
&nbsp;<span style="color: #ffee00">;Дополнительная переменная, чтобы не проверять новорожденные клетки</span><br />
&nbsp;dend2=dend<br />
&nbsp;<span style="color: #ffee00">;Второй цикл по всем &quot;интересным&quot; ячейкам</span><br />
&nbsp;<span style="color: #aaffff; font-weight: bold;">While</span> n&lt;=dend2<br />
&nbsp; <span style="color: #ffee00">;Определение адреса ячейки и ее атрибутов</span><br />
&nbsp; pos=<span style="color: #aaffff; font-weight: bold;">PeekInt</span><span style=" ">&#40;</span>dbnk,n<span style=" ">&#41;</span><br />
&nbsp; k=<span style="color: #aaffff; font-weight: bold;">PeekByte</span><span style=" ">&#40;</span>bnk,pos<span style=" ">&#41;</span><br />
<br />
&nbsp; <span style="color: #ffee00">;Проверка на атрибут изменения</span><br />
&nbsp; <span style="color: #aaffff; font-weight: bold;">If</span> k <span style="color: #aaffff; font-weight: bold;">And</span> <span style="color: #33ffdd;">32</span><br />
&nbsp; &nbsp;<span style="color: #ffee00">;Определение атрибута заполненности</span><br />
&nbsp; &nbsp;v=<span style=" ">&#40;</span>k <span style="color: #aaffff; font-weight: bold;">And</span> <span style="color: #33ffdd;">16</span><span style=" ">&#41;</span> <span style="color: #aaffff; font-weight: bold;">Shr</span> <span style="color: #33ffdd;">4</span><br />
&nbsp; &nbsp;<span style="color: #ffee00">;Определение координат ячейки</span><br />
&nbsp; &nbsp;x=<span style=" ">&#40;</span>pos <span style="color: #aaffff; font-weight: bold;">And</span> fsiz1<span style=" ">&#41;</span>-xc<br />
&nbsp; &nbsp;y=<span style=" ">&#40;</span>pos <span style="color: #aaffff; font-weight: bold;">Shr</span> fsiz<span style=" ">&#41;</span>-yc<br />
&nbsp; &nbsp;<span style="color: #ffee00">;Смена изображения ячейки: если она была заполнена - очистить (цвет 0 -</span><br />
&nbsp; &nbsp;<span style="color: #ffee00">; черный), иначе - заполнить (цвет -1 - белый)</span><br />
&nbsp; &nbsp;<span style="color: #aaffff; font-weight: bold;">If</span> x&gt;=<span style="color: #33ffdd;">0</span> <span style="color: #aaffff; font-weight: bold;">And</span> x&lt;xres <span style="color: #aaffff; font-weight: bold;">And</span> y&gt;=<span style="color: #33ffdd;">0</span> <span style="color: #aaffff; font-weight: bold;">And</span> y&lt;yres <span style="color: #aaffff; font-weight: bold;">Then</span> <span style="color: #aaffff; font-weight: bold;">WritePixelFast</span> x,y,v<span style="color: #33ffdd;">-1</span>,ib<br />
&nbsp; &nbsp;<span style="color: #ffee00">;Вычисление приращения атрибута кол-ва соседей для соседей ячейки:</span><br />
&nbsp; &nbsp;<span style="color: #ffee00">; если ячейка заполнилась, то +1, очистилась - -1</span><br />
&nbsp; &nbsp;v=<span style="color: #33ffdd;">1</span>-<span style=" ">&#40;</span>v <span style="color: #aaffff; font-weight: bold;">Shl</span> <span style="color: #33ffdd;">1</span><span style=" ">&#41;</span><br />
&nbsp; &nbsp;<span style="color: #ffee00">;Цикл по всем соседям</span><br />
&nbsp; &nbsp;<span style="color: #aaffff; font-weight: bold;">For</span> nn=<span style="color: #33ffdd;">0</span> <span style="color: #aaffff; font-weight: bold;">To</span> <span style="color: #33ffdd;">7</span><br />
&nbsp; &nbsp; <span style="color: #ffee00">;Определение адреса соседней ячейки и ее атрибутов</span><br />
&nbsp; &nbsp; addr=<span style=" ">&#40;</span>neig<span style=" ">&#40;</span>nn<span style=" ">&#41;</span>+pos<span style=" ">&#41;</span> <span style="color: #aaffff; font-weight: bold;">And</span> fsiz3<br />
&nbsp; &nbsp; p=<span style="color: #aaffff; font-weight: bold;">PeekByte</span><span style=" ">&#40;</span>bnk,addr<span style=" ">&#41;</span><br />
&nbsp; &nbsp; <span style="color: #ffee00">;Если прибавляется атрибут кол-ва соседей у ячейки, у которой атрибут</span><br />
&nbsp; &nbsp; <span style="color: #ffee00">; занесенности равен 0 - заносим ее в банк &quot;интересных&quot; и</span><br />
&nbsp; &nbsp; <span style="color: #ffee00">; устанавливаем значение этого атрибута равным 1</span><br />
&nbsp; &nbsp; <span style="color: #aaffff; font-weight: bold;">If</span> p=<span style="color: #33ffdd;">0</span> <span style="color: #aaffff; font-weight: bold;">Then</span><br />
&nbsp; &nbsp; &nbsp;dend=dend<span style="color: #33ffdd;">+4</span><br />
&nbsp; &nbsp; &nbsp;<span style="color: #aaffff; font-weight: bold;">PokeInt</span> dbnk,dend,addr<br />
&nbsp; &nbsp; &nbsp;<span style="color: #aaffff; font-weight: bold;">PokeByte</span> bnk,addr,<span style="color: #33ffdd;">65</span><br />
&nbsp; &nbsp; <span style="color: #aaffff; font-weight: bold;">Else</span><br />
&nbsp; &nbsp; &nbsp;<span style="color: #ffee00">;Иначе - только изменение атрибута кол-ва соседей</span><br />
&nbsp; &nbsp; &nbsp;<span style="color: #aaffff; font-weight: bold;">PokeByte</span> bnk,addr,p+v<br />
&nbsp; &nbsp; <span style="color: #aaffff; font-weight: bold;">End</span> <span style="color: #aaffff; font-weight: bold;">If</span><br />
&nbsp; &nbsp;<span style="color: #aaffff; font-weight: bold;">Next</span><br />
&nbsp; &nbsp;<span style="color: #ffee00">;Смена атрибута заполнения и атрибута изменения (48=16+32)</span><br />
&nbsp; &nbsp;<span style="color: #aaffff; font-weight: bold;">PokeByte</span> bnk,pos,k <span style="color: #aaffff; font-weight: bold;">Xor</span> <span style="color: #33ffdd;">48</span> &nbsp; <br />
&nbsp; <span style="color: #aaffff; font-weight: bold;">End</span> <span style="color: #aaffff; font-weight: bold;">If</span> &nbsp;<br />
&nbsp; n=n<span style="color: #33ffdd;">+4</span><br />
&nbsp;<span style="color: #aaffff; font-weight: bold;">Wend</span><br />
<br />
&nbsp;<span style="color: #ffee00">;Если нажата клавиша &quot;Esc&quot; - выходим</span><br />
<span style="color: #aaffff; font-weight: bold;">Until</span> <span style="color: #aaffff; font-weight: bold;">KeyHit</span><span style=" ">&#40;</span><span style="color: #33ffdd;">1</span><span style=" ">&#41;</span><br />
<br />
<span style="color: #ffee00">;Функция, заполняющая ячейку с координатами (x,y) и производящая</span><br />
<span style="color: #ffee00">; дополнительные действия.</span><br />
<span style="color: #aaffff; font-weight: bold;">Function</span> putcell<span style=" ">&#40;</span>x,y<span style=" ">&#41;</span><br />
<br />
<span style="color: #ffee00">;Вычисление адреса клетки (в соответствии с сдвигом экрана отн. поля)</span><br />
pos=x+xc+<span style=" ">&#40;</span><span style=" ">&#40;</span>y+yc<span style=" ">&#41;</span> <span style="color: #aaffff; font-weight: bold;">Shl</span> fsiz<span style=" ">&#41;</span><br />
<span style="color: #ffee00">;Занесение в банк соседей и клетки</span><br />
<span style="color: #aaffff; font-weight: bold;">For</span> nn=<span style="color: #33ffdd;">0</span> <span style="color: #aaffff; font-weight: bold;">To</span> <span style="color: #33ffdd;">8</span><br />
&nbsp;<span style="color: #ffee00">;Определение адреса ячейки (команда AND зацикливает поле, сохраняя</span><br />
&nbsp;<span style="color: #ffee00">; адрес в пределах 0..fsiz3)</span><br />
&nbsp;addr=<span style=" ">&#40;</span>neig<span style=" ">&#40;</span>nn<span style=" ">&#41;</span>+pos<span style=" ">&#41;</span> <span style="color: #aaffff; font-weight: bold;">And</span> fsiz3<br />
&nbsp;p=<span style="color: #aaffff; font-weight: bold;">PeekByte</span><span style=" ">&#40;</span>bnk,addr<span style=" ">&#41;</span><br />
&nbsp;<span style="color: #ffee00">;Увеличение атрибута кол-ва соседей ячейки на 1. Если атрибут заполненности</span><br />
&nbsp;<span style="color: #ffee00">; равен 0, значит ячейка не занесена в банк &quot;интересных&quot;, поэтому заносим.</span><br />
&nbsp;<span style="color: #aaffff; font-weight: bold;">If</span> p=<span style="color: #33ffdd;">0</span> <span style="color: #aaffff; font-weight: bold;">Then</span><br />
&nbsp; <span style="color: #ffee00">;Каждый адрес занимает в банке 4 байта</span><br />
&nbsp; dend=dend<span style="color: #33ffdd;">+4</span><br />
&nbsp; <span style="color: #aaffff; font-weight: bold;">PokeInt</span> dbnk,dend,addr<br />
&nbsp; <span style="color: #aaffff; font-weight: bold;">PokeByte</span> bnk,addr,<span style="color: #33ffdd;">65</span><br />
&nbsp;<span style="color: #aaffff; font-weight: bold;">Else</span><br />
&nbsp; <span style="color: #aaffff; font-weight: bold;">PokeByte</span> bnk,addr,p<span style="color: #33ffdd;">+1</span><br />
&nbsp;<span style="color: #aaffff; font-weight: bold;">End</span> <span style="color: #aaffff; font-weight: bold;">If</span><br />
<span style="color: #aaffff; font-weight: bold;">Next</span><br />
<span style="color: #ffee00">;Заносим в банк атрибутов на адрес ячейки атрибут &quot;заполненности&quot;</span><br />
<span style="color: #ffee00">; минус 1 (так как в предыдущем цикле был добавлен атрибут &quot;кол-ва</span><br />
<span style="color: #ffee00">; соседей&quot;)</span><br />
<span style="color: #aaffff; font-weight: bold;">PokeByte</span> bnk,pos,<span style="color: #aaffff; font-weight: bold;">PeekByte</span><span style=" ">&#40;</span>bnk,pos<span style=" ">&#41;</span> + <span style="color: #33ffdd;">15</span><br />
<span style="color: #ffee00">;Отображение клетки в экранном буфере</span><br />
<span style="color: #aaffff; font-weight: bold;">WritePixel</span> x,y,<span style="color: #33ffdd;">-1</span>,ib<br />
</p>
<span style="color: #aaffff; font-weight: bold;">End Function</span></div>
<p>Материалы для статьи взяты из книги Мартина Гарднера "Крестики-нолики".
</p>
<div align="right"><a href="http://blitzetcetera.org/images/3/3d/Life.bb" class="internal" title="Life.bb">скачать исходный код</a></div>
<hr />
<p>Автор: <a href="http://blitzetcetera.org/index.php/%D0%A3%D1%87%D0%B0%D1%81%D1%82%D0%BD%D0%B8%D0%BA:Matt_Merkulov" title="Участник:Matt Merkulov">Матвей Меркулов</a> (E-mail: MattMerk@mail.ru, ICQ: 392-274-050)
</td><td class="rightside"><table cellspacing=0 cellpadding=0><tr><td class="rightheader"></td></tr></table></td></tr><tr colspan="3" height="40"><td>&nbsp;</td></tr><tr><td class="leftside"><table cellspacing=0 cellpadding=0><tr><td class="leftheader"></td></tr></table></td><td class="sheetbody"><a name="Виртуальный художник: цвет"></a><h1><span class="editsection">[<a href="http://blitzetcetera.org/index.php?title=Обсуждение:Виртуальный художник: цвет&amp;action=edit">обсудить</a>] [<a href="http://blitzetcetera.org/index.php?title=Виртуальный художник: цвет&amp;action=edit">править</a>]</span><span class="mw-headline">Виртуальный художник: цвет</span></h1>
</p>
<a name=".D0.92.D0.B2.D0.B5.D0.B4.D0.B5.D0.BD.D0.B8.D0.B5_4"></a><h2><span class="editsection">[<a href="http://blitzetcetera.org/index.php?title=%D0%92%D0%B8%D1%80%D1%82%D1%83%D0%B0%D0%BB%D1%8C%D0%BD%D1%8B%D0%B9_%D1%85%D1%83%D0%B4%D0%BE%D0%B6%D0%BD%D0%B8%D0%BA:_%D1%86%D0%B2%D0%B5%D1%82&amp;action=edit&amp;section=1" title="Виртуальный художник: цвет">править</a>]</span> <span class="mw-headline">Введение</span></h2>
<p>Этот цикл статей посвящен программной трансформации изображений. В первой статье будем работать с цветом. В BlitzBasic цвет задается тремя составляющими: красной, зеленой и синей. Чтобы создать цвет, необходимо задать интенсивность каждой составляющей в диапазоне от 0 до 255. Эти составляющие, смешиваясь, дают цвет. Если, скажем, интенсивность красной составляющей в несколько раз превосходит интенсивности двух оставшихся, то полученный цвет будет очень похож на красный. Большую роль играет также среднее между значениями интенсивности: чем оно ближе к 255, тем ярче цвет (ближе к белому), чем ближе к 0, тем цвет темнее (ближе к черному). Вот примеры: (0,0,255) - чистый синий, (255,255,0) - желтый, (0,0,0) - черный, (128,128,128) - серый, (255,255,255) - белый.
</p><p>Манипуляции с цветом заключаются в том, что каждый пиксел рисунка окрашивается в цвет, вычисляемый на основе первоначального цвета. Пути вычисления могут быть довольно разнообразными. В памяти, 32-битный цвет разлагается на значения интенсивностей следующим образом:
</p>
<table border="2" align="center">

<tr align="center">
<td align="right"> Номер байта:
</td><td> 4
</td><td> 3
</td><td> 2
</td><td> 1
</td></tr>
<tr align="center">
<td align="right"> Двоичное представление числа:
</td><td> 11111111
</td><td> 00000000
</td><td> 00000000
</td><td> 00000000
</td></tr>
<tr align="center">
<td align="right"> Значения интенсивности:
</td><td> красного
</td><td> зеленого
</td><td> синего
</td></tr></table>
<p>Программное разложение на составляющие цвета пиксела с координатами (x,y):
</p>
<div class="bb" style="font-family: monospace;background-color:#FFFFFF;border:1px dashed #CCCCCC;padding:10px;background-color:#225588;color:#FFFFFF;border:1px solid #003040;padding:10px;">p = <span style="color: #aaffff; font-weight: bold;">ReadPixel</span><span style=" ">&#40;</span>x,y<span style=" ">&#41;</span><br />
<p>r = <span style=" ">&#40;</span>p <span style="color: #aaffff; font-weight: bold;">Shr</span> <span style="color: #33ffdd;">16</span><span style=" ">&#41;</span> <span style="color: #aaffff; font-weight: bold;">And</span> <span style="color: #33ffdd;">255</span><br />
g = <span style=" ">&#40;</span>p <span style="color: #aaffff; font-weight: bold;">Shr</span> <span style="color: #33ffdd;">8</span><span style=" ">&#41;</span> <span style="color: #aaffff; font-weight: bold;">And</span> <span style="color: #33ffdd;">255</span><br />
</p>
b = p <span style="color: #aaffff; font-weight: bold;">And</span> <span style="color: #33ffdd;">255</span></div>
<p>Примеры этой статьи используют изображение размером 640х480 пикселей:
</p>
<div class="center"><div class="thumb tnone"><div class="thumbinner" style="width:182px;"><a href="http://blitzetcetera.org/index.php/%D0%98%D0%B7%D0%BE%D0%B1%D1%80%D0%B0%D0%B6%D0%B5%D0%BD%D0%B8%D0%B5:Painter1.jpg" class="internal" title=""><img alt="" longdesc="http://blitzetcetera.org/index.php/%D0%98%D0%B7%D0%BE%D0%B1%D1%80%D0%B0%D0%B6%D0%B5%D0%BD%D0%B8%D0%B5:Painter1.jpg" class="thumbimage" src="klgfvbp2.jpg" width="180" height="135" /></a>  <div class="thumbcaption"><div class="magnify" style="float:right"><a href="http://blitzetcetera.org/index.php/%D0%98%D0%B7%D0%BE%D0%B1%D1%80%D0%B0%D0%B6%D0%B5%D0%BD%D0%B8%D0%B5:Painter1.jpg" class="internal" title="Увеличить"><img src="gau13a4-.png" width="15" height="11" alt="" /></a></div></div></div></div></div>
<a name=".D0.A2.D1.80.D0.B0.D0.BD.D1.81.D1.84.D0.BE.D1.80.D0.BC.D0.B0.D1.86.D0.B8.D1.8F_.D0.BA.D0.B0.D0.BD.D0.B0.D0.BB.D0.B0"></a><h2><span class="editsection">[<a href="http://blitzetcetera.org/index.php?title=%D0%92%D0%B8%D1%80%D1%82%D1%83%D0%B0%D0%BB%D1%8C%D0%BD%D1%8B%D0%B9_%D1%85%D1%83%D0%B4%D0%BE%D0%B6%D0%BD%D0%B8%D0%BA:_%D1%86%D0%B2%D0%B5%D1%82&amp;action=edit&amp;section=2" title="Виртуальный художник: цвет">править</a>]</span> <span class="mw-headline">Трансформация канала</span></h2>
<p>Рассмотрим простейший вариант: трансформация каждого канала (то есть карты интенсивностей одной из составляющих цвета) в отдельности. Самый наглядный способ ее задания - это построить график, где по оси X будут располагаться значения исходной интенсивности, по Y - конечной. Обе оси ограничены диапазоном (0,255). Чтобы найти конечную интенсивность, пользуясь графиком, нужно провести перпендикуляр в точке на оси X, соответствующей исходной интенсивности и посмотреть, на какой высоте он пересекается с графиком. Вот графики эффектов такого типа:
</p>
<div class="center"><div class="floatnone"><span><a href="http://blitzetcetera.org/index.php/%D0%98%D0%B7%D0%BE%D0%B1%D1%80%D0%B0%D0%B6%D0%B5%D0%BD%D0%B8%D0%B5:Painter1-01.gif" class="image" title=""><img alt="" longdesc="http://blitzetcetera.org/index.php/%D0%98%D0%B7%D0%BE%D0%B1%D1%80%D0%B0%D0%B6%D0%B5%D0%BD%D0%B8%D0%B5:Painter1-01.gif" src="enn0gi2r.gif" width="680" height="408" /></a></span></div></div>
<p>Но на практике, естественно, придется задавать трансформацию формулой или куском программы. Математически эту трансформацию можно представить так:
</p>
<ul><li>r' = f<sub>r</sub>(r)
</li><li>g' = f<sub>g</sub>(g)
</li><li>b' = f<sub>b</sub>(b)
</li></ul>
<p><br />
Программа:
</p>
<div class="bb" style="font-family: monospace;background-color:#FFFFFF;border:1px dashed #CCCCCC;padding:10px;background-color:#225588;color:#FFFFFF;border:1px solid #003040;padding:10px;"><span style="color: #aaffff; font-weight: bold;">Const</span> k#=<span style="color: #33ffdd;">180.0</span>/<span style="color: #33ffdd;">255</span>,k2#=<span style="color: #33ffdd;">360.0</span>/<span style="color: #33ffdd;">255</span>,fx=<span style="color: #33ffdd;">1</span><br />
<p><span style="color: #aaffff; font-weight: bold;">Dim</span> col<span style=" ">&#40;</span><span style="color: #33ffdd;">2</span><span style=" ">&#41;</span><br />
<br />
<span style="color: #aaffff; font-weight: bold;">Graphics</span> <span style="color: #33ffdd;">640</span>,<span style="color: #33ffdd;">480</span>,<span style="color: #33ffdd;">32</span><br />
<br />
i=<span style="color: #aaffff; font-weight: bold;">LoadImage</span><span style=" ">&#40;</span><span style="color: #00ff66;">&quot;image1.jpg&quot;</span><span style=" ">&#41;</span><br />
<span style="color: #aaffff; font-weight: bold;">DrawBlock</span> i,<span style="color: #33ffdd;">0</span>,<span style="color: #33ffdd;">0</span><br />
<span style="color: #aaffff; font-weight: bold;">For</span> y=<span style="color: #33ffdd;">0</span> <span style="color: #aaffff; font-weight: bold;">To</span> <span style="color: #33ffdd;">479</span><br />
&nbsp;<span style="color: #aaffff; font-weight: bold;">For</span> x=<span style="color: #33ffdd;">0</span> <span style="color: #aaffff; font-weight: bold;">To</span> <span style="color: #33ffdd;">639</span><br />
&nbsp; p=<span style="color: #aaffff; font-weight: bold;">ReadPixel</span><span style=" ">&#40;</span>x,y<span style=" ">&#41;</span><br />
&nbsp; <span style="color: #aaffff; font-weight: bold;">For</span> n=<span style="color: #33ffdd;">0</span> <span style="color: #aaffff; font-weight: bold;">To</span> <span style="color: #33ffdd;">2</span><br />
&nbsp; &nbsp;c=p <span style="color: #aaffff; font-weight: bold;">And</span> <span style="color: #33ffdd;">255</span><br />
&nbsp; &nbsp;p=p <span style="color: #aaffff; font-weight: bold;">Shr</span> <span style="color: #33ffdd;">8</span><br />
&nbsp; &nbsp;<span style="color: #aaffff; font-weight: bold;">Select</span> fx<br />
&nbsp; &nbsp; <span style="color: #aaffff; font-weight: bold;">Case</span> <span style="color: #33ffdd;">1</span><span style="color: #ffee00">;негатив</span><br />
&nbsp; &nbsp; &nbsp;c=<span style="color: #33ffdd;">255</span>-c<br />
&nbsp; &nbsp; <span style="color: #aaffff; font-weight: bold;">Case</span> <span style="color: #33ffdd;">2</span><span style="color: #ffee00">;затемнение</span><br />
&nbsp; &nbsp; &nbsp;c=c <span style="color: #aaffff; font-weight: bold;">Shr</span> <span style="color: #33ffdd;">1</span><br />
&nbsp; &nbsp; <span style="color: #aaffff; font-weight: bold;">Case</span> <span style="color: #33ffdd;">3</span><span style="color: #ffee00">;осветление</span><br />
&nbsp; &nbsp; &nbsp;c=<span style="color: #33ffdd;">128</span>+<span style=" ">&#40;</span>c <span style="color: #aaffff; font-weight: bold;">Sar</span> <span style="color: #33ffdd;">1</span><span style=" ">&#41;</span><br />
&nbsp; &nbsp; <span style="color: #aaffff; font-weight: bold;">Case</span> <span style="color: #33ffdd;">4</span><span style="color: #ffee00">;порог</span><br />
&nbsp; &nbsp; &nbsp;c=<span style="color: #33ffdd;">255</span>*<span style=" ">&#40;</span>c&gt;=<span style="color: #33ffdd;">128</span><span style=" ">&#41;</span><br />
&nbsp; &nbsp; <span style="color: #aaffff; font-weight: bold;">Case</span> <span style="color: #33ffdd;">5</span><span style="color: #ffee00">;уменьшение насыщенности</span><br />
&nbsp; &nbsp; &nbsp;c=<span style="color: #33ffdd;">64</span>+<span style=" ">&#40;</span>c <span style="color: #aaffff; font-weight: bold;">Sar</span> <span style="color: #33ffdd;">1</span><span style=" ">&#41;</span><br />
&nbsp; &nbsp; <span style="color: #aaffff; font-weight: bold;">Case</span> <span style="color: #33ffdd;">6</span><span style="color: #ffee00">;увеличение насыщенности</span><br />
&nbsp; &nbsp; &nbsp;c=c <span style="color: #aaffff; font-weight: bold;">Shl</span> <span style="color: #33ffdd;">1</span><span style="color: #33ffdd;">-128</span><br />
&nbsp; &nbsp; &nbsp;<span style="color: #aaffff; font-weight: bold;">If</span> c&lt;<span style="color: #33ffdd;">0</span> <span style="color: #aaffff; font-weight: bold;">Then</span> c=<span style="color: #33ffdd;">0</span><br />
&nbsp; &nbsp; &nbsp;<span style="color: #aaffff; font-weight: bold;">If</span> c&gt;<span style="color: #33ffdd;">255</span> <span style="color: #aaffff; font-weight: bold;">Then</span> c=<span style="color: #33ffdd;">255</span><br />
&nbsp; &nbsp; <span style="color: #aaffff; font-weight: bold;">Case</span> <span style="color: #33ffdd;">7</span><span style="color: #ffee00">;квадратичное затемнение</span><br />
&nbsp; &nbsp; &nbsp;c=<span style="color: #33ffdd;">255</span>-<span style="color: #aaffff; font-weight: bold;">Sqr</span><span style=" ">&#40;</span><span style="color: #33ffdd;">255</span>*<span style="color: #33ffdd;">255</span>-c*c<span style=" ">&#41;</span><br />
&nbsp; &nbsp; <span style="color: #aaffff; font-weight: bold;">Case</span> <span style="color: #33ffdd;">8</span><span style="color: #ffee00">;квадратичное осветление</span><br />
&nbsp; &nbsp; &nbsp;c=<span style="color: #33ffdd;">255</span>-c<br />
&nbsp; &nbsp; &nbsp;c=<span style="color: #aaffff; font-weight: bold;">Sqr</span><span style=" ">&#40;</span><span style="color: #33ffdd;">255</span>*<span style="color: #33ffdd;">255</span>-c*c<span style=" ">&#41;</span><br />
&nbsp; &nbsp; <span style="color: #aaffff; font-weight: bold;">Case</span> <span style="color: #33ffdd;">9</span><span style="color: #ffee00">;уменьшение количества цветов</span><br />
&nbsp; &nbsp; &nbsp;c=<span style="color: #aaffff; font-weight: bold;">Int</span><span style=" ">&#40;</span>c/<span style="color: #33ffdd;">51</span><span style=" ">&#41;</span>*<span style="color: #33ffdd;">51</span><br />
&nbsp; &nbsp; <span style="color: #aaffff; font-weight: bold;">Case</span> <span style="color: #33ffdd;">10</span><span style="color: #ffee00">;Пила</span><br />
&nbsp; &nbsp; &nbsp;c=<span style=" ">&#40;</span>c <span style="color: #aaffff; font-weight: bold;">Shr</span> <span style="color: #33ffdd;">6</span><span style=" ">&#41;</span>*<span style="color: #33ffdd;">4</span><br />
&nbsp; &nbsp; <span style="color: #aaffff; font-weight: bold;">Case</span> <span style="color: #33ffdd;">11</span><span style="color: #ffee00">;Зубья</span><br />
&nbsp; &nbsp; &nbsp;<span style="color: #aaffff; font-weight: bold;">If</span> c <span style="color: #aaffff; font-weight: bold;">And</span> <span style="color: #33ffdd;">64</span> <span style="color: #aaffff; font-weight: bold;">Then</span> c=<span style="color: #33ffdd;">255</span>-<span style=" ">&#40;</span>c <span style="color: #aaffff; font-weight: bold;">And</span> <span style="color: #33ffdd;">63</span><span style=" ">&#41;</span>*<span style="color: #33ffdd;">4</span> <span style="color: #aaffff; font-weight: bold;">Else</span> c=<span style=" ">&#40;</span>c <span style="color: #aaffff; font-weight: bold;">And</span> <span style="color: #33ffdd;">63</span><span style=" ">&#41;</span>*<span style="color: #33ffdd;">4</span><br />
&nbsp; &nbsp; <span style="color: #aaffff; font-weight: bold;">Case</span> <span style="color: #33ffdd;">12</span><span style="color: #ffee00">;Впадина</span><br />
&nbsp; &nbsp; &nbsp;c=<span style="color: #33ffdd;">255</span>*<span style=" ">&#40;</span><span style="color: #33ffdd;">1</span>-<span style="color: #aaffff; font-weight: bold;">Sin</span><span style=" ">&#40;</span>c*k#<span style=" ">&#41;</span><span style=" ">&#41;</span><br />
&nbsp; &nbsp; <span style="color: #aaffff; font-weight: bold;">Case</span> <span style="color: #33ffdd;">13</span><span style="color: #ffee00">;Выступ</span><br />
&nbsp; &nbsp; &nbsp;c=<span style="color: #33ffdd;">255</span>*<span style="color: #aaffff; font-weight: bold;">Sin</span><span style=" ">&#40;</span>c*k#<span style=" ">&#41;</span><br />
&nbsp; &nbsp; <span style="color: #aaffff; font-weight: bold;">Case</span> <span style="color: #33ffdd;">14</span><span style="color: #ffee00">;Изгиб</span><br />
&nbsp; &nbsp; &nbsp;c=<span style="color: #aaffff; font-weight: bold;">Sin</span><span style=" ">&#40;</span>c*k2#<span style=" ">&#41;</span>*<span style="color: #33ffdd;">127</span>+c<br />
&nbsp; &nbsp;<span style="color: #aaffff; font-weight: bold;">End Select</span><br />
&nbsp; &nbsp;col<span style=" ">&#40;</span>n<span style=" ">&#41;</span>=c<br />
&nbsp; <span style="color: #aaffff; font-weight: bold;">Next</span><br />
&nbsp; <span style="color: #aaffff; font-weight: bold;">WritePixel</span> x,y,col<span style=" ">&#40;</span><span style="color: #33ffdd;">0</span><span style=" ">&#41;</span>+col<span style=" ">&#40;</span><span style="color: #33ffdd;">1</span><span style=" ">&#41;</span> <span style="color: #aaffff; font-weight: bold;">Shl</span> <span style="color: #33ffdd;">8</span>+col<span style=" ">&#40;</span><span style="color: #33ffdd;">2</span><span style=" ">&#41;</span> <span style="color: #aaffff; font-weight: bold;">Shl</span> <span style="color: #33ffdd;">16</span><span style="color: #33ffdd;">-16777216</span><br />
&nbsp;<span style="color: #aaffff; font-weight: bold;">Next</span><br />
<span style="color: #aaffff; font-weight: bold;">Next</span><br />
<br />
</p>
<span style="color: #aaffff; font-weight: bold;">WaitKey</span></div>
<p><br />
Экспериментируя, можно использовать разные преобразования для отдельных каналов.
</p>
<a name=".D0.9C.D0.BE.D0.BD.D0.BE.D1.85.D1.80.D0.BE.D0.BC.D0.B8.D0.B7.D0.B0.D1.86.D0.B8.D1.8F"></a><h2><span class="editsection">[<a href="http://blitzetcetera.org/index.php?title=%D0%92%D0%B8%D1%80%D1%82%D1%83%D0%B0%D0%BB%D1%8C%D0%BD%D1%8B%D0%B9_%D1%85%D1%83%D0%B4%D0%BE%D0%B6%D0%BD%D0%B8%D0%BA:_%D1%86%D0%B2%D0%B5%D1%82&amp;action=edit&amp;section=3" title="Виртуальный художник: цвет">править</a>]</span> <span class="mw-headline">Монохромизация</span></h2>
<p>Монохромизация - перевод цветного изображения в монохромное (из градаций серого). Математически выглядит следующим образом:
</p>
<ul><li>r' = g' = b' = f(r,g,b)
</li></ul>
<p>Простейшие способы - взять один из каналов (Например, r' = g' = b' = r) или найти среднее арифметическое между значениями (r' = g' = b' = (r + g + b) / 3). Но, обычно пользуются линейной формулой вида r' = g' = b' = k<sub>r</sub> * r + k<sub>g</sub> * g + k<sub>b</sub> * b, т. к. каналы не равны по яркости (например, чистый синий цвет гораздо темнее чистого зеленого). Причем, все коэффициенты больше 0 и в сумме дают единицу. Чувствительность человеческого глаза к красному, зеленому и синему выражается следующими коэффициентами: 0.3, 0.59, 0.11:
</p>
<div class="bb" style="font-family: monospace;background-color:#FFFFFF;border:1px dashed #CCCCCC;padding:10px;background-color:#225588;color:#FFFFFF;border:1px solid #003040;padding:10px;"><span style="color: #aaffff; font-weight: bold;">Graphics</span> <span style="color: #33ffdd;">640</span>,<span style="color: #33ffdd;">480</span>,<span style="color: #33ffdd;">32</span><br />
<p><br />
i=<span style="color: #aaffff; font-weight: bold;">LoadImage</span><span style=" ">&#40;</span><span style="color: #00ff66;">&quot;image1.jpg&quot;</span><span style=" ">&#41;</span><br />
<span style="color: #aaffff; font-weight: bold;">DrawBlock</span> i,<span style="color: #33ffdd;">0</span>,<span style="color: #33ffdd;">0</span><br />
<br />
<span style="color: #aaffff; font-weight: bold;">For</span> y=<span style="color: #33ffdd;">0</span> <span style="color: #aaffff; font-weight: bold;">To</span> <span style="color: #33ffdd;">479</span><br />
&nbsp;<span style="color: #aaffff; font-weight: bold;">For</span> x=<span style="color: #33ffdd;">0</span> <span style="color: #aaffff; font-weight: bold;">To</span> <span style="color: #33ffdd;">639</span><br />
&nbsp; p=<span style="color: #aaffff; font-weight: bold;">ReadPixel</span><span style=" ">&#40;</span>x,y<span style=" ">&#41;</span><br />
&nbsp; b=p <span style="color: #aaffff; font-weight: bold;">And</span> <span style="color: #33ffdd;">255</span><br />
&nbsp; g=<span style=" ">&#40;</span>p <span style="color: #aaffff; font-weight: bold;">Shr</span> <span style="color: #33ffdd;">8</span><span style=" ">&#41;</span> <span style="color: #aaffff; font-weight: bold;">And</span> <span style="color: #33ffdd;">255</span><br />
&nbsp; r=<span style=" ">&#40;</span>p <span style="color: #aaffff; font-weight: bold;">Shr</span> <span style="color: #33ffdd;">16</span><span style=" ">&#41;</span> <span style="color: #aaffff; font-weight: bold;">And</span> <span style="color: #33ffdd;">255</span><br />
&nbsp; c=.<span style="color: #33ffdd;">3</span>*r+.<span style="color: #33ffdd;">59</span>*g+.<span style="color: #33ffdd;">11</span>*b<br />
&nbsp; <span style="color: #aaffff; font-weight: bold;">WritePixel</span> x,y,c+c <span style="color: #aaffff; font-weight: bold;">Shl</span> <span style="color: #33ffdd;">8</span>+c <span style="color: #aaffff; font-weight: bold;">Shl</span> <span style="color: #33ffdd;">16</span><span style="color: #33ffdd;">-16777216</span><br />
&nbsp;<span style="color: #aaffff; font-weight: bold;">Next</span><br />
<span style="color: #aaffff; font-weight: bold;">Next</span><br />
<br />
</p>
<span style="color: #aaffff; font-weight: bold;">WaitKey</span></div>
<p><br />
</p>
<a name=".D0.9B.D0.B8.D0.BD.D0.B5.D0.B9.D0.BD.D0.B0.D1.8F_.D1.82.D1.80.D0.B0.D0.BD.D1.81.D1.84.D0.BE.D1.80.D0.BC.D0.B0.D1.86.D0.B8.D1.8F"></a><h2><span class="editsection">[<a href="http://blitzetcetera.org/index.php?title=%D0%92%D0%B8%D1%80%D1%82%D1%83%D0%B0%D0%BB%D1%8C%D0%BD%D1%8B%D0%B9_%D1%85%D1%83%D0%B4%D0%BE%D0%B6%D0%BD%D0%B8%D0%BA:_%D1%86%D0%B2%D0%B5%D1%82&amp;action=edit&amp;section=4" title="Виртуальный художник: цвет">править</a>]</span> <span class="mw-headline">Линейная трансформация</span></h2>
<p>Трансформация, основанная на системе линейных уравнений, значение конечной интенсивности в общем случае зависит от всех трех исходных:
</p>
<ul><li>r' = k<sub>rr</sub> * r + k<sub>gr</sub> * g + k<sub>br</sub> * b
</li><li>g' = k<sub>rg</sub> * r + k<sub>gg</sub> * g + k<sub>bg</sub> * b
</li><li>b' = k<sub>rb</sub> * r + k<sub>gb</sub> * g + k<sub>bb</sub> * b
</li></ul>
<p>Все соответствующие коэффициенты также больше 0 и в сумме дают единицу. Вот простейший пример:
</p>
<div class="bb" style="font-family: monospace;background-color:#FFFFFF;border:1px dashed #CCCCCC;padding:10px;background-color:#225588;color:#FFFFFF;border:1px solid #003040;padding:10px;"><span style="color: #aaffff; font-weight: bold;">Graphics</span> <span style="color: #33ffdd;">640</span>,<span style="color: #33ffdd;">480</span>,<span style="color: #33ffdd;">32</span><br />
<p><br />
i=<span style="color: #aaffff; font-weight: bold;">LoadImage</span><span style=" ">&#40;</span><span style="color: #00ff66;">&quot;image1.jpg&quot;</span><span style=" ">&#41;</span><br />
<span style="color: #aaffff; font-weight: bold;">DrawBlock</span> i,<span style="color: #33ffdd;">0</span>,<span style="color: #33ffdd;">0</span><br />
<br />
<span style="color: #aaffff; font-weight: bold;">For</span> y=<span style="color: #33ffdd;">0</span> <span style="color: #aaffff; font-weight: bold;">To</span> <span style="color: #33ffdd;">479</span><br />
&nbsp;<span style="color: #aaffff; font-weight: bold;">For</span> x=<span style="color: #33ffdd;">0</span> <span style="color: #aaffff; font-weight: bold;">To</span> <span style="color: #33ffdd;">639</span><br />
&nbsp; p=<span style="color: #aaffff; font-weight: bold;">ReadPixel</span><span style=" ">&#40;</span>x,y<span style=" ">&#41;</span><br />
&nbsp; r=p <span style="color: #aaffff; font-weight: bold;">And</span> <span style="color: #33ffdd;">255</span><br />
&nbsp; g=<span style=" ">&#40;</span>p <span style="color: #aaffff; font-weight: bold;">Shr</span> <span style="color: #33ffdd;">8</span><span style=" ">&#41;</span> <span style="color: #aaffff; font-weight: bold;">And</span> <span style="color: #33ffdd;">255</span><br />
&nbsp; b=<span style=" ">&#40;</span>p <span style="color: #aaffff; font-weight: bold;">Shr</span> <span style="color: #33ffdd;">16</span><span style=" ">&#41;</span> <span style="color: #aaffff; font-weight: bold;">And</span> <span style="color: #33ffdd;">255</span><br />
&nbsp; r2=<span style=" ">&#40;</span>g+b<span style=" ">&#41;</span> <span style="color: #aaffff; font-weight: bold;">Sar</span> <span style="color: #33ffdd;">1</span><br />
&nbsp; g2=<span style=" ">&#40;</span>r+b<span style=" ">&#41;</span> <span style="color: #aaffff; font-weight: bold;">Sar</span> <span style="color: #33ffdd;">1</span><br />
&nbsp; b2=<span style=" ">&#40;</span>r+g<span style=" ">&#41;</span> <span style="color: #aaffff; font-weight: bold;">Sar</span> <span style="color: #33ffdd;">1</span><br />
&nbsp; <span style="color: #aaffff; font-weight: bold;">WritePixel</span> x,y,r2+g2 <span style="color: #aaffff; font-weight: bold;">Shl</span> <span style="color: #33ffdd;">8</span>+b2 <span style="color: #aaffff; font-weight: bold;">Shl</span> <span style="color: #33ffdd;">16</span><span style="color: #33ffdd;">-16777216</span><br />
&nbsp;<span style="color: #aaffff; font-weight: bold;">Next</span><br />
<span style="color: #aaffff; font-weight: bold;">Next</span><br />
<br />
</p>
<span style="color: #aaffff; font-weight: bold;">WaitKey</span></div>
<p><br />
</p>
<a name=".D0.97.D0.B0.D0.BC.D0.B5.D0.BD.D0.B0_.D1.86.D0.B2.D0.B5.D1.82.D0.B0"></a><h2><span class="editsection">[<a href="http://blitzetcetera.org/index.php?title=%D0%92%D0%B8%D1%80%D1%82%D1%83%D0%B0%D0%BB%D1%8C%D0%BD%D1%8B%D0%B9_%D1%85%D1%83%D0%B4%D0%BE%D0%B6%D0%BD%D0%B8%D0%BA:_%D1%86%D0%B2%D0%B5%D1%82&amp;action=edit&amp;section=5" title="Виртуальный художник: цвет">править</a>]</span> <span class="mw-headline">Замена цвета</span></h2>
<p>Есть интересный эффект, заменяющий один цвет - (r<sub>1</sub>,g<sub>1</sub>,b<sub>1</sub>) на другой -  (r<sub>2</sub>,g<sub>2</sub>,b<sub>2</sub>) с плавным переходом цветов: представим цвет, как точку в трехмерном пространстве, где каждая ось будет представлять одну из составляющих. Эта точка будет лежать внутри куба, т.к. значения интенсивностей ограничены промежутком. Возьмем цвет, который требуется заменить, и представим сферу с центром в точке, представляющий этот цвет, и радиусом R. Далее, задается трансформация: если исходный цвет лежит вне этой сферы, то он остается неизменным, если внутри, то находим расстояние от него до заменяемого и делим его на радиус - получаем число k в интервале (0,1). Каждая интенсивность конечного цвета вычисляется по формуле: r' = r * k + r<sub>2</sub> * (1 - k). То есть, чем ближе исходный цвет к заменяемому, тем он больше похож на цвет замены, чем ближе к границе, тем больше схож с исходным. Программно это выглядит вот так:
</p>
<div class="bb" style="font-family: monospace;background-color:#FFFFFF;border:1px dashed #CCCCCC;padding:10px;background-color:#225588;color:#FFFFFF;border:1px solid #003040;padding:10px;"><span style="color: #aaffff; font-weight: bold;">Graphics</span> <span style="color: #33ffdd;">640</span>,<span style="color: #33ffdd;">480</span>,<span style="color: #33ffdd;">32</span><br />
<p><br />
i=<span style="color: #aaffff; font-weight: bold;">LoadImage</span><span style=" ">&#40;</span><span style="color: #00ff66;">&quot;image1.jpg&quot;</span><span style=" ">&#41;</span><br />
<span style="color: #aaffff; font-weight: bold;">DrawBlock</span> i,<span style="color: #33ffdd;">0</span>,<span style="color: #33ffdd;">0</span><br />
<br />
<span style="color: #ffee00">;Заменяемый цвет</span><br />
r1=<span style="color: #33ffdd;">224</span><br />
g1=<span style="color: #33ffdd;">224</span><br />
b1=<span style="color: #33ffdd;">0</span><br />
<span style="color: #ffee00">;Цвет замены</span><br />
r2=<span style="color: #33ffdd;">64</span><br />
g2=<span style="color: #33ffdd;">64</span><br />
b2=<span style="color: #33ffdd;">255</span><br />
<span style="color: #ffee00">;Радиус</span><br />
rad#=<span style="color: #33ffdd;">128</span><br />
<br />
<span style="color: #aaffff; font-weight: bold;">For</span> y=<span style="color: #33ffdd;">0</span> <span style="color: #aaffff; font-weight: bold;">To</span> <span style="color: #33ffdd;">479</span><br />
&nbsp;<span style="color: #aaffff; font-weight: bold;">For</span> x=<span style="color: #33ffdd;">0</span> <span style="color: #aaffff; font-weight: bold;">To</span> <span style="color: #33ffdd;">639</span><br />
&nbsp; <span style="color: #ffee00">;Разложение цвета на составляющие</span><br />
&nbsp; p=<span style="color: #aaffff; font-weight: bold;">ReadPixel</span><span style=" ">&#40;</span>x,y<span style=" ">&#41;</span><br />
&nbsp; b=p <span style="color: #aaffff; font-weight: bold;">And</span> <span style="color: #33ffdd;">255</span><br />
&nbsp; g=<span style=" ">&#40;</span>p <span style="color: #aaffff; font-weight: bold;">Shr</span> <span style="color: #33ffdd;">8</span><span style=" ">&#41;</span> <span style="color: #aaffff; font-weight: bold;">And</span> <span style="color: #33ffdd;">255</span><br />
&nbsp; r=<span style=" ">&#40;</span>p <span style="color: #aaffff; font-weight: bold;">Shr</span> <span style="color: #33ffdd;">16</span><span style=" ">&#41;</span> <span style="color: #aaffff; font-weight: bold;">And</span> <span style="color: #33ffdd;">255</span><br />
&nbsp; <span style="color: #ffee00">;Расстояние между исходным цветом и заменяемым</span><br />
&nbsp; d#=<span style="color: #aaffff; font-weight: bold;">Sqr</span><span style=" ">&#40;</span><span style=" ">&#40;</span>r-r1<span style=" ">&#41;</span>*<span style=" ">&#40;</span>r-r1<span style=" ">&#41;</span>+<span style=" ">&#40;</span>g-g1<span style=" ">&#41;</span>*<span style=" ">&#40;</span>g-g1<span style=" ">&#41;</span>+<span style=" ">&#40;</span>b-b1<span style=" ">&#41;</span>*<span style=" ">&#40;</span>b-b1<span style=" ">&#41;</span><span style=" ">&#41;</span><br />
&nbsp; <span style="color: #ffee00">;Проверка нахождения цвета внутри сферы</span><br />
&nbsp; <span style="color: #aaffff; font-weight: bold;">If</span> d#&lt;=rad# <span style="color: #aaffff; font-weight: bold;">Then</span><br />
&nbsp; &nbsp;<span style="color: #ffee00">;Вычисление коэффициентов</span><br />
&nbsp; &nbsp;d1#=d#/rad#<br />
&nbsp; &nbsp;d2#=<span style="color: #33ffdd;">1</span>-d1#<br />
&nbsp; &nbsp;<span style="color: #ffee00">;Значения интенсивностей составляющих</span><br />
&nbsp; &nbsp;r=<span style="color: #aaffff; font-weight: bold;">Int</span><span style=" ">&#40;</span>d1#*r+d2#*r2<span style=" ">&#41;</span><br />
&nbsp; &nbsp;g=<span style="color: #aaffff; font-weight: bold;">Int</span><span style=" ">&#40;</span>d1#*g+d2#*g2<span style=" ">&#41;</span><br />
&nbsp; &nbsp;b=<span style="color: #aaffff; font-weight: bold;">Int</span><span style=" ">&#40;</span>d1#*b+d2#*b2<span style=" ">&#41;</span><br />
&nbsp; <span style="color: #aaffff; font-weight: bold;">End</span> <span style="color: #aaffff; font-weight: bold;">If</span><br />
&nbsp; <span style="color: #ffee00">;Изображение пиксела</span><br />
&nbsp; <span style="color: #aaffff; font-weight: bold;">WritePixel</span> x,y,b+<span style=" ">&#40;</span>g <span style="color: #aaffff; font-weight: bold;">Shl</span> <span style="color: #33ffdd;">8</span><span style=" ">&#41;</span>+<span style=" ">&#40;</span>r <span style="color: #aaffff; font-weight: bold;">Shl</span> <span style="color: #33ffdd;">16</span><span style=" ">&#41;</span><br />
&nbsp;<span style="color: #aaffff; font-weight: bold;">Next</span><br />
<span style="color: #aaffff; font-weight: bold;">Next</span><br />
<br />
</p>
<span style="color: #aaffff; font-weight: bold;">WaitKey</span></div>
<p><br />
Еще один, более сложный эффект замены цвета, основанный на сопоставлении отношений цветовых составляющих:
</p>
<div class="bb" style="font-family: monospace;background-color:#FFFFFF;border:1px dashed #CCCCCC;padding:10px;background-color:#225588;color:#FFFFFF;border:1px solid #003040;padding:10px;"><span style="color: #aaffff; font-weight: bold;">Graphics</span> <span style="color: #33ffdd;">640</span>,<span style="color: #33ffdd;">480</span>,<span style="color: #33ffdd;">32</span><br />
<p><br />
i=<span style="color: #aaffff; font-weight: bold;">LoadImage</span><span style=" ">&#40;</span><span style="color: #00ff66;">&quot;image1.jpg&quot;</span><span style=" ">&#41;</span><br />
<span style="color: #aaffff; font-weight: bold;">DrawBlock</span> i,<span style="color: #33ffdd;">0</span>,<span style="color: #33ffdd;">0</span><br />
<br />
<span style="color: #ffee00">;Заменяемый цвет</span><br />
r1#=<span style="color: #33ffdd;">255</span><br />
g1#=<span style="color: #33ffdd;">64</span><br />
b1#=<span style="color: #33ffdd;">64</span><br />
<span style="color: #ffee00">;Вычисление его коэффициентов</span><br />
s1=r1#+g1#+b1#<br />
kr1#=r1#/s1<br />
kg1#=g1#/s1<br />
kb1#=b1#/s1<br />
<span style="color: #ffee00">;Цвет замены</span><br />
r2#=<span style="color: #33ffdd;">0</span><br />
g2#=<span style="color: #33ffdd;">0</span><br />
b2#=<span style="color: #33ffdd;">255</span><br />
<span style="color: #ffee00">;Вычисление его коэффициентов</span><br />
s2=r2#+g2#+b2#<br />
r2#=r2#/s2<br />
g2#=g2#/s2<br />
b2#=b2#/s2<br />
<span style="color: #ffee00">;Допустимая разность коэффициентов</span><br />
skmax#=.<span style="color: #33ffdd;">5</span><br />
<br />
<span style="color: #aaffff; font-weight: bold;">For</span> y=<span style="color: #33ffdd;">0</span> <span style="color: #aaffff; font-weight: bold;">To</span> <span style="color: #33ffdd;">479</span><br />
&nbsp;<span style="color: #aaffff; font-weight: bold;">For</span> x=<span style="color: #33ffdd;">0</span> <span style="color: #aaffff; font-weight: bold;">To</span> <span style="color: #33ffdd;">639</span><br />
&nbsp; <span style="color: #ffee00">;Разложение цвета на составляющие</span><br />
&nbsp; p=<span style="color: #aaffff; font-weight: bold;">ReadPixel</span><span style=" ">&#40;</span>x,y<span style=" ">&#41;</span><br />
&nbsp; b#=p <span style="color: #aaffff; font-weight: bold;">And</span> <span style="color: #33ffdd;">255</span><br />
&nbsp; g#=<span style=" ">&#40;</span>p <span style="color: #aaffff; font-weight: bold;">Shr</span> <span style="color: #33ffdd;">8</span><span style=" ">&#41;</span> <span style="color: #aaffff; font-weight: bold;">And</span> <span style="color: #33ffdd;">255</span><br />
&nbsp; r#=<span style=" ">&#40;</span>p <span style="color: #aaffff; font-weight: bold;">Shr</span> <span style="color: #33ffdd;">16</span><span style=" ">&#41;</span> <span style="color: #aaffff; font-weight: bold;">And</span> <span style="color: #33ffdd;">255</span><br />
&nbsp; <span style="color: #ffee00">;Вычисление коэффициентов исходного цвета</span><br />
&nbsp; s=r#+g#+b#<br />
&nbsp; kr#=r#/s<br />
&nbsp; kg#=g#/s<br />
&nbsp; kb#=b#/s<br />
&nbsp; sk#=<span style="color: #aaffff; font-weight: bold;">Abs</span><span style=" ">&#40;</span>kr1#-kr#<span style=" ">&#41;</span>+<span style="color: #aaffff; font-weight: bold;">Abs</span><span style=" ">&#40;</span>kg1#-kg#<span style=" ">&#41;</span>+<span style="color: #aaffff; font-weight: bold;">Abs</span><span style=" ">&#40;</span>kb1#-kb#<span style=" ">&#41;</span><br />
&nbsp; <span style="color: #ffee00">;Проверка на допустимую разность коэффициентов</span><br />
&nbsp; <span style="color: #aaffff; font-weight: bold;">If</span> sk#&lt;=skmax# <span style="color: #aaffff; font-weight: bold;">Then</span><br />
&nbsp; &nbsp;<span style="color: #ffee00">;Вычисление множителей коэффициентов</span><br />
&nbsp; &nbsp;sk1#=sk#/skmax#<br />
&nbsp; &nbsp;sk2#=<span style=" ">&#40;</span><span style="color: #33ffdd;">1</span>-sk1#<span style=" ">&#41;</span>*s<br />
&nbsp; &nbsp;<span style="color: #ffee00">;Значения интенсивностей составляющих</span><br />
&nbsp; &nbsp;rr=<span style="color: #aaffff; font-weight: bold;">Int</span><span style=" ">&#40;</span>sk1#*r+sk2#*r2#<span style=" ">&#41;</span><br />
&nbsp; &nbsp;<span style="color: #aaffff; font-weight: bold;">If</span> rr&lt;<span style="color: #33ffdd;">0</span> <span style="color: #aaffff; font-weight: bold;">Then</span> rr=<span style="color: #33ffdd;">0</span> <span style="color: #aaffff; font-weight: bold;">ElseIf</span> rr&gt;<span style="color: #33ffdd;">255</span> <span style="color: #aaffff; font-weight: bold;">Then</span> rr=<span style="color: #33ffdd;">255</span><br />
&nbsp; &nbsp;gg=<span style="color: #aaffff; font-weight: bold;">Int</span><span style=" ">&#40;</span>sk1#*g+sk2#*g2#<span style=" ">&#41;</span><br />
&nbsp; &nbsp;<span style="color: #aaffff; font-weight: bold;">If</span> gg&lt;<span style="color: #33ffdd;">0</span> <span style="color: #aaffff; font-weight: bold;">Then</span> gg=<span style="color: #33ffdd;">0</span> <span style="color: #aaffff; font-weight: bold;">ElseIf</span> gg&gt;<span style="color: #33ffdd;">255</span> <span style="color: #aaffff; font-weight: bold;">Then</span> gg=<span style="color: #33ffdd;">255</span><br />
&nbsp; &nbsp;bb=<span style="color: #aaffff; font-weight: bold;">Int</span><span style=" ">&#40;</span>sk1#*b+sk2#*b2#<span style=" ">&#41;</span><br />
&nbsp; &nbsp;<span style="color: #aaffff; font-weight: bold;">If</span> bb&lt;<span style="color: #33ffdd;">0</span> <span style="color: #aaffff; font-weight: bold;">Then</span> bb=<span style="color: #33ffdd;">0</span> <span style="color: #aaffff; font-weight: bold;">ElseIf</span> bb&gt;<span style="color: #33ffdd;">255</span> <span style="color: #aaffff; font-weight: bold;">Then</span> bb=<span style="color: #33ffdd;">255</span><br />
&nbsp; &nbsp;<span style="color: #aaffff; font-weight: bold;">WritePixel</span> x,y,bb+<span style=" ">&#40;</span>gg <span style="color: #aaffff; font-weight: bold;">Shl</span> <span style="color: #33ffdd;">8</span><span style=" ">&#41;</span>+<span style=" ">&#40;</span>rr <span style="color: #aaffff; font-weight: bold;">Shl</span> <span style="color: #33ffdd;">16</span><span style=" ">&#41;</span><br />
&nbsp; <span style="color: #aaffff; font-weight: bold;">End</span> <span style="color: #aaffff; font-weight: bold;">If</span><br />
&nbsp; <span style="color: #ffee00">;Изображение пиксела</span><br />
&nbsp;<span style="color: #aaffff; font-weight: bold;">Next</span><br />
<span style="color: #aaffff; font-weight: bold;">Next</span><br />
<br />
</p>
<span style="color: #aaffff; font-weight: bold;">WaitKey</span></div>
<p><br />
</p>
<div align="right"><a href="http://blitzetcetera.org/images/5/5f/Virtual_Painter_-_Color.zip" class="internal" title="Virtual Painter - Color.zip">скачать архив с файлами к статье</a></div>
<hr />
<p>Автор: <a href="http://blitzetcetera.org/index.php/%D0%A3%D1%87%D0%B0%D1%81%D1%82%D0%BD%D0%B8%D0%BA:Matt_Merkulov" title="Участник:Matt Merkulov">Матвей Меркулов</a> (E-mail: MattMerk@mail.ru, ICQ: 392-274-050)
</td><td class="rightside"><table cellspacing=0 cellpadding=0><tr><td class="rightheader"></td></tr></table></td></tr><tr colspan="3" height="40"><td>&nbsp;</td></tr><tr><td class="leftside"><table cellspacing=0 cellpadding=0><tr><td class="leftheader"></td></tr></table></td><td class="sheetbody"><a name="Курс молодого бойца, часть 1: первичный инструктаж"></a><h1><span class="editsection">[<a href="http://blitzetcetera.org/index.php?title=Обсуждение:Курс молодого бойца, часть 1: первичный инструктаж&amp;action=edit">обсудить</a>] [<a href="http://blitzetcetera.org/index.php?title=Курс молодого бойца, часть 1: первичный инструктаж&amp;action=edit">править</a>]</span><span class="mw-headline">Курс молодого бойца, часть 1: первичный инструктаж</span></h1>
<p>Ну что?! Все игры - отстой?! Гейммейкеры - ламеры без ума и фантазии?! А ты просто кладезь идей, умница и крутой программист?  Готов сделать игру всех времен и народов? Если нет, то - прощай, ты, слабое звено: Остальные за мной! 
</p>
</p><p>Что такое игра? Игра - это программа. На каком языке программа? На С++? Кто вам это сказал? Если игра написана на С++ то это тетрис или спейсинвайдерс - шаровара одним словом: Игра всех времен и народов пишется на скриптовых языках, встроенных в игровой движок, который в свою очередь и написан на С++. Движок Халф-Лайф 2 стоит 500 000 у.е., а сам Халф-Лайф 2 - 50 у.е. Интиресно почему? А я, таки, скажу. Игровой  движок Half Life 2 написан на графическом движке Source 6, стоимость которого исчисляется в килобаксах. Для того чтобы написать свой графический движок, нужно столько знаний, что в одной голове они встречаются редко. Это и высшая математика, и физика, и геометрия, и программирование причем на уровне выше школьного. Если я описал ваши способности, причем не полностью, то вы можете заняться написанием своего графического движка. Но времени на написание игр у вас уже не будет! Да и занятие это не достойно человека, который вот-вот создаст супер-пупер игру, которая потрясет мир!!! Халф, Моровинд и Дум3 забьются в угол, жалобно скуля. Двери всех гейм студий будут открыты перед вами, а Кармак будет чистить ваши ботинки.:) Даже серьезные команды редко пишут свой графический движок. Это сложно (Но не невозможно&nbsp;;) ).  Вам говорят, что нельзя сделать игру всех времен и народов в одиночку? Врут!!! Хотят избавиться от конкурента, а сами пишут, пишут и пишут свою игру века. На всякие провокационные выкрики типа: "Назовите хоть оду известную игру написанную одним человеком или хотя бы не профессиональной командой!" спокойно отвечаем: "Counter Strike". Самая настоящая игра всех времен и народов, написанная на игровом движке Half Life, который в свою очередь написан на основе движка Quake (или Quake2), который написан на С++:
</p><p>Я не буду писать, что создание игр - это очень тяжелый труд, требующий много знаний, свободного времени. Что кроме программирования нужно еще уметь рисовать, писать музыку, издавать всякие звуки, создавать 3D модели. Причем все это нужно делать на уровне вашего будущего шедевра:  Я не буду писать, что создание игр это постоянный компромисс между красотой и ФПС. Я не напишу, что прежде чем написать игру нужно знать как ее написать. Все равно мне вас не обмануть. Вы-то точно знаете, что для того чтобы создать игру всех времен нужно придумать ей название. Я, попробую рассказать вам как делать игры, но я не смогу рассказать, как писать программы: Программировать вы должны уметь, причем не на уровне "Hello world!!!". Хотя и у таких есть шанс. Все зависит от выбора инструмента - движка:
</p><p>Что такое движок? Начну издалека. Современные видеокарты сложнее современных компьютеров. В них аппаратно реализован ряд функций, которые делают такое что мне даже в голову не приходит: Из-за того что я не один кому в голову не приходит, что умеют современные видеокарты, да и сами видеокарты делают это по-разному, были созданы специальные наборы функций, для работы с 3Д графикой, сегодня самые ходовые это DirectX и OpenGL - это как бы матрас между железом и программистом, но на таком жестком матрасе могут спать немногие программисты. Только самые стойкие. Для своих более изнеженных собратьев они создают перинку  над графическими API. Это собственно уже и есть движок в самом простом случае: Что он делает? Мягко стеллит! Вот вы знаете, как загрузить 3Д модель из файла? Это не плюшки со стола пылесосом тырить!!! А использование  движка все сводит к команде &lt;Загрузить модель из файла&gt;. Кроме этого движки умеют работать с картинками, музыкой, звуками, джойстиками, мышками, клавиатурами со всем, что необходимо для написания игры. Очень часто освоить такие движки неподготовленному человеку оказывается сложно. Обычно они написаны под С++ и подразумевают что вы не новичок в программировании. Но среди вас, создающих хит века, таких единицы: Эти движки - называются графическими и созданы они для написания игрового движка. 
</p><p>Углубим... Есть графические движки и игровые. Графические - это набор функций для работы с графикой, звуком и т.д. Единственное что они могут это визуализировать. Вы можете нарисовать уровень (Как это делается, узнаем позже), загрузить его и: Ничего!!! Это будет мертвый 3Д объект (картинка)! Графический движок честно отобразит его, но не более: Для того чтобы просто прогуляться по этому уровню нужна надстройка над графическим движком - игровой движок. Он будет сообщать графическому что,  когда, как показывать: Кстати даже как загрузить ваш уровень графический движок сам не догадается: Существует куча графических движков, и еще большая куча игровых: Какой движок выбрать? Графический или игровой? Вопрос очень неоднозначный. С одной стороны если вы хотите сделать игру которую мир еще не видел, то выбирать нужно из графических, а если вы хотите сделать игру как Дум3, только монстров побольше и пострашнее, кровищи море, и уровни другие: То вам нужно брать движок Дум3 и делать для него свой уровень. Хотите, чтобы ваше имя осталось в веках? Типа "Vasya Pupkin (R)"? Сделайте МОД. Это намного легче чем написать свой Дум3, но намного сложнее чем сделать свой уровень: Кстати, если вы свой уровень для Дума не сделаете, то о МОДе можно забыть:&nbsp;;) Игровые движки обладают более широким спектром возможностей по сравнению с графическими. Они "знают" что, когда и как вам показать. Но в этом их недостаток - они специализированы. Т.е. на движке Дума3 получится только шутер, на движке War Craft 3 - стратегия. Хотя во многом это зависит от возможностей, того самого скриптового языка, подключенного к движку. Для разработки игр на таких движках очень часто не требуются глубокие познания в программировании, но требуется найти софт для создания уровней для движка. Он есть, но не всегда доступен. Если слово уровни вас напрягает и вам кажется что это слишком просто, то это вам только кажется. В том же War Craft - вся игра состоит из отдельных уровней связанных единым сюжетом кампании, причем каждая компания это отдельная игра. Вы можете сделать свою кампанию (Размороженный трон, например) и это может быть ваш коронный час&nbsp;;). Но на самом деле это тоже недостойно великих игроделов. Ведь мы не ищем легких путей... Рассказывать о игровых движках и графических можно долго, но пусть это делают те, кто в этом разбирается лучше меня. 
</p><p>Перейдем все-таки непосредственно к делу. Существует ряд движков созданных для написаний супер-пупер игр одиночками. Например, RPG maker предназначен для создания супер-пупер JRPG. Ну и что, что 2Д, вам шашечки или ехать? В супер-пупер игре графика не главное. Или Game maker - тоже 2Д. Можно наделать супер-пупер аркаду средней паршивости. Эти движки можно отнести условно к конструкторам. В них можно сделать игру, даже не умея писать программы! В принципе, хорошее начало. Не окунаясь в пучины кода, вы огребаете по полной программе проблем связанных с разработкой игр. Причем половину из них невозможно решить без окунания в код, а в код окунуться в этих движках нельзя.&nbsp;:). Вот такой замкнутый круг: Но польза от этих "движков" есть - они позволяют разобраться, из каких частей состоит игра. Что очень важно. Поэтому, советую хотя бы глянуть на такие конструкторы, постараться написать простенькую игрушечку - в жизни пригодится: Есть еще один конструктор, но это штучка уже серьезнее 3D game studio - предназначен в первую очередь для написания FPS, но есть возможность дописывать свои блоки. Т.е. когда столкнетесь с какой-то проблемой, есть шанс ее решить, написав свой скрипт. Еще одним достоинством является встроенный редактор мира и объектов.
</p><p>Движки под С++ трогать не будем ибо нам нужно написать шедевр в сжатые сроки, а С++ обладает кучей преимуществ, в число которых, однако, не входит скорость разработки приложений, да и сделать на них получится, как я говорил, тетрис, а для написания супер-пупер игры придется к рендеру прикручивать скриптовый язык типа Lua, что в принципе не сложно, но те кто знает, как это сделать, перестали читать после первой фразы этой статьи. Ибо они слабаки и не верят в победу нашего разума над косной материей мироздания и создание одиночкой мега-игры:
</p><p>Рассмотрим движки, в которые встроены бейсики. Это Dark Basic Pro (classic - отстой по умолчанию) - это мега-движок, для конкретных пацанов. Использует DX9 и имеет соответствующие фичи - так называемые шейдеры. Если вам нужны в первую очередь красивости, то вам сюда: Только вот людей которые железно эти красивости могут узреть пока мало: И есть небольшой подводный камень, для тех кто начнет изучение программирования с этого Бейсика - синтаксис Дарка содержит тенденцию вредную для выработки правильного стереотипа написания программ, а именно - он использует назовем так &lt;константный&gt; метод доступа к информации. Т.е. писать нужно типа: Загрузить объект 1, Имя1: Загрузить объект 2, Имя2: повернуть объект 1 на 2. Чем это плохо? Да ничем, если вы собираетесь посветить Дарку всю жизнь. При переходе на другой язык у вас возникнут серьезные затруднения. Подавляющее большинство языков использует другую, &lt;правильную&gt; идеологию - назовем условно &lt;ссылочный&gt; метод доступа. Т.е. писать нужно так: Player=Загрузить объект Имя1: Enemy=Загрузить объект Имя2: повернуть объект Player на Enemy: Для неискушенного ума возникает вопрос: "А какая, хрен, разница?". Спокойно отвечу: "В данном примере - никакой". Но те кто знает английский совершенно точно скажет какая разница&nbsp;;), и во втором варианте, вам не нужно знать какой номер объекта можно загрузить (какой там по очереди следующий), да мы создали две переменных в которые язык поместил ссылку на соответствующие объекты (считай, что номер), но если по числу невозможно догадаться о том что это за объект, то работая через ссылку можно переменную назвать понятно. То же самое можно сделать и в первом случае, но это будет несколько натянуто: Т.е. написать: player=1:Загрузить объект Player, Имя1: Enemy=2: Загрузить объект Enemy, Имя2: повернуть объект Player на Enemy:. По большому счету это мелочи. Но, как говорят, привычка вторая натура: Самый больной вопрос это стабильность и скорость. Если игра идет у вас, это не значит что она пойдет на другом компьютере: 
</p><p>Второй движок Blitz3d. Естественно, что это тоже мега движок, для реальных пацанов. И похвастать ему вроде нечем DX7 и соответствующие фичи&nbsp;:), но если у вас видюха не держит железно DX9, зачем вам фичи которые он дает? Ведь это будет не игра а слайд шоу. Так что и DX7 это нормально. Бейсик здесь с нормальной идеологией и ненавязчивым пониманием такого понятия как Handle. Что не мешает переходить на другие движки, а тот опыт который вы наберете здесь сможете применять и в других языках: Отличается стабильностью. Общая беда этих двух движков это скорость логики - медленная (Лечится созданием своих DLL), и скорость отрисовки сцены - медленная (Лечится переходом на другой движок). Наблюдается тенденция (как ни странно) - пописав на Дарке, люди переходят на Блиц. Видимо, набираясь опыта, конкретные пацаны становятся реальными.:) Этот движок отличается стабильностью и хорошими возможностями по созданию игр, для него есть внешние физики, рендеры и замечательное русскоязычное сообщество. У Дарк бейсика тоже есть сообщество и не менее замечательное, но оно значительно меньше:
</p><p>Конечно же я посоветую новичкам именно Blitz3d. Именно этот движок является оптимальным для начала создания мега игры. В принципе, все что будет происходить дальше относится к любому движку. Я попробую, идя от частного к общему, создать некую теорию происхождения игр в картинках. Картинки будут делаться на Blitz3D. И, если найдутся желающие, на других движках:
</p><p>В следующий раз мы начнем разбираться с тем, из чего состоит игра, и, если успеем, начнем делать свой шутер:
</p>
<hr />
<p>Автор: <a href="http://blitzetcetera.org/index.php/%D0%A3%D1%87%D0%B0%D1%81%D1%82%D0%BD%D0%B8%D0%BA:Tolking" title="Участник:Tolking">Роман Прядко</a> (roman_tnp@mail.ru)
</td><td class="rightside"><table cellspacing=0 cellpadding=0><tr><td class="rightheader"></td></tr></table></td></tr><tr colspan="3" height="40"><td>&nbsp;</td></tr><tr><td class="leftside"><table cellspacing=0 cellpadding=0><tr><td class="leftheader"></td></tr></table></td><td class="sheetbody"><a name="Фазы создания видеоигр"></a><h1><span class="editsection">[<a href="http://blitzetcetera.org/index.php?title=Обсуждение:Фазы создания видеоигр&amp;action=edit">обсудить</a>] [<a href="http://blitzetcetera.org/index.php?title=Фазы создания видеоигр&amp;action=edit">править</a>]</span><span class="mw-headline">Фазы создания видеоигр</span></h1>
<p>Видеоигра, как и любой другой программный продукт, должна создаваться по определенной методике. Это значит, что мы в процессе разработки должны придерживаться определенных правил и рекомендаций. Итак:
</p>
</p>
<ul><li>Во-первых, нужна идея.
</li><li>Если есть понимание того, что будет в игре, то есть смысл написать что-то типа сценария. Если игра будет развиваться на нескольких уровнях - опишите каждый из них.
</li><li>Затем вам надо разнообразить каждый из уровней какими-нибудь неожиданными ходами, целями и т.д. Вы должны заинтересовать игрока, заставить его проходить уровень за уровнем в вашей игре.
</li></ul>
<p>Если у вас есть понимание каждого уровня игры, то имеет смысл подумать о структуре самой игры. Как будут себя вести игровые объекты, как они будут взаимодействовать, какие возможности получит игрок? В этот момент у вас уже есть достаточно информации, чтобы садиться и  начинать писать более развернутый план игры. Теперь попробуйте чуть более  заострить свое внимание на специфике игры. Например:
</p>
<ul><li>Выберите, в каком видеорежиме у вас будет работать игра. Например, она может быть выполнена в режиме высокого разрешения, но использовать при этом меньше цветов или наоборот.
</li><li>Подумайте, насколько сложной будет графика. Будет ли она трехмерной или двухмерной.
</li><li>Разработайте стиль игры по вашему усмотрению.
</li></ul>
<p>Когда вы начнете писать программу, старайтесь разбить ее на маленькие секции. На самом деле программа может быть разбита на следующие куски:
</p>
<ul><li>Игровой мир и описывающие его структуры данных;
</li><li>Визуализация;
</li><li>Система ввода/вывода;
</li><li>Система искусственного интеллекта;
</li><li>Основной игровой цикл;
</li><li>Интерфейс пользователя;
</li><li>Система звука.
</li></ul>
<hr />
<p>Автор: Barmathur (barmathur@yandex.ru)
</td><td class="rightside"><table cellspacing=0 cellpadding=0><tr><td class="rightheader"></td></tr></table></td></tr><tr colspan="3" height="40"><td>&nbsp;</td></tr><tr><td class="leftside"><table cellspacing=0 cellpadding=0><tr><td class="leftheader"></td></tr></table></td><td class="sheetbody"><a name="Искусственный интеллект"></a><h1><span class="editsection">[<a href="http://blitzetcetera.org/index.php?title=Обсуждение:Искусственный интеллект&amp;action=edit">обсудить</a>] [<a href="http://blitzetcetera.org/index.php?title=Искусственный интеллект&amp;action=edit">править</a>]</span><span class="mw-headline">Искусственный интеллект</span></h1>
</p>
<a name=".D0.92.D0.B2.D0.B5.D0.B4.D0.B5.D0.BD.D0.B8.D0.B5_5"></a><h2><span class="editsection">[<a href="http://blitzetcetera.org/index.php?title=%D0%98%D1%81%D0%BA%D1%83%D1%81%D1%81%D1%82%D0%B2%D0%B5%D0%BD%D0%BD%D1%8B%D0%B9_%D0%B8%D0%BD%D1%82%D0%B5%D0%BB%D0%BB%D0%B5%D0%BA%D1%82&amp;action=edit&amp;section=1" title="Искусственный интеллект">править</a>]</span> <span class="mw-headline">Введение</span></h2>
<p>Человеческий разум представляет собой бездну, заполненную прошлым, настоящим и будущим. Он осознает свое собственное существование и является в известном смысле всего лишь устройством с возможностью самоорганизации и способностью задавать вопросы о своем самоощущении. Вычислительная техника находится на пороге понимания механизмов мысли, памяти и сознания. Однако нам, как программистам компьютерных игр, на самом деле не нужно быть слишком искушенными в создании разумно мыслящих систем. Существа в наших играх должны только производить впечатление, что они способны мыслить самостоятельно. В этой части мы избороздим те воды, которые и до сих пор отсутствуют на картах даже самых передовых видеоигр. Мы обсудим темы, в коих область от практического до теоретического полностью изотерична. Несмотря на это, комплекс мыслящих моделей может быть получен даже с минимальными знаниями. Эти модели будут способны самостоятельно выполнять такие простейшие задачи, как сражение, поиск и уклонение.
</p>
<a name=".D0.9A.D0.B0.D0.BA_.D0.BC.D1.8B.D1.81.D0.BB.D1.8F.D1.82_.D0.B2.D0.B8.D0.B4.D0.B5.D0.BE.D0.B8.D0.B3.D1.80.D1.8B:_.D0.BE.D0.B1.D0.B7.D0.BE.D1.80"></a><h2><span class="editsection">[<a href="http://blitzetcetera.org/index.php?title=%D0%98%D1%81%D0%BA%D1%83%D1%81%D1%81%D1%82%D0%B2%D0%B5%D0%BD%D0%BD%D1%8B%D0%B9_%D0%B8%D0%BD%D1%82%D0%B5%D0%BB%D0%BB%D0%B5%D0%BA%D1%82&amp;action=edit&amp;section=2" title="Искусственный интеллект">править</a>]</span> <span class="mw-headline">Как мыслят видеоигры: обзор</span></h2>
<p>Придет тот день, когда компьютер станет таким же серьезным собеседником, как и лучшие человеческие умы. Однако сегодняшние компьютеры не обладают сложностью, необходимой для инициации мыслей и творческих процессов. Но на самом деле нас это и не должно волновать! Мы же делаем видеоигры, а не андроидов. В игре у нас присутствуют некоторые создания и объекты. Все, что нам нужно сделать, это придать им видимость способности разумного мышления. Играющий может ощущать себя помещенным на короткое время в некое пространство, где он думает, что вражеская атака на корабль реальна! Для осуществления этих целей мы должны проанализировать, каким разумом мы должны наделить наши игровые объекты. Сложность этого "разума" зависит от того, какую разновидность существ мы конструируем. К примеру, создания из PacMan большую часть своего времени тратят на преследование или убегание от вас. Будь мы теми людьми, что написали PacMan, мы имели бы возможность загорать где-нибудь на Гавайях, но у нас в таком случае уже был бы алгоритмический инструмент для осуществления этих преследований и убеганий.
</p><p>С другой стороны, если бы мы создавали видеоигры, подобные "Космическим Захватчикам", придание видимости интеллекта вряд ли потребовало бы более пары дюжин строк в программе. Псевдокод выглядел бы примерно так:
</p>
<ul><li>Продолжать движение в том направлении, в котором вы двигаетесь (вправо или влево);
</li><li>Когда вы попадете на границу экрана, изменить направление и двигаться вдоль оси высоты;
</li><li>перейти к п.1.
</li></ul>
<p><br />
Не очень обширный набор "интеллектуальных" функций для игры, прибыль от которой за все время ее существования составила от 50 до 100 миллионов долларов. Трехмерные видеоигры нам интересны не потому, что они "умнее"
обычных "плоских" игр. Объемность дает только повышенное ощущение реальности, а алгоритмы, наделяющие персонажей разумом, в них те же, что и в двухмерных играх. 
</p><p>Итак, приведем к общему знаменателю характер большинства компьютерных игр: интеллект персонажей находится на пещерном уровне, но этот недостаток компенсируется за счет графики и звука.
</p><p>Разработчиков видеоигр идея искусственного интеллекта притягивает снова и снова на протяжении длительного времени, потому что игры, которые они пишут, в большинстве своем довольно агрессивны. Наша задача в этой части состоит в том, чтобы понять методы, используемые для моделирования интеллекта, и главные критерии, внутри которых существуют "мыслящие" алгоритмы. Запомните, игры не думают. Они только "делают умное лицо".
<p>Посему большую часть времени мы будем конструировать основной разумный вид деятельности вроде преследования и нападения. Как вы догадываетесь, на это большого ума не надо: обнаружить противника и уничтожить его, или, с точки зрения компьютерной программы, двигаться по направлению к врагу, взять его на мушку и открыть огонь из всех видов оружия.
</p>
</p><p>Наиболее простыми игровыми алгоритмами искусственного интеллекта являются так называемый Алгоритм Преследования и его противоположность - Алгоритм Уклонения. В основном, они заставляют игровой объект или догонять игрока, или убегать от него. Конечно, конфигурация игрового пространства также должна учитываться, чтобы преследователь даже и не пытался пройти сквозь стены.
</p>
<a name=".D0.90.D0.BB.D0.B3.D0.BE.D1.80.D0.B8.D1.82.D0.BC_.D0.BF.D1.80.D0.B5.D1.81.D0.BB.D0.B5.D0.B4.D0.BE.D0.B2.D0.B0.D0.BD.D0.B8.D1.8F"></a><h2><span class="editsection">[<a href="http://blitzetcetera.org/index.php?title=%D0%98%D1%81%D0%BA%D1%83%D1%81%D1%81%D1%82%D0%B2%D0%B5%D0%BD%D0%BD%D1%8B%D0%B9_%D0%B8%D0%BD%D1%82%D0%B5%D0%BB%D0%BB%D0%B5%D0%BA%D1%82&amp;action=edit&amp;section=3" title="Искусственный интеллект">править</a>]</span> <span class="mw-headline">Алгоритм преследования</span></h2>
<p>Давайте рассмотрим процесс, моделирующий погоню некоторого существа за игроком.
</p>
<ul><li>Во-первых, нам необходимо знать расположение обоих объектов. У нас есть эти данные, так как мы знаем координаты игрока и игрового объекта, являющегося врагом.
</li><li>Во-вторых, нам необходимо сконструировать алгоритм, который будет управлять поведением врага, преследующего игрока.
</li><li>Если враг находится справа, то есть его Х-координата больше соответствующей координаты игрока, преследователь уменьшает свою собственную позицию по оси Х на единицу и тем самым приближается к игроку. Если же противник находится левее игрока, он, наоборот, увеличивает свою горизонтальную координату.
</li><li>Та же самая логика применима и к перемещению по вертикали.
</li></ul>
<p><br />
Используя этот алгоритм, противник преследует игрока почти столь же неумолимо, как и Т1000 из Терминатора-2. Он не остановится до тех пор, пока не поймает игрока.
</p>
<a name=".D0.A3.D0.BA.D0.BB.D0.BE.D0.BD.D0.B5.D0.BD.D0.B8.D0.B5"></a><h2><span class="editsection">[<a href="http://blitzetcetera.org/index.php?title=%D0%98%D1%81%D0%BA%D1%83%D1%81%D1%81%D1%82%D0%B2%D0%B5%D0%BD%D0%BD%D1%8B%D0%B9_%D0%B8%D0%BD%D1%82%D0%B5%D0%BB%D0%BB%D0%B5%D0%BA%D1%82&amp;action=edit&amp;section=4" title="Искусственный интеллект">править</a>]</span> <span class="mw-headline">Уклонение</span></h2>
<p>Чтобы сконструировать создание, уклоняющееся от игрока, нам нужно сделать в точности противоположное предыдущим действиям. В этом месте я еще раз хочу заострить ваше внимание на том, что игры не думают. Персонажи в них только совершают несложные эволюции в пространстве и времени, да определенным образом реагируют на окружающую обстановку и действия игрока. Некоторые ученые считают, что люди - это не что иное, как набор действий и реакций.
</p>
<hr />
<p>Автор: Barmathur (barmathur@yandex.ru)
</td><td class="rightside"><table cellspacing=0 cellpadding=0><tr><td class="rightheader"></td></tr></table></td></tr><tr colspan="3" height="40"><td>&nbsp;</td></tr><tr><td class="leftside"><table cellspacing=0 cellpadding=0><tr><td class="leftheader"></td></tr></table></td><td class="sheetbody"><a name="В следующем выпуске (выпуск 1)"></a><h1><span class="editsection">[<a href="http://blitzetcetera.org/index.php?title=Обсуждение:В следующем выпуске (выпуск 1)&amp;action=edit">обсудить</a>] [<a href="http://blitzetcetera.org/index.php?title=В следующем выпуске (выпуск 1)&amp;action=edit">править</a>]</span><span class="mw-headline">В следующем выпуске (выпуск 1)</span></h1>
<p>В следующий номере журнала войдут продолжения статей  "Игра "Жизнь", "Виртуальный художник" и следующая статья Романа Прядко. Еще планируются статьи "Тест скорости исполнения команд в Blitz", "Базы данных: формат DBF", "Кубическая интерполяция", "Четырехмерная геометрия", а также пара новых разделов: "Картинная галерея" и "Опрос". Ну и конечно, много всяких вкусных разностей, которые мне придут по почте.
</p>
</p><p>Журнал нуждается в Вашей поддержке! В чем может она заключаться? Присылайте статьи на любые темы: обзоры, новости, философские размышления, научные исследования, информацию о проектах, дневники проектов, анонсы и описания программ , Ваши программы (игры, редакторы, библиотеки, движки, демонстрации и т. п.), рисунки и эскизы, музыку, новые "скины", дизайны, Ваше мнение, предложения, пожелания, все, что сочтете нужным. Мой почтовый адрес - (MattMerk@mail.ru. На большие файлы присылайте ссылки. Не стесняйтесь публиковать плоды своих трудов - это многим принесет пользу, в том числе и Вам. Если что-то уже Вами где-то опубликовано, пришлите ссылку. Я же постараюсь сделать так, чтобы в конце каждого месяца Вы могли прочесть новый выпуск журнала, чтобы он был интересным, полным свежих идей и становился лучше. До встречи через месяц!
</p>
<p align="right">
редактор журнала Матвей Меркулов (MattMerk@mail.ru, ICQ: 392-274-050)
</p>
<p><!-- 
Pre-expand include size: 159038 bytes
Post-expand include size: 133651 bytes
Template argument size: 200 bytes
Maximum: 2097152 bytes
-->
</p>
<!-- Saved in parser cache with key db1:pcache:idhash:137-0!1!0!!ru!2 and timestamp 20071112101550 -->
<div class="printfooter">
Получено с <a href="8rf_gctk.html">http://blitzetcetera.org/index.php/%D0%92%D1%8B%D0%BF%D1%83%D1%81%D0%BA_%E2%84%961_-_%D1%8F%D0%BD%D0%B2%D0%B0%D1%80%D1%8C_2005</a></div>
			<!-- end content -->			<div class="visualClear"></div>				</td>				<td class="rightside">				</td>			</tr>		</table>		</div>	</div>		</div>	
		<script type="text/javascript">if (window.runOnloadHook) runOnloadHook();</script>
</div></body>
<!-- Mirrored from localhost/index.php/%D0%92%D1%8B%D0%BF%D1%83%D1%81%D0%BA_%E2%84%961_-_%D1%8F%D0%BD%D0%B2%D0%B0%D1%80%D1%8C_2005 by HTTrack Website Copier/3.x [XR&CO'2007], Mon, 12 Nov 2007 11:20:36 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8"><!-- /Added by HTTrack -->
</html>