<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml" xml:lang="ru" lang="ru" dir="ltr">	
<!-- Mirrored from localhost/index.php/%D0%A0%D0%B0%D0%B1%D0%BE%D1%82%D0%B0_%D1%81_%D0%A1%D0%B5%D1%82%D1%8C%D1%8E_%D0%B2_Blitz3D:_FTP by HTTrack Website Copier/3.x [XR&CO'2007], Mon, 12 Nov 2007 11:20:41 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8"><!-- /Added by HTTrack -->
<head>		<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />				<meta name="keywords" content="Работа с Сетью в Blitz3D: FTP,Tadeus" />
		<link rel="shortcut icon" href="http://blitzetcetera.org/favicon.ico" />
		<link rel="search" type="application/opensearchdescription+xml" href="http://blitzetcetera.org/opensearch_desc.php" title="Blitz Et Cetera (Русский)" />
		<title>Работа с Сетью в Blitz3D: FTP — Blitz Et Cetera</title>		<style type="text/css" media="screen,projection">/*<![CDATA[*/ @import "bvih5rde.css?63"; /*]]>*/</style>		<link rel="stylesheet" type="text/css" media="print" href="gcxktlm6.css?63" />		<link rel="stylesheet" type="text/css" media="handheld" href="zumsslq_.css?63" />		<!--[if lt IE 5.5000]><style type="text/css">@import "/skins/OfflineNew/IE50Fixes.css?63";</style><![endif]-->		<!--[if IE 5.5000]><style type="text/css">@import "/skins/OfflineNew/IE55Fixes.css?63";</style><![endif]-->		<!--[if IE 6]><style type="text/css">@import "/skins/OfflineNew/IE60Fixes.css?63";</style><![endif]-->		<!--[if IE 7]><style type="text/css">@import "/skins/OfflineNew/IE70Fixes.css?63";</style><![endif]-->		<!--[if lt IE 7]><script type="text/javascript" src="/skins/common/IEFixes.js?63"></script>		<meta http-equiv="imagetoolbar" content="no" /><![endif]-->		<script type= "text/javascript">/*<![CDATA[*/
var skin = "OfflineNew";
var stylepath = "/skins";
var wgArticlePath = "/index.php/$1";
var wgScriptPath = "";
var wgServer = "http://blitzetcetera.org/";
var wgCanonicalNamespace = "";
var wgCanonicalSpecialPageName = false;
var wgNamespaceNumber = 0;
var wgPageName = "Работа_с_Сетью_в_Blitz3D:_FTP";
var wgTitle = "Работа с Сетью в Blitz3D: FTP";
var wgAction = "view";
var wgArticleId = "1740";
var wgIsArticle = true;
var wgUserName = null;
var wgUserGroups = null;
var wgUserLanguage = "ru";
var wgContentLanguage = "ru";
var wgBreakFrames = false;
var wgCurRevisionId = "3258";
/*]]>*/</script>
		<script type="text/javascript" src="2nq-6cel.js?63"><!-- wikibits js --></script>		<script type="text/javascript" src="http://blitzetcetera.org/index.php?title=-&amp;action=raw&amp;gen=js"><!-- site js --></script>		<style type="text/css">/*<![CDATA[*/
@import "http://blitzetcetera.org/index.php?title=MediaWiki:Common.css&amp;usemsgcache=yes&amp;action=raw&amp;ctype=text/css&amp;smaxage=18000";
@import "http://blitzetcetera.org/index.php?title=MediaWiki:OfflineNew.css&amp;usemsgcache=yes&amp;action=raw&amp;ctype=text/css&amp;smaxage=18000";
@import "http://blitzetcetera.org/index.php?title=-&amp;action=raw&amp;gen=css&amp;maxage=18000";
/*]]>*/</style>		<!-- Head Scripts -->	</head><body  class="mediawiki ns-0 ltr page-Работа_с_Сетью_в_Blitz3D_FTP">	<div id="globalWrapper">	<div id="logocontainer">		<table align="center">		  <tr>				<td id="blitzetclogo">				</td>			</tr>		</table>	</div>	<div id="magbar">	Журнал о программированнии на языках Blitz3D, BlitzMax, BlitzPlus	</div>		<div id="column-content">	<div id="content">		<a name="top" id="top"></a>				<div id="bodyContent">		<table cellspacing=0 cellpadding=0 width=100%>			<tr>			  <td class="leftside">				</td>				<td class="sheetbody">					<h1 class="sheet">Работа с Сетью в Blitz3D: FTP</h1>			<h3 id="siteSub">Материал из Blitz Et Cetera.</h3>			<div id="contentSub"></div>			<!-- start content -->			<p>Итак, сегодня я обучу вас использованию протокола FTP. Для тех кто не знает - это протокол передачи файлов на сервер. FTP - это протокол прикладного уровня, использующий ТСР. Чтобы использовать его, вам нужно знать как работать в ТСР клиентом. Если вы это знаете - то вы вполне готовы чтобы начать. Если же нет - прочитайте мою статью.
</p><p>Для начала нам надо знать три вещи&nbsp;: адресс сервера, логин и пароль. Мы будем использовать в качестве первого - ftp.narod.ru, второго - test, третьего - tcp. Думаю, понятно. Открывем Explorer, вводим в заголовке адресс сервера, затем в окошке данные. Так мы будем следить за результатами нашей работы. 
</p><p>Ну-с, приступим. Сначала нам надо открыть поток на порте 21:
</p>
<div class="bb" style="font-family: monospace;background-color:#FFFFFF;border:1px dashed #CCCCCC;padding:10px;background-color:#225588;color:#FFFFFF;border:1px solid #003040;padding:10px;">pot=<span style="color: #aaffff; font-weight: bold;">OpenTCPStream</span><span style=" ">&#40;</span><span style="color: #00ff66;">&quot;ftp.narod.ru&quot;</span>,<span style="color: #33ffdd;">21</span><span style=" ">&#41;</span></div>
<p>Так, соединение открыто, давайте залогинимся. Следует также обрабатывать ошибки - кто знает, что там происходит на сервере?
</p>
<div class="bb" style="font-family: monospace;background-color:#FFFFFF;border:1px dashed #CCCCCC;padding:10px;background-color:#225588;color:#FFFFFF;border:1px solid #003040;padding:10px;"><span style="color: #aaffff; font-weight: bold;">Repeat</span><br />
<p>code=<span style="color: #aaffff; font-weight: bold;">Int</span><span style=" ">&#40;</span><span style="color: #aaffff; font-weight: bold;">ReadLine</span>$<span style=" ">&#40;</span>pot<span style=" ">&#41;</span><span style=" ">&#41;</span><br />
<span style="color: #aaffff; font-weight: bold;">Select</span> code<br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aaffff; font-weight: bold;">Case</span> <span style="color: #33ffdd;">220</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aaffff; font-weight: bold;">WriteLine</span> pot,<span style="color: #00ff66;">&quot;USER test&quot;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aaffff; font-weight: bold;">Case</span> <span style="color: #33ffdd;">331</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aaffff; font-weight: bold;">WriteLine</span> pot,<span style="color: #00ff66;">&quot;PASS tcp&quot;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aaffff; font-weight: bold;">Case</span> <span style="color: #33ffdd;">530</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aaffff; font-weight: bold;">RuntimeError</span> <span style="color: #00ff66;">&quot;Log on failed&quot;</span><br />
<span style="color: #aaffff; font-weight: bold;">End Select</span><br />
</p>
<span style="color: #aaffff; font-weight: bold;">Until</span> code=<span style="color: #33ffdd;">230</span></div>
<p>В случае удачи программа закончится. Итак, что же мы сделали? Сначала мы считываем данные, которые идут от сервера и с помощью функции Int получаем цифровой код, расположенный вначале. Далее  проверяем - можно ли слать каждый из параметров. Когда пишет 220 - значит можно посылать логин, если 331 - можно посылать пароль, если пишет 530 - значит либо логин, либо пароль неверен. Либо оба неверны. 
</p><p>Теперь на сервер можно посылать команды управления файлами. К слову, процесс немного напоминает DOS. Итак, для начала давайте зальем какой нибудь файл. Давайте рисунок с именем "picture.jpg" Это делается коммандой STOR. Пишем значится вот так:
</p>
<div class="bb" style="font-family: monospace;background-color:#FFFFFF;border:1px dashed #CCCCCC;padding:10px;background-color:#225588;color:#FFFFFF;border:1px solid #003040;padding:10px;"><span style="color: #aaffff; font-weight: bold;">Writeline</span> pot,<span style="color: #00ff66;">&quot;STOR picture.jpg&quot;</span></div>
<p>Обновляем и вуаля! На FTP есть наша картинка. К счастью, тут проверять ничего не надо. И то хорошо. А теперь давайте эту картинку загрузим с FTP на наш компьютер. Командой RETR:
</p>
<div class="bb" style="font-family: monospace;background-color:#FFFFFF;border:1px dashed #CCCCCC;padding:10px;background-color:#225588;color:#FFFFFF;border:1px solid #003040;padding:10px;"><span style="color: #aaffff; font-weight: bold;">Writeline</span> pot,<span style="color: #00ff66;">&quot;RETR picture.jpg&quot;</span></div>
<p>Работает! Что еще нужно для счастья? А нужна возможность видеть папки, заходить в них, выходить и т.д. Короче, работа с иеархией каталогов. Давайте сначала попробуем создать папку. Пригодится нам команда MKD:
</p>
<div class="bb" style="font-family: monospace;background-color:#FFFFFF;border:1px dashed #CCCCCC;padding:10px;background-color:#225588;color:#FFFFFF;border:1px solid #003040;padding:10px;"><span style="color: #aaffff; font-weight: bold;">WriteLine</span> pot,<span style="color: #00ff66;">&quot;MKD Pictures&quot;</span></div>
<p>Здесь мы создаем на сервере папку Pictures. Что и наблюдаем в Explorer'е. Далее, нам же надо в эту директорию зайти? Тут уже используем команду CWD. А чтобы удостоверится, что мы действительно туда зайдем, закинем в нашу директорию файл picture.jpg:
</p>
<div class="bb" style="font-family: monospace;background-color:#FFFFFF;border:1px dashed #CCCCCC;padding:10px;background-color:#225588;color:#FFFFFF;border:1px solid #003040;padding:10px;"><span style="color: #aaffff; font-weight: bold;">WriteLine</span> pot,<span style="color: #00ff66;">&quot;CWD Pictures&quot;</span><br />
<span style="color: #aaffff; font-weight: bold;">WriteLine</span> pot,<span style="color: #00ff66;">&quot;STOR picture.jpg&quot;</span></div>
<p>Получилось. Что ж весьма хорошо! А как нам вернутся в преидущую папку? С помощью команды CDUP:
</p>
<div class="bb" style="font-family: monospace;background-color:#FFFFFF;border:1px dashed #CCCCCC;padding:10px;background-color:#225588;color:#FFFFFF;border:1px solid #003040;padding:10px;"><span style="color: #aaffff; font-weight: bold;">WriteLine</span> pot,<span style="color: #00ff66;">&quot;CDUP&quot;</span></div>
<p>Удаляется директория с помощью команды RMD:
</p>
<div class="bb" style="font-family: monospace;background-color:#FFFFFF;border:1px dashed #CCCCCC;padding:10px;background-color:#225588;color:#FFFFFF;border:1px solid #003040;padding:10px;"><span style="color: #aaffff; font-weight: bold;">WriteLine</span> pot,<span style="color: #00ff66;">&quot;RMD Pictures&quot;</span></div>
<p>Я забыл только рассказать, как удалять и переименновывать. Начнем с удаления. Используем команду DELE:
</p>
<div class="bb" style="font-family: monospace;background-color:#FFFFFF;border:1px dashed #CCCCCC;padding:10px;background-color:#225588;color:#FFFFFF;border:1px solid #003040;padding:10px;"><span style="color: #aaffff; font-weight: bold;">WriteLine</span> pot,<span style="color: #00ff66;">&quot;DELE picture.jpg&quot;</span></div>
<p>Далее переименовываем файлы:
</p>
<div class="bb" style="font-family: monospace;background-color:#FFFFFF;border:1px dashed #CCCCCC;padding:10px;background-color:#225588;color:#FFFFFF;border:1px solid #003040;padding:10px;"><span style="color: #aaffff; font-weight: bold;">WriteLine</span> pot,<span style="color: #00ff66;">&quot;RNFR picture.jpg&quot;</span><br />
<span style="color: #aaffff; font-weight: bold;">WriteLine</span> pot,<span style="color: #00ff66;">&quot;RNTO risunok.jpg&quot;</span></div>
<p>Первая строка выбирает файл,имя которого нужно переименовать, а вторая - в какое имя надо превратить. 
</p><p>Наконец, после необходимой работы, надо закрыть сеанс связи командой QUIT и закрытием потока. Вот так:
</p>
<div class="bb" style="font-family: monospace;background-color:#FFFFFF;border:1px dashed #CCCCCC;padding:10px;background-color:#225588;color:#FFFFFF;border:1px solid #003040;padding:10px;"><span style="color: #aaffff; font-weight: bold;">WriteLine</span> pot,<span style="color: #00ff66;">&quot;QUIT&quot;</span><br />
<span style="color: #aaffff; font-weight: bold;">CloseTCPStream</span> pot</div>
<p>Вот и все!
</p><p>C Уважением, <a href="http://blitzetcetera.org/index.php/%D0%A3%D1%87%D0%B0%D1%81%D1%82%D0%BD%D0%B8%D0%BA:Tadeus" title="Участник:Tadeus">Волошин Леонид аka Tadeus</a>
</p>
<!-- Saved in parser cache with key db1:pcache:idhash:1740-0!1!0!!ru!2 and timestamp 20071112105832 -->
<div class="printfooter">
Получено с <a href="gmdsqs1l.html">http://blitzetcetera.org/index.php/%D0%A0%D0%B0%D0%B1%D0%BE%D1%82%D0%B0_%D1%81_%D0%A1%D0%B5%D1%82%D1%8C%D1%8E_%D0%B2_Blitz3D:_FTP</a></div>
			<!-- end content -->			<div class="visualClear"></div>				</td>				<td class="rightside">				</td>			</tr>		</table>		</div>	</div>		</div>	
		<script type="text/javascript">if (window.runOnloadHook) runOnloadHook();</script>
</div></body>
<!-- Mirrored from localhost/index.php/%D0%A0%D0%B0%D0%B1%D0%BE%D1%82%D0%B0_%D1%81_%D0%A1%D0%B5%D1%82%D1%8C%D1%8E_%D0%B2_Blitz3D:_FTP by HTTrack Website Copier/3.x [XR&CO'2007], Mon, 12 Nov 2007 11:20:41 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8"><!-- /Added by HTTrack -->
</html>