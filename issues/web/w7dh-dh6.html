<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml" xml:lang="ru" lang="ru" dir="ltr">	
<!-- Mirrored from localhost/index.php/%D0%92%D0%B8%D1%80%D1%82%D1%83%D0%B0%D0%BB%D1%8C%D0%BD%D1%8B%D0%B9_%D1%85%D1%83%D0%B4%D0%BE%D0%B6%D0%BD%D0%B8%D0%BA:_%D0%BB%D0%B8%D0%BD%D0%B5%D0%B9%D0%BD%D1%8B%D0%B5_(%D0%BC%D0%B0%D1%82%D1%80%D0%B8%D1%87%D0%BD%D1%8B%D0%B5)_%D1%84%D0%B8%D0%BB%D1%8C%D1%82%D1%80%D1%8B by HTTrack Website Copier/3.x [XR&CO'2007], Mon, 12 Nov 2007 11:20:50 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8"><!-- /Added by HTTrack -->
<head>		<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />				<meta name="keywords" content="Виртуальный художник: линейные (матричные) фильтры" />
		<link rel="shortcut icon" href="http://blitzetcetera.org/favicon.ico" />
		<link rel="search" type="application/opensearchdescription+xml" href="http://blitzetcetera.org/opensearch_desc.php" title="Blitz Et Cetera (Русский)" />
		<title>Виртуальный художник: линейные (матричные) фильтры — Blitz Et Cetera</title>		<style type="text/css" media="screen,projection">/*<![CDATA[*/ @import "bvih5rde.css?63"; /*]]>*/</style>		<link rel="stylesheet" type="text/css" media="print" href="gcxktlm6.css?63" />		<link rel="stylesheet" type="text/css" media="handheld" href="zumsslq_.css?63" />		<!--[if lt IE 5.5000]><style type="text/css">@import "/skins/OfflineNew/IE50Fixes.css?63";</style><![endif]-->		<!--[if IE 5.5000]><style type="text/css">@import "/skins/OfflineNew/IE55Fixes.css?63";</style><![endif]-->		<!--[if IE 6]><style type="text/css">@import "/skins/OfflineNew/IE60Fixes.css?63";</style><![endif]-->		<!--[if IE 7]><style type="text/css">@import "/skins/OfflineNew/IE70Fixes.css?63";</style><![endif]-->		<!--[if lt IE 7]><script type="text/javascript" src="/skins/common/IEFixes.js?63"></script>		<meta http-equiv="imagetoolbar" content="no" /><![endif]-->		<script type= "text/javascript">/*<![CDATA[*/
var skin = "OfflineNew";
var stylepath = "/skins";
var wgArticlePath = "/index.php/$1";
var wgScriptPath = "";
var wgServer = "http://blitzetcetera.org/";
var wgCanonicalNamespace = "";
var wgCanonicalSpecialPageName = false;
var wgNamespaceNumber = 0;
var wgPageName = "Виртуальный_художник:_линейные_(матричные)_фильтры";
var wgTitle = "Виртуальный художник: линейные (матричные) фильтры";
var wgAction = "view";
var wgArticleId = "621";
var wgIsArticle = true;
var wgUserName = null;
var wgUserGroups = null;
var wgUserLanguage = "ru";
var wgContentLanguage = "ru";
var wgBreakFrames = false;
var wgCurRevisionId = "3566";
/*]]>*/</script>
		<script type="text/javascript" src="2nq-6cel.js?63"><!-- wikibits js --></script>		<script type="text/javascript" src="http://blitzetcetera.org/index.php?title=-&amp;action=raw&amp;gen=js"><!-- site js --></script>		<style type="text/css">/*<![CDATA[*/
@import "http://blitzetcetera.org/index.php?title=MediaWiki:Common.css&amp;usemsgcache=yes&amp;action=raw&amp;ctype=text/css&amp;smaxage=18000";
@import "http://blitzetcetera.org/index.php?title=MediaWiki:OfflineNew.css&amp;usemsgcache=yes&amp;action=raw&amp;ctype=text/css&amp;smaxage=18000";
@import "http://blitzetcetera.org/index.php?title=-&amp;action=raw&amp;gen=css&amp;maxage=18000";
/*]]>*/</style>		<!-- Head Scripts -->	</head><body  class="mediawiki ns-0 ltr page-Виртуальный_художник_линейные_матричные_фильтры">	<div id="globalWrapper">	<div id="logocontainer">		<table align="center">		  <tr>				<td id="blitzetclogo">				</td>			</tr>		</table>	</div>	<div id="magbar">	Журнал о программированнии на языках Blitz3D, BlitzMax, BlitzPlus	</div>		<div id="column-content">	<div id="content">		<a name="top" id="top"></a>				<div id="bodyContent">		<table cellspacing=0 cellpadding=0 width=100%>			<tr>			  <td class="leftside">				</td>				<td class="sheetbody">					<h1 class="sheet">Виртуальный художник: линейные (матричные) фильтры</h1>			<h3 id="siteSub">Материал из Blitz Et Cetera.</h3>			<div id="contentSub"></div>			<!-- start content -->			<table id="toc" class="toc" summary="Содержание"><tr><td><div id="toctitle"><h2>Содержание</h2></div>
<ul>
<li class="toclevel-1"><a href="#.D0.92.D0.B2.D0.B5.D0.B4.D0.B5.D0.BD.D0.B8.D0.B5"><span class="tocnumber">1</span> <span class="toctext">Введение</span></a></li>
<li class="toclevel-1"><a href="#.D0.9E.D0.B1.D1.89.D0.B8.D0.B9_.D0.B2.D0.B8.D0.B4"><span class="tocnumber">2</span> <span class="toctext">Общий вид</span></a></li>
<li class="toclevel-1"><a href="#Smooth_.2F_Blur_.28.D1.81.D0.B3.D0.BB.D0.B0.D0.B6.D0.B8.D0.B2.D0.B0.D0.BD.D0.B8.D0.B5.29"><span class="tocnumber">3</span> <span class="toctext">Smooth / Blur (сглаживание)</span></a></li>
<li class="toclevel-1"><a href="#Edge_detection_.28.D0.BE.D0.BA.D0.BE.D0.BD.D1.82.D1.83.D1.80.D0.B8.D0.B2.D0.B0.D0.BD.D0.B8.D0.B5.29"><span class="tocnumber">4</span> <span class="toctext">Edge detection (оконтуривание)</span></a></li>
<li class="toclevel-1"><a href="#Emboss_.28.D0.B1.D0.B0.D1.80.D0.B5.D0.BB.D1.8C.D0.B5.D1.84.29"><span class="tocnumber">5</span> <span class="toctext">Emboss (барельеф)</span></a></li>
<li class="toclevel-1"><a href="#.D0.9F.D1.80.D0.B8.D0.BC.D0.B5.D1.80"><span class="tocnumber">6</span> <span class="toctext">Пример</span></a></li>
</ul>
</td></tr></table><script type="text/javascript"> if (window.showTocToggle) { var tocShowText = "показать"; var tocHideText = "убрать"; showTocToggle(); } </script>
<a name=".D0.92.D0.B2.D0.B5.D0.B4.D0.B5.D0.BD.D0.B8.D0.B5"></a><h2><span class="editsection">[<a href="http://blitzetcetera.org/index.php?title=%D0%92%D0%B8%D1%80%D1%82%D1%83%D0%B0%D0%BB%D1%8C%D0%BD%D1%8B%D0%B9_%D1%85%D1%83%D0%B4%D0%BE%D0%B6%D0%BD%D0%B8%D0%BA:_%D0%BB%D0%B8%D0%BD%D0%B5%D0%B9%D0%BD%D1%8B%D0%B5_%28%D0%BC%D0%B0%D1%82%D1%80%D0%B8%D1%87%D0%BD%D1%8B%D0%B5%29_%D1%84%D0%B8%D0%BB%D1%8C%D1%82%D1%80%D1%8B&amp;action=edit&amp;section=1" title="Править секцию: Введение">править</a>]</span> <span class="mw-headline">Введение</span></h2>
<p>Речь будет идти о растровых RGB-изображениях, для которых R[x, y], G[x, y], B[x, y] – три компоненты (красная, зеленая, синяя) цвета пикселя с координатами (x, y),  их значения лежат в пределах [0, 255], если в результате вычислений значение вышло за границы, то оно принимает ближайшее значение.
</p><p>Для простоты введем вектор C:
</p>
<div class="center"><div class="floatnone"><span><a href="http://blitzetcetera.org/index.php/%D0%98%D0%B7%D0%BE%D0%B1%D1%80%D0%B0%D0%B6%D0%B5%D0%BD%D0%B8%D0%B5:Painter4-01.gif" class="image" title=""><img alt="" longdesc="http://blitzetcetera.org/index.php/%D0%98%D0%B7%D0%BE%D0%B1%D1%80%D0%B0%D0%B6%D0%B5%D0%BD%D0%B8%D0%B5:Painter4-01.gif" src="prpwn2-r.gif" width="142" height="81" /></a></span></div></div>
<p>Следует так же заметить, что обработка ведется над каждым компонентом отдельно.
</p>
<a name=".D0.9E.D0.B1.D1.89.D0.B8.D0.B9_.D0.B2.D0.B8.D0.B4"></a><h2><span class="editsection">[<a href="http://blitzetcetera.org/index.php?title=%D0%92%D0%B8%D1%80%D1%82%D1%83%D0%B0%D0%BB%D1%8C%D0%BD%D1%8B%D0%B9_%D1%85%D1%83%D0%B4%D0%BE%D0%B6%D0%BD%D0%B8%D0%BA:_%D0%BB%D0%B8%D0%BD%D0%B5%D0%B9%D0%BD%D1%8B%D0%B5_%28%D0%BC%D0%B0%D1%82%D1%80%D0%B8%D1%87%D0%BD%D1%8B%D0%B5%29_%D1%84%D0%B8%D0%BB%D1%8C%D1%82%D1%80%D1%8B&amp;action=edit&amp;section=2" title="Править секцию: Общий вид">править</a>]</span> <span class="mw-headline">Общий вид</span></h2>
<p>В общем случае преобразование заключается в следующей формуле:
</p>
<div class="center"><div class="floatnone"><span><a href="http://blitzetcetera.org/index.php/%D0%98%D0%B7%D0%BE%D0%B1%D1%80%D0%B0%D0%B6%D0%B5%D0%BD%D0%B8%D0%B5:Painter4-02.gif" class="image" title=""><img alt="" longdesc="http://blitzetcetera.org/index.php/%D0%98%D0%B7%D0%BE%D0%B1%D1%80%D0%B0%D0%B6%D0%B5%D0%BD%D0%B8%D0%B5:Painter4-02.gif" src="mu3_e_w1.gif" width="443" height="54" /></a></span></div></div>
<table>
<tr>
<td> где
</td><td> i, j - целые ( например, от -2 до 2 );
</td></tr>
<tr>
<td> D - некоторое целое число;
</td></tr>
<tr>
<td> A - ядро свертки (матрица некоторых коэффицентов);
</td></tr>
<tr>
<td> C'[x, y] - новый цвет пикселя;
</td></tr>
<tr>
<td> C[x+i, y+j] - старый цвет пикселя.
</td></tr></table>
<p>Объясняю "на пальцах"&nbsp;: мы берем все точки в пределах некоторой окрестности (сумма по i и j), домножаем их на коэффиценты (A[i,j]), прибавляем к результату число (D), и переписываем цвет пикселя.
</p>
<a name="Smooth_.2F_Blur_.28.D1.81.D0.B3.D0.BB.D0.B0.D0.B6.D0.B8.D0.B2.D0.B0.D0.BD.D0.B8.D0.B5.29"></a><h2><span class="editsection">[<a href="http://blitzetcetera.org/index.php?title=%D0%92%D0%B8%D1%80%D1%82%D1%83%D0%B0%D0%BB%D1%8C%D0%BD%D1%8B%D0%B9_%D1%85%D1%83%D0%B4%D0%BE%D0%B6%D0%BD%D0%B8%D0%BA:_%D0%BB%D0%B8%D0%BD%D0%B5%D0%B9%D0%BD%D1%8B%D0%B5_%28%D0%BC%D0%B0%D1%82%D1%80%D0%B8%D1%87%D0%BD%D1%8B%D0%B5%29_%D1%84%D0%B8%D0%BB%D1%8C%D1%82%D1%80%D1%8B&amp;action=edit&amp;section=3" title="Править секцию: Smooth / Blur (сглаживание)">править</a>]</span> <span class="mw-headline">Smooth / Blur (сглаживание)</span></h2>
<table border="1" align="center">
<tr>
<td> D = 0
</td></tr>
<tr>
<td> i, j = {-1, 0, 1}
</td></tr>
<tr>
<td>
<table>

<tr align="center">
<td> 0.2
</td></tr>
<tr align="center">
<td align="left"> A =
</td><td> 0.2
</td><td> 0.2
</td><td> 0.2
</td></tr>
<tr align="center">
<td> 0.2
</td></tr></table>
</td></tr></table>
<p>Таким образом мы складываем компоненты цвета сверху, снизу, справа, слева, по центру, домноженные на 0.2, т.е. усредняем значение цвета, что логично.
</p>
<table border="1" align="center">

<tr align="center">
<td> До
</td><td> После
</td></tr>
<tr>
<td>
<p><a href="http://blitzetcetera.org/index.php/%D0%98%D0%B7%D0%BE%D0%B1%D1%80%D0%B0%D0%B6%D0%B5%D0%BD%D0%B8%D0%B5:Painter4-03.png" class="image" title="Изображение:Painter4-03.png"><img alt="Изображение:Painter4-03.png" longdesc="http://blitzetcetera.org/index.php/%D0%98%D0%B7%D0%BE%D0%B1%D1%80%D0%B0%D0%B6%D0%B5%D0%BD%D0%B8%D0%B5:Painter4-03.png" src="5bsgd_15.png" width="300" height="40" /></a>
</p>
</td><td>
<p><a href="http://blitzetcetera.org/index.php/%D0%98%D0%B7%D0%BE%D0%B1%D1%80%D0%B0%D0%B6%D0%B5%D0%BD%D0%B8%D0%B5:Painter4-04.png" class="image" title="Изображение:Painter4-04.png"><img alt="Изображение:Painter4-04.png" longdesc="http://blitzetcetera.org/index.php/%D0%98%D0%B7%D0%BE%D0%B1%D1%80%D0%B0%D0%B6%D0%B5%D0%BD%D0%B8%D0%B5:Painter4-04.png" src="_ii7lf-s.png" width="300" height="40" /></a>
</p>
</td></tr></table>
<a name="Edge_detection_.28.D0.BE.D0.BA.D0.BE.D0.BD.D1.82.D1.83.D1.80.D0.B8.D0.B2.D0.B0.D0.BD.D0.B8.D0.B5.29"></a><h2><span class="editsection">[<a href="http://blitzetcetera.org/index.php?title=%D0%92%D0%B8%D1%80%D1%82%D1%83%D0%B0%D0%BB%D1%8C%D0%BD%D1%8B%D0%B9_%D1%85%D1%83%D0%B4%D0%BE%D0%B6%D0%BD%D0%B8%D0%BA:_%D0%BB%D0%B8%D0%BD%D0%B5%D0%B9%D0%BD%D1%8B%D0%B5_%28%D0%BC%D0%B0%D1%82%D1%80%D0%B8%D1%87%D0%BD%D1%8B%D0%B5%29_%D1%84%D0%B8%D0%BB%D1%8C%D1%82%D1%80%D1%8B&amp;action=edit&amp;section=4" title="Править секцию: Edge detection (оконтуривание)">править</a>]</span> <span class="mw-headline">Edge detection (оконтуривание)</span></h2>
<table border="1" align="center">
<tr>
<td> D = 0
</td></tr>
<tr>
<td> i, j = {-1, 0, 1}
</td></tr>
<tr>
<td>
<table>

<tr align="center">
<td> 1
</td></tr>
<tr align="center">
<td align="left"> A =
</td><td> 1
</td><td> -4
</td><td> 1
</td></tr>
<tr align="center">
<td> 1
</td></tr></table>
</td></tr></table>
<p>Этот фильтр создает контур вокруг объектов на рисунке.
</p>
<table border="1" align="center">

<tr align="center">
<td> До
</td><td> После
</td></tr>
<tr>
<td>
<p><a href="http://blitzetcetera.org/index.php/%D0%98%D0%B7%D0%BE%D0%B1%D1%80%D0%B0%D0%B6%D0%B5%D0%BD%D0%B8%D0%B5:Painter4-03.png" class="image" title="Изображение:Painter4-03.png"><img alt="Изображение:Painter4-03.png" longdesc="http://blitzetcetera.org/index.php/%D0%98%D0%B7%D0%BE%D0%B1%D1%80%D0%B0%D0%B6%D0%B5%D0%BD%D0%B8%D0%B5:Painter4-03.png" src="5bsgd_15.png" width="300" height="40" /></a>
</p>
</td><td>
<p><a href="http://blitzetcetera.org/index.php/%D0%98%D0%B7%D0%BE%D0%B1%D1%80%D0%B0%D0%B6%D0%B5%D0%BD%D0%B8%D0%B5:Painter4-05.png" class="image" title="Изображение:Painter4-05.png"><img alt="Изображение:Painter4-05.png" longdesc="http://blitzetcetera.org/index.php/%D0%98%D0%B7%D0%BE%D0%B1%D1%80%D0%B0%D0%B6%D0%B5%D0%BD%D0%B8%D0%B5:Painter4-05.png" src="uo08uyhf.png" width="300" height="40" /></a>
</p>
</td></tr></table>
<a name="Emboss_.28.D0.B1.D0.B0.D1.80.D0.B5.D0.BB.D1.8C.D0.B5.D1.84.29"></a><h2><span class="editsection">[<a href="http://blitzetcetera.org/index.php?title=%D0%92%D0%B8%D1%80%D1%82%D1%83%D0%B0%D0%BB%D1%8C%D0%BD%D1%8B%D0%B9_%D1%85%D1%83%D0%B4%D0%BE%D0%B6%D0%BD%D0%B8%D0%BA:_%D0%BB%D0%B8%D0%BD%D0%B5%D0%B9%D0%BD%D1%8B%D0%B5_%28%D0%BC%D0%B0%D1%82%D1%80%D0%B8%D1%87%D0%BD%D1%8B%D0%B5%29_%D1%84%D0%B8%D0%BB%D1%8C%D1%82%D1%80%D1%8B&amp;action=edit&amp;section=5" title="Править секцию: Emboss (барельеф)">править</a>]</span> <span class="mw-headline">Emboss (барельеф)</span></h2>
<table border="1" align="center">
<tr>
<td> D = 128
</td></tr>
<tr>
<td> i, j = {-1, 0, 1}
</td></tr>
<tr>
<td>
<table>

<tr align="center">
<td> -1
</td></tr>
<tr align="center">
<td align="left"> A<sub>1</sub> =
</td><td> 1
</td></tr>
</table>
</td></tr></table>
<p>Этот фильтр создает эффект вдавливания/выпуклости объектов на рисунке. Заметка&nbsp;: число -1 может стоять где угодно вокруг центральной ячейки, при этом меняется направление падения света на объекты. Например, допустимо и следующее значение A:
</p>
<table align="center">


<tr align="center">
<td align="left"> A<sub>2</sub> =
</td><td> 1
</td><td> -1
</td></tr>
</table>
<p>Так же, можно домножить матрицу A на -1, тогда и эффект поменяется. Например&nbsp;:
</p>
<table align="center">


<tr align="center">
<td align="left"> A<sub>3</sub> =
</td><td> -1
</td><td> 1
</td></tr>
</table>
<table border="1" align="center">

<tr align="center">
<td> До
</td><td> После
</td></tr>
<tr>
<td>
<p><a href="http://blitzetcetera.org/index.php/%D0%98%D0%B7%D0%BE%D0%B1%D1%80%D0%B0%D0%B6%D0%B5%D0%BD%D0%B8%D0%B5:Painter4-03.png" class="image" title="Изображение:Painter4-03.png"><img alt="Изображение:Painter4-03.png" longdesc="http://blitzetcetera.org/index.php/%D0%98%D0%B7%D0%BE%D0%B1%D1%80%D0%B0%D0%B6%D0%B5%D0%BD%D0%B8%D0%B5:Painter4-03.png" src="5bsgd_15.png" width="300" height="40" /></a>
</p>
</td><td>
<table>

<tr align="center">
<td>
<p><a href="http://blitzetcetera.org/index.php/%D0%98%D0%B7%D0%BE%D0%B1%D1%80%D0%B0%D0%B6%D0%B5%D0%BD%D0%B8%D0%B5:Painter4-06.png" class="image" title="Изображение:Painter4-06.png"><img alt="Изображение:Painter4-06.png" longdesc="http://blitzetcetera.org/index.php/%D0%98%D0%B7%D0%BE%D0%B1%D1%80%D0%B0%D0%B6%D0%B5%D0%BD%D0%B8%D0%B5:Painter4-06.png" src="z4g-fxqg.png" width="300" height="40" /></a>
</p>
</td><td> для A<sup>1</sup>
</td></tr>
<tr align="center">
<td>
<p><a href="http://blitzetcetera.org/index.php/%D0%98%D0%B7%D0%BE%D0%B1%D1%80%D0%B0%D0%B6%D0%B5%D0%BD%D0%B8%D0%B5:Painter4-07.png" class="image" title="Изображение:Painter4-07.png"><img alt="Изображение:Painter4-07.png" longdesc="http://blitzetcetera.org/index.php/%D0%98%D0%B7%D0%BE%D0%B1%D1%80%D0%B0%D0%B6%D0%B5%D0%BD%D0%B8%D0%B5:Painter4-07.png" src="2euvhgn3.png" width="300" height="40" /></a>
</p>
</td><td> для A<sup>2</sup>
</td></tr>
<tr align="center">
<td>
<p><a href="http://blitzetcetera.org/index.php/%D0%98%D0%B7%D0%BE%D0%B1%D1%80%D0%B0%D0%B6%D0%B5%D0%BD%D0%B8%D0%B5:Painter4-08.png" class="image" title="Изображение:Painter4-08.png"><img alt="Изображение:Painter4-08.png" longdesc="http://blitzetcetera.org/index.php/%D0%98%D0%B7%D0%BE%D0%B1%D1%80%D0%B0%D0%B6%D0%B5%D0%BD%D0%B8%D0%B5:Painter4-08.png" src="ui4j_m-v.png" width="300" height="40" /></a>
</p>
</td><td> для A<sup>3</sup>
</td></tr></table>
</td></tr></table>
<a name=".D0.9F.D1.80.D0.B8.D0.BC.D0.B5.D1.80"></a><h2><span class="editsection">[<a href="http://blitzetcetera.org/index.php?title=%D0%92%D0%B8%D1%80%D1%82%D1%83%D0%B0%D0%BB%D1%8C%D0%BD%D1%8B%D0%B9_%D1%85%D1%83%D0%B4%D0%BE%D0%B6%D0%BD%D0%B8%D0%BA:_%D0%BB%D0%B8%D0%BD%D0%B5%D0%B9%D0%BD%D1%8B%D0%B5_%28%D0%BC%D0%B0%D1%82%D1%80%D0%B8%D1%87%D0%BD%D1%8B%D0%B5%29_%D1%84%D0%B8%D0%BB%D1%8C%D1%82%D1%80%D1%8B&amp;action=edit&amp;section=6" title="Править секцию: Пример">править</a>]</span> <span class="mw-headline">Пример</span></h2>
<div class="bb" style="font-family: monospace;background-color:#FFFFFF;border:1px dashed #CCCCCC;padding:10px;background-color:#225588;color:#FFFFFF;border:1px solid #003040;padding:10px;"><span style="color: #ffee00">;=============================================================================</span><br />
<p><span style="color: #ffee00">;========================== &quot;БИБЛИОТЕКА&quot; =====================================</span><br />
<span style="color: #ffee00">;=============================================================================</span><br />
<span style="color: #aaffff; font-weight: bold;">Const</span> MaxFilters=<span style="color: #33ffdd;">10</span><br />
<span style="color: #aaffff; font-weight: bold;">Global</span> CountFilters=<span style="color: #33ffdd;">-1</span><br />
<span style="color: #aaffff; font-weight: bold;">Dim</span> Filter_core# <span style=" ">&#40;</span> MaxFilters, <span style="color: #33ffdd;">2</span>, <span style="color: #33ffdd;">2</span> <span style=" ">&#41;</span><br />
<span style="color: #aaffff; font-weight: bold;">Dim</span> Filter_D <span style=" ">&#40;</span> MaxFilters <span style=" ">&#41;</span><br />
<br />
<span style="color: #aaffff; font-weight: bold;">Dim</span> Filter_matrixR<span style=" ">&#40;</span><span style="color: #33ffdd;">0</span>, <span style="color: #33ffdd;">0</span><span style=" ">&#41;</span><br />
<span style="color: #aaffff; font-weight: bold;">Dim</span> Filter_matrixG<span style=" ">&#40;</span><span style="color: #33ffdd;">0</span>, <span style="color: #33ffdd;">0</span><span style=" ">&#41;</span><br />
<span style="color: #aaffff; font-weight: bold;">Dim</span> Filter_matrixB<span style=" ">&#40;</span><span style="color: #33ffdd;">0</span>, <span style="color: #33ffdd;">0</span><span style=" ">&#41;</span><br />
<span style="color: #ffee00">;=======================================</span><br />
<span style="color: #aaffff; font-weight: bold;">Function</span> CreateFilter <span style=" ">&#40;</span> d, c1#, c2#, c3#, c4#, c5#, c6#, c7#, c8#, c9# <span style=" ">&#41;</span> <span style="color: #ffee00">; создает фильтр, </span><br />
<span style="color: #ffee00">; коэффициенты записываются построчно</span><br />
&nbsp; &nbsp; &nbsp; CountFilters = CountFilters<span style="color: #33ffdd;">+1</span><br />
&nbsp; &nbsp; &nbsp; Filter_D <span style=" ">&#40;</span> CountFilters <span style=" ">&#41;</span> = d<br />
&nbsp; &nbsp; &nbsp; Filter_core <span style=" ">&#40;</span> CountFilters, <span style="color: #33ffdd;">0</span>, <span style="color: #33ffdd;">0</span> <span style=" ">&#41;</span> = c1#<br />
&nbsp; &nbsp; &nbsp; Filter_core <span style=" ">&#40;</span> CountFilters, <span style="color: #33ffdd;">0</span>, <span style="color: #33ffdd;">1</span> <span style=" ">&#41;</span> = c2#<br />
&nbsp; &nbsp; &nbsp; Filter_core <span style=" ">&#40;</span> CountFilters, <span style="color: #33ffdd;">0</span>, <span style="color: #33ffdd;">2</span> <span style=" ">&#41;</span> = c3#<br />
&nbsp; &nbsp; &nbsp; Filter_core <span style=" ">&#40;</span> CountFilters, <span style="color: #33ffdd;">1</span>, <span style="color: #33ffdd;">0</span> <span style=" ">&#41;</span> = c4#<br />
&nbsp; &nbsp; &nbsp; Filter_core <span style=" ">&#40;</span> CountFilters, <span style="color: #33ffdd;">1</span>, <span style="color: #33ffdd;">1</span> <span style=" ">&#41;</span> = c5#<br />
&nbsp; &nbsp; &nbsp; Filter_core <span style=" ">&#40;</span> CountFilters, <span style="color: #33ffdd;">1</span>, <span style="color: #33ffdd;">2</span> <span style=" ">&#41;</span> = c6#<br />
&nbsp; &nbsp; &nbsp; Filter_core <span style=" ">&#40;</span> CountFilters, <span style="color: #33ffdd;">2</span>, <span style="color: #33ffdd;">0</span> <span style=" ">&#41;</span> = c7#<br />
&nbsp; &nbsp; &nbsp; Filter_core <span style=" ">&#40;</span> CountFilters, <span style="color: #33ffdd;">2</span>, <span style="color: #33ffdd;">1</span> <span style=" ">&#41;</span> = c8#<br />
&nbsp; &nbsp; &nbsp; Filter_core <span style=" ">&#40;</span> CountFilters, <span style="color: #33ffdd;">2</span>, <span style="color: #33ffdd;">2</span> <span style=" ">&#41;</span> = c9#<br />
&nbsp; &nbsp; &nbsp; <span style="color: #aaffff; font-weight: bold;">Return</span> CountFilters<br />
<span style="color: #aaffff; font-weight: bold;">End Function</span><br />
<br />
<span style="color: #aaffff; font-weight: bold;">Function</span> ApplyFilter <span style=" ">&#40;</span> img, id <span style=" ">&#41;</span> <span style="color: #ffee00">; применяем фильтр</span><br />
&nbsp; &nbsp; &nbsp; width = <span style="color: #aaffff; font-weight: bold;">ImageWidth</span> <span style=" ">&#40;</span> img <span style=" ">&#41;</span><br />
&nbsp; &nbsp; &nbsp; height = <span style="color: #aaffff; font-weight: bold;">ImageHeight</span> <span style=" ">&#40;</span> img <span style=" ">&#41;</span><br />
&nbsp; &nbsp; &nbsp; buffer = <span style="color: #aaffff; font-weight: bold;">ImageBuffer</span> <span style=" ">&#40;</span> img <span style=" ">&#41;</span><br />
&nbsp; &nbsp; &nbsp; PrepareMatrixRGB <span style=" ">&#40;</span> img <span style=" ">&#41;</span> <span style="color: #ffee00">; считываем картинку в массивы покомпонентно ( r, g, b )</span><br />
&nbsp; &nbsp; &nbsp; <span style="color: #aaffff; font-weight: bold;">For</span> k=<span style="color: #33ffdd;">1</span> <span style="color: #aaffff; font-weight: bold;">To</span> Width<span style="color: #33ffdd;">-2</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aaffff; font-weight: bold;">For</span> j=<span style="color: #33ffdd;">1</span> <span style="color: #aaffff; font-weight: bold;">To</span> Height<span style="color: #33ffdd;">-2</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #ffee00">; инициализируем компоненты нового цвета</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; r = Filter_D <span style=" ">&#40;</span> id <span style=" ">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; g = Filter_D <span style=" ">&#40;</span> id <span style=" ">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; b = Filter_D <span style=" ">&#40;</span> id <span style=" ">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #ffee00">; чтобы не пересчитывать по несколько раз величины (k-1) и (j-1)</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #ffee00">; создаем дополнительные переменные</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; xx=k<span style="color: #33ffdd;">-1</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; yy=j<span style="color: #33ffdd;">-1</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #ffee00">; непосредственно применяем фильтр</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aaffff; font-weight: bold;">For</span> x = <span style="color: #33ffdd;">0</span> <span style="color: #aaffff; font-weight: bold;">To</span> <span style="color: #33ffdd;">2</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aaffff; font-weight: bold;">For</span> y = <span style="color: #33ffdd;">0</span> <span style="color: #aaffff; font-weight: bold;">To</span> <span style="color: #33ffdd;">2</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; r = r + Filter_matrixR<span style=" ">&#40;</span>xx+x, yy+y<span style=" ">&#41;</span>*Filter_core<span style=" ">&#40;</span>id, x, y<span style=" ">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; g = g + Filter_matrixG<span style=" ">&#40;</span>xx+x, yy+y<span style=" ">&#41;</span>*Filter_core<span style=" ">&#40;</span>id, x, y<span style=" ">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; b = b + Filter_matrixB<span style=" ">&#40;</span>xx+x, yy+y<span style=" ">&#41;</span>*Filter_core<span style=" ">&#40;</span>id, x, y<span style=" ">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aaffff; font-weight: bold;">Next</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aaffff; font-weight: bold;">Next</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #ffee00">; переписываем цвет пикселя</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aaffff; font-weight: bold;">WritePixelFast</span> k, j, RGB<span style=" ">&#40;</span>r, g, b<span style=" ">&#41;</span>, buffer<br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aaffff; font-weight: bold;">Next</span><br />
&nbsp; &nbsp; &nbsp; <span style="color: #aaffff; font-weight: bold;">Next</span><br />
&nbsp; &nbsp; &nbsp; <span style="color: #aaffff; font-weight: bold;">UnlockBuffer</span> buffer<br />
&nbsp; &nbsp; &nbsp; CorrectDefect <span style=" ">&#40;</span> img <span style=" ">&#41;</span> <span style="color: #ffee00">; убираем &quot;рамку&quot;</span><br />
<span style="color: #aaffff; font-weight: bold;">End Function</span><br />
<br />
<span style="color: #aaffff; font-weight: bold;">Function</span> RGB<span style=" ">&#40;</span>r,g,b<span style=" ">&#41;</span><br />
&nbsp; &nbsp; &nbsp;&nbsp; &nbsp;<span style="color: #aaffff; font-weight: bold;">If</span> r&lt;<span style="color: #33ffdd;">0</span> &nbsp;r=<span style="color: #33ffdd;">0</span><br />
&nbsp; &nbsp; &nbsp; <span style="color: #aaffff; font-weight: bold;">If</span> r&gt;<span style="color: #33ffdd;">255</span> &nbsp;r=<span style="color: #33ffdd;">255</span><br />
&nbsp; &nbsp; &nbsp; <span style="color: #aaffff; font-weight: bold;">If</span> g&lt;<span style="color: #33ffdd;">0</span> &nbsp;g=<span style="color: #33ffdd;">0</span><br />
&nbsp; &nbsp; &nbsp; <span style="color: #aaffff; font-weight: bold;">If</span> g&gt;<span style="color: #33ffdd;">255</span> &nbsp;g=<span style="color: #33ffdd;">255</span><br />
&nbsp; &nbsp; &nbsp; <span style="color: #aaffff; font-weight: bold;">If</span> b&lt;<span style="color: #33ffdd;">0</span> &nbsp;b=<span style="color: #33ffdd;">0</span><br />
&nbsp; &nbsp; &nbsp; <span style="color: #aaffff; font-weight: bold;">If</span> b&gt;<span style="color: #33ffdd;">255</span> &nbsp;b=<span style="color: #33ffdd;">255</span><br />
&nbsp; &nbsp; &nbsp; <span style="color: #aaffff; font-weight: bold;">Return</span> <span style=" ">&#40;</span>r <span style="color: #aaffff; font-weight: bold;">Shl</span> <span style="color: #33ffdd;">16</span><span style=" ">&#41;</span> <span style="color: #aaffff; font-weight: bold;">Or</span> <span style=" ">&#40;</span>g <span style="color: #aaffff; font-weight: bold;">Shl</span> <span style="color: #33ffdd;">8</span><span style=" ">&#41;</span> <span style="color: #aaffff; font-weight: bold;">Or</span> b &nbsp;<span style="color: #aaffff; font-weight: bold;">Or</span> <span style=" ">&#40;</span><span style="color: #33ffdd;">255</span> <span style="color: #aaffff; font-weight: bold;">Shl</span> <span style="color: #33ffdd;">24</span><span style=" ">&#41;</span><br />
<span style="color: #aaffff; font-weight: bold;">End Function</span><br />
<br />
<span style="color: #aaffff; font-weight: bold;">Function</span> GetR<span style=" ">&#40;</span>val<span style=" ">&#41;</span><br />
&nbsp; &nbsp; &nbsp; <span style="color: #aaffff; font-weight: bold;">Return</span> <span style=" ">&#40;</span>val <span style="color: #aaffff; font-weight: bold;">Shr</span> <span style="color: #33ffdd;">16</span><span style=" ">&#41;</span> <span style="color: #aaffff; font-weight: bold;">And</span> <span style=" ">&#40;</span>$000000FF<span style=" ">&#41;</span><br />
<span style="color: #aaffff; font-weight: bold;">End Function</span><br />
<br />
<span style="color: #aaffff; font-weight: bold;">Function</span> GetG<span style=" ">&#40;</span>val<span style=" ">&#41;</span><br />
&nbsp; &nbsp; &nbsp; <span style="color: #aaffff; font-weight: bold;">Return</span> <span style=" ">&#40;</span>val <span style="color: #aaffff; font-weight: bold;">Shr</span> <span style="color: #33ffdd;">8</span><span style=" ">&#41;</span> <span style="color: #aaffff; font-weight: bold;">And</span> <span style=" ">&#40;</span>$000000FF<span style=" ">&#41;</span><br />
<span style="color: #aaffff; font-weight: bold;">End Function</span><br />
<br />
<span style="color: #aaffff; font-weight: bold;">Function</span> GetB<span style=" ">&#40;</span>val<span style=" ">&#41;</span><br />
&nbsp; &nbsp; &nbsp; <span style="color: #aaffff; font-weight: bold;">Return</span> <span style=" ">&#40;</span>val <span style="color: #aaffff; font-weight: bold;">And</span> $000000FF<span style=" ">&#41;</span><br />
<span style="color: #aaffff; font-weight: bold;">End Function</span><br />
<br />
<span style="color: #aaffff; font-weight: bold;">Function</span> PrepareMatrixRGB <span style=" ">&#40;</span> img <span style=" ">&#41;</span> <span style="color: #ffee00">; считывает картинку в матрицы покомпонентно ( r, g, b )</span><br />
&nbsp; &nbsp; &nbsp; width = <span style="color: #aaffff; font-weight: bold;">ImageWidth</span> <span style=" ">&#40;</span> img <span style=" ">&#41;</span><br />
&nbsp; &nbsp; &nbsp; height = <span style="color: #aaffff; font-weight: bold;">ImageHeight</span> <span style=" ">&#40;</span> img <span style=" ">&#41;</span><br />
&nbsp; &nbsp; &nbsp; <span style="color: #aaffff; font-weight: bold;">Dim</span> Filter_matrixR<span style=" ">&#40;</span> width, height <span style=" ">&#41;</span><br />
&nbsp; &nbsp; &nbsp; <span style="color: #aaffff; font-weight: bold;">Dim</span> Filter_matrixG<span style=" ">&#40;</span> width, height <span style=" ">&#41;</span><br />
&nbsp; &nbsp; &nbsp; <span style="color: #aaffff; font-weight: bold;">Dim</span> Filter_matrixB<span style=" ">&#40;</span> width, height <span style=" ">&#41;</span><br />
&nbsp; &nbsp; &nbsp; <span style="color: #aaffff; font-weight: bold;">LockBuffer</span> <span style="color: #aaffff; font-weight: bold;">ImageBuffer</span><span style=" ">&#40;</span>img<span style=" ">&#41;</span><br />
&nbsp; &nbsp; &nbsp; <span style="color: #aaffff; font-weight: bold;">For</span> k=<span style="color: #33ffdd;">0</span> <span style="color: #aaffff; font-weight: bold;">To</span> width<span style="color: #33ffdd;">-1</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aaffff; font-weight: bold;">For</span> j=<span style="color: #33ffdd;">0</span> <span style="color: #aaffff; font-weight: bold;">To</span> Height<span style="color: #33ffdd;">-1</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; clr=<span style="color: #aaffff; font-weight: bold;">ReadPixelFast</span><span style=" ">&#40;</span>k, j, <span style="color: #aaffff; font-weight: bold;">ImageBuffer</span><span style=" ">&#40;</span>img<span style=" ">&#41;</span><span style=" ">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Filter_matrixR<span style=" ">&#40;</span>k, j<span style=" ">&#41;</span>=GetR<span style=" ">&#40;</span>clr<span style=" ">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Filter_matrixG<span style=" ">&#40;</span>k, j<span style=" ">&#41;</span>=GetG<span style=" ">&#40;</span>clr<span style=" ">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Filter_matrixB<span style=" ">&#40;</span>k, j<span style=" ">&#41;</span>=GetB<span style=" ">&#40;</span>clr<span style=" ">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aaffff; font-weight: bold;">Next</span><br />
&nbsp; &nbsp; &nbsp; <span style="color: #aaffff; font-weight: bold;">Next</span><br />
<span style="color: #aaffff; font-weight: bold;">End Function</span><br />
<br />
<span style="color: #aaffff; font-weight: bold;">Function</span> CorrectDefect <span style=" ">&#40;</span> img <span style=" ">&#41;</span> <span style="color: #ffee00">; корректирует изображение ( убирает &quot;рамку&quot; )...</span><br />
&nbsp; &nbsp; &nbsp; <span style="color: #ffee00">; ...&quot;рамка&quot; возникает вследствие того, что мы не обрабатывем крайние пиксели.</span><br />
&nbsp; &nbsp; &nbsp; buffer = <span style="color: #aaffff; font-weight: bold;">ImageBuffer</span> <span style=" ">&#40;</span> img <span style=" ">&#41;</span><br />
&nbsp; &nbsp; &nbsp; <span style="color: #aaffff; font-weight: bold;">LockBuffer</span> <span style=" ">&#40;</span> buffer <span style=" ">&#41;</span><br />
&nbsp; &nbsp; &nbsp; height = <span style="color: #aaffff; font-weight: bold;">ImageHeight</span> <span style=" ">&#40;</span> img <span style=" ">&#41;</span><br />
&nbsp; &nbsp; &nbsp; width = <span style="color: #aaffff; font-weight: bold;">ImageWidth</span> <span style=" ">&#40;</span> img <span style=" ">&#41;</span><br />
&nbsp; &nbsp; &nbsp; <span style="color: #aaffff; font-weight: bold;">For</span> k = <span style="color: #33ffdd;">0</span> <span style="color: #aaffff; font-weight: bold;">To</span> width<span style="color: #33ffdd;">-1</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aaffff; font-weight: bold;">WritePixelFast</span> k, <span style="color: #33ffdd;">0</span>, <span style="color: #aaffff; font-weight: bold;">ReadPixelFast</span> <span style=" ">&#40;</span> k, <span style="color: #33ffdd;">1</span>, buffer <span style=" ">&#41;</span>, buffer<br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aaffff; font-weight: bold;">WritePixelFast</span> k, height<span style="color: #33ffdd;">-1</span>, <span style="color: #aaffff; font-weight: bold;">ReadPixelFast</span> <span style=" ">&#40;</span> k, height<span style="color: #33ffdd;">-2</span>, buffer <span style=" ">&#41;</span>, buffer<br />
&nbsp; &nbsp; &nbsp; <span style="color: #aaffff; font-weight: bold;">Next</span><br />
&nbsp; &nbsp; &nbsp; <span style="color: #aaffff; font-weight: bold;">For</span> k = <span style="color: #33ffdd;">0</span> <span style="color: #aaffff; font-weight: bold;">To</span> height<span style="color: #33ffdd;">-1</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aaffff; font-weight: bold;">WritePixelFast</span> <span style="color: #33ffdd;">0</span>, k, <span style="color: #aaffff; font-weight: bold;">ReadPixelFast</span> <span style=" ">&#40;</span> <span style="color: #33ffdd;">1</span>, k, buffer <span style=" ">&#41;</span>, buffer<br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aaffff; font-weight: bold;">WritePixelFast</span> width<span style="color: #33ffdd;">-1</span>, k, <span style="color: #aaffff; font-weight: bold;">ReadPixelFast</span> <span style=" ">&#40;</span> width<span style="color: #33ffdd;">-2</span>, k, buffer <span style=" ">&#41;</span>, buffer<br />
&nbsp; &nbsp; &nbsp; <span style="color: #aaffff; font-weight: bold;">Next</span><br />
&nbsp; &nbsp; &nbsp; <span style="color: #aaffff; font-weight: bold;">UnlockBuffer</span> <span style=" ">&#40;</span> buffer <span style=" ">&#41;</span><br />
<span style="color: #aaffff; font-weight: bold;">End Function</span><br />
<br />
<span style="color: #ffee00">;==============================================================================</span><br />
<span style="color: #ffee00">;=================== ТЕСТОВАЯ ПРОГА ===========================================</span><br />
<span style="color: #ffee00">;==============================================================================</span><br />
<span style="color: #ffee00">;=========================== Инициализация</span><br />
<span style="color: #aaffff; font-weight: bold;">Graphics</span> <span style="color: #33ffdd;">640</span>, <span style="color: #33ffdd;">480</span>, <span style="color: #33ffdd;">16</span>, <span style="color: #33ffdd;">2</span><br />
<span style="color: #aaffff; font-weight: bold;">SetFont</span> <span style="color: #aaffff; font-weight: bold;">LoadFont</span> <span style=" ">&#40;</span> <span style="color: #00ff66;">&quot;arial cyr&quot;</span>, <span style="color: #33ffdd;">30</span>, <span style="color: #33ffdd;">1</span> <span style=" ">&#41;</span><br />
<br />
<span style="color: #aaffff; font-weight: bold;">ClsColor</span> <span style="color: #33ffdd;">150</span>, <span style="color: #33ffdd;">150</span>, <span style="color: #33ffdd;">150</span><br />
<span style="color: #aaffff; font-weight: bold;">Cls</span><br />
<br />
<span style="color: #ffee00">;=========================== Создание шаблонов и примеров</span><br />
template = <span style="color: #aaffff; font-weight: bold;">CreateImage</span> <span style=" ">&#40;</span> <span style="color: #33ffdd;">300</span>, <span style="color: #33ffdd;">40</span> <span style=" ">&#41;</span><br />
&nbsp; &nbsp; &nbsp; <span style="color: #aaffff; font-weight: bold;">SetBuffer</span> <span style="color: #aaffff; font-weight: bold;">ImageBuffer</span> <span style=" ">&#40;</span> template <span style=" ">&#41;</span><br />
&nbsp; &nbsp; &nbsp; <span style="color: #aaffff; font-weight: bold;">ClsColor</span> <span style="color: #33ffdd;">50</span>, <span style="color: #33ffdd;">50</span>, <span style="color: #33ffdd;">50</span><br />
&nbsp; &nbsp; &nbsp; <span style="color: #aaffff; font-weight: bold;">Cls</span><br />
&nbsp; &nbsp; &nbsp; <span style="color: #aaffff; font-weight: bold;">Color</span> <span style="color: #33ffdd;">255</span>, <span style="color: #33ffdd;">255</span>, <span style="color: #33ffdd;">255</span><br />
&nbsp; &nbsp; &nbsp; <span style="color: #aaffff; font-weight: bold;">Text</span> <span style="color: #33ffdd;">150</span>, <span style="color: #33ffdd;">20</span>, <span style="color: #00ff66;">&quot;Filters &nbsp;Example&quot;</span>, <span style="color: #33ffdd;">1</span>, <span style="color: #33ffdd;">1</span><br />
<span style="color: #aaffff; font-weight: bold;">SetBuffer</span> <span style="color: #aaffff; font-weight: bold;">BackBuffer</span> <span style=" ">&#40;</span> <span style=" ">&#41;</span><br />
<br />
<span style="color: #aaffff; font-weight: bold;">DrawBlock</span> template, <span style="color: #33ffdd;">10</span>, <span style="color: #33ffdd;">10</span><br />
<span style="color: #aaffff; font-weight: bold;">Flip</span> <span style=" ">&#40;</span> <span style=" ">&#41;</span><br />
<br />
<span style="color: #ffee00">;=========================== Создание фильтров</span><br />
emboss = CreateFilter <span style=" ">&#40;</span> <span style="color: #33ffdd;">128</span>, <span style="color: #33ffdd;">-1</span>, <span style="color: #33ffdd;">0</span>, <span style="color: #33ffdd;">0</span>, <span style="color: #33ffdd;">0</span>, <span style="color: #33ffdd;">1</span>, <span style="color: #33ffdd;">0</span>, <span style="color: #33ffdd;">0</span>, <span style="color: #33ffdd;">0</span>, <span style="color: #33ffdd;">0</span> <span style=" ">&#41;</span> <span style="color: #ffee00">; создаем фильтр &quot;барельеф&quot;</span><br />
blur = CreateFilter <span style=" ">&#40;</span> <span style="color: #33ffdd;">0</span>, <span style="color: #33ffdd;">0</span>, .<span style="color: #33ffdd;">2</span>, <span style="color: #33ffdd;">0</span>, .<span style="color: #33ffdd;">2</span>, .<span style="color: #33ffdd;">2</span>, .<span style="color: #33ffdd;">2</span>, <span style="color: #33ffdd;">0</span>, .<span style="color: #33ffdd;">2</span>, <span style="color: #33ffdd;">0</span> <span style=" ">&#41;</span> <span style="color: #ffee00">; создаем фильтр &quot;сглаживание&quot;</span><br />
contur = CreateFilter <span style=" ">&#40;</span> <span style="color: #33ffdd;">0</span>, <span style="color: #33ffdd;">0</span>, <span style="color: #33ffdd;">1</span>, <span style="color: #33ffdd;">0</span>, <span style="color: #33ffdd;">1</span>, <span style="color: #33ffdd;">-4</span>, <span style="color: #33ffdd;">1</span>, <span style="color: #33ffdd;">0</span>, <span style="color: #33ffdd;">1</span>, <span style="color: #33ffdd;">0</span> <span style=" ">&#41;</span> <span style="color: #ffee00">; создаем фильтр &quot;оконтуривание&quot;</span><br />
<br />
<span style="color: #ffee00">;=========================== Применение фильтров</span><br />
img1 = <span style="color: #aaffff; font-weight: bold;">CopyImage</span> <span style=" ">&#40;</span> template <span style=" ">&#41;</span><br />
ApplyFilter <span style=" ">&#40;</span> img1, blur <span style=" ">&#41;</span> <span style="color: #ffee00">; сглаживаем</span><br />
ApplyFilter <span style=" ">&#40;</span> img1, blur <span style=" ">&#41;</span> <span style="color: #ffee00">; сглаживаем</span><br />
ApplyFilter <span style=" ">&#40;</span> img1, emboss <span style=" ">&#41;</span> <span style="color: #ffee00">; выдавливаем</span><br />
<span style="color: #aaffff; font-weight: bold;">DrawBlock</span> img1, <span style="color: #33ffdd;">10</span>, <span style="color: #33ffdd;">60</span><br />
<span style="color: #aaffff; font-weight: bold;">Flip</span> <span style=" ">&#40;</span> <span style=" ">&#41;</span><br />
<br />
img2 = <span style="color: #aaffff; font-weight: bold;">CopyImage</span> <span style=" ">&#40;</span> template <span style=" ">&#41;</span><br />
ApplyFilter <span style=" ">&#40;</span> img2, contur <span style=" ">&#41;</span> <span style="color: #ffee00">; оконтуриваем</span><br />
ApplyFilter <span style=" ">&#40;</span> img2, blur <span style=" ">&#41;</span> <span style="color: #ffee00">; сглаживаем</span><br />
ApplyFilter <span style=" ">&#40;</span> img2, emboss <span style=" ">&#41;</span> <span style="color: #ffee00">; вдавливаем</span><br />
<span style="color: #aaffff; font-weight: bold;">DrawBlock</span> img2, <span style="color: #33ffdd;">10</span>, <span style="color: #33ffdd;">110</span><br />
<span style="color: #aaffff; font-weight: bold;">Flip</span> <span style=" ">&#40;</span> <span style=" ">&#41;</span><br />
<br />
img3 = <span style="color: #aaffff; font-weight: bold;">CopyImage</span> <span style=" ">&#40;</span> template <span style=" ">&#41;</span><br />
ApplyFilter <span style=" ">&#40;</span> img3, emboss <span style=" ">&#41;</span> <span style="color: #ffee00">; вдавливаем</span><br />
ApplyFilter <span style=" ">&#40;</span> img3, blur <span style=" ">&#41;</span> <span style="color: #ffee00">; сглаживаем</span><br />
ApplyFilter <span style=" ">&#40;</span> img3, blur <span style=" ">&#41;</span> <span style="color: #ffee00">; сглаживаем</span><br />
ApplyFilter <span style=" ">&#40;</span> img3, blur <span style=" ">&#41;</span> <span style="color: #ffee00">; сглаживаем</span><br />
<span style="color: #aaffff; font-weight: bold;">DrawBlock</span> img3, <span style="color: #33ffdd;">10</span>, <span style="color: #33ffdd;">160</span><br />
<br />
<span style="color: #aaffff; font-weight: bold;">Text</span> <span style="color: #33ffdd;">10</span>, <span style="color: #33ffdd;">210</span>, <span style="color: #00ff66;">&quot;Press any key...&quot;</span><br />
<span style="color: #aaffff; font-weight: bold;">Flip</span> <span style=" ">&#40;</span> <span style=" ">&#41;</span><br />
<br />
<span style="color: #aaffff; font-weight: bold;">FlushKeys</span> <span style=" ">&#40;</span><span style=" ">&#41;</span><br />
<span style="color: #aaffff; font-weight: bold;">WaitKey</span> <span style=" ">&#40;</span> <span style=" ">&#41;</span><br />
</p>
<span style="color: #aaffff; font-weight: bold;">End</span></div>
<div align="right"><a href="http://blitzetcetera.org/images/5/58/VirtualPainter-Filters.bb" class="internal" title="VirtualPainter-Filters.bb">скачать исходный код</a></div>
<hr />
<p>Автор: Хван И. Ю. (selin@onego.ru)
</p><!-- 
Pre-expand include size: 6971 bytes
Post-expand include size: 210 bytes
Template argument size: 32 bytes
Maximum: 2097152 bytes
-->

<!-- Saved in parser cache with key db1:pcache:idhash:621-0!1!0!!ru!2 and timestamp 20071112105938 -->
<div class="printfooter">
Получено с <a href="w7dh-dh6.html">http://blitzetcetera.org/index.php/%D0%92%D0%B8%D1%80%D1%82%D1%83%D0%B0%D0%BB%D1%8C%D0%BD%D1%8B%D0%B9_%D1%85%D1%83%D0%B4%D0%BE%D0%B6%D0%BD%D0%B8%D0%BA:_%D0%BB%D0%B8%D0%BD%D0%B5%D0%B9%D0%BD%D1%8B%D0%B5_%28%D0%BC%D0%B0%D1%82%D1%80%D0%B8%D1%87%D0%BD%D1%8B%D0%B5%29_%D1%84%D0%B8%D0%BB%D1%8C%D1%82%D1%80%D1%8B</a></div>
			<!-- end content -->			<div class="visualClear"></div>				</td>				<td class="rightside">				</td>			</tr>		</table>		</div>	</div>		</div>	
		<script type="text/javascript">if (window.runOnloadHook) runOnloadHook();</script>
</div></body>
<!-- Mirrored from localhost/index.php/%D0%92%D0%B8%D1%80%D1%82%D1%83%D0%B0%D0%BB%D1%8C%D0%BD%D1%8B%D0%B9_%D1%85%D1%83%D0%B4%D0%BE%D0%B6%D0%BD%D0%B8%D0%BA:_%D0%BB%D0%B8%D0%BD%D0%B5%D0%B9%D0%BD%D1%8B%D0%B5_(%D0%BC%D0%B0%D1%82%D1%80%D0%B8%D1%87%D0%BD%D1%8B%D0%B5)_%D1%84%D0%B8%D0%BB%D1%8C%D1%82%D1%80%D1%8B by HTTrack Website Copier/3.x [XR&CO'2007], Mon, 12 Nov 2007 11:20:50 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8"><!-- /Added by HTTrack -->
</html>